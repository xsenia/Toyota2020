<style>
    .visual-content .icon-remove {
    color: #fff;
    position: absolute;
    top: 24px;
    right: 24px;
    font-size: 2.4rem;
    display: none;
    text-shadow: 0 1px 3px rgba(0,0,0,.75)
}

.visual-content video {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 0;
    width: 0;
    background-color: rgba(0,0,0,.85);
    -webkit-transition-property: width height bottom;
    transition-property: width height bottom
}

.visual-content .content li {
    cursor: pointer;
    height: 200px;
    background-size: cover;
    -webkit-transition-property: all;
    transition-property: all
}

.visual-content .content li:nth-child(n+4) {
    max-height: 0;
    opacity: 0
}

.visual-content .content li .video-container {
    width: calc(100% + 15px * 2);
    height: 100%;
    overflow: hidden;
    margin-left: -15px
}

.visual-content .content li.active video {
    width: 100vw;
    height: 50vh;
    bottom: 50vh
}

.visual-content .content.active li.active {
    position: fixed;
    top: 0;
    height: 100vh;
    z-index: 1055
}

.visual-content .content.active li.active .icon-remove {
    display: block
}

.visual-content .content.active li.active .frame {
    background-color: rgba(0,0,0,.85);
    height: 50vh;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100vw;
    top: 50%
}

.visual-content .content.active li.active .frame h2 {
    font-size: 24px;
    line-height: 30px;
    color: #fff;
    height: 60px
}

.visual-content .content.active li.active .frame p {
    display: block;
    opacity: 1;
    filter: alpha(opacity=100);
    text-align: left
}

.visual-content .content li,.visual-content .frame,.visual-content .frame p,.visual-content .frame span,.visual-content video {
    -webkit-transition-duration: .35s;
    transition-duration: .35s;
    -webkit-transition-timing-function: cubic-bezier(.785,.135,.15,.86);
    transition-timing-function: cubic-bezier(.785,.135,.15,.86)
}

.visual-content .frame {
    height: 68px;
    padding: 10px 0;
    background-color: #fff;
    position: absolute;
    bottom: 0;
    display: table;
    width: calc(100% - 99px);
    -webkit-transition-property: all;
    transition-property: all
}

.visual-content .frame .description,.visual-content .frame .position {
    padding: 0 15px
}

.visual-content .frame .description p,.visual-content .frame .position p {
    font-family: "T1 Body Font Light","T1 Body Font",Arial,Helvetica,sans-serif
}

.module-360 .btn-toggle-spin.active,.visual-content .frame h2,.visual-content .frame span {
    font-family: "T1 Body Font Bold",Arial,Helvetica,sans-serif
}

.visual-content .frame .position {
    padding-right: 1px
}

.visual-content .frame span {
    font-size: 32px;
    line-height: 30px;
    color: #989a9d;
    -webkit-transition-property: color font-size;
    transition-property: color font-size
}

.visual-content .frame h2 {
    display: table-cell;
    vertical-align: middle;
    overflow: hidden;
    font-size: 18px;
    line-height: 24px;
    height: 48px;
    color: #202020;
    -webkit-transition-property: opacity;
    transition-property: opacity;
    text-align: left
}

.visual-content.more .btn-more,.visual-content.pro .content li.active.is-video::after,.visual-content:not(.more) .btn-less {
    display: none
}

.visual-content .frame p {
    display: none;
    color: #fff;
    opacity: 0;
    filter: alpha(opacity=0);
    font-size: 17px;
    line-height: 30px
}

.visual-content footer {
    padding-top: 30px
}

.visual-content.more .content li:nth-child(n+4) {
    max-height: 410px;
    opacity: 1
}

.visual-content.more .content li:nth-child(n+4).active {
    max-height: none
}

.visual-content.pro .content {
    position: relative
}

.visual-content.pro .content li.active {
    overflow: hidden;
    position: fixed
}

.visual-content.pro .content li.active::after {
    content: "";
    background: url(/images/pro/image-overlay.svg) bottom/100% no-repeat;
    position: absolute;
    width: 40%;
    padding-bottom: 40%;
    right: 0;
    pointer-events: none;
    max-height: 323px;
    max-width: 323px;
    bottom: 50%;
    z-index: -1;
    animation-name: fadeIn;
    animation-duration: .35s;
    animation-timing-function: cubic-bezier(.785,.135,.15,.86)
}

@media screen and (max-width: 767px) and (orientation:portrait) {
    .visual-content .content.active li.active {
        background-size:auto 51%;
        background-repeat: no-repeat
    }

    .visual-content .content.active li.active .frame {
        background-color: #000
    }
}

@media screen and (min-width: 768px) {
    .visual-content .content li {
        height:410px
    }

    .visual-content .frame {
        display: -webkit-flex;
        display: flex;
        height: 100px;
        padding: 20px 8px;
        left: 24px;
        bottom: 0;
        width: calc(100% - 270px)
    }

    .visual-content .frame h2 {
        display: block;
        font-size: 22px;
        line-height: 28px;
        height: 64px
    }
}

@media screen and (min-width: 992px) {

    .visual-content .section-title {
        padding:0
    }

    .visual-content .section-title p {
        text-align: center
    }

    .visual-content .container-fluid {
        position: relative
    }

    .visual-content .t1-arrow-control {
        position: absolute;
        top: 50%;
        -moz-transform: translateY(-50%);
        -o-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        z-index: 1
    }

    .visual-content .t1-arrow-control.prev {
        left: 67px
    }

    .visual-content .t1-arrow-control.next {
        right: 67px
    }

    .visual-content .iscroller {
        overflow: hidden;
        white-space: nowrap;
        margin-left: -15px;
        margin-right: -15px
    }

    .visual-content .iscroller .content {
        height: 410px;
        white-space: normal;
        width: 200vw;
        margin: 0
    }

    .visual-content .iscroller .content li {
        width: calc(100vw / 3);
        display: inline-block
    }

    .visual-content .iscroller .content.active li::before {
        display: none;
    }

    .visual-content .iscroller .content.active li:not(.active) {
        width: 10vw
    }

    .visual-content .iscroller .content.active li.active.col-md-4 {
        width: 80vw
    }

    .visual-content .iscroller .content.active li.active.col-md-6 {
        width: 90vw
    }

    .visual-content .iscroller .content.active li.active.col-md-12 {
        width: 100vw
    }

    .visual-content.ie .iscroller .content li {
        width: 33vw
    }

    .visual-content .content {
        overflow: hidden
    }

    .visual-content .content li {
        height: 410px!important;
        opacity: 1!important;
        max-height: none!important
    }

    .visual-content .content.active li.active {
        position: relative;
        z-index: 0;
        overflow: hidden
    }

    .visual-content .content.active li.active.col-md-4 {
        width: 80%
    }

    .visual-content .content.active li.active.col-md-6 {
        width: 90%
    }

    .visual-content .content.active li.active.col-md-12 {
        width: 100%
    }

    .visual-content .content.active li.active .frame {
        width: 460px;
        height: 332px;
        left: 150px;
        top: auto
    }

    .visual-content .content.active li.active video {
        position: relative;
        bottom: 0;
        left: -15px;
        width: calc(100% + 30px);
        height: 100%
    }

    .visual-content .content .frame {
        bottom: -27px;
        left: 30px;
        padding: 16px 0;
        width: calc(100% - 60px)
    }

    .visual-content .content.active li:not(.active) {
        width: 10%
    }

    .visual-content .content.active li:not(.active) .frame {
        height: 103px;
        background-color: transparent;
        left: 0;
        bottom: 0;
        width: 100%;
        text-align: center;
        display: block
    }

    .visual-content .content.active li:not(.active) .frame span {
        font-size: 67px;
        line-height: 30px;
        color: #fff;
        text-align: center;
        float: none
    }

    .visual-content .content.active li:not(.active) .frame h2 {
        opacity: 0;
        filter: alpha(opacity=0)
    }

    .visual-content.pro .content li.active::after {
        bottom: 0
    }
}

.data-comparison .panel-collapse,.module-360.spin-view-active .overflowable-row,.module-360.visible-box:not(.in-box) .overflowable-row {
    opacity: 0
}

.visual-content-carousel .content li.active .position .icon {
    color: #fff
}

.visual-content-carousel .frame .position .icon {
    color: #e50000;
    font-size: 30px
}

@media screen and (min-width: 992px) {
    .visual-content .content.active li:not(.active) .frame .icon {
        font-size:50px;
        color: #fff
    }
}

.t1-carousel-container .t1-arrow-control {
    position: absolute;
    top: 50%;
    -moz-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    transform: translateY(-50%)
}

.t1-carousel-container .slick-initialized .t1-slide,.t1-carousel-container .t1-slide.initialSlide {
    display: block
}

.t1-carousel-container .slick-arrow {
    position: absolute;
    top: 50%;
    -moz-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    transform: translateY(-50%)
}

.t1-carousel-container.left-align-slick .slick-track {
    margin-left: 0;
    margin-right: 0
}
</style>

<section id="visual-content-carousel0" class="visual-content visual-content-carousel lazy-loader scroll-track" data-lazyload-bkpt-dependent="true" data-bt-eventclass="componentevent" data-bt-category="component" data-bt-componentname="visual-content" data-bt-scroll="">

    <!-- grade-explore/intro-section-with-cta.nj : begin -->
    <div class="container">
        <header class="section-title">
            <div class="row">
                <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2">
                    <h2>Ключевые преимущества <nobr>Toyota Corolla</nobr></h2>



                </div>
            </div>
        </header>
    </div>
    <!-- grade-explore/intro-section-with-cta.nj : end -->



    <div class="container-fluid">
        <a class="t1-arrow-control prev preventDefault hidden-xs hidden-sm hidden" href="#"></a>
        <div class="iscroller">
            <!-- car-explore/visual-content-items.nj : begin -->
            <ul class="row content active" style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px); width: 167vw;">

                <li class="col-xs-12 col-md-4 lazy-bkpt-item src-loaded" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla-ksp-1_tcm-3020-1823301.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla-ksp-1_tcm-3020-1823301.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla-ksp-1_tcm-3020-1823301.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-1_tcm-3020-1823301.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-1_tcm-3020-1823301.jpg&quot;);" data-bt-value="Превосходная управляемость">

                    <span class="icon icon-remove hidden-md hidden-lg"></span>
                    <div class="frame">
                        <span class="hidden-xs position">


                            01

                        </span>
                        <div class="description">
                            <h2>Превосходная управляемость</h2>
                            <p>Благодаря новой глобальной модульной архитектуре TNGA, Toyota Corolla получила увеличенную жесткость кузова, сниженный центр тяжести, что обеспечивает повышенную маневренность и&nbsp;наилучшую обзорность.</p>
                        </div>
                    </div>
                </li>

                <li class="col-xs-12 col-md-4 lazy-bkpt-item src-loaded active" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla-ksp-2_tcm-3020-1823302.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla-ksp-2_tcm-3020-1823302.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla-ksp-2_tcm-3020-1823302.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-2_tcm-3020-1823302.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-2_tcm-3020-1823302.jpg&quot;);" data-bt-value="Премиальный экстерьер">

                    <span class="icon icon-remove hidden-md hidden-lg"></span>
                    <div class="frame">
                        <span class="hidden-xs position">


                            02

                        </span>
                        <div class="description">
                            <h2>Премиальный экстерьер</h2>
                            <p>Массивные передние и&nbsp;задние крылья, плавная линия крыши, внушительная решетка радиатора, снабженная горизонтальными полосами, низкий и&nbsp;атлетичный силуэт&nbsp;— экстерьер Toyota Corolla подчеркивает статусный облик седана.</p>
                        </div>
                    </div>
                </li>

                <li class="col-xs-12 col-md-4 lazy-bkpt-item src-loaded " data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla-ksp-int_tcm-3020-1823303.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla-ksp-int_tcm-3020-1823303.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla-ksp-int_tcm-3020-1823303.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-int_tcm-3020-1823303.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-int_tcm-3020-1823303.jpg&quot;);" data-bt-value="Уникальное оснащение">

                    <span class="icon icon-remove hidden-md hidden-lg"></span>
                    <div class="frame">
                        <span class="hidden-xs position">


                            03

                        </span>
                        <div class="description">
                            <h2>Уникальное оснащение</h2>
                            <p>Среди основных элементов современного технологического оснащения Toyota Corolla можно выделить новую мультимедийную систему с&nbsp;дисплеем 8&nbsp;дюймов, 10-дюймовый цветной проекционный дисплей на&nbsp;лобовое стекло и&nbsp;беспроводную зарядку для смартфона.</p>
                        </div>
                    </div>
                </li>

                <li class="col-xs-12 col-md-4 lazy-bkpt-item src-loaded" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla-ksp-4_tcm-3020-1838071.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla-ksp-4_tcm-3020-1838071.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla-ksp-4_tcm-3020-1838071.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-4_tcm-3020-1838071.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-4_tcm-3020-1838071.jpg&quot;);" data-bt-value="Максимальный комфорт">

                    <span class="icon icon-remove hidden-md hidden-lg"></span>
                    <div class="frame">
                        <span class="hidden-xs position">


                            04

                        </span>
                        <div class="description">
                            <h2>Максимальный комфорт</h2>
                            <p>2-зонный климат-контроль с&nbsp;функцией интеллектуального управления S-Flow и&nbsp;низкий уровень шума делают Toyota Corolla превосходным городским седаном, который обеспечивает максимальный комфорт при каждой поездке.</p>
                        </div>
                    </div>
                </li>

                <li class="col-xs-12 col-md-4 lazy-bkpt-item src-loaded" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla-ksp-5_tcm-3020-1838072.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla-ksp-5_tcm-3020-1838072.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla-ksp-5_tcm-3020-1838072.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-5_tcm-3020-1838072.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla-ksp-5_tcm-3020-1838072.jpg&quot;);" data-bt-value="Современный интерьер">

                    <span class="icon icon-remove hidden-md hidden-lg"></span>
                    <div class="frame">
                        <span class="hidden-xs position">


                            05

                        </span>
                        <div class="description">
                            <h2>Современный интерьер</h2>
                            <p>Интерьер Toyota Corolla&nbsp;— современный, без лишних деталей, с&nbsp;премиальным качеством исполнения. Улучшенная эргономика, новое рулевое колесо, высококачественные материалы отделки и&nbsp;кожаная комбинированная обивка сидений подчеркивают «бизнес» статус седана.</p>
                        </div>
                    </div>
                </li>

            </ul>
            <!-- car-explore/visual-content-items.nj : end -->
        </div>
        <a class="t1-arrow-control next preventDefault hidden-xs hidden-sm" href="#"></a>
    </div>
    <footer class="container-fluid hidden-md hidden-lg">
        <div class="row">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-12">
                <button class="btn btn-simple btn-more btn-toggle-more" role="button">Показать больше</button>
                <button class="btn btn-simple btn-less btn-toggle-more" role="button">Скрыть</button>
            </div>
        </div>
    </footer>

</section>


<section id="visual-content-carousel1" class="section spacing-bottom-0 visual-content visual-content-carousel lazy-loader scroll-track" data-lazyload-bkpt-dependent="true" data-bt-eventclass="componentevent" data-bt-category="component" data-bt-componentname="visual-content" data-bt-scroll="">
        
            <!-- grade-explore/intro-section-with-cta.nj : begin -->
    <div class="container">
        <header class="section-title">
            <div class="row">
                <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2">
                    <h2>Технологии комфорта <nobr>Toyota Corolla</nobr></h2>
                    
                    
                        
</div>
            </div>
        </header>
    </div>
    <!-- grade-explore/intro-section-with-cta.nj : end -->

        
        
            <div class="container-fluid">
                <!-- car-explore/visual-content-items.nj : begin -->
<ul class="row content active">
    
            <li class="col-xs-12 col-md-6 lazy-bkpt-item src-loaded active" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla_winter_tcm-3020-1825606.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla_winter_tcm-3020-1825606.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla_winter_tcm-3020-1825606.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla_winter_tcm-3020-1825606.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla_winter_tcm-3020-1825606.jpg&quot;);" data-bt-value="Зимний пакет">
                
                <span class="icon icon-remove hidden-md hidden-lg"></span>
                <div class="frame">
                    <span class="hidden-xs position">
                        
                        
                            <span class="icon icon-snowflake"></span>
                        
                    </span>
                    <div class="description">
                        <h2>Зимний пакет</h2>
                        <p>Россия славится суровыми зимами. Поэтому мы предусмотрели всё, чтобы комфорт окружал вас, пока за окном бушует снежная буря. Зимний пакет* не позволит морозам вносить правки в ваши планы на день.</p>
                    </div>
                </div>
            </li>
        
            <li class="col-xs-12 col-md-6 lazy-bkpt-item src-loaded" data-lazyload-xs="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/768x432/ruru/corolla_tss_tcm-3020-1825607.jpg" data-lazyload-sm="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/992x558/ruru/corolla_tss_tcm-3020-1825607.jpg" data-lazyload-md="//d1k2b30k3u7bnq.cloudfront.net/resize/tridion/960x540/ruru/corolla_tss_tcm-3020-1825607.jpg" data-lazyload-lg="//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla_tss_tcm-3020-1825607.jpg" style="background-image: url(&quot;//s3-eu-west-1.amazonaws.com/tme-toyotaone-prev/toyotaone/ruru/corolla_tss_tcm-3020-1825607.jpg&quot;);" data-bt-value="Toyota Safety Sense">
                
                <span class="icon icon-remove hidden-md hidden-lg"></span>
                <div class="frame">
                    <span class="hidden-xs position">
                        
                        
                            <span class="icon icon-car"></span>
                        
                    </span>
                    <div class="description">
                        <h2>Toyota Safety Sense</h2>
                        <p>Инновационные технологии Toyota Safety Sense 2.0 обеспечивают высочайший уровень безопасности вашего движения. Интеллектуальные системы активной и пассивной безопасности* предупредят вас, если ситуация будет выходить из-под вашего контроля.</p>
                    </div>
                </div>
            </li>
        
</ul>
<!-- car-explore/visual-content-items.nj : end -->
            </div>
        
    </section>



<script>
    function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
function _classCallCheck(a, b) {
    if (!(a instanceof b))
        throw new TypeError("Cannot call a class as a function")
}
function _possibleConstructorReturn(a, b) {
    if (!a)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !b || "object" != typeof b && "function" != typeof b ? a : b
}
function _inherits(a, b) {
    if ("function" != typeof b && null !== b)
        throw new TypeError("Super expression must either be null or a function, not " + typeof b);
    a.prototype = Object.create(b && b.prototype, {
        constructor: {
            value: a,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }),
    b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b)
}
var T1 = T1 || {};
T1.settings || (T1.settings = {}),
T1.labels || (T1.labels = {}),
window.require && !require.s.contexts._.defined["T1-site-dependencies"] && window.$ && window._ && window.postal ? (define("T1-site-dependencies", [], function() {
    return {
        $: window.$,
        _: window._,
        postal: window.postal
    }
}),
define("lodash", [], function() {
    return window._
}),
define("postal", [], function() {
    return window.postal
})) : require.config({
    paths: {
        "T1-site-dependencies": function() {
            var a = []
              , b = "/scripts/vendor-require-amd"
              , c = null;
            try {
                if (document.currentScript)
                    c = document.currentScript;
                else {
                    var d = document.getElementsByTagName("script");
                    d.length && (c = d[d.length - 1])
                }
                a.push("//" + c.src.replace(/^(\s)*(https?:)?\/\/|[\/\?].*/g, "") + b)
            } catch (e) {}
            return a.push("//" + location.host + b),
            a.push("//www.toyota-europe.com" + b),
            a
        }()
    }
}),
T1.constants = function() {
    "use strict";
    var a = "//www.toyota-europe.com/scripts/T1-injection-secondaryNav"
      , b = "//www.toyota-europe.com/scripts/postalPostMessage";
    return {
        ON_DOC_CLICK: "document.click",
        ON_KEY_PRESS: "key.press",
        ON_WIN_RESIZE: "window.resize",
        ON_ORIENTATION_CHANGE: "orientation.change",
        ON_BREAKPOINT_CHANGE: "window.breakpoint.change",
        GET_BREAKING_POINT: "returnBreakPoint",
        ON_WIN_UNLOAD: "window.unload",
        KEY_DOWN: "keydown",
        GLOBAL_SCROLL: "window.scroll",
        GLOBAL_SWIPE: "window.swipe",
        GLOBAL_T1LOADED: "t1.loaded",
        GLOBAL_T1LOADED_QUERY: "t1.loaded.query",
        SORT_PROMOTIONS: "promotions.sort",
        TRANSITION_END_NAMES: "transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",
        JS_VIDEOJS: ["/node_modules/video.js/dist/video.min", "/external.scripts/video.min", "//www.toyota-europe.com/external.scripts/video.min"],
        JS_POSTAL: ["//cdnjs.cloudflare.com/ajax/libs/postal.js/0.12.3/postal.min", "//www.toyota-europe.com/external.scripts/postal.min", "/external.scripts/postal.min"],
        JS_LODASH: ["//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min", "//www.toyota-europe.com/external.scripts/lodash.min", "/external.scripts/lodash.min"],
        JS_POSTAL_POSTMESSAGE: ["/scripts/postalPostMessage", b],
        JS_POSTAL_POSTMESSAGE_NON_T1_SERVER: [b],
        JS_REACT: ["//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.min"],
        CSS_T1SPIN: "//tme-webcomponents-dev.s3.amazonaws.com/T1-360-Spin/css/360spin.min.css",
        BOOTSTRAP_COLLAPSE_HIDE: "hide.bs.collapse",
        BOOTSTRAP_COLLAPSE_HIDDEN: "hidden.bs.collapse",
        BOOTSTRAP_COLLAPSE_SHOW: "show.bs.collapse",
        BOOTSTRAP_COLLAPSE_SHOWN: "shown.bs.collapse",
        T1_BOOTSTRAP_COLLAPSE_SHOW: "t1.bs.collapse.show",
        JS_INJECT_SECONDARYNAV: ["/scripts/T1-injection-secondaryNav", a],
        JS_INJECT_SECONDARYNAV_NON_T1_SERVER: [a],
        CLASS_ACTIVE: "active",
        CLASS_CARCHAPTER: "car-chapter",
        CLASS_ERROR: "error",
        CLASS_ERROR_FORM: "error-form",
        CLASS_HAS_PURCHASED_CAR: "has-purchased-car",
        CLASS_GRMN_ORDERED: "grmn-ordered",
        CLASS_GRMN_SUPRA_ORDERED: "grmn-supra-ordered",
        CLASS_HIDDEN: "hidden",
        CLASS_NOSCROLL: "body-fixed",
        CLASS_HIDE_CONTENT: "hide-content",
        CLASS_WIFIBOX_ENABLED: "wifibox-enabled",
        URI_MINI_CARCONFIG_DATA: "/api/cardb/minicarconfig/",
        URI_FINANCE_MATRIX: "/api/finance/matrix/",
        URL_MINI_CARCONFIG_IMG: "vehicle/[MODEL]/[GRADE]/[SIZE]/[VERSION]exterior-32_[COLOUR].png",
        URL_TOKEN_MINI_CARCONFIG_IMG: "product-token/[TOKEN]/vehicle/[GRADE]/[SIZE]/[VERSION]exterior-32_[COLOUR].png",
        URL_GOOGLE_MAPS_API_DEV: "//maps.googleapis.com/maps/api/js?key={API_KEY}&sensor=false&v=3.34",
        URL_GOOGLE_MAPS_API: "//maps.googleapis.com/maps/api/js?client={CLIENT_ID}&sensor=false&v=3.34",
        URL_GOOGLE_STATIC_MAPS_API: "//maps.google.com/maps/api/staticmap?client={CLIENT_ID}&signature={SIGNATURE}",
        URL_GOOGLE_STATIC_MAPS_API_DEV: "//maps.google.com/maps/api/staticmap?key={API_KEY}",
        URL_GOOGLE_RECAPTCHA: "https://www.google.com/recaptcha/api.js?render=explicit",
        URL_FACEBOOK_APPID: "//www.facebook.com/dialog/feed?[OPTIONS]",
        URL_FACEBOOK: "https://www.facebook.com",
        URL_FORM_PAGE: "/forms/forms.json",
        URL_SUBMIT_FORM_CONTACT: "/api/feedback/contact",
        URL_SUBMIT_FORM_CONTACT_DEALER: "/api/feedback/contact",
        URL_SUBMIT_FORM_CHR_CONTACT: "/api/feedback/contact",
        URL_SUBMIT_SEND_PDF: "/api/mail/send",
        URL_SUBMIT_FORM_BROCHURE: "/api/feedback/brochure",
        URL_SUBMIT_FORM_TESTDRIVE: "/api/feedback/testdrive",
        URL_SUBMIT_FORM_MY_TOYOTA_LOGIN: "/api/user/login",
        URL_SUBMIT_FORM_MY_TOYOTA_SEARCH_CAR: "/config",
        URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR: "/api/user/carconfig",
        URL_SUBMIT_FORM_MY_TOYOTA_SAVE_DEALER: "/api/user/save",
        URL_SUBMIT_FORM_MY_TOYOTA_REGISTER: "/api/user/create",
        URL_SUBMIT_FORM_MY_TOYOTA_PASSWORD: "/api/user/reset",
        URL_SUBMIT_FORM_MY_TOYOTA_RESET_PASSWORD: "/api/user/reset-password",
        URL_MY_TOYOTA_DELETE_CAR: "/api/user/carconfig",
        URL_MY_TOYOTA_DELETE_DEALER: "/api/user/save",
        URL_MY_TOYOTA_CONFIG: "/config/toyota",
        URL_DEALERS_PAGE: "/dealer/",
        URL_DEALERS: "/api/dealer/",
        URL_DEALERS_ALL: "/api/dealers/all",
        URL_DEALERS_NEAR: "/api/dealer/nearest/",
        URL_DEALERS_DRIVE: "/api/dealer/drive/",
        URL_DEALERS_NAME: "/api/dealer/find/name/",
        URL_DEALERS_ID: "/api/dealer/find/id/",
        URL_DEALERS_REGIONS: "/api/dealer/regions",
        URL_DEALERS_CITIES: "/api/dealer/cities",
        URL_DEALERS_LOCAL: "/api/dealers/local/",
        URL_DEALERS_REGIONAL: "/api/dealers/regional/",
        URL_DEALERS_ZIP: "/api/dealer/zip/",
        URL_CAR_CONFIG_OVERLAYER: "/publish/CARCONFIG_LOAD/",
        URL_CAR_CONFIG_MINI: "/api/fragment/mini-carconfig",
        URL_CAR_CONFIG_GET_MODEL_BY_TYCODE: "/api/carconfig/code/",
        URL_RECALL_STATUS: "/api/car/recallstatus/",
        URL_DNA_STATUS: "/api/car/dnastatus/",
        URL_PDF_WORKER_PROCESS: "/api/pdf",
        URL_CCIS_PROXY: "/api/ccis/",
        URL_NODE_MODULES: "/node_modules/",
        URL_CUSTOMER_PORTAL_DASHBOARD: "/apps/customerportal",
        URL_USER_DATA: "/api/user",
        SSO_USER_HEADER: "X-TME-User",
        SSO_VERIFY_EMAIL: "user.email.verify",
        SSO_TERMS_OF_USE: "user.terms.of.use",
        SSO_RESET_PWD: "user.pwd.reset",
        SSO_SOCIAL_LOGIN: "user.social.login",
        SSO_RENDER: "sso.render",
        SSO_LOGOUT_DONE: "t1.sso.logout.done",
        SSO_LOGIN_DONE: "t1.sso.login.done",
        SSO_SAML: "com.toyota.tme.saml",
        ANIMATION_SPEED_FADE: 666,
        ANIMATION_SPEED_SCROLL: 666,
        ANIMATION_SPEED_FORMV2: 500,
        ANIMATION_SPEED_DROPDOWN: 400,
        ANIMATION_SPEED_CSS: 350,
        BREAKPOINTS: {
            MOBILE: "xs",
            TABLET_PORTRAIT: "sm",
            TABLET_LANDSCAPE: "md",
            DESKTOP: "lg",
            DESKTOP_WIDE: "xl"
        },
        BREAKPOINTS_MODE: {
            DESKTOP: "desktop",
            TABLET: "tablet",
            MOBILE: "mobile"
        },
        SCREEN_XTRASMALL: 480,
        SCREEN_SMALL: 768,
        SCREEN_MEDIUM: 992,
        SCREEN_LARGE: 1200,
        PAGEOVERLAYER_TOOLBARWIDTH: 73,
        CAR_IMG_SIZE_160: "width/160/height/80",
        CAR_IMG_SIZE_555: "width/555/height/259",
        HASH_ADD: "hash.add",
        HASH_REMOVE: "hash.remove",
        HASH_CHANGE: "hash.change",
        HASH_CHANGED: "hash.changed",
        HASH_REPLACE: "hash.replace",
        HASH_REWRITE: "hash.rewrite",
        MODE_SWITCH_MOBILE: "mobile.switch",
        MODE_SWITCH_DESKTOP: "desktop.switch",
        MODE_INIT_MOBILE: "mobile.init",
        MODE_INIT_DESKTOP: "desktop.init",
        MODE_INIT_XS: "mode.init.xs",
        MODE_INIT_SM: "mode.init.sm",
        MODE_INIT_MD: "mode.init.md",
        MODE_INIT_LG: "mode.init.lg",
        MODE_SWITCH_XS: "mode.switch.xs",
        MODE_SWITCH_SM: "mode.switch.sm",
        MODE_SWITCH_MD: "mode.switch.md",
        MODE_SWITCH_LG: "mode.switch.lg",
        MOBILE_OPEN: "mobile.open",
        LAZY_LOAD: "nodes.lazyload",
        LAZY_LOAD_FOCUSIMAGE: "focusimage.lazyload",
        LAZY_LOAD_COMPLETE: "complete.lazyload",
        OVERFLOWABLE_ROW_CREATED: "overflowable.row.created",
        OVERFLOWABLE_ROW_SWIPE_ENABLED: "overflowable.row.swipe.enabled",
        OVERFLOWABLE_ROW_SWIPE_DISABLED: "overflowable.row.swipe.disabled",
        OVERFLOWABLE_ROW_OVERFLOWING_CHECK: "overflowable.row.overflowing.check",
        OVERFLOWABLE_ROW_CENTER_ACTIVE: "overflowable.row.center.active",
        FOCUSIMAGE_MOBILE_LOAD: "focusimage.mobile.load",
        STATS_CATEGORY_PAGE: "page",
        STATS_CATEGORY_MODEL: "model",
        STATS_CATEGORY_EVENT: "event",
        STATS_CATEGORY_COMPONENT: "component",
        STATS_ACTION_SCROLL: "scroll",
        STATS_ACTION_COLLAPSE: "collapse",
        STATS_ACTION_EXPAND: "expand",
        STATS_ACTION_CLICK: "click",
        STATS_TRACK_SECTIONSCROLL: "sectionScroll",
        STATS_TRACK: "onTrack",
        STATS_TRACK_CAROUSEL: "onTrackCarousel",
        STATS_USER_UPDATE: "onUserUpdate",
        STATS_BASE_UPDATE: "onBaseUpdate",
        STATS_TRACK_CLOSE_OVERLAYER: "overlayerBackClick",
        STATS_TRACK_OTHERFEATURES_VIEWALL: "onTrackOtherFeaturesViewAll",
        STATS_SUFFIX_CONTAINER: "stats.suffix.add",
        STATS_BASE_REFRESH: "stats.datalayer.extend",
        FORM_VALIDATION_RULE_SELECT: "select",
        FORM_VALIDATION_RULE_LENGTH: "length",
        FORM_VALIDATION_RULE_NUMBER: "number",
        FORM_VALIDATION_RULE_EMAIL: "email",
        FORM_VALIDATION_RULE_MULTI_EMAIL: "multipleEmails",
        FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER: "postcodeHasDealer",
        FORM_VALIDATION_RULE_PHONE: "phone",
        FORM_VALIDATION_RULE_PARITY: "parity",
        FORM_VALIDATION_RULE_REGEXP: "regexp",
        FORM_VALIDATION_RULE_CHECKBOX: "checkbox",
        CTA_TYPES: {
            DOWNLOAD: "download",
            FINANCE: "finance",
            LOAD: "load",
            PRINT: "print",
            SAVE: "save",
            SEND: "send",
            TESTDRIVE: "testdrive",
            DEALERFINDER: "dealerfinder",
            CUSTOM: "custom",
            MAILCONFIG: "mailconfig",
            DOWNLOADPASSBOOK: "downloadpassbook",
            EBROCHURE_PERSONALIZED: "ebrochure-personalized"
        },
        CARCONFIG_CODE: "configCode",
        CARCONFIG_DEFAULT_NAME: "My Configured Car",
        CARCONFIG_PERSONAL_CODE: "personalCode",
        CARCONFIG_STEPS: {
            MODEL: "models",
            BODY: "bodyType",
            ENGINE: "engine",
            TRANSMISSION: "transmission",
            WHEELDRIVE: "wheelDrives",
            GRADE: "grades",
            COLOUR: "colours"
        },
        FORM_CROSS_DOMAIN_POST: "onFormCrossDomainPost",
        FORM_CROSS_DOMAIN_PAGE_READY: "onPageReadyCrossDomainRequest",
        TOAST_CUSTOM: "customToastEvent",
        KEYCODE_LEFT: 37,
        KEYCODE_UP: 38,
        KEYCODE_RIGHT: 39,
        KEYCODE_DOWN: 40,
        KEYCODE_ESC: 27,
        KEYCODE_ENTER: 13,
        GALLERY_ITEM_CLICK: "gallery.item.click",
        GALLERY_MOBILE_BUILD: "gallery.mobile.build",
        GALLERY_SCROLL: "gallery.scroll",
        MEDIAOVERLAYER_HIDE: "media.overlayer.hide",
        MEDIAOVERLAYER_VIDEO_CLICK: "media.overlayer.video.click",
        IFRAME_DESTROY: "iframe.destroy",
        ENABLE_FILTER_TOGGLE: "onEnableFilterToggle",
        FILTER_TOGGLE: "onFilterToggle",
        CURRENT_OFFERS_FILTER: "offers.filter",
        SITEMAP_COLLAPSED: "sitemap.collapsed",
        SITEMAP_EXPANDED: "sitemap.expanded",
        OTHER_FEATURES_CLICK: "otherfeatures.click",
        OTHER_FEATURES_SHOWALL: "otherfeatures.showall",
        VIDEO_LIBRARY_LOADED: "onVideoLibraryLoaded",
        VIDEO_STOP: "video.stop",
        VIDEO_CLICK: "video.click",
        VIDEO_CREATEPLAYER: "video.player.create",
        VIDEO_CREATEDPLAYER: "video.player.created",
        VIDEO_ADDEDPLAYER: "video.player.added",
        VIDEO_RESET: "video.reset",
        CAROUSEL_CREATE: "carousel.create",
        CAROUSEL_CREATED: "carousel.created",
        CAROUSEL_INITIALIZE: "carousel.load",
        CAROUSEL_EXPAND: "carousel.expand",
        CAROUSEL_INITIALIZE_ON_OVERLAY: "onCarouselInitializeOverlay",
        CAROUSEL_BEFORE_SLIDE: "carousel.before.slide",
        CAROUSEL_SLIDE: "carousel.slide",
        CAROUSEL_RESIZE: "carousel.resize",
        CAROUSEL_SLIDE_ADD: "carousel.injection.add",
        CAROUSEL_INJECTED_RESET: "carousel.injection.reset",
        CAROUSEL_START: "carousel.start",
        CAROUSEL_PAUSE: "carousel.pause",
        CAROUSEL_REFRESH: "carousel.refresh",
        TABLE_SORTED: "table.sorted",
        CAROUSEL_CREATERESPONSIVE: "carousel.responsive.create",
        CAROUSEL_RESPONSIVECREATED: "carousel.responsive.created",
        COOKIE_SET_EPRIVACY: "cookie.eprivacy.set",
        SLIDER_ADDCOUNTER: "slider.add.counter",
        SLIDER_UPDATECOUNTER: "slider.update.counter",
        CTA_EVENT: "cta.event.triggered",
        ACTIVECTA_MODEL_DISABLE: "activecta.model.disable",
        NAV_COLLAPSER_OPENED: "onNavCollapserOpened",
        NAV_COLLAPSER_CLOSED: "onNavCollapserClosed",
        NAV_COLLAPSER_CLOSE: "onNavCollapserClose",
        DROPDOWN_OPEN: "onDropdownOpen",
        DROPDOWN_CLOSE: "onDropdownClose",
        DROPDOWN_OPENED: "onDropdownOpened",
        DROPDOWN_CLOSED: "onDropdownClosed",
        MATERIALBOX_OPEN: "materialBox.open",
        MATERIALBOX_CLOSE: "materialBox.close",
        MATERIALBOX_REMOVE: "materialBox.remove",
        MATERIALBOX_OPENED: "materialBox.opened",
        MATERIALBOX_CLOSED: "materialBox.closed",
        MATERIALBOX_ROLLBACK_COMPLETE: "materialBox.rollback.complete",
        MATERIALBOX_SIZE_FULLSCREEN: "fullscreen",
        MATERIALBOX_ACTION_AJAX: "box-ajax",
        MATERIALBOX_RESIZE_IMAGE: "materialBox.image.resize",
        MATERIALBOX_MAINFOCUS: "materialBox.mainfocus",
        SWIPE_CONTENT_SWIPED: "swipeContent.swiped",
        OVERLAY_DROP_OPEN: "overlayDrop.open",
        OVERLAY_DROP_CLOSE: "overlayDrop.close",
        OVERLAY_DROP_OPENED: "overlayDrop.opened",
        OVERLAY_DROP_CLOSED: "overlayDrop.closed",
        OVERLAY_DROP_RESIZE: "overlayDrop.resize",
        PAGEOVERLAYER_OPEN: "overlayer.open",
        PAGEOVERLAYER_LOAD: "overlayer.loaded",
        PAGEOVERLAYER_CLOSE: "overlayer.close",
        PAGEOVERLAYER_CLOSED: "overlayer.closed",
        PAGEOVERLAYER_REOPEN_MAINCONTENT: "overlayer.openmain",
        PAGEOVERLAYER_RESIZE_IMAGE: "overlayer.image.resize",
        PAGEOVERLAYER_RESIZE: "overlayer.resize",
        PAGEOVERLAYER_DESTROY: "overlayer.destroy",
        PAGE_INITIALIZED: "page.initialized",
        PANE_LOGIN_READY: "pane.login.ready",
        SEARCH: "search.quick.show",
        FULL_SEARCH: "search.full.show",
        SEARCH_BUILT_RESULTS: "onSearchBuiltResults",
        INPUT_SEARCH_INIT: "search.input.init",
        INPUT_SEARCH_REQUEST: "search.input.request",
        INPUT_SEARCH_CHANGE: "search.input.change",
        INPUT_SEARCH_UPDATE: "search.input.update",
        INPUT_SEARCH_CLEAR: "search.input.clear",
        INPUT_DROPDOWN_POPULATE: "dropdown.populate",
        INPUT_DROPDOWN_UPDATED: "onDropdownInputUpdated",
        DATEPICKER_CHANGED: "datepicker.changed.value",
        CONFIRM_SUBSCRIPTION: "confirm-subscription",
        CONFIRM_SUBSCRIPTION_REJECT: "subscription.reject",
        CONFIRM_MSG: "msg.confirm",
        READMORE_SHOW: "readmore.show",
        READMORE_HIDE_TARGET: "readmore.target.hide",
        SPECIAL_LINK_INIT_ON_DEMAND: "specialLink.initOnDemand",
        LOADING_START: "loading.start",
        LOADING_COMPLETE: "loading.complete",
        LOADING_MESSAGE: "loading.message",
        CARSPIN_INIT: "carspin.load",
        CARSPIN_PLAY_TO: "carspin.playto",
        CARSPIN_REQUEST_ANIMATION: "carspin.request.animation",
        CARSPIN_FIT: "carspin.fit",
        CARSPIN_REBOOT: "carspin.reboot",
        CARSPIN_DESTROY: "carspin.destroy",
        SPIN360_LOAD: "init",
        BUBBLE_ACTIVATED: "active",
        WAVEBALLCHART_INIT: "chart.waveball.init",
        DOUGHNUTCHART_INIT: "chart.doughnut.init",
        EXPANDITEMSBUTTON_CLICK: "expand.click",
        COLLAPSIBLE_PANEL_EXPAND: "OnCollapsiblePanelExpand",
        COLLAPSIBLE_PANEL_EXPANDED: "OnCollapsiblePanelExpanded",
        COLLAPSIBLE_PANEL_REQUEST_EXPAND: "OnCollapsiblePanelRequestExpand",
        COLLAPSIBLE_PANEL_REQUEST_CLOSE: "OnCollapsiblePanelRequestClose",
        COLLAPSIBLE_PANEL_INIT: "OnCollapsiblePanelInit",
        COLLAPSIBLE_GROUP_INIT_STICKY_TITLES: "collapsible.group.init.sticky.titles",
        PLACEHOLDER_ROLLON: "placeholder.rollon",
        SCROLL_TRACK_ADD: "scrolltrack.elements.add",
        SCROLL_TRACK_PAUSE: "scrolltrack.elements.pause",
        SCROLL_TRACK_APPEAR: "scrolltrack.elements.appear",
        SCROLL_TRACK_REMOVE: "scrolltrack.elements.remove",
        FIGURE_LOAD: "figure.load",
        IFRAME_LOAD: "iframe.load",
        IFRAME_REQUEST: "iframeRequest",
        IFRAME_INLINE_SHOW: "iframeinline.show",
        SPOTLIGHTS_CLICK: "spotlight.click",
        NAVIGATION_PRIMARY_EXPAND: "navigationPrimaryExpand",
        NAVIGATION_PRIMARY_COLLAPSE: "nav.primary.collapse",
        NAVIGATION_UPDATE_BREADCRUMB: "nav.primary.breadcrumb.update",
        NAVIGATION_RESIZE_BREADCRUMB: "nav.primary.breadcrumb.resize",
        NAVIGATION_FORM_UPDATE: "nav.form.update",
        NAVIGATION_FORM_VALIDATE_STEP: "nav.form.validate.step",
        NAVIGATION_VISIBILITY: "nav.primary.visibility",
        ENGINE_COMPARE_CHANGE: "engine.compare.edit",
        ENGINE_COMPARE_PRINT: "engine.compare.print",
        MODEL_COMPARE_CHANGE: "model.compare.edit",
        MODEL_COMPARE_PRINT: "model.compare.print",
        MOBILE_COMPARE_CHANGE: "mobile.compare.change",
        MOBILE_COMPARE_MODELS_CHANGE: "mobile.compare.modelschange",
        COMPARE_ENGINES: "engines.compare",
        COMPARE_MODELS: "models.compare",
        COMPARE_PACKS: "packs.compare",
        COMPARE_GRADES: "com.toyota.tme.t1.compare.v2.add.car",
        REVIEW_OPENREVIEWS: "review.overlayer.viewall",
        REVIEW_GETREVFORM: "review.form.show",
        CARCONFIG_LOAD: "carconfig.load",
        CARCONFIG_END: "carconfig.end",
        CARCONFIG_SAVE_CONFIG: "carconfig.config.save",
        CARCONFIG_LOAD_CONFIG: "carconfig.config.load",
        CARCONFIG_MINI_LOAD: "carconfig.mini.load",
        CARCONFIG_MINI_INIT: "carconfig.mini.init",
        OVERLAY_READY: "carconfig.overlayer.loaded",
        CARCONFIG_RENDER: "carconfig.render",
        BUY_CAR: "carconfig.buy",
        FORM_LOAD: "form.load",
        FORM_ERROR: "form.error",
        FORM_VALIDATION_FAILED: "form.validation.failed",
        FORM_MODEL_SELECTED: "form.model.selected",
        FORM_VALIDATE_CACHED_VALUES: "form.validation.cached.validate",
        FORM_ELEMENT_VALIDATE: "form.element.validate",
        FORM_ELEMENT_VALIDATED: "form.element.validated",
        FORM_TRADE_IN_APPRAISAL_LOAD: "form.tradein.appraisal.load",
        FORM_TRADE_IN_QUOTE_LOAD: "form.tradein.quote.load",
        FORM_TRADE_IN_NAVIGATION_CHANGE: "tradein.setStep",
        TABS_LOAD: "tabs.load",
        TABS_SWITCH: "tabs.switch",
        DEALER_SAVE: "dealer.save",
        DEALER_SELECTED: "dealer.selected",
        DEALERS_SEARCH: "dealer.search",
        DEALERS_FOUND: "dealer.found",
        DEALERS_NOT_FOUND: "dealer.not.found",
        DEALER_GEOCODE_SUCCESS: "dealer.geocode.success",
        DEALERFINDER_INIT_REQUEST: "dealerfinder.request",
        DEALERFINDER_LOADED: "dealerfinder.loaded",
        DEALERFINDER_MAP_READY: "dealerfinder.map.ready",
        COLORPICKER_BEFORE_COLOR_CHANGED: "colorpicker.before.color.changed",
        COLORPICKER_COLOR_CHANGED: "colorpicker.color.changed",
        ENGINESELECTOR_ENGINE_CHANGED: "engineselector.engine.changed",
        COLORPICKER_REQUEST_COLOR_PREVIEW: "colorpicker.request.color.preview",
        BODYTYPE_CHANGED: "bodytype.changed",
        WHEELBASE_CHANGED: "wheelbase.changed",
        T1_AMD_MODULE_INITIALIZED: "t1.amd.module.initialized",
        T1_AMD_INITIALIZER_INITIALIZED: "t1.amd.initializer.initialized",
        FUNCTION_NAME_INIT_MOBILE: "initMobile",
        FUNCTION_NAME_INIT_DESKTOP: "initDesktop",
        FUNCTION_NAME_SWITCH_MOBILE: "switchMobile",
        FUNCTION_NAME_SWITCH_DESKTOP: "switchDesktop",
        FUNCTION_NAME_INIT_XS: "initXs",
        FUNCTION_NAME_INIT_SM: "initSm",
        FUNCTION_NAME_INIT_MD: "initMd",
        FUNCTION_NAME_INIT_LG: "initLg",
        FUNCTION_NAME_SWITCH_XS: "switchXs",
        FUNCTION_NAME_SWITCH_SM: "switchSm",
        FUNCTION_NAME_SWITCH_MD: "switchMd",
        FUNCTION_NAME_SWITCH_LG: "switchLg",
        MOBILE_INITIALIZATION_STATUS_NAME: "isInitializedMobile",
        DESKTOP_INITIALIZATION_STATUS_NAME: "isInitializedDesktop",
        XS_INITIALIZATION_STATUS_NAME: "isInitializedXs",
        SM_INITIALIZATION_STATUS_NAME: "isInitializedSm",
        MD_INITIALIZATION_STATUS_NAME: "isInitializedMd",
        LG_INITIALIZATION_STATUS_NAME: "isInitializedLg",
        SLIDING_NAV_TABS_SWITCH: "sliding.nav.tabs.switch",
        BEFORE_FORM_SUBMIT: "form.submit.before",
        SUBMIT_FORM_RETURN: "form.submit.return",
        VALIDATE_FORM_RETURN: "form.validation.return",
        EPRIVACY_AUTO_APPROVED: "privacy.autoapprove",
        EPRIVACY_CANCELED: "privacy.canceled",
        EPRIVACY_OPEN: "privacy.open",
        EPRIVACY_SAVED: "privacy.saved",
        EPRIVACY_LOAD_COMPONENT: "privacy.component.load",
        EPRIVACY_COOKIE_NAME: "TmeEPrivacy",
        MY_TOYOTA_MY_CARS: "mycars.open",
        MY_TOYOTA_MY_DEALERS: "mydealers.open",
        MY_TOYOTA_OWNERS_AREA: "ownersarea.open",
        MY_TOYOTA_SAVE_QUOTES: "myquotes.save",
        MY_TOYOTA_LOGIN: "login.show",
        MY_TOYOTA_LOGIN_SUCCESS: "login.success",
        MY_TOYOTA_LOGIN_FAIL: "login.fail",
        MY_TOYOTA_LOGIN_REDIRECT: "login.redirect",
        MY_TOYOTA_CANCEL_LOGIN: "login.cancel",
        MY_TOYOTA_REGISTER: "login.register.show",
        MY_TOYOTA_FORGOTTEN_PASSWORD: "login.forgottenpwd.show",
        MY_TOYOTA_RESET_PASSWORD: "login.forgottenpwd.reset.show",
        MY_TOYOTA_HASH_PASSWORD: "login.forgottenpwd.reset.hash",
        MY_TOYOTA_SAVE_CAR: "car.save",
        MY_TOYOTA_SAVED_CAR: "car.saved",
        MY_TOYOTA_STORED_CAR: "car.stored",
        MY_TOYOTA_GET_CAR: "car.get",
        MY_TOYOTA_SAVE_CAR_TRADEIN: "car.save.tradein",
        MY_TOYOTA_GET_CARS: "cars.get",
        MY_TOYOTA_GET_DEALERS: "dealers.get",
        MY_TOYOTA_DEALER_READY: "dealers.ready",
        MY_TOYOTA_SAVED_DEALER: "dealer.save",
        MY_TOYOTA_SAVE_DEALER_FAILED: "dealer.save.failed",
        MY_TOYOTA_DEALER_ALREADY_SAVED: "dealer.save.alreadysaved",
        MY_TOYOTA_DEALER_REMOVE: "dealer.remove",
        MY_TOYOTA_DEALER_REMOVED: "dealer.removed",
        MY_TOYOTA_TAB_SWITCH: "tab.switch",
        MY_TOYOTA_SEARCH_FAILED: "car.search.noresult",
        MY_TOYOTA_SEARCH_FOUND: "car.search.found",
        MY_TOYOTA_CAR_ALREADY_SAVED: "car.save.alreadysaved",
        MY_TOYOTA_SET_USER_DATA: "userdata.set",
        MY_TOYOTA_SIGNOUT: "user.signout",
        MY_TOYOTA_USERPROFILE: "user.showprofile",
        MY_TOYOTA_DATA_LOADED: "mytoyota.data.loaded",
        MY_TOYOTA_DISPLAYED_SAVED_CARS: 6,
        TCC_COMPARE: "tcc.compare",
        TCC_RENDER: "tcc.render",
        SOCIAL_SHARED: "social.shared",
        SOCIAL_SHARE_INIT: "socialShareInit",
        ACCESSORIES_FILTER_CLICKED: "accessoriesFilterClicked",
        ACCESSORIES_INTERACTION_VIEWALL: "accessories.overlayer.viewall",
        ACCESSORIES_TABBTN_CLICKED: "accessoriesTabsClicked",
        ACCESSORIES_SWITCHVIEW: "accessories.switchview",
        ACCESSORIES_VIEW: "accessories.overlayer.view",
        ACCESSORIES_DESKTOP_REINIT: "accessories.desktop.reinit",
        POSTMESSAGE_IFRAME_LOAD: "postMessageIFrameLoaded",
        FINANCE_RATES_ON: "finance.enable",
        FINANCE_RATES_OFF: "finance.disable",
        FINANCE_RATES_INIT: "finance.init",
        FINANCE_RATES_LOADED: "finance.load",
        FINANCE_RATES_COOKIE_NAME: "financeRates",
        FINANCE_EXTERNAL_POST_REQUEST: "finance.post",
        FINANCE_EXTERNAL_POST_REQUEST_MOBILE: "finance.post.mobile",
        INSURANCE_EXTERNAL_POST_REQUEST: "insurance.post",
        INSURANCE_EXTERNAL_POST_REQUEST_MOBILE: "insurance.post.mobile",
        FINANCE_CONFIG: "financeConfig",
        FINANCE_OPEN: "finance.open",
        BUDGET_CALC_OPEN: "finance.budgetcalculator.open",
        FINANCE_RATE_ERROR: "finance.error",
        GOOGLE_MAP_LOAD: "google.map.load",
        GOOGLE_MAPS_LOADED: "google.maps.loaded",
        GOOGLE_PLACE_LOAD: "google.place.load",
        GOOGLE_PLACE_ENABLE: "google.place.enable",
        GOOGLE_RECAPTCHA_LOAD: "google.recaptcha.load",
        GOOGLE_RECAPTCHA_VALID: "google.recaptcha.valid",
        GOOGLE_RECAPTCHA_EXPIRED: "google.recaptcha.expired",
        GOOGLE_PLACES_SELECT: "google.places.select",
        POPUP_MANAGER_INITIALIZED: "popup.manager.initialized",
        POPUP_MANAGER_ADD: "popup.manager.add",
        POPUP_MANAGER_SET_PERCENTAGES: "popup.manager.set.percentages",
        POPUP_MANAGER_TRIGGER_QUERY: "popup.manager.trigger.query",
        CUSTOMER_PORTAL_SHOW: "customerportal.show",
        CUSTOMER_PORTAL_HIDE: "customerportal.hide",
        E_STORE_CART_UPDATE: "estore.cart.update",
        CUSTOMER_PORTAL_PAYPAL_OPEN: "customerportal.paypal.open",
        CUSTOMER_PORTAL_PAYPAL_CALLBACK: "customerportal.paypal.callback",
        CUSTOMER_PORTAL_LS_PAYPAL: "com.toyota.tme.cp.paypal",
        CUSTOMER_PORTAL_CSS_SET: "customerportal.css.set",
        CUSTOMER_PORTAL_LOADED: "customerportal.loaded",
        CUSTOMER_PORTAL_PROFILE: "customerportal.profile.show",
        CUSTOMER_PORTAL_DASHBOARD_OPEN: "customerportal.dashboard.open",
        CUSTOMER_PORTAL_DASHBOARD_LINKS: {
            CONFIGURED_VEHICLE_LAST: "/dashboard/configuredVehicle/last"
        },
        TOGGLER_BUTTON_TEXT_UPDATED: "toggler.text.button.updated",
        WIFIBOX_RENDER: "wifibox.render",
        WIFIBOX_LS_4GDEVICEID: "com.toyota.tme.user.4gDeviceId",
        CUSTOMER_PORTAL_BRAND: "com.toyota.tme.brand",
        CUSTOMER_PORTAL_LOCALE: "com.toyota.tme.lc",
        EBOUTIQUE_OPEN: "eboutique.open",
        GENERAL_REDIRECT: "general.redirect",
        GENERAL_RELOAD: "general.reload",
        SCROLL_TO: "scroll.to",
        SCROLL_IFRAME: "scroll.iframe",
        DISABLE_BODY_SCROLL: "scroll.body.disable",
        LOADSAVE_GET: "loadsave.get",
        HEALTH_CHECK: "health.check",
        SECTION_HOMEPAGE_CHILD_PAGES: "/api/content",
        SECTION_HOMEPAGE_CHILD_NUM_BIG_OPTIONS: 4,
        SECTION_HOMEPAGE_CHILD_FILTERING_COUNT: 4,
        SECTION_HOMEPAGE_CHILD_FILTERING_COUNT_NEW_FILTER: 12,
        SECTION_HOMEPAGE_CHILD_FILTERING_PROMOS: "false",
        SECTION_HOMEPAGE_CHILD_FILTERING_REQ_TIMEOUT: 5e3,
        SECTION_HOMEPAGE_CHILD_VISIBLE_SMALL_OPTIONS: 4,
        SECTION_HOMEPAGE_CHILD_SHOW_MORE_OPTIONS: 4,
        SECTION_HOMEPAGE_CHILD_SHOW_MORE_OPTIONS_SM: 3,
        SECTION_HOMEPAGE_CHILD_SHOW_MORE_OPTIONS_XS: 2,
        SECTION_HIDE: "section.hide",
        SECTION_SHOW: "section.show",
        VIDEOPLAYER_AUTOLOOP_TIMEFRAME_MS: 3e5,
        CALCULATE_VISIBLE_AREA_OF_THE_IMAGE: "getVisibleAreaOfImage",
        COMPONENT_INJECT: "component.inject",
        COMPONENT_INJECTED: "component.injected",
        NAMESPACE_BASE: "com.toyota.tme",
        CHANNEL_CARCHAPTER: "com.toyota.tme.t1.carchapter",
        CHANNEL_CARCONFIG: "com.toyota.tme.t1.carconfig",
        CHANNEL_DEALER: "com.toyota.tme.t1.dealer",
        CHANNEL_GOOGLE: "com.toyota.tme.t1.google",
        CHANNEL_DIALOG: "com.toyota.tme.t1.dialog",
        CHANNEL_EPRIVACY: "com.toyota.tme.t1.eprivacy",
        CHANNEL_FIGURE: "com.toyota.tme.t1.figure",
        CHANNEL_FINANCE: "com.toyota.tme.t1.finance",
        CHANNEL_FORM: "com.toyota.tme.t1.form",
        CHANNEL_GLOBAL: "com.toyota.tme.t1.global",
        CHANNEL_HASH: "com.toyota.tme.t1.hash",
        CHANNEL_INJECTION: "com.toyota.tme.t1.injection",
        CHANNEL_LAZYLOAD: "com.toyota.tme.t1.lazyload",
        CHANNEL_MEDIA: "com.toyota.tme.t1.media",
        CHANNEL_MOBILE: "com.toyota.tme.t1.mobile",
        CHANNEL_MYTOYOTA: "com.toyota.tme.t1.mytoyota",
        CHANNEL_NAVIGATION: "com.toyota.tme.t1.navigation",
        CHANNEL_REVIEWS: "com.toyota.tme.t1.reviews",
        CHANNEL_SCROLLING: "com.toyota.tme.t1.scrolling",
        CHANNEL_SEARCH: "com.toyota.tme.t1.search",
        CHANNEL_SOCIAL: "com.toyota.tme.t1.social",
        CHANNEL_SPOTLIGHT: "com.toyota.tme.t1.spotlight",
        CHANNEL_STATISTICS: "com.toyota.tme.t1.statistics",
        CHANNEL_TAB: "com.toyota.tme.t1.tab",
        CHANNEL_SPIN360: "com.toyota.tme.t1.spin360",
        CHANNEL_CP: "com.toyota.tme.cp",
        CHANNEL_SITEMAP: "com.toyota.tme.cp",
        CHANNEL_COLLAPSIBLE_PANEL: "com.toyota.tme.collapsiblepanel",
        CHANNEL_PERSONALIZATION: "com.toyota.tme.t1.personalization",
        CHANNEL_TCC: "com.toyota.tme.t1.tcc",
        CHANNEL_PPM: "com.toyota.tme.postmessage",
        CHANNEL_BUBBLE: "com.toyota.tme.bubble",
        CHANNEL_WIFIBOX: "com.toyota.tme.wifibox",
        CHANNEL_GRADECOMPARE: "com.toyota.tme.t1.compare.v2.channel",
        DEFAULT_EXTERIOR_VIEW: "exterior-32.png",
        MISSING_IMAGE: "ty-missing-image.jpg",
        HD_IMAGE_DAY: "day-",
        TCCMO_SELECTOR: ".tccmo",
        TCCCC_ENGINE_GRADE_SELECTOR: ".tccccEngineGrade",
        CARCONFIG_V8_SELECTOR: "#tmxcc-v8",
        TEMPLATE_NAME_CAROUSEL_ARROWS: "t1-carousel-arrows",
        TEMPLATE_NAME_EXPLORE_OVERLAYER_GALLERY: "t1-explore-overlay-gallery",
        TEMPLATE_NAME_EXPLORE_RECENTLY_VIEWED: "t1-recently-viewed",
        GRADE_FILTERS: {
            bodyTypeNotAvailableMsg: "[The currently selected BodyType is not available with the chosen Wheelbase. If you choose to continue, the BodyType will be updated.]",
            bodyTypeAndEngineNotAvailableMsg: "[The currently selected BodyType and Engine are not available with the chosen Wheelbase. If you choose to continue, both the BodyType and the Engine will be updated.]",
            wheelBaseNotAvailableMsg: "[The currently selected WheelBase is not available with the chosen BodyType. If you choose to continue, the WheelBase will be updated.]",
            wheelBaseAndEngineNotAvailableMsg: "[The currently selected WheelBase and Engine are not available with the chosen BodyType. If you choose to continue, both the WheelBase and the Engine will be updated.]",
            engineNotAvailableMsg: "[The currently selected Engine is not available with the chosen BodyType and Wheelbase. If you choose to continue, the Engine will be updated.]",
            colourNotAvailableMsg: "[The currently selected Colour is not available with the chosen BodyType and Wheelbase. If you choose to continue, the colour will be updated.]",
            okBtnLabel: "Continue"
        }
    }
}(),
window.T1 = window.T1 || {},
T1.util = T1.util || {},
T1.util.Constants = function() {
    return {
        CLASS_ACTIVE: "active",
        CLASS_HIDDEN: "hidden",
        CLASS_NOSCROLL: "body-fixed",
        OVERLAY_DROP_OPEN: "overlayDrop.open",
        OVERLAY_DROP_CLOSE: "overlayDrop.close",
        OVERLAY_DROP_OPENED: "overlayDrop.opened",
        OVERLAY_DROP_CLOSED: "overlayDrop.closed",
        CLASS_PREVENT_DEFAULT: "preventDefault"
    }
}();
var T1 = T1 || {};
T1.amdModules = function() {
    "use strict";
    var a = {
        modules: [],
        canBeInitialized: !1,
        init: function() {
            a.canBeInitialized = !0,
            a.initAll(),
            a.breakpointSwitch.subscribeToSwitchEvents(),
            T1.channels.global.publishAsync(T1.constants.T1_AMD_INITIALIZER_INITIALIZED, {})
        },
        add: function(b) {
            if (!a.elementExists(b)) {
                var c = {
                    name: b,
                    initialized: !1
                };
                a.modules.push(c),
                a.initOne(c)
            }
        },
        elementExists: function(b) {
            for (var c = a.modules.length, d = 0; d < c; d++)
                if (a.modules[d].name === b)
                    return !0;
            return !1
        },
        initAll: function() {
            for (var b = a.modules.length, c = 0; c < b; c++)
                a.initOne(a.modules[c])
        },
        initOne: function(b) {
            if (a.canBeInitialized)
                try {
                    require([b.name], function(c) {
                        !c.moduleInitialized && c.init && (c.init(),
                        c.moduleInitialized = !0,
                        T1.channels.global.publishAsync(T1.constants.T1_AMD_MODULE_INITIALIZED, {
                            moduleName: b.name
                        })),
                        a.breakpointInit.handleModuleBkptFns(c)
                    })
                } catch (e) {
                    console.log("Error occurred while initializing " + b.name + ": " + e.message)
                }
        },
        getModules: function() {
            return a.modules
        },
        breakpointInit: {
            handleModuleBkptFns: function(b) {
                if (T1.instantiator && T1.instantiator.initializerList)
                    for (var c, d = T1.instantiator.initializerList, e = d.length, f = 0; f < e; f++)
                        c = d[f],
                        !(!b[c.initFnName] && !b[c.switchFnName]) && a.breakpointInit.handleBkptFn(b, c)
            },
            handleBkptFn: function(b, c) {
                var d = !!b[c.initFnName]
                  , e = !!b[c.switchFnName];
                a.breakpointInit.flagBkptInitFn(b, c, d),
                a.breakpointInit.triggerFirstBkptInitFn(b, c, d, e)
            },
            flagBkptInitFn: function(a, b, c) {
                c && (a[b.amdModuleInitFlag] = !1)
            },
            triggerFirstBkptInitFn: function(b, c, d, e) {
                var f = T1.instantiator.currentBreakpoint;
                a.breakpointInit.currentBkptMatchesInitializer(f, c) && (d && !b[c.amdModuleInitFlag] && (b[c.initFnName](),
                b[c.amdModuleInitFlag] = !0),
                e && b[c.switchFnName]())
            },
            currentBkptMatchesInitializer: function(a, b) {
                return a === b.breakpoint || ("mobile" === b.breakpoint && a === T1.constants.BREAKPOINTS.MOBILE || "desktop" === b.breakpoint && a !== T1.constants.BREAKPOINTS.MOBILE)
            }
        },
        breakpointSwitch: {
            subscriptions: {},
            subscribeToSwitchEvents: function() {
                if (T1.instantiator && T1.instantiator.initializerList)
                    for (var b, c = T1.instantiator.initializerList, d = c.length, e = a.breakpointSwitch.subscriptions, f = 0; f < d; f++)
                        b = c[f],
                        e[b.switchFnName] || (e[b.switchFnName] = T1.channels.mobile.subscribe(b.switchEvent, a.breakpointSwitch.switchFnHandler(b)))
            },
            switchFnHandler: function(b) {
                return function() {
                    for (var c, d = b.switchFnName, f = a.modules.length, g = 0; g < f; g++) {
                        c = a.modules[g];
                        try {
                            require([c.name], function(c) {
                                if (a.breakpointSwitch.triggerFirstBkptInitFn(c, b),
                                c[d])
                                    try {
                                        c[d]()
                                    } catch (e) {
                                        console.log("Error running " + d + " " + c.name + ": " + e.message)
                                    }
                            })
                        } catch (e) {
                            console.log("Error occurred whith " + d + " for " + c.name + ": " + e.message)
                        }
                    }
                }
            },
            triggerFirstBkptInitFn: function(a, b) {
                var c = b.initFnName
                  , d = a[c]
                  , f = b.amdModuleInitFlag
                  , g = !1 === a[f];
                if (d && g)
                    try {
                        d(),
                        a[f] = !0
                    } catch (e) {
                        console.log("Error running " + b.initFnName + " " + a.name + ": " + e.message)
                    }
            }
        }
    };
    return {
        getModules: a.getModules,
        add: a.add,
        init: a.init
    }
}(),
T1.defineInit = function() {
    "use strict";
    define.apply(this, arguments),
    arguments.length && T1.amdModules.add(arguments[0])
}
,
T1.define = function() {
    "use strict";
    define.apply(this, arguments)
}
;
var T1 = T1 || {};
T1.channels = function() {
    "use strict";
    var a = {
        createChannels: function() {
            var a = {}
              , b = ""
              , c = T1.constants;
            for (var d in c)
                "CHANNEL" === d.substr(0, 7) && (b = d.replace(/CHANNEL_/i, "").toLowerCase(),
                a[b] = postal.channel(c[d]));
            return a
        },
        publish: function(b, c) {
            a._publish(b, c, !0)
        },
        publishAsync: function(b, c) {
            a._publish(b, c, !1)
        },
        _publish: function(b, c, d) {
            var e, f;
            if ("object" == typeof b ? (e = b.topic,
            f = b.data) : (e = b,
            f = c),
            e.indexOf("!") > 0) {
                var g = e.split("!")
                  , h = g.shift();
                e = g.pop(),
                postal[d ? "publish" : "publishAsync"]({
                    channel: h,
                    topic: e,
                    data: f
                })
            } else
                for (var i = a.findChannels(e), j = 0; j < i.length; j++)
                    postal[d ? "publish" : "publishAsync"]({
                        channel: i[j],
                        topic: e,
                        data: f
                    })
        },
        findChannels: function(a) {
            var b = postal.subscriptions
              , c = [];
            for (var d in b)
                "prototype" !== d && b[d][a] && c.push(d);
            return c
        }
    };
    return $.extend(a.createChannels(), {
        publish: a.publish,
        publishAsync: a.publishAsync
    })
}
;
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.postalPostMessage = function() {
        "use strict";
        var a = {
            cpDataKey: T1.constants.NAMESPACE_BASE + ".customerPortal",
            init: function() {
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, a.resize),
                T1.channels.global.subscribe(T1.constants.GLOBAL_SCROLL, a.scroll),
                requirejs(["lodash", "postal", "postalPostMessage"], function(b, c, d) {
                    if (b && c && d) {
                        var e = a.parse(T1.settings.postmessage)
                          , f = "string" == typeof e.whitelist ? e.whitelist.split(",") : e.whitelist || []
                          , g = e.events || []
                          , h = "string" == typeof e.localStorageKeys ? e.localStorageKeys.split(",") : e.localStorageKeys || [];
                        T1.settings && T1.settings.iframeDomainWhiteList && "[object Array]" === Object.prototype.toString.call(T1.settings.iframeDomainWhiteList) && (f = f.concat(T1.settings.iframeDomainWhiteList)),
                        g.push({
                            channel: T1.constants.CHANNEL_CP,
                            topic: T1.constants.E_STORE_CART_UPDATE,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_CP,
                            topic: T1.constants.CUSTOMER_PORTAL_PAYPAL_OPEN,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_CP,
                            topic: T1.constants.CUSTOMER_PORTAL_PAYPAL_CALLBACK,
                            direction: "out"
                        }, {
                            channel: T1.constants.CHANNEL_CP,
                            topic: T1.constants.CUSTOMER_PORTAL_CSS_SET,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_STATISTICS,
                            topic: T1.constants.STATS_TRACK,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_NAVIGATION,
                            topic: T1.constants.NAVIGATION_UPDATE_BREADCRUMB,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_HASH,
                            topic: T1.constants.HASH_CHANGE,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_HASH,
                            topic: T1.constants.HASH_ADD,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_GLOBAL,
                            topic: T1.constants.GENERAL_REDIRECT,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_GLOBAL,
                            topic: T1.constants.GENERAL_RELOAD,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_DIALOG,
                            topic: T1.constants.PAGEOVERLAYER_CLOSED,
                            direction: "out"
                        }, {
                            channel: T1.constants.CHANNEL_MYTOYOTA,
                            topic: T1.constants.MY_TOYOTA_LOGIN_SUCCESS,
                            direction: "out"
                        }, {
                            channel: T1.constants.CHANNEL_SCROLLING,
                            topic: T1.constants.SCROLL_TO,
                            direction: "in"
                        }, {
                            channel: T1.constants.CHANNEL_SCROLLING,
                            topic: T1.constants.SCROLL_IFRAME,
                            direction: "in"
                        });
                        var i, j = T1.settings.cpBaseUrl || "http://mytoyota-b2c-ui-acc.s3-website-eu-west-1.amazonaws.com";
                        f.push(j),
                        h.push(a.cpDataKey, T1.constants.NAMESPACE_BASE + ".user.marketing", T1.constants.CUSTOMER_PORTAL_LS_PAYPAL, T1.constants.NAMESPACE_BASE + ".user.purchasedCars"),
                        T1.channels.sso && T1.channels.sso.config && (i = T1.channels.sso.config);
                        var k = {};
                        if (k.customerPortalEnabled = !1,
                        (T1.settings.showCustomerPortalInMenu || T1.settings.showCustomerPortalInCtaTiles || T1.settings.showCustomerPortalInMyToyota) && (k.customerPortalEnabled = !0),
                        localStorage.setItem(a.cpDataKey, JSON.stringify(k)),
                        i) {
                            var l = i.events
                              , m = i.storage;
                            h.push(m.profile, m.token, T1.constants.WIFIBOX_LS_4GDEVICEID, T1.constants.SSO_SAML, T1.constants.CUSTOMER_PORTAL_LOCALE, T1.constants.CUSTOMER_PORTAL_BRAND),
                            g.push({
                                channel: l.channel,
                                topic: l.logout,
                                direction: "in"
                            }, {
                                channel: l.channel,
                                topic: l.sts,
                                direction: "in"
                            }, {
                                channel: l.channel,
                                topic: l.logoutOk,
                                direction: "out"
                            }, {
                                channel: l.channel,
                                topic: l.loginOk,
                                direction: "out"
                            }, {
                                channel: l.channel,
                                topic: l.registerOk,
                                direction: "out"
                            })
                        }
                        d.init({
                            whitelist: f,
                            debug: !1,
                            debugHideObjects: !1,
                            localStorageKeys: h,
                            events: g
                        }),
                        d.share.setItem("parentHeight", window.innerHeight),
                        d.share.setItem("parentScrollY", window.scrollY)
                    }
                })
            },
            parse: function(a) {
                if (!a || "" === a)
                    return {};
                try {
                    return JSON.parse(a)
                } catch (e) {
                    return console.log("Error parsing the postmessage configuration " + e),
                    {}
                }
            },
            resize: function() {
                window.ppmShare && ppmShare.setItem("parentHeight", window.innerHeight)
            },
            scroll: function() {
                window.ppmShare && ppmShare.setItem("parentScrollY", window.scrollY)
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.ssl = function() {
        "use strict";
        var a = {
            _debug: !1,
            _patternHttp: /^(\s)*http:/i,
            _settingKeys: ["CCISHost", "CCISServer", "ccisPath", "cardbImageHost", "tridionImageHost", "filterImagePath", "ecoLabel", "finance"],
            init: function() {
                "https:" === window.location.protocol && (a.addAjaxPreFilter(),
                a.updateLinkSettings(a._settingKeys))
            },
            addAjaxPreFilter: function() {
                a.log("Adding HTTPS prefilter"),
                b.ajaxPrefilter(function(b) {
                    a.log("AJAX: calling " + b.url),
                    a._debug && a._patternHttp.test(b.url) && a.log("AJAX: rewrite url for SSL usage " + b.url),
                    b.url = b.url.replace(a._patternHttp, "")
                })
            },
            updateLinkSettings: function(b) {
                var c = null;
                b || (b = a._settingKeys);
                for (var d = 0; d < b.length; d++)
                    c = T1.settings[b[d]],
                    "object" == typeof c ? a.updateLinkSettingsAutomatically(T1.settings[b[d]]) : c && a._patternHttp.test(c) && (T1.settings[b[d]] = c.replace(a._patternHttp, ""))
            },
            updateLinkSettingsAutomatically: function(b) {
                for (var c in b)
                    "prototype" !== c && ("object" == typeof b[c] ? a.updateLinkSettingsAutomatically(b[c]) : a._patternHttp.test(b[c]) && (b[c] = b[c].replace(a._patternHttp, "")))
            },
            log: function(b) {
                a._debug && console.log(b)
            }
        };
        return {
            init: a.init,
            updateLinkSettings: a.updateLinkSettings
        }
    }()
}),
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.sso = function() {
        "use strict";
        var a = {
            ssoPaths: {},
            config: null,
            userDataKey: T1.constants.NAMESPACE_BASE + ".user.marketing",
            vehicleDataKey: T1.constants.NAMESPACE_BASE + ".user.purchasedCars",
            userLoggedInClass: "logged-in",
            errorId: "asfoieraemcacer",
            loginScreen: "login",
            wasClickedInsideSSO: !1,
            wasTriggeredHere: !1,
            $sso: null,
            lsDeleteValue: "",
            preventLogoutHashReset: !1,
            lastRenderParameters: {},
            customerProfile: null,
            init: function() {
                if (!T1.channels.sso)
                    return void T1.channels.mytoyota.subscribe(T1.constants.PANE_LOGIN_READY, a.showDefaultLogin);
                if (T1.channels.mytoyota.subscribe(T1.constants.PANE_LOGIN_READY, a.renderLogin),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_REGISTER, a.renderRegister),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_SET_USER_DATA, a.cacheUserData),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_LOGIN_SUCCESS, a.userLoggedIn),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_SIGNOUT, a.logout),
                T1.channels.mytoyota.subscribe(T1.constants.SSO_VERIFY_EMAIL, a.renderVerifyEmail),
                T1.channels.mytoyota.subscribe(T1.constants.SSO_RESET_PWD, a.renderResetPwd),
                T1.channels.mytoyota.subscribe(T1.constants.SSO_TERMS_OF_USE, a.renderTermsOfUse),
                T1.channels.mytoyota.subscribe(T1.constants.SSO_RENDER, a.render),
                T1.channels.sso.config) {
                    b("#logout-desktop,#logout").click(a.btnLogoutClick),
                    a.config = T1.channels.sso.config,
                    a.ssoPaths.serviceHost = T1.settings.ssoServiceUrl,
                    a.ssoPaths.serviceName = "/isTokenValid";
                    var c = a.config.events;
                    T1.channels.sso.subscribe("sso.message.show", a.showConfirmationMsg),
                    T1.channels.sso.subscribe(c.loginOk, a.getUserData),
                    T1.channels.sso.subscribe(c.logoutOk, a.userLoggedOut),
                    T1.channels.sso.subscribe("sso.*.render.ok", a.renderedSSO),
                    T1.channels.sso.subscribe("sso.*.fail", a.showFormError),
                    a.config.isSsoV2 || a.listenForSamlToken(),
                    a.listenForSocialLogin();
                    try {
                        localStorage[a.userDataKey] && "undefined" !== localStorage[a.userDataKey] ? T1.settings.ssoServiceUrl ? (T1.sso.userTokenVerificationState = b.Deferred(),
                        b.ajax({
                            type: "POST",
                            contentType: "application/json",
                            url: a.ssoPaths.serviceHost.replace(/\/(\s)*$/, "") + a.ssoPaths.serviceName,
                            data: JSON.stringify({
                                token: localStorage["com.toyota.tme.user.token"]
                            })
                        }).done(function(b) {
                            if (!b)
                                return void a.loginSuccess();
                            try {
                                var c = !0;
                                c = b.valid,
                                c ? a.loginSuccess() : (a.preventLogoutHashReset = !0,
                                T1.channels.mytoyota.publishAsync(T1.constants.MY_TOYOTA_SIGNOUT))
                            } catch (e) {
                                a.loginSuccess(),
                                console.log("Failed parsing data " + b + "\n" + e)
                            }
                        }).fail(a.loginSuccess)) : a.loginSuccess() : b("body").hasClass("private") && a.restrictLimitedAccess()
                    } catch (e) {
                        console.log("Failed to load user data! " + e)
                    }
                    T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function(b) {
                        "user-profile" === b.identifier && setTimeout(a.userUpdated, 500)
                    })
                }
            },
            btnLogoutClick: function(a) {
                a.preventDefault(),
                T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_SIGNOUT)
            },
            render: function(b, c) {
                var d = c && c.topic !== T1.constants.SSO_RENDER;
                b.contractKey && a.openSSOOverlayer(a.renderSSO, [b.contractKey, b], !1, d)
            },
            listenForSamlToken: function() {
                var b = a.config.events
                  , c = postal.subscribe({
                    channel: b.channel,
                    topic: b.sts,
                    callback: function(d, e) {
                        c.unsubscribe();
                        var f = postal.subscriptions[b.channel] ? postal.subscriptions[b.channel][b.sts] : null;
                        f && 1 === f.length && a.loadSsoPackage().done(function(a) {
                            postal.publish(e)
                        })
                    }
                })
            },
            listenForSocialLogin: function() {
                a.config.events;
                T1.channels.sso.subscribe(T1.constants.SSO_SOCIAL_LOGIN, function() {
                    require.config({
                        paths: {
                            cdc: ["/scripts/crossDomainCommunication.min", "/scripts/crossDomainCommunication"]
                        }
                    }),
                    b.when(a.loadCrossDomainCommunicationPackage(), a.loadSsoPackage()).done(function(b) {
                        b.getCookie("iPlanetDirectoryPro", "www.toyota-europe.com", function(b) {
                            a.openSSOOverlayer(a.renderSSO, ["socialLogin", {
                                token: b
                            }], !1)
                        })
                    })
                })
            },
            restrictLimitedAccess: function() {
                var a = b(".maincontent")
                  , c = T1.labels.restrictedAccess || "<b>content restriction</b> please login to see the content of this page";
                if (a.length && !b(".container.no-access").length) {
                    b("<div></div>").addClass("container no-access").append(b("<div></div>").addClass("alert alert-warning").html(c)).insertAfter(a)
                }
            },
            loginSuccess: function() {
                var b = {
                    user: T1.utilities.json.parse(localStorage[a.userDataKey]) || {},
                    purchasedCars: T1.utilities.json.parse(localStorage[a.vehicleDataKey]) || {},
                    isLoginOnPageLoad: !0,
                    success: !0
                };
                T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_LOGIN_SUCCESS, b),
                T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_DATA_LOADED, b),
                T1.sso.userTokenVerificationState && T1.sso.userTokenVerificationState.resolve(b)
            },
            userUpdated: function(b) {
                if (a.config)
                    try {
                        var c = a.config.storage;
                        a.setUserMenu(JSON.parse(localStorage[c.profile]))
                    } catch (e) {
                        console.log("Error while parsing userprofile: " + e)
                    }
            },
            renderVerifyEmail: function(b) {
                a.openSSOOverlayer(a.renderSSO, ["emailVerification", b], !1)
            },
            renderResetPwd: function(b) {
                a.openSSOOverlayer(a.renderSSO, ["resetPassword", b], !1)
            },
            renderTermsOfUse: function(b) {
                a.openSSOOverlayer(a.renderSSO, ["termsOfUse", b], !1)
            },
            openSSOOverlayer: function(c, d, e, f) {
                var g = T1.constants.MATERIALBOX_OPEN;
                if (e)
                    T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, "publish/pageoverlayer_open/url=" + encodeURIComponent(b("#myToyota").data("url")) + "/ajax=true/sync=true");
                else if (a.config.isSsoV2)
                    T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                        html: '<div id="sso-wrapper"></div>',
                        styleClass: "flex-layout",
                        styleClassContent: "container",
                        hashAction: "sso",
                        hash: d.hash || "/publish/my_toyota_login",
                        globalClose: !0
                    }),
                    g = T1.constants.MATERIALBOX_OPENED;
                else {
                    var f = void 0 === f || d.preventHashRemove;
                    T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                        url: decodeURIComponent(b("#myToyota").data("url")),
                        styleClass: "no-tabs",
                        preventHashRemove: f,
                        size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                        type: T1.constants.MATERIALBOX_ACTION_AJAX,
                        hashAction: !0
                    })
                }
                var h = T1.channels.dialog.subscribe(g, function() {
                    c.apply(a, d),
                    h.unsubscribe()
                })
            },
            getSsoUserData: function() {
                var b = a.config.storage
                  , c = {};
                if (b.profile && "" !== localStorage[b.profile] && b.token && "" !== localStorage[b.token])
                    try {
                        c = JSON.parse(localStorage[b.profile]),
                        c.token = localStorage[b.token]
                    } catch (e) {
                        console.log("Could not parse userdata: " + e)
                    }
                return c
            },
            loadSsoPackage: function() {
                var c = b.Deferred();
                if (a.config.isSsoV2)
                    c.resolve();
                else {
                    var d = null;
                    a.config.paths.css && "" !== a.config.paths.css && (d = "css!" + T1.settings.ssoBaseUrl.replace(/^(http(s)?:)|\/$/, "") + "/" + a.config.paths.css.replace(/^\/(?!\/)/gi, "")),
                    require(["sso", d], c.resolve)
                }
                return c
            },
            loadCrossDomainCommunicationPackage: function() {
                var a = b.Deferred();
                return require.config({
                    paths: {
                        cdc: ["/scripts/crossDomainCommunication.min", "/scripts/crossDomainCommunication"]
                    }
                }),
                require(["cdc"], function(b) {
                    b.config({
                        pluginFiles: "//www.toyota-europe.com/external.scripts/crossDomainCommunication.html"
                    }),
                    a.resolve(b)
                }),
                a
            },
            renderSSO: function(c, d) {
                "object" == typeof d && (a.lastRenderParameters = d);
                var e = a.config.events;
                a.loadSsoPackage().done(function(f) {
                    var g = b(".overlayerContent").last();
                    0 === g.length && (g = b("body")),
                    g.find("[id^=pane]").removeClass("active"),
                    g.find("#forms").removeClass("hidden-xs"),
                    a.$sso = b("#sso-wrapper"),
                    a.$sso.length <= 0 && (a.$sso = b('<div class="container tab-pane" id="sso-wrapper"><div class="row"><div id="sso-div"></div></div></div>'),
                    g.find("#forms .toyota-tabs-content").append(a.$sso)),
                    d || (d = {}),
                    d.language = T1.settings.language,
                    d.country = T1.settings.country,
                    T1.channels.sso.publish(e[c], d),
                    a.$sso.addClass("active")
                })
            },
            renderedSSO: function(b, c) {
                var d = c.topic.split(".")
                  , e = d[1];
                a.$sso.find(".actions-block").find("a, .btn").click(function(a) {
                    a.preventDefault()
                }),
                "login" === e && a.$sso.find(".btn-cancel").click(function(a) {
                    T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_LOGIN_REDIRECT, {})
                })
            },
            showDefaultLogin: function() {
                var a = b(".overlayerContent").last();
                0 === a.length && (a = b("body")),
                a.find("#pane-login").addClass("active noSSO")
            },
            renderLogin: function() {
                a.renderSSO("login")
            },
            renderRegister: function(b) {
                a.renderSSO("register")
            },
            userLoggedIn: function() {
                var c = a.userLoggedInClass;
                a.userHasOrderedGrmn() && (c += " " + T1.constants.CLASS_GRMN_ORDERED),
                a.userHasOrderedSupraGrmn() && (c += " " + T1.constants.CLASS_GRMN_SUPRA_ORDERED),
                a.userHasWifiBox() && (c += " " + T1.constants.CLASS_WIFIBOX_ENABLED),
                a.userHasPurchasedCar() && (c += " " + T1.constants.CLASS_HAS_PURCHASED_CAR),
                a.setUserMenu(),
                b("body").addClass(c),
                T1.channels.navigation.publishAsync(T1.constants.NAVIGATION_RESIZE_BREADCRUMB, {}),
                T1.channels.sso.publishAsync(T1.constants.SSO_LOGIN_DONE, {})
            },
            userHasWifiBox: function() {
                var b = a.getCustomerProfile();
                return b && "ACTIVATED" === b.hotspotActivationStatus
            },
            userHasPurchasedCar: function() {
                var b = a.getCustomerProfile();
                return b && b.extras && b.extras.hasPurchasedCars
            },
            userHasOrderedGrmn: function() {
                var b = a.getCustomerProfile();
                return b && b.extras && b.extras.grmn && 4 !== b.extras.grmn.status
            },
            userHasOrderedSupraGrmn: function() {
                var b = a.getCustomerProfile();
                return b && b.extras && b.extras.grmnSupra
            },
            getCustomerProfile: function() {
                if (a.customerProfile)
                    return a.customerProfile;
                try {
                    var b = localStorage["com.toyota.tme.user.customerProfile"];
                    return b ? a.customerProfile = JSON.parse(b) : {}
                } catch (e) {
                    return console.log("Error rendering userprofile"),
                    {}
                }
            },
            setUserMenu: function(c) {
                var d = c || a.getSsoUserData()
                  , e = d.firstName;
                e && (e = " - " + e,
                b("#profile-text-desktop, #my-toyota-profile .my-toyota-name").text(e))
            },
            showProfile: function() {
                T1.channels.hash.publish(T1.constants.HASH_CHANGE, "my-toyota/profile")
            },
            getUserData: function() {
                var c = a.getSsoUserData()
                  , d = b.safe("T1.hash.getCurrentHashParams")() || {};
                if (c && c.uuid && c.email && c.token) {
                    var f, g = void 0 === a.lastRenderParameters.autoclose || a.lastRenderParameters.autoclose, h = {
                        autoclose: g,
                        appId: b.extend(d, a.lastRenderParameters).appID || null
                    }, i = T1.settings.ssoAutoRedirectCustomerPortal && T1.settings.ssoAutoRedirectCustomerPortal.toLowerCase() || "";
                    try {
                        var j = T1.channels.sso.config.events.loginDone
                          , k = T1.channels.sso.channel;
                        f = postal.subscriptions[k][j.topic]
                    } catch (e) {
                        b.safe("T1.utilities.isEnvironment.production", !0) || console.log("T1.sso.getUserData failed: \n" + e.message)
                    }
                    "true" !== i || a.isCustomerPortalRedirectExclude() ? f && (h.noRedirect = !0) : (f && f.length && f[0].unsubscribe(),
                    h.url = "true" === Object.resolve("T1.settings.cpIsNewDashBoardEnabled") ? T1.constants.URL_CUSTOMER_PORTAL_DASHBOARD : "/tme#/my-toyota/");
                    var l = {}
                      , m = function(b, d) {
                        l[b] = d,
                        "purchasedCars" !== b || d.failed || localStorage.setItem(a.vehicleDataKey, JSON.stringify(d)),
                        l.marketing && "marketing" === b && (l.marketing.success ? (l.marketing.user && (l.marketing.user.token = c.token),
                        l.marketing.ssoData = c,
                        T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_LOGIN_SUCCESS, l.marketing),
                        T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_LOGIN_REDIRECT, h)) : console.log(d.error)),
                        l.marketing && l.purchasedCars && T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_DATA_LOADED, {
                            user: Object.resolve("marketing.user", l),
                            purchasedCars: l.purchasedCars
                        })
                    }
                      , n = {};
                    n[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: c.uuid,
                        email: c.email,
                        token: c.token
                    }),
                    b.ajax({
                        url: (T1.settings.mock ? "http://t1-dev-" + T1.settings.country + ".herokuapp.com" : "") + T1.constants.URL_USER_DATA,
                        cache: !1,
                        type: "GET",
                        headers: n
                    }).done(m.bind(this, "marketing")).fail(m.bind(this, "marketing", {
                        success: !1
                    }));
                    var o = T1.settings.cpB2cAggrHost || "//cpb2csa.toyota-europe.com/"
                      , p = T1.settings.cpVehicleItems || "api/users/{uuid}/vehicles"
                      , q = "//" + o.replace(/(^(\s)*(https?:)?\/\/)|\/(\s)*/gi, "") + "/" + p.replace(/^(\s)*\//, "");
                    T1.sso.dfrVehicleData = b.ajax({
                        url: q.replace("{uuid}", c.uuid),
                        type: "GET",
                        headers: {
                            "X-TME-TOKEN": c.token,
                            "X-TME-LC": T1.settings.language + "-" + T1.settings.country
                        }
                    }).done(m.bind(this, "purchasedCars")).fail(m.bind(this, "purchasedCars", {
                        failed: !0
                    }))
                }
            },
            isCustomerPortalRedirectExclude: function() {
                var a = (T1.settings.ssoAutoRedirectCustomerPortalExceptions || "").split(";");
                Array.isArray(a) ? a.push("/tme", "/apps/", "/tab=myPrivacySettings") : a = ["/tme", "/apps/", "/tab=myPrivacySettings"],
                a.push("CARCONFIG_SAVE_CONFIG");
                for (var b = 0; b < a.length; b++)
                    if ("" !== a[b] && location.href.toLowerCase().indexOf(a[b].toLowerCase()) > -1)
                        return !0;
                return !1
            },
            cacheUserData: function(b) {
                b || (b = {}),
                b.language = T1.settings.language,
                b.country = T1.settings.country,
                localStorage.setItem(a.userDataKey, JSON.stringify(b))
            },
            showFormError: function(c) {
                b("#" + a.errorId).remove();
                var d = T1.labels.forms.errorSubmit;
                c && c.errorMsg && (d = c.errorMsg),
                b("#sso-wrapper form div:last-child").before('<h3 id="' + a.errorId + '" class="form-group error-message">' + d + "</h3>")
            },
            logout: function() {
                a.loadSsoPackage().done(function() {
                    var b = a.config.events
                      , c = a.config.storage;
                    postal.publish({
                        channel: b.channel,
                        topic: b.logout,
                        data: {
                            token: localStorage[c.token]
                        }
                    })
                })
            },
            userLoggedOut: function() {
                var c = b("body");
                c.hasClass("private") && a.restrictLimitedAccess(),
                b("#profile-text-desktop, #my-toyota-profile .my-toyota-name").text(""),
                c.removeClass(a.userLoggedInClass),
                c.removeClass(T1.constants.CLASS_GRMN_ORDERED),
                c.removeClass(T1.constants.CLASS_GRMN_SUPRA_ORDERED),
                c.removeClass(T1.constants.CLASS_WIFIBOX_ENABLED),
                c.removeClass(T1.constants.CLASS_HAS_PURCHASED_CAR),
                localStorage.removeItem(a.userDataKey),
                localStorage.removeItem(a.vehicleDataKey),
                T1.mypage && T1.mypage.user && delete T1.mypage.user,
                T1.channels.statistics.publish(T1.constants.STATS_USER_UPDATE, {}),
                a.preventLogoutHashReset || T1.channels.hash.publishAsync(T1.constants.HASH_REMOVE, ""),
                a.preventLogoutHashReset = !1,
                T1.channels.navigation.publishAsync(T1.constants.NAVIGATION_RESIZE_BREADCRUMB, {}),
                T1.channels.sso.publishAsync(T1.constants.SSO_LOGOUT_DONE, {})
            },
            showConfirmationMsg: function(c) {
                if (0 === b("#forms.my-toyota").length)
                    c.recursion || (c.recursion = !0,
                    a.openSSOOverlayer(a.showConfirmationMsg, [c], !0));
                else {
                    var d = "myToyotaConfirmationMsg"
                      , e = c.title || "<strong>My toyota</strong>"
                      , f = c.message || "No message provided"
                      , g = b("<h2></h2>").html(e)
                      , h = b("<span></span>").addClass("intro").html(f)
                      , i = b("<header></header>").append(g).append(h)
                      , j = b("<div></div>").addClass("container tab-pane active").attr("id", d).append(i)
                      , k = c.parent || b("#forms .toyota-tabs-content");
                    b("#" + d).remove(),
                    k.find(".tab-pane").removeClass("active"),
                    k.append(j)
                }
            }
        };
        return {
            init: a.init
        }
    }()
}),
T1.contract = {
    ACCESSORIES_OVERLAYER_VIEWALL: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "ACCESSORIES_INTERACTION_VIEWALL",
        topic: T1.constants.ACCESSORIES_INTERACTION_VIEWALL,
        description: "Opens all accessories in an overlayer",
        remarks: "",
        properties: {}
    },
    ACCESSORIES_OVERLAYER_VIEW: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "ACCESSORIES_VIEW",
        topic: T1.constants.ACCESSORIES_VIEW,
        description: "Opens mobile accessories in an overlayer",
        remarks: "",
        properties: {}
    },
    ACCESSORIES_SWITCHVIEW: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "ACCESSORIES_SWITCHVIEW",
        topic: T1.constants.ACCESSORIES_SWITCHVIEW,
        description: "Switches the category panel in the accessories component",
        remarks: "",
        properties: {}
    },
    CARSPIN_LOAD: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_INIT",
        topic: T1.constants.CARSPIN_INIT,
        description: "Initializes the 360 carspint",
        remarks: "Initializes a carconfig inside a provided container. The model needs to be provided in the data-model attribute.",
        properties: {
            section: "(jQuery object) default #carsping"
        }
    },
    CARSPIN_PLAY_TO: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_PLAY_TO",
        topic: T1.constants.CARSPIN_PLAY_TO,
        description: "Ask the 360 carspin to go to a frame",
        remarks: "",
        properties: {}
    },
    CARSPIN_REQUEST_ANIMATION: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_REQUEST_ANIMATION",
        topic: T1.constants.CARSPIN_REQUEST_ANIMATION,
        description: "Ask the 360 carspin autorisation to play",
        remarks: "If animation is already ongoing then request will be rejected",
        properties: {}
    },
    CARSPIN_FIT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_FIT",
        topic: T1.constants.CARSPIN_FIT,
        description: "Ask the 360 carspin to fit parent container",
        remarks: "Spin state is preserved",
        properties: {}
    },
    CARSPIN_REBOOT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_REBOOT",
        topic: T1.constants.CARSPIN_REBOOT,
        description: "Ask the 360 carspin to rebuild itself",
        remarks: "Spin state is preserved",
        properties: {}
    },
    CARSPIN_DESTROY: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "CARSPIN_DESTROY",
        topic: T1.constants.CARSPIN_DESTROY,
        description: "Ask the 360 carspin to destroy itself",
        remarks: "",
        properties: {}
    },
    WAVEBALLCHART_INIT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "WAVEBALLCHART_INIT",
        topic: T1.constants.WAVEBALLCHART_INIT,
        description: "Initializes the waveball chart",
        remarks: "",
        properties: {
            section: "(jQuery object) default .waveBallCharts"
        }
    },
    DOUGHNUTCHART_INIT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "DOUGHNUTCHART_INIT",
        topic: T1.constants.DOUGHNUTCHART_INIT,
        description: "Initializes the doughnut chart",
        remarks: "",
        properties: {
            section: "(jQuery object) default .doughnutChart"
        }
    },
    ENGINE_COMPARE_EDIT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "ENGINE_COMPARE_CHANGE",
        topic: T1.constants.ENGINE_COMPARE_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    ENGINE_COMPARE_PRINT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "ENGINE_COMPARE_PRINT",
        topic: T1.constants.ENGINE_COMPARE_PRINT,
        description: "",
        remarks: "",
        properties: {}
    },
    MOBILE_COMPARE_CHANGE: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "MOBILE_COMPARE_CHANGE",
        topic: T1.constants.MOBILE_COMPARE_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    MODEL_COMPARE_EDIT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "MODEL_COMPARE_CHANGE",
        topic: T1.constants.MODEL_COMPARE_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    MODEL_COMPARE_PRINT: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "MODEL_COMPARE_PRINT",
        topic: T1.constants.MODEL_COMPARE_PRINT,
        description: "",
        remarks: "",
        properties: {}
    },
    MOBILE_COMPARE_MODELSCHANGE: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "MOBILE_COMPARE_MODELS_CHANGE",
        topic: T1.constants.MOBILE_COMPARE_MODELS_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    MODELS_COMPARE: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "COMPARE_MODELS",
        topic: T1.constants.COMPARE_MODELS,
        description: "",
        remarks: "",
        properties: {}
    },
    ENGINES_COMPARE: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "COMPARE_ENGINES",
        topic: T1.constants.COMPARE_ENGINES,
        description: "",
        remarks: "",
        properties: {}
    },
    PACKS_COMPARE: {
        channel: T1.constants.CHANNEL_CARCHAPTER,
        constantname: "COMPARE_PACKS",
        topic: T1.constants.COMPARE_PACKS,
        description: "",
        remarks: "",
        properties: {}
    },
    CARCONFIG_LOAD: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_LOAD",
        topic: T1.constants.CARCONFIG_LOAD,
        description: "Opens the carconfigurator (with or without a specific configuration)",
        remarks: "",
        properties: {}
    },
    CARCONFIG_END: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_END",
        topic: T1.constants.CARCONFIG_END,
        description: "Triggered on configuration completion. Autosave will be performed on this event.",
        remarks: "",
        properties: {}
    },
    CARCONFIG_CONFIG_SAVE: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_SAVE_CONFIG",
        topic: T1.constants.CARCONFIG_SAVE_CONFIG,
        description: "",
        remarks: "",
        properties: {}
    },
    CARCONFIG_CONFIG_LOAD: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_LOAD_CONFIG",
        topic: T1.constants.CARCONFIG_LOAD_CONFIG,
        description: "",
        remarks: "",
        properties: {}
    },
    CARCONFIG_MINI_LOAD: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_MINI_LOAD",
        topic: T1.constants.CARCONFIG_MINI_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    CARCONFIG_MINI_INIT: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "CARCONFIG_MINI_INIT",
        topic: T1.constants.CARCONFIG_MINI_INIT,
        description: "",
        remarks: "",
        properties: {}
    },
    CARCONFIG_OVERLAYER_LOADED: {
        channel: T1.constants.CHANNEL_CARCONFIG,
        constantname: "OVERLAY_READY",
        topic: T1.constants.OVERLAY_READY,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_SAVE: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALER_SAVE",
        topic: T1.constants.DEALER_SAVE,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_SELECTED: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALER_SELECTED",
        topic: T1.constants.DEALER_SELECTED,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALERS_SEARCH: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALERS_SEARCH",
        topic: T1.constants.DEALERS_SEARCH,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_FOUND: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALERS_FOUND",
        topic: T1.constants.DEALERS_FOUND,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_NOT_FOUND: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALER_NOT_FOUND",
        topic: T1.constants.DEALER_NOT_FOUND,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_GEOCODE_SUCCESS: {
        channel: T1.constants.CHANNEL_DEALER,
        constantname: "DEALER_GEOCODE_SUCCESS",
        topic: T1.constants.DEALER_GEOCODE_SUCCESS,
        description: "",
        remarks: "",
        properties: {}
    },
    GOOGLE_MAP_LOAD: {
        channel: T1.constants.CHANNEL_GOOGLE,
        constantname: "GOOGLE_MAP_LOAD",
        topic: T1.constants.GOOGLE_MAP_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    EXPAND_CLICK: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "EXPANDITEMSBUTTON_CLICK",
        topic: T1.constants.EXPANDITEMSBUTTON_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    OVERLAYER_OPEN: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_OPEN",
        topic: T1.constants.PAGEOVERLAYER_OPEN,
        description: "Opens a page overlayer",
        remarks: "",
        properties: {
            html: "(string|object) html code to add in the overlayer",
            video: "(object) {srcOgv: path to the ogv source, srcWebm: path to the wbm source, srcFlv: path to the flv source, srcMp4: path to the mp4 source, srcVtt: path to the subtitle, autoplay: automatically play the video, poster: path to the poster image}",
            inPage: "(boolean) opens the overlayer in the same page (with the navigation still available) & updates the breadcrumb with the pagename",
            noResize: "(boolean) prevents the automatic image sizing",
            html5id: "(String) tcm id to the html5 component",
            noScroll: "(boolean) disables scroll",
            el: "(jQuery object) clicked item that triggered this event",
            youtubeId: "(string) id of the youtube video",
            ajax: "(boolean) injects the content from parameter 'url' into the page",
            url: "(String) link to the iframe/ajax inject",
            pageName: "(String) name visible in the 'back to' bar",
            iframe: "(boolean) indicates that an iframe should be used in the overlayer",
            styleClass: "(String) extra class that can be added on the overlayer node",
            backCaption: "(String) close caption",
            backCaptionStrong: "(String) bold close caption",
            preserveContent: "(boolean) move back the html content to it's original place (only use when the data.html refers to an element in the pagecontent)",
            noFade: "(boolean) disable the fade effect after slide",
            noTransitions: "(boolean) disables transitions",
            fitImages: "(boolean) automatically fits images to the right size"
        }
    },
    OVERLAYER_LOADED: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_LOAD",
        topic: T1.constants.PAGEOVERLAYER_LOAD,
        description: "Trigges when the pageoverlayer is loaded",
        remarks: "In case of AJAX or IFAME the event will be fired when the content within the iframe is loaded (or after the ajax request is done)",
        properties: {}
    },
    OVERLAYER_CLOSE: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_CLOSE",
        topic: T1.constants.PAGEOVERLAYER_CLOSE,
        description: "Closes 1 layer of the pageoverlayers",
        remarks: "",
        properties: {}
    },
    OVERLAYER_CLOSED: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_CLOSED",
        topic: T1.constants.PAGEOVERLAYER_CLOSED,
        description: "Raised when an overlayer is completely closed",
        remarks: "",
        properties: {
            overlayer: "(Object-DOMNode) node of the overlayer content",
            content: "(Object-DOMNode) node containing the content within the overlayer"
        }
    },
    OVERLAYER_OPENMAIN: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_REOPEN_MAINCONTENT",
        topic: T1.constants.PAGEOVERLAYER_REOPEN_MAINCONTENT,
        description: "Raised when the last overlayer is closed and the main-content re-appears in the page",
        remarks: "",
        properties: {}
    },
    OVERLAYER_IMAGE_RESIZE: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_RESIZE_IMAGE",
        topic: T1.constants.PAGEOVERLAYER_RESIZE_IMAGE,
        description: "Resizes the active picture to the best match",
        remarks: "The image will be cropped at height OR width, depending on the aspect ratio of the screen & image",
        properties: {
            image: "(jQuery object) image to resize, defaults to '.item.active img'"
        }
    },
    OVERLAYER_RESIZE: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_RESIZE",
        topic: T1.constants.PAGEOVERLAYER_RESIZE,
        description: "Recalculate the position of the toolbar in the overlayer",
        remarks: "Classes desktop, landscape or portrait are added depending on the state of the page",
        properties: {}
    },
    OVERLAYER_DESTROY: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "PAGEOVERLAYER_DESTROY",
        topic: T1.constants.PAGEOVERLAYER_DESTROY,
        description: "Closes all overlayers",
        remarks: "The destroy event will close all overlayer levels",
        properties: {}
    },
    READMORE_SHOW: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "READMORE_SHOW",
        topic: T1.constants.READMORE_SHOW,
        description: "",
        remarks: "",
        properties: {}
    },
    READMORE_HIDE_TARGET: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "READMORE_HIDE_TARGET",
        topic: T1.constants.READMORE_HIDE_TARGET,
        description: "",
        remarks: "",
        properties: {}
    },
    LOADING_START: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "LOADING_START",
        topic: T1.constants.LOADING_START,
        description: "",
        remarks: "",
        properties: {}
    },
    LOADING_COMPLETE: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "LOADING_COMPLETE",
        topic: T1.constants.LOADING_COMPLETE,
        description: "",
        remarks: "",
        properties: {}
    },
    LOADING_MESSAGE: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "LOADING_MESSAGE",
        topic: T1.constants.LOADING_MESSAGE,
        description: "",
        remarks: "",
        properties: {}
    },
    OTHERFEATURES_CLICK: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "OTHER_FEATURES_CLICK",
        topic: T1.constants.OTHER_FEATURES_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    OTHERFEATURES_SHOWALL: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "OTHER_FEATURES_SHOWALL",
        topic: T1.constants.OTHER_FEATURES_SHOWALL,
        description: "",
        remarks: "",
        properties: {}
    },
    TOAST_SHOW: {
        channel: T1.constants.CHANNEL_DIALOG,
        constantname: "TOAST_CUSTOM",
        topic: T1.constants.TOAST_CUSTOM,
        description: "",
        remarks: "",
        properties: {}
    },
    PRIVACY_AUTOAPPROVE: {
        channel: T1.constants.CHANNEL_EPRIVACY,
        constantname: "EPRIVACY_AUTO_APPROVED",
        topic: T1.constants.EPRIVACY_AUTO_APPROVED,
        description: "",
        remarks: "",
        properties: {}
    },
    PRIVACY_CANCELED: {
        channel: T1.constants.CHANNEL_EPRIVACY,
        constantname: "EPRIVACY_CANCELED",
        topic: T1.constants.EPRIVACY_CANCELED,
        description: "",
        remarks: "",
        properties: {}
    },
    PRIVACY_OPEN: {
        channel: T1.constants.CHANNEL_EPRIVACY,
        constantname: "EPRIVACY_OPEN",
        topic: T1.constants.EPRIVACY_OPEN,
        description: "",
        remarks: "",
        properties: {}
    },
    PRIVACY_SAVED: {
        channel: T1.constants.CHANNEL_EPRIVACY,
        constantname: "EPRIVACY_SAVED",
        topic: T1.constants.EPRIVACY_SAVED,
        description: "",
        remarks: "",
        properties: {}
    },
    PRIVACY_COMPONENT_LOAD: {
        channel: T1.constants.CHANNEL_EPRIVACY,
        constantname: "EPRIVACY_LOAD_COMPONENT",
        topic: T1.constants.EPRIVACY_LOAD_COMPONENT,
        description: "",
        remarks: "",
        properties: {}
    },
    FIGURE_LOAD: {
        channel: T1.constants.CHANNEL_FIGURE,
        constantname: "FIGURE_LOAD",
        topic: T1.constants.FIGURE_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    IFRAME_LOAD: {
        channel: T1.constants.CHANNEL_FIGURE,
        constantname: "IFRAME_LOAD",
        topic: T1.constants.IFRAME_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    FINANCE_ENABLE: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "FINANCE_RATES_ON",
        topic: T1.constants.FINANCE_RATES_ON,
        description: "",
        remarks: "",
        properties: {}
    },
    FINANCE_DISABLE: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "FINANCE_RATES_OFF",
        topic: T1.constants.FINANCE_RATES_OFF,
        description: "",
        remarks: "",
        properties: {}
    },
    FINANCE_LOAD: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "FINANCE_RATES_LOADED",
        topic: T1.constants.FINANCE_RATES_LOADED,
        description: "",
        remarks: "",
        properties: {}
    },
    FINANCE_INIT: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "FINANCE_RATES_INIT",
        topic: T1.constants.FINANCE_RATES_INIT,
        description: "",
        remarks: "",
        properties: {}
    },
    FINANCE_POST: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "FINANCE_EXTERNAL_POST_REQUEST",
        topic: T1.constants.FINANCE_EXTERNAL_POST_REQUEST,
        description: "",
        remarks: "",
        properties: {}
    },
    INSURANCE_POST: {
        channel: T1.constants.CHANNEL_FINANCE,
        constantname: "INSURANCE_EXTERNAL_POST_REQUEST",
        topic: T1.constants.INSURANCE_EXTERNAL_POST_REQUEST,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_LOAD: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "FORM_LOAD",
        topic: T1.constants.FORM_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_ERROR: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "FORM_ERROR",
        topic: T1.constants.FORM_ERROR,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_VALIDATION_FAILED: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "FORM_VALIDATION_FAILED",
        topic: T1.constants.FORM_VALIDATION_FAILED,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_VALIDATION_RETURN: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "VALIDATE_FORM_RETURN",
        topic: T1.constants.VALIDATE_FORM_RETURN,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_SUBMIT_BEFORE: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "BEFORE_FORM_SUBMIT",
        topic: T1.constants.BEFORE_FORM_SUBMIT,
        description: "",
        remarks: "",
        properties: {}
    },
    FORM_SUBMIT_RETURN: {
        channel: T1.constants.CHANNEL_FORM,
        constantname: "SUBMIT_FORM_RETURN",
        topic: T1.constants.SUBMIT_FORM_RETURN,
        description: "",
        remarks: "",
        properties: {}
    },
    WINDOW_RESIZE: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "ON_WIN_RESIZE",
        topic: T1.constants.ON_WIN_RESIZE,
        description: "",
        remarks: "",
        properties: {}
    },
    ORIENTATION_CHANGE: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "ON_ORIENTATION_CHANGE",
        topic: T1.constants.ON_ORIENTATION_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    DOCUMENT_CLICK: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "ON_DOC_CLICK",
        topic: T1.constants.ON_DOC_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    KEY_PRESS: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "ON_KEY_PRESS",
        topic: T1.constants.ON_KEY_PRESS,
        description: "",
        remarks: "",
        properties: {}
    },
    WINDOW_SWIPE: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "GLOBAL_SWIPE",
        topic: T1.constants.GLOBAL_SWIPE,
        description: "",
        remarks: "",
        properties: {}
    },
    WINDOW_SCROLL: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "GLOBAL_SCROLL",
        topic: T1.constants.GLOBAL_SCROLL,
        description: "",
        remarks: "",
        properties: {}
    },
    WINDOW_BREAKPOINT_CHANGE: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "ON_BREAKPOINT_CHANGE",
        topic: T1.constants.ON_BREAKPOINT_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    SORT_PROMOTIONS: {
        channel: T1.constants.CHANNEL_PERSONALIZATION,
        constantname: "SORT_PROMOTIONS",
        topic: T1.constants.SORT_PROMOTIONS,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_ADD: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_ADD",
        topic: T1.constants.HASH_ADD,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_REMOVE: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_REMOVE",
        topic: T1.constants.HASH_REMOVE,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_CHANGE: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_CHANGE",
        topic: T1.constants.HASH_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_CHANGED: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_CHANGED",
        topic: T1.constants.HASH_CHANGED,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_REPLACE: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_REPLACE",
        topic: T1.constants.HASH_REPLACE,
        description: "",
        remarks: "",
        properties: {}
    },
    HASH_REWRITE: {
        channel: T1.constants.CHANNEL_HASH,
        constantname: "HASH_REWRITE",
        topic: T1.constants.HASH_REWRITE,
        description: "",
        remarks: "",
        properties: {}
    },
    NODES_LAZYLOAD: {
        channel: T1.constants.CHANNEL_LAZYLOAD,
        constantname: "LAZY_LOAD",
        topic: T1.constants.LAZY_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    FOCUSIMAGE_LAZYLOAD: {
        channel: T1.constants.CHANNEL_LAZYLOAD,
        constantname: "LAZY_LOAD_FOCUSIMAGE",
        topic: T1.constants.LAZY_LOAD_FOCUSIMAGE,
        description: "",
        remarks: "",
        properties: {}
    },
    COMPLETE_LAZYLOAD: {
        channel: T1.constants.CHANNEL_LAZYLOAD,
        constantname: "LAZY_LOAD_COMPLETE",
        topic: T1.constants.LAZY_LOAD_COMPLETE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_CREATE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_CREATE",
        topic: T1.constants.CAROUSEL_CREATE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_CREATED: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_CREATED",
        topic: T1.constants.CAROUSEL_CREATED,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_LOAD: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_INITIALIZE",
        topic: T1.constants.CAROUSEL_INITIALIZE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_EXPAND: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_EXPAND",
        topic: T1.constants.CAROUSEL_EXPAND,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_RESIZE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_RESIZE",
        topic: T1.constants.CAROUSEL_RESIZE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_BEFORE_SLIDE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_BEFORE_SLIDE",
        topic: T1.constants.CAROUSEL_BEFORE_SLIDE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_SLIDE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_SLIDE",
        topic: T1.constants.CAROUSEL_SLIDE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_START: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_START",
        topic: T1.constants.CAROUSEL_START,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_PAUSE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_PAUSE",
        topic: T1.constants.CAROUSEL_PAUSE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_REFRESH: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_REFRESH",
        topic: T1.constants.CAROUSEL_REFRESH,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_RESPONSIVE_CREATE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_CREATERESPONSIVE",
        topic: T1.constants.CAROUSEL_CREATERESPONSIVE,
        description: "",
        remarks: "",
        properties: {}
    },
    CAROUSEL_RESPONSIVE_CREATED: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "CAROUSEL_RESPONSIVECREATED",
        topic: T1.constants.CAROUSEL_RESPONSIVECREATED,
        description: "",
        remarks: "",
        properties: {}
    },
    SLIDER_ADD_COUNTER: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "SLIDER_ADDCOUNTER",
        topic: T1.constants.SLIDER_ADDCOUNTER,
        description: "",
        remarks: "",
        properties: {}
    },
    SLIDER_UPDATE_COUNTER: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "SLIDER_UPDATECOUNTER",
        topic: T1.constants.SLIDER_UPDATECOUNTER,
        description: "",
        remarks: "",
        properties: {}
    },
    GALLERY_ITEM_CLICK: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "GALLERY_ITEM_CLICK",
        topic: T1.constants.GALLERY_ITEM_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    GALLERY_MOBILE_BUILD: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "GALLERY_MOBILE_BUILD",
        topic: T1.constants.GALLERY_MOBILE_BUILD,
        description: "",
        remarks: "",
        properties: {}
    },
    GALLERY_SCROLL: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "GALLERY_SCROLL",
        topic: T1.constants.GALLERY_SCROLL,
        description: "",
        remarks: "",
        properties: {}
    },
    MEDIA_OVERLAYER_HIDE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "MEDIAOVERLAYER_HIDE",
        topic: T1.constants.MEDIAOVERLAYER_HIDE,
        description: "",
        remarks: "",
        properties: {}
    },
    MEDIA_OVERLAYER_VIDEO_CLICK: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "MEDIAOVERLAYER_VIDEO_CLICK",
        topic: T1.constants.MEDIAOVERLAYER_VIDEO_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    IFRAME_DESTROY: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "IFRAME_DESTROY",
        topic: T1.constants.IFRAME_DESTROY,
        description: "",
        remarks: "",
        properties: {}
    },
    VIDEO_CLICK: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "VIDEO_CLICK",
        topic: T1.constants.VIDEO_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    VIDEO_STOP: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "VIDEO_STOP",
        topic: T1.constants.VIDEO_STOP,
        description: "",
        remarks: "",
        properties: {}
    },
    VIDEO_PLAYER_CREATE: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "VIDEO_CREATEPLAYER",
        topic: T1.constants.VIDEO_CREATEPLAYER,
        description: "",
        remarks: "",
        properties: {}
    },
    VIDEO_PLAYER_CREATED: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "VIDEO_CREATEDPLAYER",
        topic: T1.constants.VIDEO_CREATEDPLAYER,
        description: "",
        remarks: "",
        properties: {}
    },
    VIDEO_RESET: {
        channel: T1.constants.CHANNEL_MEDIA,
        constantname: "VIDEO_RESET",
        topic: T1.constants.VIDEO_RESET,
        description: "",
        remarks: "",
        properties: {}
    },
    MOBILE_SWITCH: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "MODE_SWITCH_MOBILE",
        topic: T1.constants.MODE_SWITCH_MOBILE,
        description: "",
        remarks: "",
        properties: {}
    },
    DESKTOP_SWITCH: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "MODE_SWITCH_DESKTOP",
        topic: T1.constants.MODE_SWITCH_DESKTOP,
        description: "",
        remarks: "",
        properties: {}
    },
    MOBILE_INIT: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "MODE_INIT_MOBILE",
        topic: T1.constants.MODE_INIT_MOBILE,
        description: "",
        remarks: "",
        properties: {}
    },
    DESKTOP_INIT: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "MODE_INIT_DESKTOP",
        topic: T1.constants.MODE_INIT_DESKTOP,
        description: "",
        remarks: "",
        properties: {}
    },
    MOBILE_OPEN: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "MOBILE_OPEN",
        topic: T1.constants.MOBILE_OPEN,
        description: "",
        remarks: "",
        properties: {}
    },
    PAGE_INITIALIZED: {
        channel: T1.constants.CHANNEL_MOBILE,
        constantname: "PAGE_INITIALIZED",
        topic: T1.constants.PAGE_INITIALIZED,
        description: "",
        remarks: "",
        properties: {}
    },
    MYCARS_OPEN: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_MY_CARS",
        topic: T1.constants.MY_TOYOTA_MY_CARS,
        description: "",
        remarks: "",
        properties: {}
    },
    MYDEALERS_OPEN: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_MY_DEALERS",
        topic: T1.constants.MY_TOYOTA_MY_DEALERS,
        description: "",
        remarks: "",
        properties: {}
    },
    OWNERSAREA_OPEN: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_OWNERS_AREA",
        topic: T1.constants.MY_TOYOTA_OWNERS_AREA,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_SHOW: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_LOGIN",
        topic: T1.constants.MY_TOYOTA_LOGIN,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_SUCCESS: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_LOGIN_SUCCESS",
        topic: T1.constants.MY_TOYOTA_LOGIN_SUCCESS,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_FAIL: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_LOGIN_FAIL",
        topic: T1.constants.MY_TOYOTA_LOGIN_FAIL,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_CANCEL: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_CANCEL_LOGIN",
        topic: T1.constants.MY_TOYOTA_CANCEL_LOGIN,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_REGISTER_SHOW: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_REGISTER",
        topic: T1.constants.MY_TOYOTA_REGISTER,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_FORGOTTENPWD_SHOW: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_FORGOTTEN_PASSWORD",
        topic: T1.constants.MY_TOYOTA_FORGOTTEN_PASSWORD,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_FORGOTTENPWD_RESET_SHOW: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_RESET_PASSWORD",
        topic: T1.constants.MY_TOYOTA_RESET_PASSWORD,
        description: "",
        remarks: "",
        properties: {}
    },
    LOGIN_FORGOTTENPWD_RESET_HASH: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_HASH_PASSWORD",
        topic: T1.constants.MY_TOYOTA_HASH_PASSWORD,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_SAVE: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SAVE_CAR",
        topic: T1.constants.MY_TOYOTA_SAVE_CAR,
        description: "",
        remarks: "",
        properties: {}
    },
    TRADEIN_CAR_SAVE: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SAVE_CAR_TRADEIN",
        topic: T1.constants.MY_TOYOTA_SAVE_CAR_TRADEIN,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_SAVED: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SAVED_CAR",
        topic: T1.constants.MY_TOYOTA_SAVED_CAR,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_STORED: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_STORED_CAR",
        topic: T1.constants.MY_TOYOTA_STORED_CAR,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_GET: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_GET_CAR",
        topic: T1.constants.MY_TOYOTA_GET_CAR,
        description: "",
        remarks: "",
        properties: {}
    },
    MY_TOYOTA_DEALER_SAVE: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SAVED_DEALER",
        topic: T1.constants.MY_TOYOTA_SAVED_DEALER,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_SAVE_FAILED: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SAVE_DEALER_FAILED",
        topic: T1.constants.MY_TOYOTA_SAVE_DEALER_FAILED,
        description: "",
        remarks: "",
        properties: {}
    },
    DEALER_SAVE_ALREADYSAVED: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_DEALER_ALREADY_SAVED",
        topic: T1.constants.MY_TOYOTA_DEALER_ALREADY_SAVED,
        description: "",
        remarks: "",
        properties: {}
    },
    TAB_SWITCH: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_TAB_SWITCH",
        topic: T1.constants.MY_TOYOTA_TAB_SWITCH,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_SEARCH_NORESULT: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SEARCH_FAILED",
        topic: T1.constants.MY_TOYOTA_SEARCH_FAILED,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_SEARCH_FOUND: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_SEARCH_FOUND",
        topic: T1.constants.MY_TOYOTA_SEARCH_FOUND,
        description: "",
        remarks: "",
        properties: {}
    },
    CAR_SAVE_ALREADYSAVED: {
        channel: T1.constants.CHANNEL_MYTOYOTA,
        constantname: "MY_TOYOTA_CAR_ALREADY_SAVED",
        topic: T1.constants.MY_TOYOTA_CAR_ALREADY_SAVED,
        description: "",
        remarks: "",
        properties: {}
    },
    NAV_PRIMARY_COLLAPSE: {
        channel: T1.constants.CHANNEL_NAVIGATION,
        constantname: "NAVIGATION_PRIMARY_COLLAPSE",
        topic: T1.constants.NAVIGATION_PRIMARY_COLLAPSE,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_OVERLAYER_VIEWALL: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_OPENREVIEWS",
        topic: T1.constants.REVIEW_OPENREVIEWS,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_FIRST_LOAD: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_SEE_REVIEWS",
        topic: T1.constants.REVIEW_SEE_REVIEWS,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_FEEDBACK_CLICK: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_FEEDBACK_CLICK",
        topic: T1.constants.REVIEW_FEEDBACK_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_FORM_SHOW: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_GETREVFORM",
        topic: T1.constants.REVIEW_GETREVFORM,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_RATING_SHOW: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_AVARAGE_RATING",
        topic: T1.constants.REVIEW_AVARAGE_RATING,
        description: "",
        remarks: "",
        properties: {}
    },
    REVIEW_LOAD: {
        channel: T1.constants.CHANNEL_REVIEWS,
        constantname: "REVIEW_LOADBAZAR",
        topic: T1.constants.REVIEW_LOADBAZAR,
        description: "",
        remarks: "",
        properties: {}
    },
    SCROLLTRACK_ELEMENTS_ADD: {
        channel: T1.constants.CHANNEL_SCROLLING,
        constantname: "SCROLL_TRACK_ADD",
        topic: T1.constants.SCROLL_TRACK_ADD,
        description: "",
        remarks: "",
        properties: {}
    },
    SCROLLTRACK_ELEMENTS_PAUSE: {
        channel: T1.constants.CHANNEL_SCROLLING,
        constantname: "SCROLL_TRACK_PAUSE",
        topic: T1.constants.SCROLL_TRACK_PAUSE,
        description: "",
        remarks: "",
        properties: {}
    },
    SCROLLTRACK_ELEMENTS_APPEAR: {
        channel: T1.constants.CHANNEL_SCROLLING,
        constantname: "SCROLL_TRACK_APPEAR",
        topic: T1.constants.SCROLL_TRACK_APPEAR,
        description: "",
        remarks: "",
        properties: {}
    },
    SCROLLTRACK_ELEMENTS_REMOVE: {
        channel: T1.constants.CHANNEL_SCROLLING,
        constantname: "SCROLL_TRACK_REMOVE",
        topic: T1.constants.SCROLL_TRACK_REMOVE,
        description: "",
        remarks: "",
        properties: {}
    },
    SEARCH_QUICK_SHOW: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "SEARCH",
        topic: T1.constants.SEARCH,
        description: "",
        remarks: "",
        properties: {}
    },
    SEARCH_FULL_SHOW: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "FULL_SEARCH",
        topic: T1.constants.FULL_SEARCH,
        description: "",
        remarks: "",
        properties: {}
    },
    INPUT_SEARCH_REQUEST: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "INPUT_SEARCH_REQUEST",
        topic: T1.constants.INPUT_SEARCH_REQUEST,
        description: "",
        remarks: "",
        properties: {}
    },
    INPUT_SEARCH_CHANGE: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "INPUT_SEARCH_CHANGE",
        topic: T1.constants.INPUT_SEARCH_CHANGE,
        description: "",
        remarks: "",
        properties: {}
    },
    INPUT_SEARCH_UPDATE: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "INPUT_SEARCH_UPDATE",
        topic: T1.constants.INPUT_SEARCH_UPDATE,
        description: "",
        remarks: "",
        properties: {}
    },
    INPUT_SEARCH_CLEAR: {
        channel: T1.constants.CHANNEL_SEARCH,
        constantname: "INPUT_SEARCH_CLEAR",
        topic: T1.constants.INPUT_SEARCH_CLEAR,
        description: "",
        remarks: "",
        properties: {}
    },
    SOCIAL_SHARED: {
        channel: T1.constants.CHANNEL_SOCIAL,
        constantname: "SOCIAL_SHARED",
        topic: T1.constants.SOCIAL_SHARED,
        description: "",
        remarks: "",
        properties: {}
    },
    SPOTLIGHT_CLICK: {
        channel: T1.constants.CHANNEL_SPOTLIGHT,
        constantname: "SPOTLIGHTS_CLICK",
        topic: T1.constants.SPOTLIGHTS_CLICK,
        description: "",
        remarks: "",
        properties: {}
    },
    STATISTICS_TRACK: {
        channel: T1.constants.CHANNEL_STATISTICS,
        constantname: "STATS_TRACK",
        topic: T1.constants.STATS_TRACK,
        description: "",
        remarks: "",
        properties: {}
    },
    TABS_LOAD: {
        channel: T1.constants.CHANNEL_TAB,
        constantname: "TABS_LOAD",
        topic: T1.constants.TABS_LOAD,
        description: "",
        remarks: "",
        properties: {}
    },
    TABS_SWITCH: {
        channel: T1.constants.CHANNEL_TAB,
        constantname: "TABS_SWITCH",
        topic: T1.constants.TABS_SWITCH,
        description: "",
        remarks: "",
        properties: {}
    },
    SLIDING_NAV_TABS_SWITCH: {
        channel: T1.constants.CHANNEL_TAB,
        constantname: "SLIDING_NAV_TABS_SWITCH",
        topic: T1.constants.SLIDING_NAV_TABS_SWITCH,
        description: "",
        remarks: "",
        properties: {}
    },
    T1_LOADED: {
        channel: T1.constants.CHANNEL_GLOBAL,
        constantname: "GLOBAL_T1LOADED",
        topic: T1.constants.GLOBAL_T1LOADED,
        description: "",
        properties: {}
    },
    SITEMAP_EXPANDED: {
        channel: T1.constants.CHANNEL_SITEMAP,
        constantname: "SITEMAP_EXPANDED",
        topic: T1.constants.SITEMAP_EXPANDED,
        description: "",
        properties: {}
    },
    SITEMAP_COLLAPSED: {
        channel: T1.constants.CHANNEL_SITEMAP,
        constantname: "SITEMAP_COLLAPSED",
        topic: T1.constants.SITEMAP_COLLAPSED,
        description: "",
        properties: {}
    },
    COLLAPSIBLE_PANEL_EXPAND: {
        channel: T1.constants.CHANNEL_COLLAPSIBLE_PANEL,
        constantname: "COLLAPSIBLE_PANEL_EXPAND",
        topic: T1.constants.COLLAPSIBLE_PANEL_EXPAND,
        description: "",
        remarks: "",
        properties: {}
    },
    COLLAPSIBLE_PANEL_EXPANDED: {
        channel: T1.constants.CHANNEL_COLLAPSIBLE_PANEL,
        constantname: "COLLAPSIBLE_PANEL_EXPANDED",
        topic: T1.constants.COLLAPSIBLE_PANEL_EXPANDED,
        description: "",
        remarks: "",
        properties: {}
    },
    COLLAPSIBLE_PANEL_REQUEST_EXPAND: {
        channel: T1.constants.CHANNEL_COLLAPSIBLE_PANEL,
        constantname: "COLLAPSIBLE_PANEL_REQUEST_EXPAND",
        topic: T1.constants.COLLAPSIBLE_PANEL_REQUEST_EXPAND,
        description: "",
        remarks: "",
        properties: {}
    },
    COLLAPSIBLE_PANEL_REQUEST_CLOSE: {
        channel: T1.constants.CHANNEL_COLLAPSIBLE_PANEL,
        constantname: "COLLAPSIBLE_PANEL_REQUEST_CLOSE",
        topic: T1.constants.COLLAPSIBLE_PANEL_REQUEST_CLOSE,
        description: "",
        remarks: "",
        properties: {}
    }
};
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.utilities = function() {
        "use strict";
        T1.settings && T1.settings.iframeDomainWhiteList && "string" == typeof T1.settings.iframeDomainWhiteList && (T1.settings.iframeDomainWhiteList = T1.settings.iframeDomainWhiteList.split(","));
        var a = {
            getIeVersion: function() {
                return /MSIE (\d+\.\d+);/.test(navigator.userAgent) ? Number(RegExp.$1) : 1e3
            },
            isIeMobile: function() {
                return null !== navigator.userAgent.match(/IEMobile/g)
            }
        }
          , c = {
            _reIsRelativeUrl: /^\s*(?!\/\/)\//,
            _reCleanHostName: /^\s*(https?:)?\/\/|\s*$/,
            concat: function() {
                for (var a = arguments, b = c.getUrlBase(a), d = 0; d < a.length; d++) {
                    var e = d === a.length - 1;
                    b += "/" + c.cleanSlashes(a[d], !0, !e)
                }
                return b
            },
            cleanSlashes: function(a, b, c) {
                var d = "^\\s*" + (b ? "\\/?|" : "|") + (c ? "\\/?" : "") + "\\s*$";
                return "string" == typeof a ? a.replace(new RegExp(d,"g"), "") : a
            },
            getUrlBase: function(a) {
                return a.length && c._reIsRelativeUrl.test(a[0]) && T1 && T1.ctx && T1.ctx.host ? "//" + T1.ctx.host.replace(c._reCleanHostName, "") : ""
            },
            parse: function(a) {
                var b = document.createElement("a");
                return b.href = a,
                b
            }
        }
          , d = {
            isChrome: navigator.userAgent.indexOf("Chrome") > -1,
            isExplorer: navigator.userAgent.indexOf("MSIE") > -1 || navigator.userAgent.indexOf("Trident") > -1 || navigator.userAgent.indexOf("Edge") > -1,
            isFirefox: navigator.userAgent.indexOf("Firefox") > -1,
            isSafari: -1 === navigator.userAgent.indexOf("Chrome") && navigator.userAgent.indexOf("Safari") > -1,
            isOpera: navigator.userAgent.indexOf("Presto") > -1,
            isEdge: navigator.userAgent.indexOf("Edge") > -1
        }
          , f = {
            isIpad: function() {
                return !(null === navigator.userAgent.match(/iPad/g))
            },
            isIpadAsDesktop: function() {
                return null !== navigator.userAgent.match(/Macintosh/g) && n
            },
            isIphone: function() {
                return !(null === navigator.userAgent.match(/iPhone/g))
            },
            isIOS: function() {
                return null !== navigator.userAgent.match(/(iPad|iPhone|iPod)/g) || f.isIpadAsDesktop()
            },
            iOSVersion: function() {
                if (!(null === navigator.userAgent.match(/(iPad|iPhone|iPod)/g))) {
                    var a = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
                    return a = [parseInt(a[1] || -1, 10), parseInt(a[2] || 0, 10), parseInt(a[3] || 0, 10)],
                    a[0]
                }
                return -1
            }
        }
          , g = {
            hasFlash: function() {
                var a = !1;
                try {
                    new ActiveXObject("ShockwaveFlash.ShockwaveFlash") && (a = !0)
                } catch (e) {
                    void 0 !== navigator.mimeTypes["application/x-shockwave-flash"] && (a = !0)
                }
                return a
            }
        }
          , h = {
            checkedEvents: {},
            hasEvent: function(a) {
                return h.checkedEvents[a] || a in document
            }
        }
          , i = {
            isAndroid: function() {
                return null !== navigator.userAgent.match(/Android/i)
            },
            isMobileAndroid: function() {
                var a = navigator.userAgent.match(/Android|Mobile Safari/g);
                return !!a && a.length >= 2
            }
        }
          , j = {
            youtubeEmbedUrl: "//www.youtube.com/embed/<id>?rel=0&enablejsapi=<enablejsapi>&hd=<hd>;autoplay=<autoplay>;controls=<controls>;modestbranding=<modestbranding>&wmode=opaque&html5=1",
            getEmbedUrl: function(a, b) {
                if (!a)
                    return "";
                var c = j.getYouTubeId(a)
                  , d = j.youtubeEmbedUrl;
                return b || (b = {}),
                c ? (d = d.replace("<hd>", b.hd || "1"),
                d = d.replace("<autoplay>", b.autoplay || "1"),
                d = d.replace("<controls>", b.controls || "0"),
                d = d.replace("<modestbranding>", b.modestbranding || "1"),
                d = d.replace("<enablejsapi>", b.enablejsapi || "0"),
                d.replace("<id>", c)) : a
            },
            isYoutubeUrl: function(a) {
                return a.match(/^(http)*(s)*(:)*(\/\/)(www.)*(youtu)(.)*(be)(.)*(com)*/gim)
            },
            getYouTubeId: function(a) {
                if (!a)
                    return "";
                var b = a.replace(/.*\/(.*?)v=|&.*|.*\/|\?.*/g, "");
                return new RegExp("[:/.]").test(b) ? null : b
            },
            frame: {
                play: function(a) {
                    a.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', "*")
                },
                pause: function(a) {
                    a.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', "*")
                },
                mute: function(a, b) {
                    a.contentWindow.postMessage('{"event":"command","func":"' + (b ? "mute" : "unMute") + '","args":""}', "*")
                }
            }
        }
          , k = {
            prepend: function(a) {
                a.method = "prepend",
                k.add(a)
            },
            append: function(a) {
                a.method = "append",
                k.add(a)
            },
            add: function(a) {
                var c = a.target || b("body")
                  , d = b(a.html);
                if (a.forceLazyLoad && T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_APPEAR, {
                    element: d,
                    onDemand: !0,
                    noLoader: !0
                }),
                a.waitForImages && d.waitForImages) {
                    var e = {
                        waitForAll: !0
                    };
                    e[a.force ? "finished" : "finishedSuccess"] = k._inject.bind(k, c, d, a),
                    e.finishedError = k._injectFail,
                    d.waitForImages(!0).progress(k._injectImageStatus.bind(k, a)).done(k._inject.bind(k, c, d, a))
                } else
                    k._inject(c, d)
            },
            _injectImageStatus: function(a, b, c, d) {
                d || (a.cancel = !0)
            },
            _inject: function(a, c, d) {
                if (d || (d = {}),
                !d.cancel || d.force) {
                    var e = "prepend" !== d.method ? "append" : "prepend";
                    a.append || (a = b(a)),
                    a[e](c),
                    d.callback && d.callback()
                }
            }
        }
          , l = {
            parse: function(a, b) {
                return l._parse("parse", a, b)
            },
            stringify: function(a, b) {
                return l._parse("stringify", a, b)
            },
            _parse: function(a, b, c) {
                "parse" !== a && "stringify" !== a && (a = "parse"),
                c || (c = {});
                try {
                    return JSON[a](b)
                } catch (e) {
                    return c.error && console.log(("boolean" == typeof c.error ? "" : c.error + "\n") + e),
                    void 0 !== c.default && c.default
                }
            }
        }
          , m = {
            test: function() {
                return -1 !== navigator.userAgent.toLowerCase().indexOf("touch") && -1 !== navigator.platform.toLowerCase().indexOf("win")
            }
        }
          , n = window.matchMedia ? window.matchMedia("(pointer: coarse)").matches : !!("ontouchstart"in window || window.DocumentTouch && document instanceof window.DocumentTouch)
          , o = n ? "touchend" : "click"
          , p = {
            getCookie: function(a) {
                for (var b = a + "=", c = document.cookie.split(";"), d = 0; d < c.length; d++) {
                    for (var e = c[d]; " " === e.charAt(0); )
                        e = e.substring(1, e.length);
                    if (0 === e.indexOf(b))
                        return e.substring(b.length, e.length)
                }
                return null
            },
            setCookie: function(a, b, c) {
                var d = "";
                if (c) {
                    var e = new Date;
                    e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3),
                    d = "; expires=" + e.toGMTString()
                } else
                    d = "";
                document.cookie = a + "=" + b + d + "; path=/"
            },
            rmCookie: function(a) {
                p.setCookie(a, "", -1)
            }
        }
          , q = {
            bp: "xs",
            changeBp: function(a) {
                q.bp = a
            },
            getCurrentBp: function() {
                return q.bp
            },
            isMobileDevice: function() {
                return a.isIeMobile() || f.isIpad() || f.isIphone() || i.isAndroid() || i.isMobileAndroid() || m.test()
            },
            isPortrait: function() {
                return window.innerHeight >= window.innerWidth
            },
            isLandscape: function() {
                return window.innerHeight < window.innerWidth
            },
            isElementInViewport: function(a) {
                "function" == typeof b && a instanceof b && (a = a[0]);
                var c = a.getBoundingClientRect();
                return c.top < (window.innerHeight || document.documentElement.clientHeight) && c.bottom > 0
            }
        }
          , r = {
            class: "pseudo-a-tag",
            attachClick: function(a) {
                a = a || b("body"),
                a.on("click", "." + r.class, r.handleClick)
            },
            handleClick: function(a) {
                a.preventDefault();
                var c = b(this)
                  , d = c.data("href")
                  , e = c.data("internal-href") ? window.location.hostname : ""
                  , f = e.length ? "//" : "";
                window.location.href = f + e + d
            }
        }
          , s = {
            class: "preventDefault",
            attachClick: function(a) {
                var c = a || b("body")
                  , d = "." + s.class;
                c.off("click", d, s.handleClick).on("click", d, s.handleClick)
            },
            handleClick: function(a) {
                a.preventDefault()
            }
        }
          , t = {
            variables: function(a, b, c) {
                if (c || (c = {}),
                "function" == typeof b && a)
                    return "string" == typeof a && (a = a.indexOf(",") > -1 ? a.split(",") : [a]),
                    c.callback = b,
                    t.poll(function() {
                        for (var b = 0; b < a.length; b++)
                            if (null === Object.resolve(a[b]))
                                return !1;
                        return !0
                    }, c)
            },
            poll: function(a, b) {
                b || (b = {});
                var c = b.interval || 300
                  , d = b.maxOccurrences || (b.maxTime ? Math.round(b.maxTime / c) : null)
                  , e = b.callback || null
                  , f = 0
                  , g = setInterval(function() {
                    d && d - 1 <= f && (clearInterval(g),
                    e && b.forceCallback && e()),
                    !0 === a() ? (clearInterval(g),
                    e && e()) : f += 1
                }, c);
                return g
            }
        }
          , u = {
            getContrastYIQ: function(a) {
                return (299 * parseInt(a.substr(0, 2), 16) + 587 * parseInt(a.substr(2, 2), 16) + 114 * parseInt(a.substr(4, 2), 16)) / 1e3 >= 128 ? "black" : "white"
            },
            lightenDarkenColor: function(a, b) {
                var c = !1;
                "#" == a[0] && (a = a.slice(1),
                c = !0);
                var d = parseInt(a, 16)
                  , e = (d >> 16) + b;
                e > 255 ? e = 255 : e < 0 && (e = 0);
                var f = (d >> 8 & 255) + b;
                f > 255 ? f = 255 : f < 0 && (f = 0);
                var g = (255 & d) + b;
                return g > 255 ? g = 255 : g < 0 && (g = 0),
                (c ? "#" : "") + (g | f << 8 | e << 16).toString(16)
            },
            isTooDark: function(a, b) {
                var c = !1;
                b || (b = 40);
                var d = parseInt(a, 16);
                return .2126 * (d >> 16 & 255) + .7152 * (d >> 8 & 255) + .0722 * (d >> 0 & 255) < b && (c = !0),
                c
            }
        }
          , v = {
            calculate: function(a) {
                if (a) {
                    var b = a.parent()
                      , c = b.height()
                      , d = b.width()
                      , e = a.get(0).naturalHeight
                      , f = a.get(0).naturalWidth
                      , g = f - d
                      , h = e - c
                      , i = g / f * 100
                      , j = h / e * 100
                      , k = e * f
                      , l = c * d
                      , m = k - l
                      , n = m / k * 100;
                    T1.channels.global.publishAsync(T1.constants.CALCULATE_VISIBLE_AREA_OF_THE_IMAGE, {
                        imageHeight: e + "px",
                        imageWidth: f + "px",
                        containerHeight: c + "px",
                        containerWidth: d + "px",
                        unvisibleX: g + "px",
                        unvisibleY: h + "px",
                        unvisibleXperc: Math.round(i) + "%",
                        unvisibleYperc: Math.round(j) + "%",
                        unvisibleTotalArea: m + "px²",
                        unvisiblePercentage: Math.round(n) + "%",
                        image: a
                    })
                }
            }
        }
          , w = {
            itemAndContainerRatioCompare: function(a, b) {
                var c = a.height();
                return a.width() / c >= b.width() / b.height()
            }
        }
          , x = {
            match: function(a) {
                var b = T1.settings.iframeDomainWhiteList || [];
                if (0 === b.length)
                    return "";
                if (a.startsWith("javascript:"))
                    return null;
                if (!/^(\s)*(http(s)?:)?\/\//i.test(a))
                    return "";
                var c = /^(\s)*(https?:)?\/\/|[:\/?#].*/gi;
                if ("" === (a = a.replace(c, "").toLowerCase()))
                    return "";
                var d = window.location.host.replace(/^.+?\./, "").replace(c, "");
                if (a.indexOf(d.toLocaleLowerCase()) > -1)
                    return d;
                for (var e in b)
                    if (a.indexOf(b[e].replace(c, "").toLowerCase()) > -1)
                        return b[e];
                return null
            },
            test: function(a) {
                return "string" == typeof x.match(a)
            }
        }
          , y = {
            download: function(a, b) {
                var c = document.createElement("a");
                c.setAttribute("href", a),
                c.setAttribute("download", "pdf-brochure"),
                b && c.setAttribute("target", "_blank"),
                c.style.display = "none",
                document.body.appendChild(c),
                c.click(),
                document.body.removeChild(c)
            }
        }
          , z = {
            metaCharactersInSelector: function(a) {
                return a.replace(/(:|\.|\[|\]|,|=|@)/g, "\\$1")
            }
        }
          , A = {
            production: !/\.heroku|\.gateway\.|localhost|127\.0\.0\.1/i.test(window.location.hostname)
        }
          , B = {
            getModelCode: function(a) {
                if ("string" != typeof a)
                    return a;
                var b = "object" == typeof T1.settings.modelMapMap ? T1.settings.modelMapMap : {};
                return b["ic-" + a] || b[a] || a.toUpperCase()
            },
            getModelData: function(a) {
                var b = B.getModelCode(a);
                return T1.settings.modelMap[b] || {}
            }
        }
          , C = {
            data: function(a, c) {
                return b.ajax({
                    type: "GET",
                    dataType: c,
                    url: a
                })
            },
            html: function(a) {
                return C.data(a, "html")
            },
            json: function(a) {
                return C.data(a, "json")
            }
        };
        return {
            init: function() {
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, q.changeBp),
                r.attachClick(),
                s.attachClick()
            },
            pseudoLinkClick: r.attachClick,
            preventDefaultLinkClick: s.attachClick,
            currentBreakpoint: q.getCurrentBp,
            isMobileDevice: q.isMobileDevice,
            ieVersion: a.getIeVersion,
            isIeMobile: a.isIeMobile(),
            hasFlash: g.hasFlash,
            hasEvent: h.hasEvent,
            isIpad: f.isIpad,
            isIpadAsDesktop: f.isIpadAsDesktop,
            isIOS: f.isIOS,
            isIphone: f.isIphone,
            iOSVersion: f.iOSVersion,
            isAndroid: i.isAndroid,
            isMobileAndroid: i.isMobileAndroid,
            iswindowsTablet: m.test,
            isTouchCapable: n,
            clickEvent: o,
            cookies: p,
            contrastYIQ: u.getContrastYIQ,
            lightenDarken: u.lightenDarkenColor,
            isTooDark: u.isTooDark,
            imgVisibleArea: v.calculate,
            youtube: j,
            browser: d,
            viewport: q,
            injection: k,
            poll: t,
            whitelist: x,
            json: l,
            downloadFile: y.download,
            itemAndContainerRatioCompare: w.itemAndContainerRatioCompare,
            url: c,
            metaCharactersInSelector: z.metaCharactersInSelector,
            isEnvironment: A,
            modelMapping: B,
            get: C
        }
    }()
}),
window.console || (window.console = {
    log: function() {},
    dir: function() {}
}),
String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1)
}
,
String.prototype.uncapitalize = function() {
    return this.charAt(0).toLowerCase() + this.slice(1)
}
,
String.prototype.toCamelCase = function(a) {
    return this.replace(/(?:^\w|[A-Z]|\b\w|\s+|-)/g, function(b, c) {
        return 0 == +b || "-" === b ? "" : 0 === c && "upper" !== a ? b.toLowerCase() : b.toUpperCase()
    })
}
,
"function" != typeof String.prototype.trim && (String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, "")
}
),
String.prototype.startsWith || (String.prototype.startsWith = function(a, b) {
    return b = b || 0,
    this.indexOf(a, b) === b
}
),
String.prototype.toSelector || (String.prototype.toSelector = function() {
    return this && !this.startsWith(".") ? "." + this : this
}
),
Object.resolve = function(a, b, c) {
    b || (b = window);
    for (var d = (a || "").split("."), e = 0; e < d.length; e++)
        b && (b = void 0 !== b[d[e]] ? b[d[e]] : null);
    return null === b && void 0 !== c ? c : b
}
,
Array.prototype.indexOf || (Array.prototype.indexOf = function(a, b) {
    for (var c = b || 0, d = this.length; c < d; c++)
        if (this[c] === a)
            return c;
    return -1
}
),
Number.isInteger = Number.isInteger || function(a) {
    return "number" == typeof a && isFinite(a) && Math.floor(a) === a
}
,
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c;
    b.safe = function(a, b) {
        return Object.resolve(a, window) || function() {
            return b
        }
    }
    ,
    "function" != typeof Object.keys && (Object.keys = function(a) {
        var b = [];
        for (var c in a)
            a.hasOwnProperty && a.hasOwnProperty(c) && b.push(c);
        return b
    }
    ),
    b.fn.or = function(a) {
        return this.length ? this : b(a)
    }
    ,
    jQuery.loadScript = function(a, c) {
        return c = b.extend(c || {}, {
            dataType: "script",
            async: !1,
            cache: !0,
            url: a
        }),
        jQuery.ajax(c)
    }
    ,
    jQuery.loadCss = function(a, c) {
        if (Array.isArray(a)) {
            for (var d = [], e = 0; e < a.length; e++)
                if ("string" == typeof a[e]) {
                    var f = b('<link rel="stylesheet">');
                    if (c) {
                        var g = b.Deferred();
                        f.on("load error", g.resolve),
                        d.push(g)
                    }
                    f.attr("href", a[e]).appendTo(b("head"))
                }
            c && b.when.apply(b, d).done(c)
        }
    }
    ,
    b.fn.onTransitionEnd = function(a, c) {
        if (this.length) {
            var d = this.getTransitionEndEvent()
              , c = c || {}
              , e = function(f) {
                var g = b(this);
                g.is(f.target) && (c.propertyName && f.originalEvent.propertyName !== c.propertyName || (a(f),
                c.one && g.off(d, e)))
            };
            this.on(d, e)
        }
    }
    ,
    b.fn.getTransitionEndEvent = function() {
        if (this.length) {
            var a = {
                transition: "transitionend",
                OTransition: "oTransitionEnd",
                WebkitTransition: "webkitTransitionEnd"
            };
            for (var b in a)
                if (void 0 !== this[0].style[b])
                    return a[b]
        }
    }
    ,
    c.mixin({
        t1SumBy: function(a, b) {
            var c = function(a, b) {
                for (var c, d = -1, e = a.length; ++d < e; ) {
                    var f = b(a[d]);
                    void 0 !== f && (c = void 0 === c ? f : c + f)
                }
                return c
            };
            return a && a.length ? c(a, b) : 0
        }
    })
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.breakpoints = function() {
        "use strict";
        var a = {
            currentBreakpoint: "",
            breakpoints: {
                xs: T1.constants.SCREEN_XTRASMALL,
                sm: T1.constants.SCREEN_SMALL,
                md: T1.constants.SCREEN_MEDIUM,
                lg: T1.constants.SCREEN_LARGE
            }
        }
          , c = {
            init: function() {
                c.setCurrentBreakpoint(),
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, c.setCurrentBreakpoint)
            },
            setCurrentBreakpoint: function() {
                var c = !0 === T1.utilities.browser.isSafari ? b(window).width() : window.innerWidth || b(window).width()
                  , d = 0
                  , e = "";
                for (var f in a.breakpoints)
                    a.breakpoints.hasOwnProperty(f) && c >= a.breakpoints[f] && d < a.breakpoints[f] && (e = f,
                    d = a.breakpoints[f]);
                "" === e && (e = "xs"),
                e !== a.currentBreakpoint && (a.currentBreakpoint = e,
                T1.channels.global.publishAsync(T1.constants.ON_BREAKPOINT_CHANGE, a.currentBreakpoint))
            },
            returnCurrentBreakPoint: function() {
                return a.currentBreakpoint
            },
            getScreenSizeMode: function() {
                return "xs" === a.currentBreakpoint ? T1.constants.BREAKPOINTS_MODE.MOBILE : "sm" === a.currentBreakpoint ? T1.constants.BREAKPOINTS_MODE.TABLET : T1.constants.BREAKPOINTS_MODE.DESKTOP
            }
        };
        return {
            init: c.init,
            currentBP: c.returnCurrentBreakPoint,
            list: {
                xs: T1.constants.SCREEN_XTRASMALL,
                sm: T1.constants.SCREEN_SMALL,
                md: T1.constants.SCREEN_MEDIUM,
                lg: T1.constants.SCREEN_LARGE
            },
            currentMode: c.getScreenSizeMode
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.instantiator = function() {
        "use strict";
        var a = T1.constants
          , b = {
            currentBreakpoint: "",
            isPageInit: !0,
            initializerList: [{
                name: a.MOBILE_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_MOBILE,
                switchFnName: a.FUNCTION_NAME_SWITCH_MOBILE,
                isInitialized: !1,
                initEvent: a.MODE_INIT_MOBILE,
                switchEvent: a.MODE_SWITCH_MOBILE,
                breakpoint: a.BREAKPOINTS_MODE.MOBILE,
                amdModuleInitFlag: "initMobileInitialized"
            }, {
                name: a.DESKTOP_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_DESKTOP,
                switchFnName: a.FUNCTION_NAME_SWITCH_DESKTOP,
                isInitialized: !1,
                initEvent: a.MODE_INIT_DESKTOP,
                switchEvent: a.MODE_SWITCH_DESKTOP,
                breakpoint: a.BREAKPOINTS_MODE.DESKTOP,
                amdModuleInitFlag: "initDesktopInitialized"
            }, {
                name: a.XS_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_XS,
                switchFnName: a.FUNCTION_NAME_SWITCH_XS,
                isInitialized: !1,
                initEvent: a.MODE_INIT_XS,
                switchEvent: a.MODE_SWITCH_XS,
                breakpoint: a.BREAKPOINTS.MOBILE,
                amdModuleInitFlag: "initXsInitialized"
            }, {
                name: a.SM_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_SM,
                switchFnName: a.FUNCTION_NAME_SWITCH_SM,
                isInitialized: !1,
                initEvent: a.MODE_INIT_SM,
                switchEvent: a.MODE_SWITCH_SM,
                breakpoint: a.BREAKPOINTS.TABLET_PORTRAIT,
                amdModuleInitFlag: "initSmInitialized"
            }, {
                name: a.MD_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_MD,
                switchFnName: a.FUNCTION_NAME_SWITCH_MD,
                isInitialized: !1,
                initEvent: a.MODE_INIT_MD,
                switchEvent: a.MODE_SWITCH_MD,
                breakpoint: a.BREAKPOINTS.TABLET_LANDSCAPE,
                amdModuleInitFlag: "initMdInitialized"
            }, {
                name: a.LG_INITIALIZATION_STATUS_NAME,
                initFnName: a.FUNCTION_NAME_INIT_LG,
                switchFnName: a.FUNCTION_NAME_SWITCH_LG,
                isInitialized: !1,
                initEvent: a.MODE_INIT_LG,
                switchEvent: a.MODE_SWITCH_LG,
                breakpoint: a.BREAKPOINTS.DESKTOP,
                amdModuleInitFlag: "initLgInitialized"
            }],
            init: function() {
                T1.channels.global.subscribe(a.ON_BREAKPOINT_CHANGE, b.breakpointChange)
            },
            breakpointChange: function(c) {
                var d = null
                  , e = b.getInitializerObjByName(a.MOBILE_INITIALIZATION_STATUS_NAME)
                  , f = b.getInitializerObjByName(a.DESKTOP_INITIALIZATION_STATUS_NAME);
                c !== a.BREAKPOINTS.MOBILE && b.currentBreakpoint !== a.BREAKPOINTS.MOBILE && 0 !== b.currentBreakpoint.length || (c === a.BREAKPOINTS.MOBILE ? b.handleInitializerBreakpointFns(e) : b.handleInitializerBreakpointFns(f)),
                c === a.BREAKPOINTS.MOBILE ? d = b.getInitializerObjByName(a.XS_INITIALIZATION_STATUS_NAME) : c === a.BREAKPOINTS.TABLET_PORTRAIT ? d = b.getInitializerObjByName(a.SM_INITIALIZATION_STATUS_NAME) : c === a.BREAKPOINTS.TABLET_LANDSCAPE ? d = b.getInitializerObjByName(a.MD_INITIALIZATION_STATUS_NAME) : c === a.BREAKPOINTS.DESKTOP && (d = b.getInitializerObjByName(a.LG_INITIALIZATION_STATUS_NAME)),
                d && b.handleInitializerBreakpointFns(d),
                b.currentBreakpoint = c,
                b.isPageInit && (b.isPageInit = !1,
                T1.channels.mobile.publishAsync(a.PAGE_INITIALIZED, {
                    mode: b.isInitializedDesktop ? "desktop" : "mobile"
                }))
            },
            handleInitializerBreakpointFns: function(a) {
                b.handleInitBreakpointFn(a),
                b.handleSwitchBreakpointFn(a)
            },
            handleInitBreakpointFn: function(a) {
                a.isInitialized || (b.runFn(a.initFnName),
                a.isInitialized = !0,
                T1.channels.mobile.publishAsync(a.initEvent, {}))
            },
            handleSwitchBreakpointFn: function(a) {
                b.runFn(a.switchFnName),
                T1.channels.mobile.publishAsync(a.switchEvent, {
                    breakpoint: a.breakpoint
                })
            },
            runFn: function(a) {
                for (var b in T1)
                    if (T1[b][a])
                        try {
                            T1[b][a]()
                        } catch (e) {
                            console.log("Error running " + a + " " + b + ": " + e)
                        }
            },
            getInitializerObjByName: function(a) {
                return b.initializerList.filter(function(b) {
                    return b.name === a
                })[0]
            }
        };
        return {
            init: b.init,
            initializerList: b.initializerList,
            currentBreakpoint: b.currentBreakpoint
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.mobile = function() {
        "use strict";
        var a = {
            lastOpenedMobileSections: null,
            init: function() {
                T1.channels.mobile.subscribe(d.MOBILE_OPEN, c.openMobile),
                T1.channels.dialog.subscribe(d.PAGEOVERLAYER_REOPEN_MAINCONTENT, c.hideMobilePane)
            },
            openMobile: function(a) {
                if (a) {
                    var e = a.ids ? c.getSections(a.ids) : a.sections.filter("section");
                    e.length && (e.removeAttr("data-extended-param"),
                    a.param && e.attr("data-extended-param", a.param),
                    T1.channels.dialog.publish(d.PAGEOVERLAYER_OPEN, {
                        html: e,
                        inPage: !0,
                        preserveContent: !0,
                        styleClass: "white",
                        noResize: !0,
                        fitImages: !1,
                        noTransitions: !0
                    }),
                    e.each(function() {
                        var a = b(this);
                        a.prop("className") && (a.data("original-classes", a.prop("className")),
                        a.prop("className", a.prop("className").replace(/hidden-xs/g, "visible-xs")),
                        a.is("html5-iframe, html5-inpage") && a.prop("className", a.prop("className").replace(/hidden/g, "visible")))
                    }),
                    c.lastOpenedMobileSections = e)
                }
            },
            hideMobilePane: function() {
                c.lastOpenedMobileSections && (c.lastOpenedMobileSections.each(function() {
                    var a = b(this);
                    a.data("original-classes") && (a.prop("className", a.data("original-classes")),
                    a.removeData("original-classes"))
                }),
                c.lastOpenedMobileSections = null)
            },
            getSections: function(a) {
                for (var c = [], d = null, e = 0; e < a.length; e++)
                    d = b("#" + a[e]),
                    d && 0 === d.length && (d = b("[id^=" + a[e] + "]")),
                    d.length && c.push(d.eq(0));
                return b(c).map(function() {
                    return this.toArray()
                })
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.bootstrap = function() {
        "use strict";
        var a = {
            init: function() {
                T1.channels.tab.subscribe(d.TABS_SWITCH, c.onTabSwitch),
                T1.channels.global.subscribe(d.BOOTSTRAP_COLLAPSE_SHOWN, c.scrollToTheAnchor),
                T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, c.toggleMultiCollapse),
                c.initOnDemand()
            },
            initOnDemand: function(a) {
                a = a || b("body"),
                c.checkShownCollapse(a),
                c.checkHiddenCollapse(a)
            },
            checkShownCollapse: function(a) {
                b(a).on(d.BOOTSTRAP_COLLAPSE_SHOWN, ".collapse", function(a) {
                    T1.channels.global.publishAsync(d.BOOTSTRAP_COLLAPSE_SHOWN, {
                        $element: b(this),
                        eventInfo: a
                    })
                })
            },
            checkHiddenCollapse: function(a) {
                b(a).on("hidden.bs.collapse", ".collapse, .collapsing", function(a) {
                    T1.channels.global.publishAsync(d.BOOTSTRAP_COLLAPSE_HIDDEN, {
                        $element: b(this),
                        eventInfo: a
                    })
                })
            },
            onTabSwitch: function(a) {
                var d = b("#" + a);
                d.length && d.find('[data-toggle="collapse"][data-target][data-group-always-open="true"]').off("click", c.onCollapseButtonClick).on("click", c.onCollapseButtonClick)
            },
            onCollapseButtonClick: function(a) {
                b(b(this).data("target")).hasClass("in") && a.stopPropagation()
            },
            scrollToTheAnchor: function(a) {
                var b = a.$element
                  , c = b.is(a.eventInfo.target)
                  , e = b ? b.data("scroll-to-bs-shown") : null;
                "object" == typeof e && c && T1.channels.scrolling.publishAsync(d.SCROLL_TO, e)
            },
            toggleMultiCollapse: function(a) {
                for (var c = b(".collapse:not(.in)[data-uncollapse-on-break-point-change]"), d = 0; c.length > d; d++) {
                    var e = b(c[d])
                      , f = e.data("uncollapse-on-break-point-change");
                    if ("object" == typeof f) {
                        var g = f[a];
                        if (g)
                            for (var h = g.parent, i = g.target, j = e.closest(h), k = j.find(i), l = 0; k.length > l; l++)
                                b(k[l]).collapse("toggle")
                    }
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.scroll = function() {
        "use strict";
        var a = {
            init: function() {
                T1.channels.scrolling.subscribe(d.DISABLE_BODY_SCROLL, c.disableBodyScroll)
            },
            disableBodyScroll: function(a) {
                var c = b("#navigation li.active[class^='menu-item-level-']").length
                  , d = 1 === b(".material-box").length
                  , e = b(".material-box.active").length && d
                  , f = a.state || c || e;
                b("html").toggleClass(T1.constants.CLASS_NOSCROLL, !!f)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.loader = function() {
        "use strict";
        var a = {
            classes: {
                loading: "loading",
                message: "message",
                lazyLoading: "lazy-loader",
                lazyRunning: "running",
                transparent: "transparent",
                keepVisible: "keepVisible"
            },
            init: function() {
                T1.channels.dialog.subscribe(d.LOADING_START, c.loadingStart),
                T1.channels.dialog.subscribe(d.LOADING_COMPLETE, c.loadingDone),
                T1.channels.dialog.subscribe(d.LOADING_MESSAGE, c.loadingMessage)
            },
            loadingStart: function(a) {
                if (a || (a = {}),
                a.target) {
                    var d = a.lazyloader && "true" === T1.settings.useLazyLoading
                      , e = d && "true" === T1.settings.useLazyLoadingWaitPanel
                      , f = a.transparent || !1
                      , g = a.keepVisible || !1;
                    a.target.addClass(d ? c.classes.lazyLoading + (e ? " " + c.classes.lazyRunning : "") + " " + c.classes.loading : c.classes.loading),
                    a.target.toggleClass(c.classes.transparent, f),
                    a.target.toggleClass(c.classes.keepVisible, g)
                } else
                    b("div.full-screen-loading.loading").length < 1 && b("body").prepend(b('<div class="full-screen-loading loading"></div>'))
            },
            loadingDone: function(a) {
                a = a || {},
                a.target && a.target.length ? c.getLoader(a.target).removeClass(c.classes.loading + " " + c.classes.message + " " + c.classes.transparent + " " + c.classes.keepVisible) : b("div.full-screen-loading.loading").remove()
            },
            loadingMessage: function(a) {
                if (a.target && a.message) {
                    var b = c.getLoader(a.target)
                      , d = a.transparent || b.hasClass(c.classes.transparent) || !1;
                    b.length && (b.addClass(c.classes.message),
                    b.toggleClass(c.classes.transparent, d),
                    b.attr("data-message", a.message))
                }
            },
            getLoader: function(a) {
                return a.hasClass(c.classes.loading) ? a : a.closest("." + c.classes.loading)
            },
            isLoading: function(a) {
                return a.hasClass(c.classes.loading)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            isLoading: a.isLoading
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.placeHolder = function() {
        "use strict";
        var a = {
            activeBreakpoint: void 0,
            init: function() {
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPAND, c.onCollapsiblePanelExpand),
                T1.channels.dialog.subscribe(d.PAGEOVERLAYER_LOAD, c.onOverlayerLoad),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.onOverlayerLoad),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, c.onBreakpointChanged),
                T1.channels.global.subscribe(d.PLACEHOLDER_ROLLON, function(a) {
                    var b = T1.utilities.currentBreakpoint();
                    "xs" === b && c.rollOn(c.activeBreakpoint || b, a ? a.root : null)
                })
            },
            onBreakpointChanged: function(a) {
                c.activeBreakpoint && a === c.activeBreakpoint || (c.rollBack(),
                c.rollOn(a))
            },
            rollOn: function(a, d) {
                if (a) {
                    var e = "xs" === a ? '[data-placeholder]:not([data-breakpoints]), [data-placeholder][data-breakpoints~="xs"]' : '[data-placeholder][data-breakpoints~="' + a + '"]'
                      , f = {};
                    b(d).or("body").find(e).each(function() {
                        var d = b(this)
                          , e = d.data("placeholder");
                        e && !f[e] && (b(d.data().placeholder).each(function() {
                            var e = b(this)
                              , f = b('<figure class="placeholder"/>');
                            e.before(f),
                            d.append(e),
                            c.switchClasses(e, "hidden-" + a, "visible-placeholder"),
                            c.switchClasses(e, "hide", "visible"),
                            f.data({
                                placeholder: e
                            })
                        }),
                        c.activeBreakpoint = a,
                        f[e] = !0)
                    })
                }
            },
            rollBack: function() {
                c.activeBreakpoint && (b("figure.placeholder").each(function() {
                    var a = b(this);
                    a.data().placeholder && (c.switchClasses(a.data().placeholder, "visible-placeholder", "hidden-" + c.activeBreakpoint),
                    c.switchClasses(a.data().placeholder, "visible", "hide"),
                    a.replaceWith(a.data().placeholder))
                }),
                delete c.activeBreakpoint)
            },
            onCollapsiblePanelExpand: function(a) {
                "true" === T1.settings.useLazyLoading && (a.panel.is("[data-placeholder]") || a.panel.find("[data-placeholder]").length) && (a.panel.is(".lazy-loader") || a.panel.find(".lazy-loader").length) && b.safe("T1.lazyLoad.onDemand")(a.panel)
            },
            onOverlayerLoad: function(a) {
                "xs" === T1.utilities.currentBreakpoint() && a && (a.ajax || "box-ajax" === a.type) && c.rollOn(c.activeBreakpoint || T1.utilities.currentBreakpoint())
            },
            switchClasses: function(a, b, c) {
                a.toggleClass(c, a.hasClass(b)),
                a.toggleClass(b, !1)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.loadSave = function() {
        var a = {
            init: function() {
                T1.channels.carconfig.subscribe(T1.constants.LOADSAVE_GET, a.get),
                T1.settings && T1.settings.carconfig && T1.settings.carconfig.personal && T1.settings.carconfig.personal.Data && T1.settings.carconfig.personal.Data.Parameters && T1.waitForModules && T1.waitForModules(["materialBox"]).done(function() {
                    var a = T1.settings.carconfig.personal.Data.Parameters
                      , b = {};
                    a.FinanceQuoteID && (b.finance = a.FinanceQuoteID),
                    a.InsuranceQuoteID && (b.insurance = a.InsuranceQuoteID),
                    b.confirmationMessage = !0,
                    b.noMongoUpdate = !0,
                    fqs && fqs.set(b)
                })
            },
            translateKeys: {
                country: "Country",
                language: "Language",
                lang: "Language",
                brand: "Brand",
                modelid: "ModelID",
                model: "ModelID",
                carid: "CarID",
                colourid: "ExteriorColourID",
                exteriorcolourid: "ExteriorColourID",
                upholsteryid: "UpholsteryID",
                upholstery: "UpholsteryID",
                configurationid: "ConfigurationID",
                options: "Options",
                accessories: "Accessories",
                packs: "Packs",
                promotions: "Promotions",
                parameters: "Parameters"
            },
            cache: {
                _dfrCache: {},
                get: function(b) {
                    var c = a.cache[b.isPost ? "cacheKeyPostData" : "cachekey"](b);
                    return c && a.cache._dfrCache[c] || null
                },
                set: function(b, c, d, e) {
                    var f = a.cache[b.isPost && !d ? "cacheKeyPostData" : "cachekey"](b, e);
                    return f && (a.cache._dfrCache[f] = c),
                    c
                },
                cachekey: function(a, b) {
                    b || (b = {});
                    var c = a.tyCode || b.PersonalCode || b.ConfigurationCode || b.code;
                    return c ? c + "_" + (a.dataType || "json") + "_" + (a.type || "legacy") : null
                },
                cacheKeyPostData: function(a) {
                    try {
                        return JSON.stringify(a).replace(/[\\\-\"\'\=\[\]\{\}\:\,\s]/g, "")
                    } catch (e) {
                        return null
                    }
                }
            },
            get: function(c) {
                var d = b.Deferred();
                return c.isPost = c.configuration && !c.tyCode,
                c.type || (c.type = "legacy"),
                c.configuration && (c.configuration = a.transformConfiguration(c.configuration)),
                a.addQuotes(c).always(function(b) {
                    var e = a.cache.get(c) || null;
                    a.proxyDeferred(d, e || a.ajaxRequest(c)),
                    e || a.cache.set(c, d),
                    c.isPost && !e && d.done(a.cache.set.bind(this, c, d, !0))
                }),
                c.deferred = d,
                d
            },
            ajaxRequest: function(c) {
                var d = {}
                  , e = b.Deferred()
                  , f = null;
                if (c.isPost && !0 === c.quotes && delete c.quotes,
                c.tyCode && 0 === c.tyCode.indexOf("Per+") && (c.quotes || (c.quotes = !0),
                c.tyCode = c.tyCode.replace(/^Per\+/, "")),
                d.url = a.getUrl(c),
                c.isPost) {
                    if (c.configuration && c.quotes) {
                        var g = Object.resolve("configuration.Parameters", c) || Object.resolve("configuration.Personal.Parameters", c);
                        c.configuration.Parameters = b.extend(g, c.quotes)
                    }
                    d.method = "POST",
                    d.data = JSON.stringify(c.configuration),
                    d.contentType = "application/json",
                    d.dataType = "json"
                } else
                    d.method = "GET";
                return f = b.ajax(d).always(function(g) {
                    c.isPost || c.quotes || !g.error ? a.proxyDeferred(e, f) : (c.quotes = !0,
                    d = a.getUrl(c),
                    a.proxyDeferred(e, b.ajax(d)))
                }),
                e.done(a.transformLoadSaveResult.bind(this, c)),
                e
            },
            transformLoadSaveResult: function(a, b) {
                var c = "legacy" === a.type
                  , d = c ? "ConfigurationCode" : "code"
                  , e = c ? b.Personal && b.Personal.Code : b.personal && b.personal.code
                  , f = e || b[d]
                  , g = {};
                b[c ? "FacebookShare" : "facebookShare"] = "/carconfig/code/" + b[d],
                e && "" !== e && (b[c ? "PersonalCode" : "personalCode"] = e,
                g = {
                    qrCode: "/myqrcode/"
                }),
                b[c ? "QrCode" : "qrCode"] = (T1.settings.loadSaveService || T1.settings.loadSaveServer || "").replace(/\/\s*$/, "") + (g.qrCode || "/qrcode/") + f
            },
            addQuotes: function(a) {
                var c = b.Deferred();
                return !a.isPost || void 0 !== a.quotes && !0 !== a.quotes ? c.resolve(a.quotes || null) : (require(["financeQuoteService"], function(b) {
                    b.get().done(function(b) {
                        if (b.finance || b.insurance) {
                            var d = {};
                            b.finance && (d.FinanceQuoteID = b.finance),
                            b.insurance && (d.InsuranceQuoteID = b.insurance),
                            a.quotes = d,
                            c.resolve(d)
                        } else
                            c.resolve(null)
                    }).fail(function(a) {
                        c.reject(null)
                    })
                }),
                c)
            },
            proxyDeferred: function(a, b) {
                b.done(a.resolve),
                b.fail(a.reject)
            },
            getUrl: function(a) {
                return a || (a = {}),
                (T1.settings.loadSaveService || T1.settings.loadSaveServer || "").replace(/\/\s*$/, "") + (a.quotes ? "/myconfig/" : "/config/") + (a.tyCode || "find") + "/" + (a.dataType || "json") + "/" + (a.type || "legacy")
            },
            transformConfiguration: function(b) {
                "string" == typeof b && (b = (T1.utilities && T1.utilities.json && T1.utilities.json.parse || JSON.parse)(b));
                for (var c in b) {
                    var d = a.translateKeys[c.toLowerCase()];
                    d && d !== c && (b[d] = b[c],
                    delete b[c])
                }
                return b.Language || (b.Language = T1.settings.language),
                b.Country || (b.Country = T1.settings.carconfig ? T1.settings.carconfig.country : T1.settings.country),
                b.Brand || (b.Brand = "toyota"),
                b
            }
        };
        return {
            init: a.init,
            get: a.get
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.customButton = function() {
        "use strict";
        var a = {
            init: function() {
                var c = b(".btn-custom");
                c.size() && c.on(T1.utilities.clickEvent, function(b) {
                    a.dynamicFunction(b, this)
                })
            },
            dynamicFunction: function(a, c) {
                a.preventDefault();
                var d = b(c);
                Object.resolve(d.data("function"), window)(d.data("custom-args"))
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.errorHandler = function() {
        "use strict";
        var a = {
            isErrorHandled: !1,
            errorToken: "",
            init: function() {
                var b = a;
                window.onerror && (window.onerror = b.handleError)
            },
            handleError: function(b, c, d) {
                var e = a
                  , f = {};
                e.isErrorHandled || (e.isErrorHandled = !0,
                f.message = b,
                f.url = c,
                f.line = d,
                T1.utilities.isEnvironment.production || e.logError(f, !1),
                e.isErrorHandled = !1)
            },
            logError: function(a, c) {
                var d = "Error ";
                b.each(a, function(a, b) {
                    b && (d += ": " + b.toString() + "\n")
                }),
                console.log(d),
                c && T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                    customContainer: b("body"),
                    customText: d,
                    centerScreen: !0,
                    timeout: 2e3
                })
            }
        };
        return {
            init: a.init,
            handleError: a.handleError
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.scrollTracking = function() {
        "use strict";
        var a = {
            paused: !1,
            trackElements: null,
            scrollRecalcInterval: 500,
            trackId: 0,
            currentViewPortElements: {},
            lastRecalcTop: 0,
            lastTop: 0,
            win: null,
            viewp: null,
            scrollDirection: "down",
            trackClass: "scroll-track",
            init: function() {
                var c = a
                  , d = T1.constants;
                c.win = b(window),
                c.viewp = {
                    height: c.win.height()
                },
                T1.channels.global.subscribe(d.GLOBAL_SCROLL, c.onScroll),
                T1.channels.scrolling.subscribe(d.SCROLL_TRACK_ADD, c.addElements),
                T1.channels.scrolling.subscribe(d.SCROLL_TRACK_PAUSE, c.pause),
                T1.channels.scrolling.subscribe(d.SCROLL_TRACK_REMOVE, c.removeElement)
            },
            pause: function(a) {
                c.paused = a.paused,
                a.track && a.track.find("." + c.trackClass).add(a.track.hasClass(c.trackClass) ? a.track : null).each(function() {
                    c.trackScroll(c.getElement(b(this)))
                })
            },
            onScroll: function() {
                c.trackScroll()
            },
            trackScroll: function(a) {
                c.trackElements && !c.paused && (c.viewp.top = c.win.scrollTop(),
                c.viewp.bottom = c.viewp.top + c.viewp.height,
                c.scrollDirection = c.viewp.top > c.lastTop ? "down" : "up",
                c.lastTop = c.viewp.top,
                Math.abs(c.lastRecalcTop - c.viewp.top) > c.scrollRecalcInterval && (c.recalc(),
                c.lastRecalcTop = c.viewp.top),
                a ? c.checkElement(a) : c.checkElements())
            },
            checkElements: function() {
                var a = {};
                for (var b in c.trackElements)
                    c.checkElement(c.trackElements[b], a);
                c.currentViewPortElements = a
            },
            checkElement: function(a, b) {
                if (a)
                    for (var e = 0; e < a.conditions.length; e++) {
                        var f = a.conditions[e];
                        if ("string" == typeof f.threshold && -1 !== f.threshold.indexOf("%") && (f.threshold = a.el.outerHeight() * (parseInt(f.threshold.replace("%", ""), 10) / 100)),
                        a.offset.top - f.threshold < c.viewp.bottom && a.offset.bottom + f.threshold > c.viewp.top) {
                            if (!c.currentViewPortElements[a.scrollId + f.id]) {
                                var g = f.eventData || {
                                    element: a.el,
                                    visible: !0
                                };
                                if (-1 != f.direction.indexOf(c.scrollDirection))
                                    if (f.callback)
                                        setTimeout(f.callback, 0, a, {
                                            visible: !0
                                        });
                                    else {
                                        var h = f.event === d.SCROLL_TRACK_APPEAR ? "publish" : "publishAsync";
                                        T1.channels[h](f.event, g)
                                    }
                                f.once && !1 !== g.hasLoaded && (a.conditions.splice(e, 1),
                                0 === a.conditions.length && c.removeElement({
                                    scrollTrackId: a.scrollId
                                }))
                            }
                            f.persistent || ((b || c.currentViewPortElements)[a.scrollId + f.id] = !0)
                        } else
                            f.reactWhenLeavingView && c.currentViewPortElements[a.scrollId + f.id] && -1 != f.direction.indexOf(c.scrollDirection) && (f.callback ? f.callback(a, {
                                visible: !1
                            }) : T1.channels.publishAsync(f.event, {
                                element: a.el,
                                visible: !1
                            }))
                    }
            },
            recalc: function() {
                if (c.trackElements)
                    for (var a in c.trackElements)
                        c.recalcElement(c.trackElements[a])
            },
            recalcElement: function(a) {
                a.offset = a.el.offset(),
                a.offset.bottom = a.offset.top + a.el.outerHeight()
            },
            addElements: function(a) {
                for (var b = a.elements, d = a.options, e = 0; e < b.length; e++)
                    c.addElement(b.eq(e), d)
            },
            addElement: function(a, b) {
                var e = a.prop("scrollTrackId");
                c.trackElements || (c.trackElements = {}),
                e || (e = "scroll" + c.trackId,
                a.prop("scrollTrackId", e),
                c.trackId++),
                c.trackElements[e] || (c.trackElements[e] = {
                    scrollId: e,
                    offset: null,
                    el: a,
                    conditions: []
                }),
                b || (b = {}),
                c.trackElements[e].conditions.push({
                    id: "condition" + c.trackElements[e].conditions.length,
                    threshold: b.threshold || 0,
                    direction: b.direction || "updown",
                    once: !a.parents(".forms .tab-pane").length && (b.once || !1),
                    event: b.event || d.SCROLL_TRACK_APPEAR,
                    eventData: b.eventData,
                    callback: b.callback,
                    reactWhenLeavingView: b.reactWhenLeavingView || !1,
                    persistent: b.persistent || !1
                }),
                a.addClass(c.trackClass),
                c.recalcElement(c.trackElements[e])
            },
            getElement: function(a) {
                if (a && a.hasClass(c.trackClass))
                    for (var b in c.trackElements)
                        if (c.trackElements[b].el.is(a))
                            return c.trackElements[b];
                return null
            },
            removeElement: function(a) {
                c.trackElements && delete c.trackElements[a.scrollTrackId]
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.lazyLoad = function() {
        "use strict";
        var a = T1.constants
          , c = {
            options: "options",
            dataAttribute: "lazyload",
            containerClass: "lazy-loader",
            loadingItemClass: "lazy-loading",
            srcLoadedClass: "src-loaded",
            remainingItemsLoadingIgnoreList: ["slick-cloned"],
            breakpoints: [a.BREAKPOINTS.MOBILE, a.BREAKPOINTS.TABLET_PORTRAIT, a.BREAKPOINTS.TABLET_LANDSCAPE, a.BREAKPOINTS.DESKTOP, a.BREAKPOINTS.DESKTOP_WIDE],
            init: function() {
                T1.settings.mock && c.clearLoaders(),
                T1.channels.scrolling.subscribe(T1.constants.SCROLL_TRACK_APPEAR, c.appear),
                T1.channels.form.subscribe(a.NAVIGATION_FORM_UPDATE, function(a) {
                    c.onDemand(a.stepContainer.find(".lazy-loader"))
                }),
                "true" === T1.settings.useLazyLoading && ("true" === T1.settings.useLazyLoadingWaitPanel && c.clearLoaders(),
                c.addScrollTracking(),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, c.addScrollTracking),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(a) {
                    c.initializeOverlayer(a.container)
                }))
            },
            initializeOverlayer: function(a) {
                a.find("." + c.containerClass).each(function() {
                    c.onDemand(b(this))
                })
            },
            addScrollTracking: function() {
                T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                    elements: b("." + c.containerClass),
                    options: {
                        once: !0
                    }
                })
            },
            appear: function(a) {
                a = "object" == typeof a ? a : {};
                var d = a.element || a;
                if (d instanceof b) {
                    d.is("." + c.containerClass) || (d = d.find("." + c.containerClass));
                    var e = c.getLazyLoadItemsFor(d);
                    d.is(":visible") || a.onDemand ? e.length ? (c.loadImages(e, a),
                    a.hasLoaded = !0) : (c.clearLoaders(d),
                    a.hasLoaded = !1) : a.hasLoaded = !1
                }
            },
            getLazyLoadItemsFor: function(a) {
                var d, e = c.getLazyloadableItemSelector(), f = a.is(e);
                return f ? a : (d = a.find(e),
                d.filter(function() {
                    var d = b(this)
                      , e = c.itemIsFirstLevelChildOfLoader(d, a)
                      , f = c.itemIsPartOfIgnoreList(d);
                    return e && !f
                }))
            },
            getLazyloadableItemSelector: function() {
                return "[data-" + c.dataAttribute + "-mobile],[data-" + c.dataAttribute + "-desktop],[data-" + c.dataAttribute + "-xs],[data-" + c.dataAttribute + "-sm],[data-" + c.dataAttribute + "-md],[data-" + c.dataAttribute + "-lg]"
            },
            onDemand: function(a) {
                c.appear({
                    element: a,
                    onDemand: !0
                })
            },
            loadImages: function(a, b) {
                for (var d = 0; d < a.length; d++)
                    c.loadImage(a.eq(d), b)
            },
            clearLoaders: function(a) {
                var d = a || b("." + c.containerClass + ".running");
                d.length && d.removeClass("running")
            },
            waitForSrc: function(a, b) {
                a.node.addClass(c.loadingItemClass),
                a.image.bind("load error", c.srcLoaded(a.node)),
                c.setImgSrc(a.image, b)
            },
            setImgSrc: function(a, b) {
                a.attr("src", b)
            },
            waitForBackgroundImage: function(a, d) {
                var e = {
                    node: a,
                    image: b("<img/>")
                };
                c.waitForSrc(e, d),
                e.image.bind("load error", function() {
                    b(this).remove(),
                    c.setBackgroundImageSrc(a, d)
                })
            },
            setBackgroundImageSrc: function(a, b) {
                a.css("background-image", "url('" + b + "')")
            },
            srcLoaded: function(a) {
                return function() {
                    var b, d = a.closest("." + c.containerClass);
                    a.removeClass(c.loadingItemClass),
                    a.addClass(c.srcLoadedClass),
                    d.length && (b = c.getRemainingLazyloadingItems(d),
                    b.length || c.handleLoadedLazyloaderContainer(d))
                }
            },
            handleLoadedLazyloaderContainer: function(a) {
                T1.channels.scrolling.publish(T1.constants.LAZY_LOAD_COMPLETE, {
                    component: a
                }),
                a.removeClass("running")
            },
            getRemainingLazyloadingItems: function(a) {
                var d = c.getBreakpointAndModeInfo();
                return a.find("." + c.loadingItemClass + "[data-lazyload-" + d.breakpoint + "], ." + c.loadingItemClass + "[data-lazyload-" + d.mode + "]").filter(function() {
                    var d = b(this)
                      , e = c.itemIsFirstLevelChildOfLoader(d, a)
                      , f = c.itemIsPartOfIgnoreList(d);
                    return e && !f
                })
            },
            itemIsFirstLevelChildOfLoader: function(a, b) {
                var d = a.closest("." + c.containerClass);
                return b.is(d)
            },
            itemIsPartOfIgnoreList: function(a) {
                var b = !1
                  , d = "." + c.remainingItemsLoadingIgnoreList.join(",.");
                return a.closest(d).length && (b = !0),
                b
            },
            getLazyItemOptions: function(a) {
                var b = a.data()
                  , d = c.getBreakpointAndModeInfo();
                return b[c.dataAttribute + "-" + c.options + "-" + d.breakpoint] || b[c.dataAttribute + "-" + c.options + "-" + d.mode] || {}
            },
            loadImage: function(a, b) {
                b = "object" == typeof b ? b : {};
                var d = a.get(0)
                  , e = c.getLazyloadUrl(a);
                !e || "#" === e || (c.isAlreadyLoaded(d, e) && (b.noLoader = !0),
                a.is("img") || a.is("iframe") ? b.noLoader ? c.setImgSrc(a, e) : c.waitForSrc({
                    node: a,
                    image: a
                }, e) : a.is("figure") ? (a.attr("data-src", e),
                T1.figure.initOnDemand(a)) : c[b.noLoader ? "setBackgroundImageSrc" : "waitForBackgroundImage"](a, e),
                c.setLoadedItem(d, e))
            },
            isAlreadyLoaded: function(a, b) {
                for (var c = a.loaded || [], d = 0; d < c.length; d++)
                    if (c[d] === b)
                        return !0;
                return !1
            },
            setLoadedItem: function(a, b) {
                a.loaded = a.loaded || [],
                a.loaded.push(b)
            },
            getLazyloadUrl: function(a) {
                for (var b, d, e = c.getBreakpointAndModeInfo(), f = c.breakpoints.indexOf(e.breakpoint), g = c.getLazyloadBkptAttrValue(a, c.breakpoints[f]), h = 0; !g && ++h < c.breakpoints.length; )
                    b = f - h,
                    b >= 0 && (g = c.getLazyloadBkptAttrValue(a, c.breakpoints[b])),
                    g || (d = f + h) < c.breakpoints.length && (g = c.getLazyloadBkptAttrValue(a, c.breakpoints[d]));
                return g || c.getLazyloadBkptAttrValue(a, e.mode) || c.getLazyloadBkptAttrValue(a, "desktop")
            },
            getLazyloadBkptAttrValue: function(a, b) {
                var d = a ? a.data(c.dataAttribute + "-" + b) : void 0;
                return d || (a ? a.data(c.dataAttribute + "-all") : void 0)
            },
            getBreakpointAndModeInfo: function() {
                var a = {};
                return a.breakpoint = T1.breakpoints && T1.breakpoints.currentBP ? T1.breakpoints.currentBP() : "xs",
                a.mode = "xs" === a.breakpoint ? "mobile" : "desktop",
                a
            }
        };
        return {
            init: c.init,
            onDemand: c.onDemand
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.iframeresponsive = function() {
        "use strict";
        var a = {
            init: function() {
                var c = a;
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, c.resizeIframes),
                T1.channels.figure.subscribe(T1.constants.IFRAME_LOAD, c.initResponsiveIframe),
                b(window).on("message", c.resizeIframes)
            },
            initResponsiveIframe: function(c) {
                var d = a
                  , e = b(c);
                b(c).off("load", d.resizeIframes).on("load", e, d.resizeIframes),
                d.resizeIframes({
                    data: e
                })
            },
            resizeIframes: function(c) {
                c || (c = {});
                var d = a
                  , e = null;
                if ("message" === c.type)
                    (e = d.findIframe(c.originalEvent.source)) && (e.is(".overlayerContent > div > iframe") || e.height(c.originalEvent.data));
                else
                    for (var f = c.data || b(".iframe-responsive"), g = 0; g < f.length; g++)
                        e = f.eq(g),
                        "true" !== e.attr("crossdomain") && e.height(e.contents().find("body").height() + 60)
            },
            findIframe: function(a) {
                for (var c = b("iframe"), d = 0; d < c.length; d++)
                    if (c[d].contentWindow === a)
                        return c.eq(d)
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.request = function() {
        "use strict";
        var a = {
            parameters: {},
            materialBoxController: null,
            init: function() {
                b.requireModuleDependencies()
            },
            getQueryStringParameters: function(a) {
                a = "string" == typeof a ? a : b.materialBoxController && b.materialBoxController.getLastUrl() || document.URL;
                var c = decodeURIComponent(a).match(/\?.*#|\?.*$/g);
                if (b.parameters = {},
                c) {
                    for (var d = 0; d < c.length; d++)
                        c[d] = c[d].replace(/^\?|\/?#$/g, "");
                    for (var e = c.join("&"), f = e.split("&"), g = 0; g < f.length; g++) {
                        var h = f[g].split("=");
                        b.parameters[h[0].toString()] = h[1]
                    }
                }
                return b.parameters
            },
            getQueryStringParameter: function(a) {
                return b.parameters = b.getQueryStringParameters(),
                b.parameters[a]
            },
            setQueryStringParameter: function(a, c, d) {
                var e = a.indexOf("#")
                  , f = null
                  , g = a;
                e > -1 && (g = a.slice(0, e),
                f = a.slice(e));
                var h = b.getQueryStringParameters(g);
                return null !== d && void 0 !== d && "" !== d ? h[c] = d : delete h[c],
                g = g.split("?")[0],
                b.buildUrl(g, h, f)
            },
            buildUrl: function(a, b, c) {
                if (b && Object.keys(b).length > 0) {
                    var d = 0;
                    for (var e in b)
                        0 == d++ ? a += "?" : a += "&",
                        a += e + "=" + b[e];
                    c && (a += c)
                }
                return a
            },
            getDomainName: function() {
                return T1.settings.mock ? "//t1-dev-glen.herokuapp.com" : window.location.protocol + "//" + window.location.host
            },
            requireModuleDependencies: function() {
                requirejs(["t1-controller-materialBox"], function(a) {
                    b.materialBoxController = a
                })
            }
        }
          , b = a;
        return {
            init: a.init,
            getQueryStringParameter: a.getQueryStringParameter,
            getQueryStringParameters: a.getQueryStringParameters,
            getDomainName: a.getDomainName,
            setQueryStringParameter: a.setQueryStringParameter
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.tcc = function() {
        "use strict";
        var b = (Object.resolve("T1.settings.carconfig.urlContent") || "//t1-dev-carconfig.herokuapp.com").replace(/\/\s*$/, "")
          , c = {
            bucket: "",
            defined: {},
            reIsAbsolute: /^(\s)*(https?:)?\/\//i,
            components: {
                tccmo: {
                    selector: T1.constants.TCCMO_SELECTOR,
                    assets: {
                        scripts: "TCCMO/js/tcc-model-overview.min.js",
                        styles: "TCCMO/css/tcc-model-overview.css"
                    },
                    callback: {
                        channel: "tcc.modeloverview",
                        topic: "init"
                    }
                },
                tccccEngineGrade: {
                    selector: T1.constants.TCCCC_ENGINE_GRADE_SELECTOR,
                    data: function(a) {
                        return T1.ctx ? {
                            model: T1.ctx.model
                        } : {}
                    },
                    assets: {
                        scripts: {
                            tcceg: "TCCEG/js/tcc-enginegrades.min.js"
                        },
                        styles: "TCC-base/css/tcc-base.css, TCCEG/css/tcc-enginegrades.css"
                    },
                    callback: {
                        channel: "tcc.enginegrades",
                        topic: "init"
                    }
                },
                tccccCompare: {
                    assets: {
                        scripts: {
                            tcccc: "TCCC/js/tcc-compare.min.js"
                        },
                        styles: "TCC-base/css/tcc-base.css, TCCC/css/tcc-compare.css"
                    },
                    callback: {
                        channel: "tcc.compare",
                        topic: "init"
                    }
                },
                carconfig: {
                    selector: T1.constants.CARCONFIG_V8_SELECTOR,
                    data: function(a) {
                        return {
                            element: a.target,
                            content: T1.content.carconfig,
                            finance: T1.finance.carconfig,
                            settings: {
                                financeQuoteServiceJS: "financeQuoteService"
                            }
                        }
                    },
                    assets: {
                        scripts: {
                            carconfig: b + "/carconfig-v8/scripts/amd/carconfig.js"
                        },
                        styles: "TCCMO/css/tcc-model-overview.css, TCCEG/css/tcc-enginegrades.css, " + b + "/carconfig-v8/styles/ccv8.css"
                    },
                    callback: {
                        channel: T1.constants.CHANNEL_CARCONFIG,
                        topic: "init"
                    }
                },
                spin360: {
                    selector: "#spin360",
                    lazyload: !0,
                    assets: {
                        scripts: {
                            T1Spin: Object.resolve("T1.settings.spin360.url") || "/T1-360-Spin/js/T1Spin",
                            react: T1.constants.JS_REACT
                        },
                        styles: "/T1-360-Spin/css/360spin.min.css"
                    },
                    callback: function(a) {
                        if (a && a.target) {
                            var b = a.target.data && a.target.data("model") || T1.ctx.model
                              , c = "/api/cardb/spin360/" + b
                              , d = a.target.data && a.target.data("gradeId") || "";
                            $.ajax({
                                url: c
                            }).done(function(b) {
                                a.data.settings = {
                                    modelId: b.modelGuid,
                                    country: T1.settings.country,
                                    language: T1.settings.language,
                                    brand: T1.settings.carconfig.brand || "toyota",
                                    imagePath: T1.settings.carconfig.ccisPath,
                                    channel: {
                                        component: T1.channels.spin360,
                                        stats: T1.channels.statistics
                                    },
                                    showConfigureButton: "true" === T1.settings.spin360.showConfigureButton || !1,
                                    gradeId: d
                                },
                                a.data.spinData = b,
                                a.data.element = $(a.data.element),
                                postal.publish({
                                    channel: T1.channels.spin360,
                                    topic: T1.constants.SPIN360_LOAD,
                                    data: a.data
                                })
                            })
                        }
                    }
                }
            },
            init: function() {
                c.bucket = "//" + (T1.settings.webComponentsHost || "tme-webcomponents-dev.s3.amazonaws.com").replace(/^(\s)*(http(s)?:)?\/\/|\/(\s)*$/g, "") + "/",
                require.config({
                    map: {
                        "*": {
                            css: (T1.settings.S3BaseUrl || "").replace(/\/$/, "") + "/external.scripts/requireCss.min.js"
                        }
                    }
                }),
                c.listen(),
                c.scan()
            },
            listen: function() {
                T1.channels.tcc.subscribe(T1.constants.TCC_RENDER, c.render),
                T1.channels.tcc.subscribe(T1.constants.TCC_COMPARE, c.renderCompareOverlayer)
            },
            scan: function() {
                for (var a in c.components) {
                    var b = c.components[a];
                    if (b.selector) {
                        $(b.selector).each(function(c, d) {
                            b.lazyload ? T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                                elements: $(d),
                                options: {
                                    once: !0,
                                    event: T1.constants.TCC_RENDER,
                                    eventData: {
                                        name: a,
                                        target: d
                                    }
                                }
                            }) : T1.channels.tcc.publish(T1.constants.TCC_RENDER, {
                                name: a,
                                target: d
                            })
                        })
                    }
                }
            },
            getData: function(b) {
                var d = {
                    settings: {},
                    labels: {}
                }
                  , e = b.target.data()
                  , f = c.components[b.name];
                if (T1.settings && T1.settings[b.name] && (d.settings = T1.settings[b.name]),
                T1.labels && T1.labels[b.name] && (d.labels = T1.labels[b.name]),
                T1.data && T1.data[b.name] && a._.merge(d, T1.data[b.name]),
                f.data) {
                    var g = "function" == typeof f.data ? f.data(b) : f.data;
                    "object" == typeof g && a._.merge(d, g)
                }
                return a._.merge(d, e),
                b.data && a._.merge(d, b.data),
                d.culture || (d.culture = T1.settings.culture),
                !d.element && b.target.length && (d.element = b.target[0]),
                d
            },
            render: function(a) {
                a && a.target && a.name && (a.target = $(a.target),
                a.data = c.getData(a),
                c.require(a))
            },
            require: function(b) {
                var d = c.components[b.name] ? c.components[b.name].assets : {}
                  , e = [];
                T1.settings && T1.settings[b.name + "Js"] && (d.scripts = T1.settings[b.name + "Js"]),
                T1.settings && T1.settings[b.name + "Css"] && (d.styles = T1.settings[b.name + "Css"]),
                b.assets && a._.merge(d, b.assets),
                d.scripts || (d.scripts = []),
                d.styles || (d.styles = []),
                "string" == typeof d.scripts && (d.scripts = d.scripts.split(",")),
                "string" == typeof d.styles && (d.styles = d.styles.split(","));
                for (var f in d.scripts) {
                    var g = isNaN(f) ? f : (b.name + f).replace(/0$/, "")
                      , h = d.scripts[f];
                    if (!c.defined[g]) {
                        var i = {
                            paths: {}
                        };
                        i.paths[g] = "string" == typeof h ? (c.reIsAbsolute.test(h) ? h.replace(/^\s*/, "") : c.bucket + h.replace(/^\s*\/?/, "")).replace(/\.js(\s)*$/g, "") : h,
                        require.config(i),
                        c.defined[g] = !0
                    }
                    e.push(g)
                }
                $.each(d.styles, function(a, b) {
                    e.push("css!" + (c.reIsAbsolute.test(b) ? b.replace(/^\s*/, "") : c.bucket + b.replace(/^(\s)*(\/)?/, "")))
                }),
                require(e, c.callback(b))
            },
            callback: function(b) {
                return function() {
                    for (var d = [b], e = 0; e < arguments.length; e++)
                        d.push(arguments[e]);
                    var f = c.components[b.name] ? c.components[b.name].callback : null;
                    f && ("function" == typeof f && f.apply(this, d),
                    b.data || (b.data = {}),
                    f.channel && f.topic && postal.publish({
                        channel: f.channel,
                        topic: f.topic,
                        data: a._.merge(b.data, f.data)
                    })),
                    b.callback && b.callback.apply(this, d)
                }
            },
            renderCompareOverlayer: function(a) {
                var b = "tccCompare"
                  , c = $("#" + b);
                c.length || (c = $("<div></div>").attr({
                    id: b
                }).css({
                    "min-height": "100vh"
                })),
                T1.channels.dialog.publish(T1.constants.LOADING_START, {
                    target: c
                }),
                T1.channels.dialog.publish(T1.constants.PAGEOVERLAYER_OPEN, {
                    html: c,
                    addWhiteDiv: !0
                });
                var d = {};
                d.mode = a.mode || "grades",
                a.model && (d.model = a.model),
                d.preconfig = [],
                a[0] && d.preconfig.push(a[0]),
                a[1] && d.preconfig.push(a[1]),
                a[2] && d.preconfig.push(a[2]),
                T1.channels.tcc.publish(T1.constants.TCC_RENDER, {
                    name: "tccccCompare",
                    target: c,
                    data: d,
                    callback: function() {
                        T1.channels.dialog.publish(T1.constants.LOADING_COMPLETE, {
                            target: c
                        })
                    }
                })
            }
        };
        return {
            init: c.init,
            render: c.render
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.toast = function() {
        "use strict";
        var a = {
            content: null,
            init: function() {
                a.content = T1.labels ? T1.labels.toastText : "",
                T1.channels.dialog.subscribe(T1.constants.TOAST_CUSTOM, a.prepare),
                b(window).on("orientationchange", a.resetPos)
            },
            prepare: function(c) {
                if (c.customContainer) {
                    var d = a
                      , e = c.customContainer
                      , f = c.customText || a.content
                      , g = {
                        display: "none"
                    }
                      , h = c.timeout || !1
                      , i = c.tracking || {};
                    b(".toast", e).hide();
                    var j = b("<div/>");
                    if (c.removeDefaultClass || j.addClass("toast"),
                    c.customClass && j.addClass(c.customClass),
                    j.html(f),
                    j.css(g).appendTo(e),
                    !c.noPosition) {
                        var k = c && c.centerScreen ? d.centerScreen(j) : d.getPos(j, e);
                        j.css({
                            position: c && c.centerScreen ? "fixed" : "absolute",
                            top: c.top || k.y,
                            left: c.left || k.x
                        }),
                        c.css && j.css(c.css)
                    }
                    j.css({
                        cursor: "pointer"
                    }),
                    d.show(j, c.immediate, i.show),
                    h && "number" == typeof h ? setTimeout(function() {
                        d.hide(j, i.hide)
                    }, h) : e.on("mousedown touchstart", function() {
                        d.hide(j, i.hide)
                    })
                }
            },
            getPos: function(a, b) {
                var c = b.height() / 2 - a.innerHeight() / 2;
                return {
                    x: b.width() / 2 - a.innerWidth() / 2 + "px",
                    y: c + "px"
                }
            },
            centerScreen: function(c) {
                return a.getPos(c, b(window))
            },
            show: function(a, b, c) {
                b ? a.show() : a.fadeIn(T1.constants.ANIMATION_SPEED_FADE),
                c && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    extraData: c
                })
            },
            hide: function(a, c) {
                a.fadeOut(T1.constants.ANIMATION_SPEED_FADE, function() {
                    b(this).remove(),
                    c && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        extraData: c
                    })
                })
            },
            resetPos: function() {
                var c = a
                  , d = b(".toast")
                  , e = d.closest("section")
                  , f = c.getPos(d, e);
                d.css({
                    top: f.y,
                    left: f.x
                })
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.bubble = function() {
        "use strict";
        var a = {
            initDesktop: function() {
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.initOnDemand),
                c.initOnDemand()
            },
            initOnDemand: function() {
                var a = b("[data-bubble]");
                a.size() && a.off("click").on("click", c.toggle)
            },
            toggle: function(a) {
                var e = b(a.target)
                  , f = e.position()
                  , g = e.width()
                  , h = b("." + e.data("bubble"))
                  , i = h.hasClass(d.CLASS_ACTIVE);
                a.preventDefault(),
                c.hideAll(),
                h.css("left", f.left + g / 2 - 48),
                i || (h.addClass(d.CLASS_ACTIVE),
                T1.channels.bubble.publish(d.BUBBLE_ACTIVATED, {
                    el: h
                }))
            },
            hideAll: function() {
                var a = b(".bubble");
                a.size() && a.removeClass("active")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            initDesktop: a.initDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.compatibility = function() {
        "use strict";
        var a = {
            init: function() {
                "true" === T1.settings.showIncompatibleBrowser && T1.utilities.ieVersion() < 10 && a.showFallbackMessage()
            },
            showFallbackMessage: function() {
                T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                    customContainer: b("body"),
                    customText: T1.labels.wrongBrowser.incompatibleBrowser,
                    centerScreen: !0,
                    immediate: !0,
                    css: {
                        width: "80%",
                        left: "0",
                        "margin-left": "10%",
                        "margin-right": "10%"
                    },
                    tracking: {
                        show: {
                            event: {
                                eventclass: "componentevent",
                                category: "component",
                                componentname: "browser_warning",
                                action: "display_message",
                                value: "browser_warning"
                            }
                        },
                        hide: {
                            event: {
                                eventclass: "componentevent",
                                category: "component",
                                componentname: "browser_warning",
                                action: "click_function",
                                value: "close_msg"
                            }
                        }
                    }
                })
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.scrollTo = function() {
        "use strict";
        var a = {
            init: function() {
                b("body").on(T1.utilities.clickEvent, ".scrollTo", c.scrollTo),
                T1.channels.scrolling.subscribe(T1.constants.SCROLL_TO, c.scrollTo)
            },
            scrollTo: function(a, d) {
                var e = void 0 !== a.preventDefault
                  , f = b(e ? this : "body")
                  , g = e ? c.parseOptions(f.data("scrollTo") || f.data("scrollto")) : a;
                if (!d && g.responder && g.responder.one) {
                    return void b(g.responder.target || f).off(g.responder.one + ".scrollTo").one(g.responder.one + ".scrollTo", c.scrollTo.bind(this, a, !0))
                }
                if (g.parent || (g.parent = "body"),
                "null" != typeof g.jumpTo && void 0 !== g.jumpTo)
                    if (e && a.preventDefault(),
                    "number" == typeof g.jumpTo || g.top) {
                        var h = b(".overlayerContent").last()
                          , i = "number" == typeof g.jumpTo ? g.jumpTo : g.top || 0
                          , j = h.length ? h : b(document);
                        !1 === g.animation ? j.scrollTop(i) : j.scrollTo(i, T1.constants.ANIMATION_SPEED_SCROLL)
                    } else {
                        var k = b("#grade-explore-navs")
                          , l = b("#navigation")
                          , m = f.hasClass("main-navigation-hidden")
                          , n = {
                            interrupt: !0,
                            fail: function() {
                                c.enableScrollTracking()
                            },
                            onAfter: function() {
                                c.enableScrollTracking(),
                                T1.channels.global.publishAsync(T1.constants.GLOBAL_SWIPE)
                            },
                            offset: g.offset || 0
                        }
                          , o = b(g.jumpTo);
                        if (o.length) {
                            var p = b("#nav-secondary-level:visible").height() || 0;
                            if ("fixed" === k.css("position") ? (m || (p += l.height()),
                            n.offset -= p) : "fixed" === l.css("position") && (p += l.height(),
                            n.offset -= p),
                            g.onAfter && (n.onAfter = function() {
                                c.enableScrollTracking(b(g.jumpTo)),
                                T1.channels.global.publishAsync(Object.resolve(g.onAfter, T1), {
                                    source: f,
                                    target: b(g.jumpTo),
                                    options: g
                                })
                            }
                            ),
                            T1.utilities.isIOS()) {
                                var q = o.offset().top;
                                void 0 !== n.offset && (q += n.offset),
                                b(window).scrollTop(q).after(function() {
                                    T1.channels.global.publishAsync(T1.constants.GLOBAL_SWIPE)
                                })
                            } else {
                                var r = b(g.parent)
                                  , s = "complete" === document.readyState
                                  , t = r.size() && !r.parent().is(".inpage.overlayerWrapper") ? r : b("body");
                                b.safe("T1.lazyLoad.onDemand")(o),
                                c.disableScrollTracking(),
                                e || s ? setTimeout(function() {
                                    t.scrollTo(o, g.easing || 500, n)
                                }, 100) : b(window).load(function() {
                                    t.scrollTo(o, g.easing || 500, n)
                                })
                            }
                        }
                    }
            },
            disableScrollTracking: function() {
                T1.channels.scrolling.publish(d.SCROLL_TRACK_PAUSE, {
                    paused: !0
                })
            },
            enableScrollTracking: function(a) {
                setTimeout(function() {
                    T1.channels.scrolling.publish(d.SCROLL_TRACK_PAUSE, {
                        paused: !1,
                        track: a
                    })
                }, 100)
            },
            parseOptions: function(a) {
                if ("string" == typeof a)
                    try {
                        a = b.parseJSON(a)
                    } catch (e) {}
                return a || {}
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.inputSearch = function() {
        "use strict";
        var a = {
            init: function() {
                c.initOnDemand(),
                T1.channels.dialog.subscribe(d.PAGEOVERLAYER_LOAD, c.onOverlayerLoad),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.onOverlayerLoad),
                T1.channels.search.subscribe(d.INPUT_SEARCH_UPDATE, c.updateValue),
                T1.channels.global.subscribe(d.INPUT_SEARCH_INIT, c.initOnDemand),
                T1.channels.search.subscribe(d.INPUT_SEARCH_CHANGE, c.handleSearch),
                T1.channels.search.subscribe(d.INPUT_SEARCH_REQUEST, c.handleSearch)
            },
            initOnDemand: function(a) {
                b(a || "body").find(".input-search").each(function(a, d) {
                    var e = b(d);
                    if (0 === e.closest("#searchcomponent").length && !e.data("disableDefaultSearch")) {
                        var f = e.find('input[type="text"]')
                          , g = e.find("a:has(.icon-search)")
                          , h = e.find("a:has(.icon-remove)");
                        f.off("keypress", c.onSearchChange).on("keypress", c.onSearchChange),
                        f.off("keydown keyup", c.setValueState).on("keydown keyup", c.setValueState),
                        g.off("click", c.onSearchRequest).on("click", c.onSearchRequest),
                        h.off("click", c.clearSearch).on("click", c.clearSearch)
                    }
                })
            },
            onOverlayerLoad: function(a) {
                var b = a.el || a.container || null;
                c.initOnDemand(b)
            },
            onSearchChange: function(a) {
                c.fireEvent(a, d.INPUT_SEARCH_CHANGE)
            },
            onSearchRequest: function(a) {
                c.fireEvent(a, d.INPUT_SEARCH_REQUEST)
            },
            setValueState: function(a) {
                var c = b(a.target);
                c.closest(".input-search").toggleClass("has-value", !!c.val().length)
            },
            updateValue: function(a) {
                if (a.target) {
                    var b = a.target.find('input[type="text"]');
                    b.size() && (b.val(a.value || ""),
                    c.setValueState({
                        target: b
                    }),
                    c.fireEvent({
                        target: b
                    }, d.INPUT_SEARCH_CHANGE))
                }
            },
            clearSearch: function(a) {
                a.preventDefault(),
                a.stopPropagation(),
                b(a.target).closest(".input-search").removeClass("has-value").find("input.search").val(""),
                c.fireEvent(a, d.INPUT_SEARCH_CLEAR)
            },
            fireEvent: function(a, c) {
                var d = b(a.target);
                T1.channels.search.publish(c, {
                    event: a,
                    target: d,
                    container: d.closest(".input-search")
                })
            },
            handleSearch: function(a) {
                var b, c;
                if ("click" === (a.event.eventType || a.event.type))
                    a.event.preventDefault(),
                    a.event.stopPropagation(),
                    b = a.target.closest(".input-search").find("input.search");
                else {
                    if (13 !== a.event.which)
                        return;
                    b = a.target
                }
                c = b.val(),
                c.length > 0 && (T1.settings && T1.settings.urlSearch ? (window.open(T1.settings.urlSearch.replace(/^(\s*)|(\.json)?(\/)?(\s)*$/gi, "") + "/" + encodeURIComponent(c)),
                T1.channels.search.publish(d.SEARCH, {
                    q: c,
                    origin: "menu",
                    noneAjaxSearch: !0
                })) : T1.channels.hash.publishAsync(d.HASH_CHANGE, "/publish/search/origin=menu/q=" + c))
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.navigationRestyle = function() {
        "use strict";
        var a = {
            container: null,
            menuMain: null,
            isXsInstance: !1,
            isMdInstance: !1,
            collapserAnimationTime: 600,
            CLASS_ACTIVE: "active",
            CLASS_CURRENT: "current",
            scrollTop: 0,
            isSearchMaterialBoxOpen: !1,
            onKeypressTrigger: null,
            onKeypressMaterialBoxInstance: null,
            eventHandlers: {
                navCollapserOpened: function() {
                    $(window).on("hashchange", a.hashChanged)
                },
                navCollapserClosed: function() {
                    $(window).off("hashchange", a.hashChanged)
                }
            },
            toggleCtaActiveClass: function(b) {
                var c = a.container.find(b)
                  , d = c.parent();
                d.length && d.toggleClass(a.CLASS_ACTIVE)
            },
            init: function() {
                a.container = $("#navigation"),
                a.container && (a.menuMain = a.container.find(".menu"),
                a.initCta(),
                T1.channels.navigation.subscribe(T1.constants.NAV_COLLAPSER_OPENED, a.eventHandlers.navCollapserOpened),
                T1.channels.navigation.subscribe(T1.constants.NAV_COLLAPSER_CLOSED, a.eventHandlers.navCollapserClosed),
                T1.channels.navigation.subscribe(T1.constants.NAV_COLLAPSER_CLOSE, a.handleToggleCollapserClick))
            },
            initMobile: function() {
                var b = a.container.find(".toggle-menu")
                  , c = a.container.find(".toggle-collapser");
                a.isMdInstance = !1,
                a.unbindEvents(),
                b.on("click", a.handleToggleMenuClick),
                c.on("click", a.handleToggleCollapserClick),
                a.isXsInstance = !0
            },
            initDesktop: function() {
                var b = a.container.find(".toggle-collapser");
                a.isXsInstance = !1,
                a.unbindEvents(),
                b.on("click", a.handleToggleCollapserClickMd),
                a.isMdInstance = !0,
                setTimeout(a.animateCurrent, 5e3)
            },
            initCta: function() {
                a.container.find(".top-cta").off("click", a.handleTopCtaClick).on("click", a.handleTopCtaClick)
            },
            hashChanged: function() {
                var b = $.safe("T1.hash.getHash")() || ""
                  , c = "#" + T1.utilities.metaCharactersInSelector(b)
                  , d = $(c)
                  , e = 0
                  , f = 0;
                d.length && (a.closeAllMenus(),
                a.closeAllCollapsers(),
                e = d.offset().top,
                f = "fixed" === a.container.css("position") ? e - a.container.height() : e,
                location.hash = "",
                window.scrollTo(0, f))
            },
            bindDocumentEvents: function(b) {
                b = b || $(document),
                a.unbindDocumentEvents(b),
                b.on(T1.utilities.clickEvent + " keydown", a.handleDocumentEvent)
            },
            unbindDocumentEvents: function(b) {
                b = b || $(document),
                b.off(T1.utilities.clickEvent + " keydown", a.handleDocumentEvent)
            },
            unbindEvents: function() {
                var b = a.container.find(".toggle-menu")
                  , c = a.container.find(".toggle-collapser");
                b.off("click", a.handleToggleMenuClick),
                c.off("click", a.handleToggleCollapserClick),
                c.off("click", a.handleToggleCollapserClickMd),
                a.unbindDocumentEvents()
            },
            switchDesktop: function() {
                a.isMdInstance || a.initDesktop()
            },
            switchMobile: function() {
                a.isXsInstance || a.initMobile()
            },
            handleToggleMenuClick: function(b) {
                b.preventDefault();
                var c = !a.menuMain.hasClass(a.CLASS_ACTIVE)
                  , d = c ? {
                    open: !0
                } : {
                    close: !0
                }
                  , e = {
                    action: "menu",
                    value: (c ? "show" : "hide") + "_menu"
                };
                a.closeAllCollapsers($(".menu-item-level-1").first()),
                a.closeAllMenus(a.menuMain.find(".drop-menu")),
                a.menuMain.toggleClass(a.CLASS_ACTIVE),
                a.updateHamburgerMenuIcon(d),
                c && a.bindDocumentEvents(),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a.menuMain,
                    extraData: {
                        event: e
                    }
                })
            },
            updateHamburgerMenuIcon: function(b) {
                var c = a.container.find(".toggle-menu .icon");
                c.length && (b && b.open ? c.removeClass("icon-menu").addClass("icon-remove") : c.removeClass("icon-remove").addClass("icon-menu"))
            },
            handleToggleCollapserClick: function(b) {
                var c = $(b.currentTarget)
                  , d = c.hasClass("direct-link")
                  , e = c.parents(".menu-item-level-1")
                  , f = e.find(".icon-chevron-down, .icon-chevron-up")
                  , g = e.parents(".drop-menu")
                  , h = (g.scrollTop(),
                !e.hasClass(a.CLASS_ACTIVE));
                if (!d) {
                    b.preventDefault(),
                    a.closeAllCollapsers(e),
                    e.toggleClass(a.CLASS_ACTIVE),
                    f.toggleClass("icon-chevron-down"),
                    f.toggleClass("icon-chevron-up");
                    var i = $("body").hasClass("grade-explore");
                    h ? T1.channels.scrolling.publish(T1.constants.SCROLL_TO, {
                        jumpTo: i ? 0 : e.context || "body",
                        parent: "menu-level-1"
                    }) : (a.unbindDocumentEvents(),
                    T1.channels.scrolling.publish(T1.constants.SCROLL_TO, {
                        jumpTo: 0
                    })),
                    a.trackCollapseExpandLink(c, h)
                }
            },
            handleToggleCollapserClickMd: function(b) {
                var c = $(b.currentTarget)
                  , d = c.parent()
                  , e = c.hasClass("direct-link")
                  , f = ($("html"),
                !d.hasClass(a.CLASS_ACTIVE));
                e || (b.preventDefault(),
                a.closeAllMenus(),
                a.closeAllCollapsers(d),
                d.toggleClass(a.CLASS_ACTIVE),
                a.animateCurrent(),
                a.trackCollapseExpandLink(c, f),
                setTimeout(function() {
                    T1.channels.navigation.publish(f ? T1.constants.NAV_COLLAPSER_OPENED : T1.constants.NAV_COLLAPSER_CLOSED, c)
                }, a.collapserAnimationTime),
                f ? (a.scrollTop = $(document).scrollTop(),
                T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                    state: !0
                }),
                T1.breakpoints.currentBP() === T1.constants.BREAKPOINTS.DESKTOP && a.bindDocumentEvents()) : (T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                    state: !1
                }),
                window.scrollTo(0, a.scrollTop)))
            },
            handleSearchFieldOnKeypress: function(b) {
                b.keyCode === T1.constants.KEYCODE_ENTER && (a.searchActionExecuted = !0,
                a.executeSearch(b),
                a.onKeypressMaterialBoxInstance.close(),
                a.toggleCtaActiveClass(a.onKeypressTrigger))
            },
            handleTopCtaClick: function(b) {
                b.preventDefault();
                var c = $(b.target);
                c.hasClass("top-cta") || (c = c.parents(".top-cta")),
                a.onKeypressTrigger = c;
                var d = c.attr("href");
                if (a.closeAllMenus(d),
                "#mySearch" === d) {
                    if (a.container.find(".search-field input.search").val(""),
                    a.toggleCtaActiveClass(d),
                    !a.isSearchMaterialBoxOpen) {
                        a.isSearchMaterialBoxOpen = !0,
                        T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                            type: "box-alert-okcancel",
                            selector: "#mySearch",
                            styleClass: "dark small-header left-buttons free-layout",
                            title: a.container.find("#mySearch > h5").text(),
                            target: b.target,
                            onOpen: function() {
                                var b = this.container.find('input[type="text"]');
                                b.focus(),
                                a.onKeypressMaterialBoxInstance = this,
                                b.off("keyup", a.handleSearchFieldOnKeypress).on("keyup", a.handleSearchFieldOnKeypress)
                            },
                            onClose: function() {
                                a.toggleCtaActiveClass(c)
                            },
                            buttons: {
                                ok: {
                                    styleClass: "btn-action-primary",
                                    function: function() {
                                        this.container.find("#mySearch input.search").val().length && (a.searchActionExecuted = !0,
                                        a.executeSearch(b),
                                        this.close(),
                                        a.toggleCtaActiveClass(c))
                                    }
                                },
                                cancel: {
                                    styleClass: "btn-action-secondary",
                                    function: function() {
                                        this.close()
                                    }
                                }
                            }
                        });
                        var e = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function() {
                            e.unsubscribe(),
                            a.isSearchMaterialBoxOpen = !1,
                            a.searchActionExecuted || T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                                extraData: {
                                    event: {
                                        eventclass: "navevent",
                                        category: "component",
                                        componentname: "top_menu",
                                        action: "search-box",
                                        value: "close"
                                    }
                                }
                            })
                        })
                    }
                } else if ("#myLanguage" === d) {
                    $('#myLanguage input[type="radio"][data-language="' + T1.settings.language.toUpperCase() + '"]').prop("checked", !0),
                    a.languageSelectionActionExecuted = !1,
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        type: "box-alert-okcancel",
                        selector: "#myLanguage",
                        styleClass: "dark small-header left-buttons free-layout",
                        title: a.container.find("#myLanguage > h5").text(),
                        target: b.target,
                        buttons: {
                            ok: {
                                styleClass: "btn-action-primary",
                                function: function() {
                                    var b = this.container.find('.language-selector input[type="radio"]:checked');
                                    b.data("language") !== T1.settings.language.toUpperCase() && (a.languageSelectionActionExecuted = !0,
                                    location.href = b.val(),
                                    a.track("set_language")),
                                    this.close()
                                }
                            },
                            cancel: {
                                styleClass: "btn-action-secondary",
                                function: function() {
                                    this.close()
                                }
                            }
                        }
                    });
                    var e = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function() {
                        e.unsubscribe(),
                        a.languageSelectionActionExecuted || a.track("close")
                    })
                } else {
                    var f = a.container.find(d)
                      , g = f.parent();
                    if (a.closeAllCollapsers(),
                    f.length > 0 && "dropdown" === c.data("toggle")) {
                        var h = !g.hasClass(a.CLASS_ACTIVE);
                        c.attr("data-bt-state", h ? "" : "collapse"),
                        h && a.bindDocumentEvents()
                    }
                    g.toggleClass(a.CLASS_ACTIVE)
                }
            },
            handleDocumentEvent: function(b) {
                if ("click" === b.type || "touchend" === b.type) {
                    $(b.target).parents("#navigation").length < 1 && (a.closeAllMenus(),
                    a.closeAllCollapsers())
                } else
                    "keydown" === b.type && b.keyCode === T1.constants.KEYCODE_ESC && (a.closeAllMenus(),
                    a.closeAllCollapsers())
            },
            executeSearch: function(a) {
                var b, c = $(".material-box input.search"), d = c.val();
                if ("keypress" === a.type) {
                    if (13 !== a.which)
                        return;
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_CLOSE)
                }
                d.length && (T1.settings && T1.settings.urlSearch ? (b = T1.settings.urlSearch.replace(/^(\s*)|(\.json)?(\/)?(\s)*$/gi, "") + "/" + encodeURIComponent(d),
                T1.settings.OpenSearchResultsInSameTab ? window.location.href = "//" + window.location.hostname + b : window.open(b),
                T1.channels.search.publish(T1.constants.SEARCH, {
                    q: d,
                    origin: "menu",
                    noneAjaxSearch: !0
                })) : T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, "/publish/search/origin=menu/q=" + d))
            },
            closeAllMenus: function(b) {
                var c = a.container.find(".drop-menu").not(b)
                  , d = $("html");
                c.removeClass(a.CLASS_ACTIVE),
                c.parent().removeClass(a.CLASS_ACTIVE),
                d.hasClass(T1.constants.CLASS_NOSCROLL) && (T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                    state: !1
                }),
                window.scrollTo(0, a.scrollTop)),
                a.updateHamburgerMenuIcon({
                    close: !0
                }),
                a.unbindDocumentEvents()
            },
            closeAllCollapsers: function(b) {
                var c = a.container.find(".menu-item-level-1").not(b)
                  , d = c.find(".toggle-collapser .icon-chevron-up")
                  , e = $("html");
                c.removeClass(a.CLASS_ACTIVE),
                d.removeClass("icon-chevron-up").addClass("icon-chevron-down"),
                e.hasClass(T1.constants.CLASS_NOSCROLL) && (T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                    state: !1
                }),
                window.scrollTo(0, a.scrollTop)),
                setTimeout(function() {
                    T1.channels.navigation.publish(T1.constants.NAV_COLLAPSER_CLOSED, c)
                }, a.collapserAnimationTime)
            },
            animateCurrent: function() {
                a.container.find(".menu-item-level-1.current").addClass("animate")
            },
            track: function(a) {
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    extraData: {
                        event: {
                            eventclass: "navevent",
                            category: "component",
                            componentname: "top_menu",
                            action: "language",
                            value: a
                        }
                    }
                })
            },
            trackCollapseExpandLink: function(a, b) {
                a.attr("data-bt-state", b ? "" : "collapse"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a
                })
            }
        };
        return {
            init: a.init,
            initXs: a.initMobile,
            initSm: a.initMobile,
            initMd: a.initMobile,
            initLg: a.initDesktop,
            switchXs: a.switchMobile,
            switchSm: a.switchMobile,
            switchMd: a.switchMobile,
            switchLg: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.mainfocusR2 = function() {
        "use strict";
        function a(a) {
            function d() {
                var a = m.find(".spin.exterior");
                a.length && (t.size.width = a.width(),
                t.size.height = Math.floor(a.width() / 2),
                a.find(".spritespin-instance").css({
                    width: t.size.width,
                    height: t.size.height
                }))
            }
            function e() {
                if (c.carConfigCta.length) {
                    var a = "#" + T1.constants.URL_CAR_CONFIG_OVERLAYER;
                    a += "modelid=" + T1.ctx.modelId + "/",
                    a += "carid=" + t.carId + "/",
                    a += "colour=" + s,
                    c.carConfigCta.attr("href", a)
                }
            }
            function f(a) {
                a.target.hasClass("spin") && a.target.hasClass("exterior") && (o.hide(),
                m.find(".spinner").show())
            }
            function g(a) {
                a.preventDefault && a.preventDefault(),
                h(b(this).attr("data-color-name") || "N/A"),
                t.carId = b(this).attr("data-car-code") || "",
                t.color = b(this).attr("data-color-code"),
                s = b(this).attr("data-color-guid"),
                i(),
                k(),
                e(),
                o.show(),
                m.find(".spinner").hide(),
                q.removeClass("active"),
                b(this).addClass("active")
            }
            function h(a) {
                r.length && r.text(a)
            }
            function i(a) {
                if (t.model && t.carId) {
                    var c = b.safe("T1.utilities.modelMapping.getModelData")(t.model)
                      , d = "true" === T1.settings.enableCarDbTokens && c ? c.token : null;
                    a = a || {},
                    p = T1.settings.CCISHost.replace(/\/$/g, "") + "/" || "//t1-ccis.toyota-europe.com/",
                    p += d ? "product-token/" + d + "/" : "",
                    p += "vehicle/" + (d ? "" : t.model + "/") + t.carId + "/",
                    p += "width/555/",
                    p += "height/277/",
                    a.scale && (p += "scale-mode/1/"),
                    p += "padding/0,0,0,0/",
                    m.css("background-color") && (p += "background-colour/" + t.backgroundColor + "/"),
                    p += "day-exterior-[ViewAngle]_[ColorCode].jpg"
                } else
                    p = null;
                return p
            }
            function j() {
                var a = Math.floor(l / 10)
                  , b = p;
                if (T1.settings && T1.settings.mock)
                    switch (b = "https://images.toyota-europe.com/eu/vehicle/ag/[ModelCode]/width/555/height/277/scale-mode/1/padding/0/background-colour/fff/image-quality/70/day-exterior-[ViewAngle]_[ColorCode].jpg",
                    t.color) {
                    case "1e7":
                        b = b.replace("[ModelCode]", "199d3e26-a225-4d70-b334-f3937ade90e1");
                        break;
                    default:
                        b = b.replace("[ModelCode]", "62c7d1bc-b9aa-4dcf-802e-da86d8f95ed7")
                    }
                else
                    b || (b = i());
                try {
                    return b = b.replace("[ViewAngle]", a.toString(10)),
                    b = b.replace("[ColorCode]", t.color)
                } catch (c) {
                    console.log(c)
                }
            }
            function k() {
                var a = "";
                if (!(a = j()))
                    return void o.css("visibility", "hidden");
                var b = new Image;
                b.onload = function() {
                    o.attr("src", this.src)
                }
                ,
                b.src = a,
                o.css("visibility", "")
            }
            var l = 270
              , m = a
              , n = m.find(".carexterior")
              , o = n.find("img")
              , p = null
              , q = n.find(".colors .color")
              , r = n.find(".active-color-name")
              , s = q.filter(".active").attr("data-color-guid")
              , t = {
                model: T1.ctx.model,
                carId: q.filter(".active").attr("data-car-code") || "",
                element: b("#mainfocus-specs.r-2 .carexterior .spin.exterior"),
                backgroundColor: c.rgb2hex(m.css("background-color")),
                color: q.filter(".active").attr("data-color-code") || "",
                size: {
                    width: 556,
                    height: 278
                },
                startAngle: l,
                preventLoader: !0,
                renderType: "image",
                frameTime: 100
            };
            q.on("click", g),
            e(),
            d(),
            T1.channels.dialog.subscribe(T1.constants.LOADING_COMPLETE, f),
            T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, d)
        }
        var c = {
            mainfocusSpecs: null,
            carConfigCta: null,
            exteriorSpin: null,
            init: function() {
                T1.settings.mock && !T1.ctx && (T1.ctx = {
                    model: "aygo",
                    modelId: "813b0db9-bca0-4893-9167-cc0c4f69cfc2"
                }),
                c.initMainfocusSpecifications()
            },
            initMainfocusSpecifications: function() {
                c.mainfocusSpecs = b("#quickspecs"),
                c.mainfocusSpecs.length && (c.carConfigCta = c.mainfocusSpecs.find(".btn-car-configurator"),
                c.exteriorSpin = new a(c.mainfocusSpecs))
            },
            rgb2hex: function(a, b) {
                function c(a) {
                    return ("0" + parseInt(a).toString(16)).slice(-2)
                }
                return b = b || !1,
                /^#[0-9A-F]{6}$/i.test(a) ? a : (a = a.match(/^rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)$/),
                (b ? "#" : "") + c(a[1]) + c(a[2]) + c(a[3]))
            }
        };
        return {
            init: c.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.focusimage = function() {
        "use strict";
        var a = {
            mainfocus: [],
            mainfocusMaterialBox: [],
            footfocus: {
                element: null,
                heroUnit: null,
                mobileLoaded: !1,
                desktopLoaded: !1
            },
            mode: null,
            init: function() {
                T1.channels.scrolling.subscribe(d.FOCUSIMAGE_MOBILE_LOAD, c.setMobileImage),
                T1.channels.dialog.subscribe(d.MATERIALBOX_MAINFOCUS, c.setMaterialBoxMainFocusImage),
                T1.channels.media.subscribe(d.CAROUSEL_CREATED, c.onCarouselCreated),
                b(".mainfocus").each(function() {
                    var a = c.createFocusObject(b(this));
                    if (a.element.length) {
                        c.mainfocus.push(a);
                        var e = a.element.find(".cta-button");
                        if (e.length)
                            for (var f = 0; f < e.length; f++) {
                                var g = b(e[f])
                                  , h = parseInt(g.data("top-position"))
                                  , i = parseInt(g.data("left-position"));
                                g.css({
                                    left: i + "%",
                                    top: h + "%",
                                    "margin-left": "-" + g.width() / 2 + "px",
                                    "margin-top": "-" + g.height() / 2 + "px"
                                }),
                                g.fadeIn(d.ANIMATION_SPEED_FADE)
                            }
                        c.setMainfocusVisibility(a),
                        T1.channels.global.subscribe(d.GLOBAL_SCROLL, function() {
                            c.setMainfocusVisibility(a)
                        }),
                        c.disclaimerRepositioning(a),
                        c.setYoutubeLinks(a)
                    }
                }),
                c.footfocus.element = b("#footfocus"),
                c.footfocus.element.length && (c.footfocus.heroUnit = c.footfocus.element.find(".hero-unit"),
                c.setFootfocusHeroUnitOrientationClass(),
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, c.setFootfocusHeroUnitOrientationClass),
                T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, c.setFootfocusHeroUnitOrientationClass)),
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, function() {
                    for (var a = 0; a < c.mainfocus.length; a++)
                        c.mainfocus[a].element.length && c.setTextPosition(c.mainfocus[a])
                })
            },
            onCarouselCreated: function(a) {
                var b, d, e = a.closest("#mainfocus");
                "mobile" === c.mode && e.length && (b = !!e.closest(".overlayerWrapper").length,
                d = c.createFocusObject(e),
                c.setMobileMainfocus(d, b))
            },
            createFocusObject: function(a) {
                var b = {
                    element: null,
                    heroUnit: null,
                    carousel: null,
                    isRevision2: !1
                };
                return b.element = a,
                a.length && (b.isRevision2 = a.hasClass("r-2"),
                b.carousel = a.find(".carousel-container"),
                b.heroUnit = a.find(".hero-unit")),
                b
            },
            searchFocusObject: function(a) {
                for (var b = 0; b < c.mainfocus.length; b++)
                    if (c.mainfocus[b].element && c.mainfocus[b].element.is(a))
                        return c.mainfocus[b];
                return null
            },
            setYoutubeLinks: function(a) {
                var c = a.element.find(".youtube-overlayer");
                c.length && c.on("click", function(a) {
                    a.preventDefault(),
                    a.stopPropagation();
                    var c = b(this);
                    T1.channels.hash.publishAsync(d.HASH_ADD, "/youtube/" + c.data("id"))
                })
            },
            setMaterialBoxMainFocusImage: function(a) {
                a && a.length && (c.mainfocusMaterialBox = [],
                a.each(function() {
                    var a = c.createFocusObject(b(this));
                    a.element.length && a.heroUnit && a.heroUnit.length && (c.mainfocusMaterialBox.push(a),
                    "desktop" === c.mode ? c.setDesktopMainfocus(a, !0) : c.setMobileMainfocus(a, !0))
                }))
            },
            disclaimerRepositioning: function(a) {
                var c = a.element.find(".disclaimer:not(.hidden-xs)")
                  , d = c.find(".disclaimer-close")
                  , e = a.element.find(".disclaimer-view");
                c && c.length && e.length && d.length && (e.on("click", function() {
                    var a = T1.utilities.viewport.getCurrentBp()
                      , d = b(".maincontent");
                    if ("xs" !== a && "sm" !== a && d.length) {
                        e.css("display", "none");
                        var f = Math.min(b(window).height(), d.offset().top)
                          , g = c.offset().top + c.outerHeight() - f;
                        g > 0 && c.css("transform", "translateY(" + -1 * g + "px)"),
                        c.css({
                            opacity: 1,
                            display: "block"
                        })
                    }
                }),
                d.on("click", function() {
                    c.css({
                        opacity: "",
                        transform: ""
                    })
                }))
            },
            setFootfocusHeroUnitOrientationClass: function() {
                c.footfocus.heroUnit && c.footfocus.heroUnit.length && (T1.utilities.viewport.isPortrait() ? c.footfocus.heroUnit.addClass("portrait") : c.footfocus.heroUnit.removeClass("portrait"))
            },
            setFootfocusVisibility: function() {
                if (c.footfocus.element && c.footfocus.element.length) {
                    var a = T1.utilities.viewport.isElementInViewport(c.footfocus.element) ? "visible" : "";
                    c.footfocus.element.css("visibility", a)
                }
            },
            setMainfocusVisibility: function(a) {
                if (a.element && a.element.length) {
                    var b = T1.utilities.viewport.isElementInViewport(a.element) ? "" : "hidden";
                    a.element.css("visibility", b)
                }
            },
            setDesktopMainfocus: function(a, b) {
                if (a.element && a.element.length)
                    if (c.hideMobileImages(a.element),
                    a.carousel && a.carousel.length)
                        a.carousel.removeClass("mobile"),
                        a.carousel.find(".section-homepage-background").length ? a.carousel.find(".section-homepage-background").css("height", "") : a.isRevision2 && a.carousel.find(".item .background").css("background-image", "");
                    else if (a.heroUnit && a.heroUnit.length) {
                        var d = a.heroUnit.data("background-desktop") || a.heroUnit.data("background-mobile") || "";
                        a.heroUnit.removeClass("mobile"),
                        b && d ? a.heroUnit.css({
                            "background-image": "url('" + d + "')",
                            position: "static"
                        }) : a.isRevision2 || a.element.hasClass("filters") || (d = d || a.heroUnit.data("lazyload-desktop") || "",
                        a.heroUnit.hasClass("background") || "" === d || a.heroUnit.css("background-image", "url('" + d + "')"))
                    }
            },
            switchDesktop: function() {
                var a;
                for (c.mode = "desktop",
                a = 0; a < c.mainfocus.length; a++)
                    c.setDesktopMainfocus(c.mainfocus[a]);
                for (a = 0; a < c.mainfocusMaterialBox.length; a++)
                    c.setMobileMainfocus(c.mainfocusMaterialBox[a], !0);
                c.footfocus.element && c.footfocus.element.length && c.footfocus.heroUnit.length && (c.footfocus.heroUnit.removeClass("mobile"),
                c.hideMobileImages(c.footfocus.element)),
                T1.channels.global.publish(d.GLOBAL_SCROLL, {
                    initialScroll: !0
                }),
                "true" !== T1.settings.useLazyLoading && c.loadFootfocus()
            },
            setMobileMainfocus: function(a, d) {
                if (a.element && a.element.length)
                    if (a.heroUnit && a.heroUnit.length)
                        a.isRevision2 || a.element.hasClass("filters") || a.heroUnit.addClass("mobile"),
                        d ? (a.heroUnit.css("background-image", ""),
                        c.setMobileImage(a.heroUnit),
                        c.showMobileImages(a.element)) : a.isRevision2 || (c.setMobileImage(a.element.find(".hero-unit")),
                        c.showMobileImages(a.element));
                    else if (a.carousel && a.carousel.length) {
                        a.carousel.addClass("mobile");
                        for (var e = a.carousel.find(".item .background"), f = e.length - 1; f >= 0; f--)
                            c.setMobileImage(b(e[f]));
                        c.showMobileImages(a.element)
                    }
            },
            switchMobile: function() {
                var a;
                for (c.mode = "mobile",
                a = 0; a < c.mainfocus.length; a++)
                    c.setMobileMainfocus(c.mainfocus[a]);
                for (a = 0; a < c.mainfocusMaterialBox.length; a++)
                    c.setMobileMainfocus(c.mainfocusMaterialBox[a], !0);
                c.footfocus.element.length && c.footfocus.heroUnit.length && (c.footfocus.heroUnit.addClass("mobile"),
                c.setMobileImage(c.footfocus.heroUnit),
                c.showMobileImages(c.footfocus.element)),
                T1.channels.global.publish(d.GLOBAL_SCROLL, {
                    initialScroll: !0
                }),
                "true" !== T1.settings.useLazyLoading && c.loadFootfocus()
            },
            setMobileImage: function(a) {
                var d = "";
                0 === a.find("img.mobile-image").length && (void 0 !== a.data("lazyload-mobile") ? a.hasClass("background") || a.hasClass("article-container-foot-parallax") ? d = b('<img class="mobile-image" data-lazyload-desktop="' + a.data("lazyload-mobile") + '" src="/images/1x1.gif" />') : a.css("background-image", "url('" + a.data("lazyload-mobile") + "')") : void 0 !== a.data("background-mobile") && (a.hasClass("section-homepage-background") ? (a.css("background-image", "url('" + a.data("background-mobile") + "')"),
                a.css("height", a.parent().parent().height() + "px")) : a.closest(".mainfocus").hasClass("r-2") ? a.css("background-image", "url('" + a.data("background-mobile") + "')") : d = b("<img />", {
                    class: "mobile-image",
                    src: a.data("background-mobile")
                })),
                "" !== d && d.prependTo(a),
                a.waitForImages().done(function() {
                    var b = c.searchFocusObject(a.closest(".mainfocus"));
                    b && c.setTextPosition(b)
                }))
            },
            showMobileImages: function(a) {
                var b = a.find("img.mobile-image");
                b.length && b.show()
            },
            hideMobileImages: function(a) {
                var b = a.find("img.mobile-image");
                b.length && b.hide()
            },
            setTextPosition: function(a) {
                if (a.heroUnit.length && !0 === a.heroUnit.hasClass("hero-medium")) {
                    var b = a.heroUnit.find("header");
                    if ("mobile" === c.mode) {
                        var d = a.heroUnit.height() / 2 - b.height() / 2;
                        b.css("margin-top", d + "px")
                    } else
                        b.css("margin-top", "0px")
                }
            },
            loadFootfocus: function() {
                "mobile" === c.mode && !1 === c.footfocus.mobileLoaded && c.footfocus.heroUnit ? (T1.lazyLoad.onDemand(c.footfocus.heroUnit.find("img")),
                c.footfocus.mobileLoaded = !0) : "desktop" === c.mode && !1 === c.footfocus.desktopLoaded && c.footfocus.heroUnit && (T1.lazyLoad.onDemand(c.footfocus.heroUnit),
                c.footfocus.desktopLoaded = !0)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            setMobileImage: a.setMobileImage,
            switchDesktop: a.switchDesktop,
            switchMobile: a.switchMobile,
            setFootfocusVisibility: a.setFootfocusVisibility
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.googleServices = function() {
        "use strict";
        var a = {
            eventsStack: {},
            init: function() {
                c.places.init(),
                c.reCaptcha.init()
            },
            getSearchableCountry: function() {
                return T1.settings.dealer.alternativeCountry || T1.settings.country.toUpperCase()
            },
            places: {
                postalCodeData: {},
                suggestClass: "suggest-places",
                suggestListClass: "autocomplete-suggestions",
                service: null,
                events: {},
                init: function() {
                    "true" === T1.settings.enablePlacesSuggest && (T1.channels.google.subscribe(d.GOOGLE_PLACE_LOAD, c.places.initAutoComplete),
                    T1.channels.google.subscribe(d.GOOGLE_PLACE_ENABLE, c.places.enable),
                    T1.channels.dialog.subscribe(d.PAGEOVERLAYER_LOAD, c.places.initOverlayer),
                    T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.places.initOverlayBox),
                    T1.channels.dialog.subscribe(d.OVERLAY_DROP_OPENED, c.places.initOverlayBox),
                    T1.channels.dialog.subscribe(d.PAGEOVERLAYER_CLOSED, c.places.overlayBoxClosed),
                    T1.channels.dialog.subscribe(d.MATERIALBOX_CLOSED, c.places.overlayBoxClosed),
                    T1.channels.dialog.subscribe(d.OVERLAY_DROP_CLOSED, c.places.overlayBoxClosed),
                    c.places.trackSuggestPlaces())
                },
                initAutoComplete: function(a, b) {
                    c.maps.loaded ? (c.places.createService(),
                    c.places.createAutocompleteFields(a.element)) : (c.maps.addListener("load", function() {
                        c.places.createService(),
                        c.places.createAutocompleteFields(a.element)
                    }),
                    c.maps.init())
                },
                createService: function() {
                    "true" !== T1.settings.enablePlacesSuggest || c.places.service || (c.places.service = new google.maps.places.AutocompleteService)
                },
                createAutocompleteFields: function(a) {
                    google.maps.places && (c.places.getPostalCodeData(),
                    b.each(a, function(a, e) {
                        var f = "autocomplete-" + (new Date).getTime()
                          , g = b(e);
                        if (!g.attr("data-autocomplete-id")) {
                            g.autoComplete({
                                minChars: 1,
                                menuClass: f,
                                cache: !1,
                                source: c.places.requestPlaces(g, !0),
                                onSelect: function(a, b, c) {
                                    T1.channels.google.publishAsync(d.GOOGLE_PLACES_SELECT, {
                                        field: g,
                                        item: c,
                                        event: a,
                                        term: b
                                    })
                                }
                            }).attr("data-autocomplete-id", f);
                            var h = b("." + b(this).attr("data-autocomplete-id"));
                            h.on("touchmove", function(a) {
                                b.proxy(c.places.blur, g.parent().get())()
                            }),
                            c.places.trackAutoComplete(!0, g, h)
                        }
                    }),
                    c.places.trackWindowResize(!0))
                },
                trackWindowResize: function(a) {
                    a || !c.places.events.ON_WIN_RESIZE || b("." + c.places.suggestListClass).length || (c.places.events.ON_WIN_RESIZE.unsubscribe(),
                    delete c.places.events.ON_WIN_RESIZE),
                    a && !c.places.events.ON_WIN_RESIZE && (c.places.events.ON_WIN_RESIZE = T1.channels.global.subscribe(T1.utilities.isTouchCapable ? T1.constants.ON_ORIENTATION_CHANGE : T1.constants.ON_WIN_RESIZE, c.places.blur))
                },
                trackAutoComplete: function(a, b, d) {
                    var e = "keydown.autocomplete keyup.autocomplete";
                    b.off(e, c.places.onShowField),
                    a && b.on(e, {
                        field: b,
                        list: d
                    }, c.places.onShowField)
                },
                onShowField: function(a) {
                    a.data.list && a.data.list.css("margin-top", -Number.parseFloat(b("html").css("top")))
                },
                requestPlaces: function(a, d) {
                    return function(e, f) {
                        if (c.places.service) {
                            var g = T1.settings.dealer.extraCountries ? T1.settings.dealer.extraCountries.toUpperCase().split("|") : [];
                            g.push(c.getSearchableCountry().toUpperCase()),
                            c.places.service.getPlacePredictions({
                                input: e,
                                types: ["geocode"],
                                componentRestrictions: {
                                    country: g
                                }
                            }, function(g, h) {
                                if (a.is(":focus:not(.off)"))
                                    switch (h) {
                                    case google.maps.places.PlacesServiceStatus.OK:
                                        var i = [];
                                        b.each(g, function(a, b) {
                                            i.push(b.description)
                                        }),
                                        f(i),
                                        c.places.injectMarkers(a);
                                        break;
                                    case google.maps.places.PlacesServiceStatus.ZERO_RESULTS:
                                        f([]),
                                        d && c.places.extendAutocomplete(e, function(b) {
                                            b.dealers && b.dealers[0] && b.dealers[0].address && b.dealers[0].address.city && c.places.requestPlaces(a, !1)(b.dealers[0].address.city, f)
                                        });
                                        break;
                                    default:
                                        console.log("Google places service error: " + h)
                                    }
                            })
                        }
                    }
                },
                injectMarkers: function(a) {
                    b("." + a.attr("data-autocomplete-id")).find(".autocomplete-suggestion").prepend(b('<span class="icon icon-map-marker"></span>'))
                },
                extendAutocomplete: function(a, d) {
                    if ("true" === T1.settings.extendPlacesSuggest) {
                        var e = c.places.validatePostCode(a.toUpperCase());
                        e && b.ajax({
                            url: T1.request.getDomainName() + "/api/dealer/find/zip/" + e[0],
                            type: "GET",
                            contentType: "application/json",
                            dataType: "JSON",
                            crossDomain: !0
                        }).done(d)
                    }
                },
                validatePostCode: function(a, d) {
                    var e = b.Deferred();
                    return c.places.getPostalCodeData(d).done(function() {
                        if (c.places.postalCodeData[c.getSearchableCountry().toUpperCase()]) {
                            var b = a.match(new RegExp("^" + c.places.postalCodeData[c.getSearchableCountry().toUpperCase()] + "$","g"));
                            e.resolve(b || !1)
                        } else
                            e.resolve(!1)
                    }).fail(function() {
                        e.resolve(!1)
                    }),
                    e
                },
                getPostalCodeData: function(a) {
                    var d = b.Deferred();
                    return (a || "true" === T1.settings.extendPlacesSuggest) && b.isEmptyObject(c.places.postalCodeData) ? b.ajax({
                        url: "/scripts/postalCodeData.json",
                        type: "GET",
                        dataType: "JSON",
                        crossDomain: !0
                    }).done(function(a) {
                        c.places.postalCodeData = a,
                        d.resolve()
                    }).fail(function() {
                        d.reject()
                    }) : d.resolve(),
                    d
                },
                trackSuggestPlaces: function(a) {
                    a = a || b,
                    b(a.find("." + c.places.suggestClass)).one("focus", function() {
                        c.places.requestNewAutocompleteFields(b(this))
                    })
                },
                requestNewAutocompleteFields: function(a) {
                    T1.channels.google.publishAsync(d.GOOGLE_PLACE_LOAD, {
                        element: a.hasClass(c.places.suggestClass) ? a : a.find("." + c.places.suggestClass)
                    })
                },
                initOverlayer: function(a, b) {
                    c.places.trackSuggestPlaces(a.el),
                    a.el.find(".overlayerContent").on("scroll", c.places.blur)
                },
                initOverlayBox: function(a) {
                    c.places.trackSuggestPlaces(a.container),
                    a.container.find(".material-box-content").add(T1.utilities.isIOS() ? null : window).off("scroll", c.places.blur).on("scroll", c.places.blur)
                },
                blur: function(a) {
                    b("." + c.places.suggestListClass).hide()
                },
                enable: function(a) {
                    a.element && a.element.toggleClass("off", !a.enabled)
                },
                overlayBoxClosed: function(a) {
                    var d = a.content || a.container;
                    d && (d.find("." + c.places.suggestClass).each(function() {
                        var a = b(this).autoComplete("destroy");
                        c.places.trackAutoComplete(!1, a),
                        c.places.trackWindowResize(!1),
                        b("." + a.data("autocomplete-id")).remove(),
                        a.removeData("autocomplete-id")
                    }),
                    b(".material-box, .overlay-panel").not(d).has("[data-autocomplete-id]").length || b(window).off("scroll", c.places.blur))
                }
            },
            maps: {
                loaded: !1,
                loading: !1,
                init: function() {
                    if (!c.maps.loaded && !c.maps.loading) {
                        var a, e = c.getSearchableCountry();
                        a = T1.settings.dealer.googleClientId && T1.settings.dealer.googleClientId.length > 0 ? d.URL_GOOGLE_MAPS_API.replace("{CLIENT_ID}", T1.settings.dealer.googleClientId) : d.URL_GOOGLE_MAPS_API_DEV.replace("{API_KEY}", T1.settings.dealer.googleAPIKey),
                        e && (a += "&region=" + e),
                        T1.settings.language && (a += "&language=" + T1.settings.language),
                        a += "&libraries=geometry",
                        "true" === T1.settings.enablePlacesSuggest && (a += ",places"),
                        a += "&callback=T1.googleServices.maps.handleApiLoad",
                        b.ajax({
                            type: "GET",
                            url: a,
                            dataType: "script",
                            cache: !0
                        }),
                        c.maps.loading = !0
                    }
                },
                getStaticMapUrl: function(a, b, c, e) {
                    var f = "";
                    return f = T1.settings.dealer.googleClientId ? "/api/maps/staticmap?client=" + T1.settings.dealer.googleClientId : d.URL_GOOGLE_STATIC_MAPS_API_DEV.replace("{API_KEY}", T1.settings.dealer.googleAPIKey),
                    f += "&center=" + a + "," + b,
                    f += "&zoom=" + (c || 13),
                    f += "&size=" + (e || "400x250"),
                    f += "&markers=color:red%7C" + a + "," + b
                },
                handleApiLoad: function() {
                    c.maps.loading = !1,
                    c.maps.loaded = !0,
                    T1.channels.google.publish(d.GOOGLE_MAP_LOAD)
                },
                addListener: function(a, b) {
                    switch (a) {
                    case "load":
                        c.addStackEvent(d.GOOGLE_MAP_LOAD, b)
                    }
                }
            },
            reCaptcha: {
                loaded: !1,
                loading: !1,
                captchaClass: "g-recaptcha",
                captchaDataAttr: "data-widget-id",
                captchaSize: "data-size",
                init: function() {
                    T1.channels.form.subscribe(d.FORM_LOAD, c.reCaptcha.onFormLoad),
                    T1.channels.form.subscribe(d.BEFORE_FORM_SUBMIT, c.reCaptcha.beforeFormSubmit)
                },
                onFormLoad: function(a) {
                    a.find("." + c.reCaptcha.captchaClass).size() && (a.closest(".material-box, .overlayerWrapper").length && c.reCaptcha.observeMutation(),
                    c.reCaptcha.render(a))
                },
                beforeFormSubmit: function(a) {
                    if (!a.ignoreCaptcha) {
                        var b = a.form.find("." + c.reCaptcha.captchaClass);
                        if (b.length)
                            if (c.reCaptcha.loaded)
                                if (grecaptcha.getResponse(b.attr(c.reCaptcha.captchaDataAttr)))
                                    var e = T1.channels.form.subscribe(d.SUBMIT_FORM_RETURN, function(a) {
                                        e.unsubscribe(),
                                        a.success || c.reCaptcha.reset(b)
                                    });
                                else
                                    a.cancel = !0,
                                    a.error = T1.labels.reCaptchaError;
                            else
                                a.cancel = !0
                    }
                },
                loadApi: function() {
                    return !(window.grecaptcha || c.reCaptcha.loading || !b("." + c.reCaptcha.captchaClass).size()) && (window.reCaptchaHandleApiLoad = T1.googleServices.reCaptcha.handleApiLoad,
                    b.ajax({
                        type: "GET",
                        url: d.URL_GOOGLE_RECAPTCHA + "&onload=reCaptchaHandleApiLoad&hl=" + T1.settings.language,
                        dataType: "script",
                        cache: !0
                    }),
                    c.reCaptcha.loading = !0,
                    !0)
                },
                handleApiLoad: function() {
                    c.reCaptcha.loading = !1,
                    window.grecaptcha && (c.reCaptcha.loaded = !0,
                    T1.channels.google.publishAsync(d.GOOGLE_RECAPTCHA_LOAD, {}))
                },
                render: function(a) {
                    var e = function() {
                        var d = a.is(".trade-in-form-v2") && T1.settings.reCaptchaTradeinKey || T1.settings.reCaptchaKey;
                        a.find("." + c.reCaptcha.captchaClass + ":not([" + c.reCaptcha.captchaDataAttr + "])").each(function(a, e) {
                            var f = b(e);
                            f.attr(c.reCaptcha.captchaSize, window.innerWidth > 375 ? "normal" : "compact"),
                            f.attr(c.reCaptcha.captchaDataAttr, grecaptcha.render(e, {
                                sitekey: d,
                                callback: c.reCaptcha.validCaptchaHandler(f),
                                "expired-callback": c.reCaptcha.onExpire(f)
                            }))
                        })
                    };
                    if (c.reCaptcha.loaded)
                        e();
                    else {
                        var f = T1.channels.google.subscribe(d.GOOGLE_RECAPTCHA_LOAD, function() {
                            f.unsubscribe(),
                            e()
                        });
                        c.reCaptcha.loadApi() || f.unsubscribe()
                    }
                },
                validCaptchaHandler: function(a) {
                    return function() {
                        T1.channels.google.publishAsync(d.GOOGLE_RECAPTCHA_VALID, {
                            target: a
                        })
                    }
                },
                onExpire: function(a) {
                    return function() {
                        c.reCaptcha.reset(a),
                        T1.channels.google.publishAsync(d.GOOGLE_RECAPTCHA_EXPIRED, {
                            target: a
                        })
                    }
                },
                reset: function(a) {
                    c.reCaptcha.loaded && a && a.attr && c.reCaptcha.reset(a.attr(c.reCaptcha.captchaDataAttr))
                },
                checkCaptchaValidity: function(a) {
                    var b = a.find("." + c.reCaptcha.captchaClass);
                    if (b.length && c.reCaptcha.loaded)
                        try {
                            if (grecaptcha.getResponse(b.attr(c.reCaptcha.captchaDataAttr)))
                                return !0
                        } catch (e) {
                            return T1.errorHandler.handleError(e),
                            !1
                        }
                    return !1
                },
                observeMutation: function() {
                    var a = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver
                      , c = document.querySelector("body")
                      , d = new a(function(a) {
                        for (var c = 0; c < a.length; ++c)
                            for (var e = 0; e < a[c].addedNodes.length; ++e) {
                                var f = b(a[c].addedNodes[e]).find(".g-recaptcha-bubble-arrow");
                                if (f.length) {
                                    var g = parseInt(b("html").css("top"))
                                      , h = f.parent();
                                    return h.addClass("g-recaptcha-overlay"),
                                    isNaN(g) || h.css("margin-top", -g),
                                    void d.disconnect()
                                }
                            }
                    }
                    )
                      , e = {
                        attributes: !0,
                        childList: !0,
                        characterData: !0
                    };
                    d.observe(c, e)
                }
            },
            addStackEvent: function(a, b, d) {
                c.eventsStack[a] = c.eventsStack[a] || [],
                c.eventsStack[a].push({
                    callback: b,
                    subscription: T1.channels.google.subscribe(a, c.processStackEvent),
                    condition: d
                })
            },
            processStackEvent: function(a, d) {
                c.eventsStack[d.topic] && (b.each(c.eventsStack[d.topic], function(b, e) {
                    c.eventsStack[d.topic][b].condition && !c.eventsStack[d.topic][b].condition(a, d) || (c.eventsStack[d.topic][b].subscription.unsubscribe(),
                    c.eventsStack[d.topic][b].callback(a, d))
                }),
                c.clearStackEvent(d))
            },
            clearStackEvent: function(a) {
                c.eventsStack[a.topic] && (b(c.eventsStack[a.topic]).each(function(b, d) {
                    c.eventsStack[a.topic][b].subscription.unsubscribe()
                }),
                delete c.eventsStack[a.topic])
            },
            resetStackEvents: function() {
                for (var a in c.eventsStack)
                    c.clearStackEvent(a);
                c.eventsStack = {}
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            places: {
                requestNewAutocompleteFields: a.places.requestNewAutocompleteFields,
                validatePostCode: a.places.validatePostCode,
                blur: a.places.blur
            },
            maps: {
                init: a.maps.init,
                addListener: a.maps.addListener,
                handleApiLoad: a.maps.handleApiLoad,
                getStaticMapUrl: a.maps.getStaticMapUrl,
                loaded: function() {
                    return a.maps.loaded
                }
            },
            reCaptcha: {
                handleApiLoad: a.reCaptcha.handleApiLoad,
                checkCaptchaValidity: a.reCaptcha.checkCaptchaValidity
            }
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.formsNavigation = function() {
        "use strict";
        var a = {
            overlayerOpen: !1,
            init: function() {
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.initOverlayer),
                T1.channels.dialog.subscribe(d.PAGEOVERLAYER_CLOSED, c.overlayerClosed),
                T1.channels.global.subscribe(d.ON_DOC_CLICK, c.onDOCClick),
                c.initOnDemand()
            },
            initOverlayer: function(a) {
                !c.overlayerOpen && a.container.find("#forms #forms-nav").size() && (c.overlayerOpen = !0,
                c.initOnDemand(a))
            },
            overlayerClosed: function(a) {
                c.overlayerOpen && b(a.overlayer).find("#forms #forms-nav").size() && (c.overlayerOpen = !1)
            },
            initOnDemand: function(a) {
                b("#forms-nav").length && (c.initSecondLevel(),
                c.setMoreLi())
            },
            initSecondLevel: function() {
                b("#forms-nav li").on(T1.utilities.clickEvent, c.handleSecondLevelClick),
                T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, c.setMoreLi)
            },
            handleSecondLevelClick: function(a) {
                var c = b(this)
                  , d = c.parent()
                  , e = b("#forms-nav")
                  , f = (e.find("li"),
                e.find(".dropdown"))
                  , g = e.find(".active-dropdown")
                  , h = !c.hasClass("dropdown")
                  , i = d.hasClass("sub-menu");
                e.find(".active").removeClass("active"),
                h ? (c.addClass("active"),
                i && (f.addClass("active"),
                g.removeClass("active-dropdown"),
                a.stopPropagation()),
                a.preventDefault()) : c.hasClass("active-dropdown") ? c.removeClass("active-dropdown") : c.addClass("active-dropdown")
            },
            onDOCClick: function(a) {
                var c = b("#forms-nav .active-dropdown")
                  , d = b(a.target);
                d.hasClass("active-dropdown") || 0 !== d.parents(".active-dropdown").length || c.removeClass("active-dropdown")
            },
            setMoreLi: function() {
                for (var a, c = b("#forms-nav"), d = b("#forms-nav .container").width(), e = c.find("li.dropdown"), f = e.find(".sub-menu"), g = b("#forms-nav > ul > li").not(".dropdown"), h = 0, i = 0; i < g.length && !((h += g[i].clientWidth) + e.width() > d); i++)
                    ;
                if (h > d)
                    i > 0 && (a = g.slice(i - 1, g.length),
                    a.prependTo(f),
                    e.css("display", "inline-table"),
                    c.css("overflow", "visible"),
                    b("#forms-nav .sub-menu").find("li.active").length > 0 && b("#forms-nav .dropdown").addClass("active"));
                else if (h + e.width() > d)
                    a = g.slice(i, g.length),
                    a.prependTo(f),
                    e.css("display", "inline-table"),
                    c.css("overflow", "visible"),
                    b("#forms-nav .sub-menu").find("li.active").length > 0 && b("#forms-nav .dropdown").addClass("active");
                else {
                    var j = b("#forms-nav ul.sub-menu > li");
                    if (j.length > 0) {
                        for (var k = 0; k < j.length; k++)
                            (h += j[k].clientWidth) + e.width() + 30 < d && (j.eq(k).hasClass("active") && b("#forms-nav .dropdown").removeClass("active"),
                            j.eq(k).appendTo(b("#forms-nav ul")),
                            j.eq(k).hide(),
                            j.eq(k).remove(),
                            e.insertAfter(c.find("li:last")));
                        var l = b("#forms-nav ul.sub-menu > li");
                        l.length > 0 ? e.css("display", "inline-table") : e.hide()
                    } else
                        e.hide()
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.myToyota = function() {
        "use strict";
        var a = {
            isAuthenticated: null,
            overlayerOpen: !1,
            displayedCars: null,
            savedCarsImageSize: {
                width: 300,
                height: 95
            },
            animationsDuration: 150,
            mapZoomLevel: 12,
            mapSize: [230, 122],
            storage: null,
            hidePrices: null,
            showRatesMonthly: !1,
            mapsApiUrl: null,
            version: 1,
            eventsStack: {},
            useSsoService: "true" === T1.settings.ssoUseMicroService,
            stores: {
                cars: "cars",
                dealers: "dealers",
                quotes: "quotes"
            },
            subscriptions: {},
            panes: {
                myCars: {
                    id: "pane-my-cars",
                    form: "#form-my-cars",
                    messages: {}
                },
                saveCar: {
                    id: "pane-save-car",
                    forms: {
                        save: "#form-save-car",
                        login: "#form-login-save-car"
                    }
                },
                myDealer: {
                    id: "pane-my-dealer",
                    form: "#form-my-dealer"
                },
                ownersArea: {
                    id: "pane-owners-area"
                },
                resetPassword: {
                    id: "pane-reset-password",
                    form: "#form-reset-password"
                },
                login: {
                    id: "pane-login",
                    form: "#form-login"
                },
                register: {
                    id: "pane-register",
                    form: "#form-register"
                },
                forgottenPassword: {
                    id: "pane-forgotten-password",
                    form: "#form-forgotten-password"
                }
            },
            panesEvent: {
                "pane-register": T1.constants.MY_TOYOTA_REGISTER,
                "pane-forgotten-password": T1.constants.MY_TOYOTA_FORGOTTEN_PASSWORD,
                "pane-save-car": T1.constants.MY_TOYOTA_SAVE_CAR,
                "pane-login": T1.constants.PANE_LOGIN_READY,
                "pane-reset-password": T1.constants.MY_TOYOTA_HASH_PASSWORD
            },
            classes: {
                loginForm: "login-form",
                formSuccess: "form-success",
                formError: T1.constants.CLASS_ERROR_FORM,
                carsExtended: "extended",
                carExtendable: "extendable"
            },
            init: function() {
                c.initLocalStorage(),
                c.isAuthenticated = !(!T1.mypage || !T1.mypage.user),
                c.mapsApiUrl = T1.constants.URL_GOOGLE_STATIC_MAPS_API_DEV + "&zoom={ZOOM}&size={SIZE}&maptype=roadmap&sensor=false&visual_refresh=true&scale=2&center={POINT}&markers=color:red%7Clabel:C%7C{POINT}",
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_MY_CARS, c.requestMyCars),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_MY_DEALERS, c.requestMyDealer),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_OWNERS_AREA, c.requestOwnersArea),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_LOGIN, c.requestLogin),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_LOGIN_SUCCESS, c.loginSuccess),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_RESET_PASSWORD, c.requestPasswordReset),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_HASH_PASSWORD, c.setPasswordHash),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_SAVE_QUOTES, c.saveUserQuotes),
                T1.channels.form.subscribe(d.BEFORE_FORM_SUBMIT, c.beforeFormSubmit),
                T1.channels.form.subscribe(d.SUBMIT_FORM_RETURN, c.formReturn),
                T1.channels.form.subscribe(d.VALIDATE_FORM_RETURN, c.validateFormReturn),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_SAVE_CAR, c.requestSaveCarFormSubmit),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_SAVE_CAR_TRADEIN, c.saveTradeinCar),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_GET_CAR, c.getCar),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_DEALER_REMOVE, c.api.removeDealer),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_LOGIN_REDIRECT, c.loginRedirect),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_SET_USER_DATA, c.setUser),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_SIGNOUT, function() {
                    c.setAuthenticatedState(!1)
                }),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_GET_DEALERS, c.api.getDealers),
                T1.channels.dialog.subscribe(d.MATERIALBOX_CLOSED, c.overlayerClosed),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.initOverlayer),
                T1.channels.carconfig.subscribe(d.CARCONFIG_SAVE_CONFIG, c.saveCar),
                T1.channels.carconfig.subscribe(d.CARCONFIG_END, c.storeCar),
                T1.channels.dealer.subscribe(d.DEALER_SAVE, c.saveDealer),
                T1.channels.dealer.subscribe(d.DEALER_SELECTED, function(a) {
                    c.storeDealer(a.dealer),
                    c.loadStoredDealers()
                }),
                c.hidePrices = "true" === T1.settings.hidePrices,
                c.showRatesMonthly = T1.settings.finance && "true" === T1.settings.finance.showRatesMonthly,
                c.displayedCars = d.MY_TOYOTA_DISPLAYED_SAVED_CARS || 6,
                c.panes.myCars.messages[404] = T1.labels.mytoyota ? T1.labels.mytoyota.carConfigurationNotFound : "Carconfig not found",
                c.panes.myCars.messages[500] = c.panes.myCars.messages[404]
            },
            initLocalStorage: function() {
                try {
                    c.storage = window.localStorage
                } catch (e) {
                    console.log("Initialization of local storage failed:" + e.message)
                }
            },
            initOverlayer: function(a) {
                !c.overlayerOpen && a.container.find("#forms.my-toyota").size() && (c.overlayerOpen = !0,
                c.subscriptions.tabEvent = T1.channels.tab.subscribe(d.TABS_SWITCH, c.publishLocalTabEvent),
                b("#cancelSearchMyCar").click(c.resetSearchMyCarForm),
                b("#savedCarsExtender").click(c.toggleSavedCars),
                b("#cancelSaveMyCar").click(c.cancelSaveACarForm),
                b(".toyota-tabs .login-link").click(function(a) {
                    c.setLoginRedirection(b(this).parents(".tab-pane").attr("id"))
                }),
                b(".toyota-tabs .btn-cancel").click(c.cancelLogin),
                b(".toyota-tabs").click(c.closeAllOvl),
                b(c.panes.saveCar.forms.login).find(".input-row > div").addClass("col-sm-6"),
                c.setAuthenticatedState(c.isAuthenticated),
                c.loadUserData(),
                c.loadStoredCars(),
                c.loadStoredDealers())
            },
            initSavedCarsOnDemand: function() {
                b("#savedCarsExtender").click(c.toggleSavedCars),
                c.setAuthenticatedState(c.isAuthenticated),
                c.loadSavedCars()
            },
            publishLocalTabEvent: function(a) {
                for (var b in c.panes)
                    if (c.panes[b].id === a)
                        return T1.channels.mytoyota.publish(d.MY_TOYOTA_TAB_SWITCH, a),
                        c.publishPaneEvent(a),
                        !1
            },
            publishPaneEvent: function(a) {
                a && c.panesEvent[a] && T1.channels.mytoyota.publishAsync(c.panesEvent[a])
            },
            getActiveTab: function() {
                return b(".toyota-tabs a.active").attr("data-tab")
            },
            setAuthenticatedState: function(a) {
                c.isAuthenticated = a,
                b("#forms.my-toyota").toggleClass("authenticated", a),
                a || (T1.mypage && (T1.mypage.user = null),
                b("." + c.classes.loginForm).each(function() {
                    this.reset()
                }))
            },
            requestMyCars: function() {
                c.requestMyToyota({
                    paneId: c.panes.myCars.id,
                    identifier: "my-toyota-cars"
                })
            },
            requestMyDealer: function(a) {
                a.paneId = c.panes.myDealer.id,
                a.identifier = "my-toyota-dealers",
                c.requestMyToyota(a)
            },
            requestOwnersArea: function() {
                c.requestMyToyota({
                    paneId: c.panes.ownersArea.id,
                    identifier: "my-toyota-owners-area"
                })
            },
            requestLogin: function(a) {
                Object.resolve("T1.channels.sso.config.isSsoV2") ? T1.channels.mytoyota.publish(T1.constants.SSO_RENDER, {
                    contractKey: "login"
                }) : (a && "true" === a.autoclose && (c.overlayerAutoclose = !0),
                a.identifier = "my-toyota-login",
                a.paneId = c.panes.login.id,
                c.requestMyToyota(a))
            },
            requestPasswordReset: function() {
                c.requestMyToyota({
                    paneId: c.panes.resetPassword.id
                })
            },
            setPasswordHash: function() {
                b("#password-hash").val(window.location.hash.substr(window.location.hash.lastIndexOf("/") + 1))
            },
            requestAuthentication: function() {
                c.isAuthenticated && c.setAuthenticatedState(!1),
                c.requestMyToyota({
                    paneId: c.panes.login.id
                })
            },
            requestMyToyota: function(a) {
                var e = a.paneId;
                if (!c.overlayerOpen) {
                    a.url = decodeURIComponent(b("#myToyota").data("url")) + "?tab=" + e,
                    a.ajax = !0,
                    a.sync = !0,
                    a.type = "box-ajax",
                    a.size = T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                    a.hashAction = "my_toyota_my_cars",
                    T1.channels.dialog.publishAsync(d.MATERIALBOX_OPEN, a);
                    var f = T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function() {
                        T1.channels.tab.publishAsync(d.TABS_SWITCH, e),
                        f.unsubscribe()
                    })
                }
            },
            searchACar: function(a, e) {
                var f = b(c.panes.myCars.form);
                f.find("#car-code").val(a),
                e && (b("#" + c.panes.myCars.id).addClass("hidden"),
                c.addStackEvent(d.CHANNEL_MYTOYOTA, d.MY_TOYOTA_SEARCH_FOUND, function(a, e) {
                    c.addStackEvent(d.CHANNEL_TAB, d.TABS_SWITCH, function(a, d) {
                        b("#" + c.panes.myCars.id).removeClass("hidden")
                    }),
                    f.find(".btn-save").trigger(T1.utilities.clickEvent)
                })),
                c.addStackEvent(d.CHANNEL_TAB, d.TABS_SWITCH, function(a, b) {
                    f.find(".btn-submit").click()
                })
            },
            beforeFormSubmit: function(a) {
                if (a.form.is(c.panes.myCars.form))
                    c.beforeSearchForm(a);
                else if (a.form.is(c.panes.login.form) || a.form.is(c.panes.saveCar.forms.login))
                    a.json = !0,
                    a.data = JSON.stringify({
                        email: a.form.find('input[name="email"]').val(),
                        password: a.form.find('input[name="password"]').val()
                    });
                else if (a.form.is(c.panes.saveCar.forms.save)) {
                    var d = b("#searchCarResult").data("searched-car")
                      , e = c.getSavedCar(d[T1.constants.CARCONFIG_PERSONAL_CODE] || d.id);
                    e ? (a.cancel = !0,
                    T1.channels.mytoyota.publishAsync(T1.constants.MY_TOYOTA_CAR_ALREADY_SAVED, e),
                    c.displayFormError(a.form, T1.labels.mytoyota.carAlreadySaved)) : (c.collectObject(c.stores.cars, d),
                    a.json = !0,
                    a.data = JSON.stringify(d))
                } else
                    a.form.is(c.panes.resetPassword.form) && (a.json = !0,
                    a.data = JSON.stringify({
                        key: b("#password-hash").val(),
                        password: b("#reset-password").val()
                    }))
            },
            beforeSearchForm: function(a) {
                a.deferred = c.requestCarConfigData(a.form.find("#car-code").val())
            },
            requestCarConfigData: function(a) {
                return T1 && T1.loadSave && T1.loadSave.get({
                    tyCode: a,
                    type: "short"
                })
            },
            formReturn: function(a) {
                var d = {
                    isError: !1,
                    message: null
                };
                c.overlayerOpen && (c.resetFormClasses(a.form),
                "success" === a.status ? !a.data || !a.data.success && c.errorMessage(a.data) ? d = {
                    isError: !0,
                    message: c.errorMessage(a.data || {
                        error: a.message
                    })
                } : a.form.is(b(c.panes.myCars.form)) ? c.formMyCarsReturn(a) : a.form.is(b(c.panes.login.form)) || a.form.is(b(c.panes.saveCar.forms.login)) ? c.formLoginReturn(a) : a.form.is(b(c.panes.register.form)) || a.form.is(b(c.panes.forgottenPassword.form)) || a.form.is(b(c.panes.resetPassword.form)) ? c.resetFormReturn(a) : a.form.is(b(c.panes.saveCar.forms.save)) && c.formSaveCarReturn(a) : (a.showError = !1,
                d = {
                    isError: !0,
                    message: c.formStatusMessage(a.form, a.code) || a.message || a.status
                }),
                d.isError && (c.resetStackEvents(),
                c.manageFormReturnError(a, d)))
            },
            manageFormReturnError: function(a, e) {
                e.isError && (c.displayFormError(a.form, e.message),
                a.form.is(b(c.panes.myCars.form)) ? T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_SEARCH_FAILED, {
                    result: a,
                    error: e.message
                }) : a.form.is(b(c.panes.login.form)) && T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_LOGIN_FAIL, {}))
            },
            errorMessage: function(a) {
                return a.message || (a.error ? a.error.message ? a.error.message : a.error : null)
            },
            formStatusMessage: function(a, d) {
                var e;
                if (a.is(b(c.panes.myCars.form)) && (e = c.panes.myCars),
                e && e.messages && e.messages[d])
                    return e.messages[d]
            },
            validateFormReturn: function(a) {
                c.overlayerOpen && (a.form.is(b(c.panes.register.form)) || a.form.is(b(c.panes.forgottenPassword.form)) || a.form.is(b(c.panes.resetPassword.form))) && (a.validated = a.data.success)
            },
            formMyCarsReturn: function(a) {
                var e = b("#searchCarResult");
                c.loadACar(a.data, e, c.suggestDeleteCar, {
                    isCarSearch: !0
                }),
                e.data("searched-car", a.data),
                b(c.panes.saveCar.forms.save).find("#save-car-name").val(a.data.car),
                a.form.addClass(c.classes.formSuccess),
                T1.channels.mytoyota.publish(d.MY_TOYOTA_SEARCH_FOUND, {
                    car: a.data.car
                })
            },
            formLoginReturn: function(a) {
                T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_LOGIN_SUCCESS, a.data),
                a.form.is(b(c.panes.login.form)) ? T1.channels.mytoyota.publish(d.MY_TOYOTA_LOGIN_REDIRECT, {}) : T1.channels.tab.publishAsync(d.TABS_SWITCH, c.panes.saveCar.id)
            },
            loginRedirect: function(a) {
                if (a || (a = {}),
                a.appId)
                    a.appId = decodeURIComponent(a.appId),
                    T1.settings && T1.settings.appUrls && T1.settings.appUrls[a.appId] && "" !== T1.settings.appUrls[a.appId] ? a.appId.toLowerCase().indexOf("eboutique") > -1 ? T1.channels.cp.publish(T1.constants.EBOUTIQUE_OPEN, {
                        url: T1.settings.appUrls[a.appId]
                    }) : window.location.replace(T1.settings.appUrls[a.appId]) : window.location.replace("/apps/" + a.appId);
                else if (c.overlayerAutoclose || a.autoclose)
                    c.overlayerAutoclose = !1,
                    a.url ? location.replace(a.url) : a.noRedirect || T1.channels.hash.publish(T1.constants.HASH_REMOVE, "");
                else {
                    var e = b("#" + c.panes.login.id).attr("data-tab-redirect") || c.panes.myCars.id;
                    T1.channels.tab.publishAsync(d.TABS_SWITCH, e)
                }
            },
            loginSuccess: function(a) {
                T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, a.user),
                c.setAuthenticatedState(a.success),
                c.loadUserData()
            },
            getUser: function() {
                return T1.mypage && T1.mypage.user ? T1.mypage.user : null
            },
            setUser: function(a) {
                T1.mypage || (T1.mypage = {}),
                T1.mypage.user = a,
                c.checkDefaultStorage(),
                T1.channels.statistics.publish(T1.constants.STATS_USER_UPDATE, {})
            },
            resetFormReturn: function(a) {
                a.form.get(0).reset()
            },
            formSaveCarReturn: function(a) {
                var e = b("#searchCarResult").data("searched-car")
                  , f = c.getSavedCar(e.id);
                T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, a.data.user),
                c.loadSavedCars(),
                c.resetSearchMyCarForm(),
                c.resetSaveACarForm(),
                c.extendSavedCar(),
                T1.channels.tab.publishAsync(d.TABS_SWITCH, c.panes.myCars.id),
                T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_SAVED_CAR, {
                    car: f
                })
            },
            extendSavedCar: function() {
                c.isMySavedCarsExtended() && b("#savedCars>.row:not(.template):not(:visible):last").slideDown(c.animationsDuration)
            },
            saveCar: function(a) {
                c.verifyUserTokenState().always(function() {
                    c.isAuthenticated ? a && a[T1.constants.CARCONFIG_CODE] && ("true" === T1.settings.cpUseDashboardSavedCars ? c.requestCarConfigData(a[T1.constants.CARCONFIG_CODE]).done(function(a) {
                        c.collectObject(c.stores.cars, a),
                        c.requestSaveCar(a).done(function(a) {
                            T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, a.user)
                        }).always(function() {
                            T1.channels.cp.publish(d.CUSTOMER_PORTAL_DASHBOARD_OPEN, d.CUSTOMER_PORTAL_DASHBOARD_LINKS.CONFIGURED_VEHICLE_LAST)
                        })
                    }) : c.overlayerOpen ? c.searchACar(a[T1.constants.CARCONFIG_CODE], !0) : (c.addStackEvent(d.CHANNEL_DIALOG, d.MATERIALBOX_OPENED, function() {
                        c.searchACar(a[T1.constants.CARCONFIG_CODE], !0)
                    }),
                    T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_MY_CARS))) : (c.addStackEvent(d.CHANNEL_MYTOYOTA, d.MY_TOYOTA_LOGIN_SUCCESS, function(d, e) {
                        b(".material-box-panels .material-box:last-child").addClass("hidden"),
                        c.saveCar(a)
                    }),
                    T1.channels.mytoyota.publish(T1.constants.SSO_RENDER, {
                        contractKey: "login",
                        autoclose: !1
                    }))
                })
            },
            storeCar: function(a) {
                c.storage && c.requestCarInfo(a, !0)
            },
            requestCarInfo: function(a, b, d, e) {
                var f = Object.resolve("T1.loadSave");
                f && f.get({
                    configuration: a,
                    type: "short"
                }).done(d || c.getCarInfoSuccessHandle(b)).fail(e || c.handleCarInfoRequestFail)
            },
            getCarInfoSuccessHandle: function(a) {
                return function(b) {
                    if (b.message || b.error && b.error.message)
                        c.showErrorMessage(c.errorMessage(b));
                    else {
                        c.updateCarchapterLinks(b);
                        var d = c.getStoredCar(b.id);
                        a ? (d && c.removeObject(c.stores.cars, b.id),
                        c.storeObject(c.stores.cars, b),
                        T1.channels.mytoyota.publishAsync(T1.constants.MY_TOYOTA_STORED_CAR, b)) : a || c.getSavedCar(b.id) ? !a && c.getSavedCar(b.id) && (T1.channels.mytoyota.publishAsync(T1.constants.MY_TOYOTA_CAR_ALREADY_SAVED, b),
                        console.log(T1.labels.mytoyota.carAlreadySaved + ": " + b.id)) : c.updateUserData(c.stores.cars, b)
                    }
                }
            },
            handleCarInfoRequestFail: function(a, b, c) {
                console.log(b + ": " + c)
            },
            getStoredCar: function(a) {
                return c.getObject(c.getStorage(), c.stores.cars, a)
            },
            getSavedCar: function(a) {
                if (c.isAuthenticated)
                    return c.getObject(c.getUser().data.mytoyota, c.stores.cars, a)
            },
            removeCar: function(a) {
                a.preventDefault(),
                T1.channels.statistics.publish(d.STATS_TRACK, {
                    node: b(a.target)
                }),
                c.removeObject(c.stores.cars, a.data.code, a.data.callback)
            },
            removeObject: function(a, b, d) {
                var e = c.getStorage();
                "string" == typeof b && (b = b.replace("-", ""));
                for (var f = 0; f < e[a].length; f++) {
                    var g = "string" == typeof e[a][f].id ? e[a][f].id.replace("-", "") : e[a][f].id;
                    if (parseInt(g, 16) === parseInt(b, 16)) {
                        e[a].splice(f, 1),
                        c.setStorage(e),
                        d && d();
                        break
                    }
                }
            },
            getObject: function(a, b, c, d) {
                for (var e = a[b] || [], f = 0; f < e.length; f++)
                    if (e[f].id === c || e[f].code === c || e[f][T1.constants.CARCONFIG_PERSONAL_CODE] === c)
                        return d && (d.index = f),
                        e[f]
            },
            storeDealer: function(a) {
                c.getStoredDealer(a.id) || c.storeObject(c.stores.dealers, a)
            },
            getStoredDealer: function(a) {
                return c.getObject(c.getStorage(), c.stores.dealers, a)
            },
            saveDealer: function(a) {
                if (c.isAuthenticated) {
                    c.getSavedDealer(a.dealer.id) ? T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_DEALER_ALREADY_SAVED, {
                        dealer: a.dealer
                    }) : c.updateUserData(c.stores.dealers, a.dealer)
                } else
                    T1.channels.hash.publish(d.HASH_REMOVE, ""),
                    c.overlayerOpen ? (c.setLoginRedirection(c.panes.myDealer.id),
                    c.useSsoService ? T1.channels.mytoyota.publish(T1.constants.PANE_LOGIN_READY, {}) : T1.channels.tab.publish(d.TABS_SWITCH, c.panes.login.id),
                    c.setSaveDealerState(a)) : (c.addStackEvent(d.CHANNEL_DIALOG, d.MATERIALBOX_OPENED, function(b, d) {
                        d.container.find("#forms.my-toyota").size() && (c.setSearchQuery(a.search),
                        c.setLoginRedirection(c.panes.myDealer.id),
                        c.setSaveDealerState(a))
                    }),
                    T1.channels.hash.publish(d.HASH_ADD, "/publish/my_toyota_login"))
            },
            setSaveDealerState: function(a) {
                c.addStackEvent(d.CHANNEL_MYTOYOTA, d.MY_TOYOTA_TAB_SWITCH, function(a, b) {
                    c.clearStackEvent(d.MY_TOYOTA_LOGIN_SUCCESS),
                    c.clearStackEvent(d.MY_TOYOTA_CANCEL_LOGIN)
                }, function(a, b) {
                    return b != c.panes.login.id
                }),
                c.addStackEvent(d.CHANNEL_MYTOYOTA, d.MY_TOYOTA_LOGIN_SUCCESS, function(b, e) {
                    c.clearStackEvent(d.MY_TOYOTA_CANCEL_LOGIN),
                    c.saveDealer(a)
                }),
                c.addStackEvent(d.CHANNEL_MYTOYOTA, d.MY_TOYOTA_CANCEL_LOGIN, function(a, e) {
                    c.clearStackEvent(d.MY_TOYOTA_LOGIN_SUCCESS),
                    b(c.panes.myDealer.form).find("a.btn-search-dealers i").click()
                })
            },
            saveUserQuotes: function(a) {
                (a.finance || a.insurance) && c.updateUserData(c.stores.quotes, a)
            },
            setSearchQuery: function(a) {
                if (a) {
                    var d = b(c.panes.myDealer.form);
                    d.find(".input-search input").val(a.query),
                    d.find('input[name="options"]').prop("checked", !1),
                    b(a.options).each(function(a, c) {
                        d.find('input[value="' + b(c).val() + '"]').prop("checked", !0)
                    })
                }
            },
            addStackEvent: function(a, b, d, e) {
                c.eventsStack[b] = c.eventsStack[b] || [],
                c.eventsStack[b].push({
                    callback: d,
                    subscription: postal.subscribe({
                        channel: a,
                        topic: b,
                        callback: c.processStackEvent
                    }),
                    condition: e
                })
            },
            processStackEvent: function(a, d) {
                var e = d.topic;
                c.eventsStack[e] && (b.each(c.eventsStack[e], function(b, d) {
                    c.eventsStack[e][b].condition && !c.eventsStack[e][b].condition(e, a) || (c.eventsStack[e][b].subscription.unsubscribe(),
                    c.eventsStack[e][b].callback(e, a))
                }),
                c.clearStackEvent(e))
            },
            clearStackEvent: function(a) {
                c.eventsStack[a] && (b(c.eventsStack[a]).each(function(b, d) {
                    c.eventsStack[a][b].subscription.unsubscribe()
                }),
                delete c.eventsStack[a])
            },
            resetStackEvents: function() {
                for (var a in c.eventsStack)
                    c.clearStackEvent(a);
                c.eventsStack = {}
            },
            getSavedDealer: function(a) {
                if (c.isAuthenticated)
                    return c.getObject(c.getUser().data.mytoyota, c.stores.dealers, a)
            },
            updateUserData: function(e, f) {
                if (c.isAuthenticated) {
                    c.collectObject(e, f);
                    var g = {
                        "Content-Type": "application/json",
                        Accept: "application/json"
                    }
                      , h = a.useSsoService ? T1.constants.URL_USER_DATA : T1.request.getDomainName() + d.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_DEALER;
                    a.useSsoService && T1.mypage.user && (g[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: T1.mypage.user._id,
                        email: T1.mypage.user.email,
                        token: T1.mypage.user.token
                    }));
                    var i = b.ajax({
                        type: "POST",
                        dataType: "JSON",
                        headers: g,
                        url: h,
                        data: JSON.stringify(c.getUser().data)
                    });
                    i.done(function(a, b) {
                        if (a.success) {
                            if (T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, a.user),
                            c.loadSavedDealers(),
                            e === c.stores.dealers) {
                                var g = c.getSavedDealer(f.id);
                                g && T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_SAVED_DEALER, {
                                    dealer: g
                                })
                            }
                        } else
                            c.unCollectObject(e, f.id),
                            c.showErrorMessage(c.errorMessage(a)),
                            c.manageUpdateUserError(e, f, c.errorMessage(a))
                    }),
                    i.fail(function(a, b) {
                        c.unCollectObject(e, f.id),
                        c.showErrorMessage(c.errorMessage(a)),
                        c.manageUpdateUserError(e, f, c.errorMessage(a))
                    })
                }
            },
            manageUpdateUserError: function(a, b, e) {
                a == c.stores.dealers && T1.channels.mytoyota.publishAsync(d.MY_TOYOTA_SAVE_DEALER_FAILED, {
                    dealer: b,
                    error: e
                })
            },
            removeDealer: function(a) {
                a.preventDefault && a.preventDefault(),
                T1.channels.statistics.publish(T1.constants.STATS_TRACK, {
                    node: b(a.target)
                }),
                c.removeObject(c.stores.dealers, a.data.code, a.data.callback)
            },
            storeObject: function(a, b) {
                if (c.storage) {
                    b.storeDate = globalize.format(new Date, "d"),
                    b.storeDateEpoch = (new Date).getTime(),
                    b.saved = !1,
                    a === c.stores.cars && c.addCarCustomName(b);
                    var d = c.getStorage();
                    Array.isArray(d[a]) || (d[a] = []),
                    d[a].push(b),
                    c.setStorage(d)
                }
            },
            getStorage: function() {
                var a = b.parseJSON(c.storage && c.storage.mytoyota || null) || c.defaultStorage();
                return a && a.version === c.version || (a = c.resetStorage()),
                a
            },
            setStorage: function(a) {
                c.storage.mytoyota = JSON.stringify(a)
            },
            resetStorage: function() {
                var a = c.defaultStorage();
                return c.storage.mytoyota = JSON.stringify(a),
                a
            },
            defaultStorage: function(a) {
                return a || (a = {}),
                a.version || (a.version = c.version),
                a.cars || (a.cars = []),
                a.dealers || (a.dealers = []),
                a
            },
            checkDefaultStorage: function() {
                T1.mypage.user || (T1.mypage.user = {}),
                T1.mypage.user.data || (T1.mypage.user.data = {}),
                T1.mypage.user.data.mytoyota = c.defaultStorage(T1.mypage.user.data.mytoyota)
            },
            collectObject: function(a, b, d) {
                if (c.isAuthenticated) {
                    b.storeDate = globalize.format(new Date, "d"),
                    b.storeDateEpoch = (new Date).getTime(),
                    b.saved = !0,
                    a === c.stores.cars ? c.addCarCustomName(b) : a === c.stores.dealers && (c.getUser().data.mytoyota[a] = []);
                    var e = c.getUser().data;
                    void 0 !== d ? e.mytoyota[a].splice(d, 0, b) : Array.isArray(e.mytoyota[a]) ? e.mytoyota[a].push(b) : e.mytoyota[a] = b
                }
            },
            addCarCustomName: function(a) {
                a.customName = b("#save-car-name").val() || null
            },
            unCollectObject: function(a, b) {
                if (c.isAuthenticated)
                    for (var d = c.getUser().data.mytoyota[a], e = 0; e < d.length; e++)
                        if ((parseInt(d[e].id, 10) || d[e].id) === (parseInt(b, 10) || b)) {
                            d.splice(e, 1);
                            break
                        }
            },
            loadUserData: function() {
                c.isAuthenticated && (c.checkDefaultStorage(),
                c.loadSavedCars({
                    skipSocialInit: !0
                }),
                c.loadSavedDealers())
            },
            loadSavedCars: function(a) {
                if (a = a || {},
                c.isAuthenticated) {
                    var d = c.getUser().data.mytoyota.cars
                      , e = b("#savedCars")
                      , f = e.find(">.row.template")
                      , g = c.isMySavedCarsExtended();
                    a.insert || e.find(">.row:not(.template)").remove();
                    for (var h = d.length - 1; h >= 0; h--) {
                        var i = f.clone().removeClass("template");
                        e.find(">.row:not(.template) > div").size() >= c.displayedCars && i.addClass(c.classes.carExtendable),
                        g && i.show(),
                        c.appendObjRow(e, i, d[h], c.loadACar, c.suggestDeleteCar)
                    }
                    e.find(".template").appendTo(e),
                    a.skipSocialInit || c.initSocialButtons(),
                    c.setExtenderCarsCount(e.find(">.row:not(.template) > div").size())
                }
            },
            loadACar: function(a, b, e, f) {
                if (!(a && a.id && a.car))
                    return console.log(a.code || "not a car"),
                    !1;
                if (b.find(".obj-desc").attr("data-obj-code", a.id),
                b.find("img").attr("src", c.getCarImagePath(a)),
                b.find(".hybrid").toggle(a.hybrid || !1),
                b.find(".title").html(c.htmlDecode(a.customName || a.car)),
                !c.hidePrices && a.price) {
                    var g = a.price.listWithDiscount
                      , h = c.htmlDecode(globalize.format(g, "c"));
                    b.find(".price").html(h)
                }
                var i = {
                    personal: f && (f.isSavedCarsSection || f.isCarSearch) && a[T1.constants.CARCONFIG_PERSONAL_CODE],
                    general: a.code
                }
                  , j = b.find(".readMore")
                  , k = b.find(".expansion-content");
                return b.find(".code i").html(" " + c.htmlDecode(i.personal || i.general)),
                j.attr("data-tooltip-selector", j.attr("data-tooltip-selector") + "_" + a.id),
                k.attr("id", k.attr("id") + "_" + a.id),
                b.find(".date").text(a.storeDate),
                b.find(".saved").toggle(a.saved || !1),
                b.find(".btn-edit").on("click", function(a) {
                    a.preventDefault(),
                    T1.channels.hash.publishAsync(T1.constants.HASH_ADD, d.URL_CAR_CONFIG_OVERLAYER + "tyCode=" + i.general + (i.personal ? "/personalCode=" + i.personal : ""))
                }),
                b.find(".btn-read-more").attr("href", a.carChapterUrl),
                b.find(".btn-delete").click(e),
                !0
            },
            htmlDecode: function(a) {
                return b("<div/>").html(a).text()
            },
            getCarImagePath: function(a) {
                return a && a.code ? T1.constants.URL_CCIS_PROXY + "config/" + a.code + "?width=" + c.savedCarsImageSize.width + "&height=" + c.savedCarsImageSize.height + "&view=exterior&angle=32" : null
            },
            loadStoredCars: function() {
                c.loadStoredObjects(b("#recentlyViewedCars"), c.getStorage().cars, c.loadACar, c.suggestRemoveCar)
            },
            loadStoredDealers: function() {
                c.loadStoredObjects(b("#recentlyViewedDealers"), c.getStorage().dealers, c.loadADealer, c.suggestRemoveDealer)
            },
            loadStoredObjects: function(a, b, d, e) {
                var f = a.find(">.row.template");
                a.find(">.row:not(.template)").remove();
                for (var g = b.length - 1; g >= 0; g--) {
                    var h = f.clone().removeClass("template");
                    c.appendObjRow(a, h, b[g], d, e)
                }
                a.find(".template").appendTo(a)
            },
            appendObjRow: function(a, b, c, d, e) {
                var f = a.find(">.row:not(.template):last() > div").size();
                d(c, b, e, {
                    isSavedCarsSection: "#savedCars" === a.selector
                }) && (f % 2 == 0 ? a.append(b) : a.find(">.row:not(.template):last()").append(b.find("> div")))
            },
            loadSavedDealers: function(a) {
                if (c.isAuthenticated) {
                    var d = c.getUser().data.mytoyota.dealers || []
                      , e = b("#savedDealers")
                      , f = e.find(">.row.template");
                    a || e.find(">.row:not(.template)").remove();
                    for (var g = d.length - 1; g >= 0; g--) {
                        var h = f.clone().removeClass("template");
                        e.find(">.row:not(.template) > div");
                        c.appendObjRow(e, h, d[g], c.loadADealer, c.suggestDeleteDealer)
                    }
                    e.find(".template").appendTo(e),
                    b("#recentlyViewedDealers").toggle(0 === d.length),
                    c.initSocialButtons()
                }
            },
            loadADealer: function(a, d, e) {
                if (a) {
                    var f = document.location.protocol + "//"
                      , g = /^https{0,1}:\/\//.test(a.url) ? a.url : f + a.url
                      , h = d.find(".website")
                      , i = T1.settings.dealerUrlQueryString
                      , j = location.hostname;
                    return i && "string" == typeof a.url && -1 === a.url.toLowerCase().indexOf(j.toLowerCase()) && (-1 === g.indexOf("?") && (g += "?"),
                    g += i.replace(/%host%/g, j)),
                    d.find(".obj-desc").attr("data-obj-code", a.id),
                    d.find("img").attr("src", c.getMapUrl(a)),
                    d.find(".name").html(c.htmlDecode(a.name)),
                    d.find(".address:eq(0)").html(c.htmlDecode(a.address.address1)),
                    d.find(".address:eq(1)").html(c.htmlDecode(a.address.zip + " " + a.address.city + (a.address.region ? "(" + a.address.region + ")" : ""))),
                    h.attr("href", c.htmlDecode(g)).toggle(g !== f),
                    h.attr("target", "_blank"),
                    d.find(".website").attr("data-bt-value", "string" == typeof a.url && a.url.length > 0 ? a.url : ""),
                    d.find(".website span").html(c.htmlDecode(a.url)),
                    d.find(".btn-details").attr("href", c.htmlDecode(g)).css({
                        display: "" !== b.trim(a.url) ? "inline-block" : "none"
                    }),
                    d.find(".btn-map").attr("href", c.htmlDecode(g)),
                    g === f && d.removeAttr("href"),
                    d.find(".btn-delete").click(e),
                    !0
                }
                return !1
            },
            getMapUrl: function(a) {
                return b.safe("T1.googleServices.maps.getStaticMapUrl")(a.address.origin.lat, a.address.origin.lon, c.mapZoomLevel, c.mapSize.join("x"))
            },
            initSocialButtons: function() {
                T1.channels.eprivacy.publish(d.EPRIVACY_LOAD_COMPONENT, {
                    root: b("#savedCars > .row:not(.template), #savedDealers > .row:not(.template)"),
                    callback: function() {
                        b("#savedCars .share-options").each(function() {
                            var a = b(this)
                              , c = a.parents(".form-btn").find(".btn-read-more").attr("href");
                            a.find("a").attr("data-link", c)
                        })
                    }
                })
            },
            toggleSavedCars: function() {
                var a = c.displayedCars / 2
                  , d = b("#savedCars").find(">.row:gt(" + (a - 1) + "):not(.template)")
                  , e = d.find(":visible").size() > a
                  , f = b({});
                e && (d = b(d.get().reverse())),
                b("#savedCarsExtender").toggleClass(c.classes.carsExtended, !e),
                d.each(function() {
                    var a = b(this);
                    f.queue(function(b) {
                        a.animate({
                            height: "toggle",
                            opacity: "toggle"
                        }, c.animationsDuration, b)
                    })
                })
            },
            isMySavedCarsExtended: function() {
                return b("#savedCarsExtender").hasClass(c.classes.carsExtended)
            },
            setExtenderCarsCount: function(a) {
                b("#savedCarsExtender i.count").text(a),
                b("#savedCarsExtender").toggle(a > c.displayedCars)
            },
            resetSearchMyCarForm: function(a) {
                a && a.preventDefault(),
                b("#car-code").focus().val(""),
                c.resetFormClasses(b(c.panes.myCars.form))
            },
            resetSaveACarForm: function() {
                b("#save-car-name").val(""),
                c.resetFormClasses(b(c.panes.saveCar.forms.save))
            },
            cancelSaveACarForm: function() {
                c.resetFormClasses(b(c.panes.saveCar.forms.save)),
                b("#save-car-name").val(b("#searchCarResult").data("searched-car").car)
            },
            setLoginRedirection: function(a) {
                b("#" + c.panes.login.id).attr("data-tab-redirect", a)
            },
            cancelLogin: function(a) {
                a.preventDefault(),
                a.stopImmediatePropagation(),
                T1.channels.mytoyota.publish(d.MY_TOYOTA_LOGIN_REDIRECT, {}),
                T1.channels.mytoyota.publish(d.MY_TOYOTA_CANCEL_LOGIN)
            },
            requestSaveCar: function(a) {
                if (c.isAuthenticated)
                    return b.ajax({
                        type: "POST",
                        dataType: "json",
                        headers: c.getRequestHeaders(),
                        url: d.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR + "/" + c.getToyotaCodeFromConfig(a)
                    });
                c.useSsoService && T1.channels.mytoyota.publish(T1.constants.PANE_LOGIN_READY, {})
            },
            getToyotaCodeFromConfig: function(a) {
                return a.personal && a.personal.code || a.personalCode || a.code
            },
            requestSaveCarFormSubmit: function() {
                b(c.panes.myCars.form).hasClass(c.classes.formSuccess) && b("#searchCarResult > .row:first").clone().appendTo(b("#pane-save-car .col-xtra-info").empty()),
                !c.isAuthenticated && c.useSsoService && T1.channels.mytoyota.publish(T1.constants.PANE_LOGIN_READY, {})
            },
            saveTradeinCar: function(e) {
                if (c.isAuthenticated) {
                    var f = c.getUser().data
                      , g = {
                        "Content-Type": "application/json",
                        Accept: "application/json"
                    }
                      , h = a.useSsoService ? T1.constants.URL_USER_DATA : T1.request.getDomainName() + d.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_DEALER;
                    a.useSsoService && T1.mypage.user && (g[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: T1.mypage.user._id,
                        email: T1.mypage.user.email,
                        token: T1.mypage.user.token
                    })),
                    f.mytoyota.tradeincars = [e.car];
                    var i = b.ajax({
                        type: "POST",
                        dataType: "JSON",
                        url: h,
                        headers: g,
                        data: JSON.stringify(f)
                    });
                    return i.done(function(a, b) {
                        a.success && T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, a.user)
                    }).done(e.done),
                    i.fail(e.fail),
                    !0
                }
                return !1
            },
            getCar: function(a) {
                a.out = {
                    car: null
                },
                T1.settings.mock ? a.out.car = c.getMockCar() : a.out.car = c.getSavedCar(a.id) || c.getStoredCar(a.id)
            },
            getMockCar: function() {
                return {
                    car: "Auris Touring Sports Mockup Edition",
                    carChapterUrl: "/html/pages/explore/index-01-explore.html",
                    carConfigUrl: "http://t1-preview-tz.herokuapp.com/carconfig/code/18292",
                    ccVersion: "6.HD",
                    code: "abc123",
                    colour: "Blue Lagoon (BL1)",
                    country: "TZ",
                    customName: null,
                    engine: "2.5L Petrol Turbo (352HP)",
                    facebookShare: "/carconfig/code/18292",
                    grade: "Awesome Grade",
                    id: "18292",
                    ids: {
                        car: "361caa39-4351-4874-9b4f-1cf57eabf405",
                        colour: "BL1",
                        model: "AURIS-TS"
                    },
                    language: "EN",
                    model: "Auris Touring Sports",
                    price: {
                        discounts: [{
                            value: "1",
                            promoId: "promoId-1"
                        }, {
                            value: "2",
                            promoId: "promoId-2"
                        }, {
                            value: "3.6",
                            promoId: "promoId-3"
                        }],
                        discountsApplied: !0,
                        list: 12345,
                        listDiscount: 2345,
                        listWithDiscount: 1e4
                    },
                    qrCode: "//prev.ccsave.toyota-europe.com/qrcode/2h85vhq",
                    saved: !1,
                    storeDate: "15/10/2018",
                    storeDateEpoch: 1539600934409,
                    upholstery: "Devil black leather with firy red accent",
                    url: "/html/pages/explore/index-01-explore.html"
                }
            },
            suggestDeleteCar: function(a) {
                var d = b(this)
                  , e = d.parents(".form-btn").siblings(".obj-desc");
                a.preventDefault(),
                c.ovlRemoveObj(e, c.carDeleted, c.requestDeleteCar, c.stores.cars, c.getUser().data.mytoyota)
            },
            suggestRemoveCar: function(a) {
                var d = b(this)
                  , e = d.parents(".obj-desc");
                a.preventDefault(),
                c.ovlRemoveObj(e, c.loadStoredCars, c.removeCar, c.stores.cars, c.getStorage())
            },
            suggestDeleteDealer: function(a) {
                var d = b(this)
                  , e = d.parents(".form-btn").siblings(".obj-desc");
                a.preventDefault(),
                c.ovlRemoveObj(e, c.dealerDeleted, c.requestDeleteDealer, c.stores.dealers, c.getUser().data.mytoyota)
            },
            suggestRemoveDealer: function(a) {
                var d = b(this)
                  , e = d.parents(".obj-desc");
                a.preventDefault(),
                c.ovlRemoveObj(e, c.loadStoredDealers, c.removeDealer, c.stores.dealers, c.getStorage())
            },
            ovlRemoveObj: function(a, b, d, e, f) {
                if (!a.find(".del-ovl").size()) {
                    var g = a.attr("data-obj-code")
                      , h = a.parents("section:first")
                      , i = h.find(">.del-ovl.template").clone()
                      , j = {
                        index: 0
                    };
                    i.attr("data-obj-code", g).removeClass("template"),
                    h.find(".del-ovl:not(.template)").remove(),
                    a.append(i),
                    a.find(".btn-yes").click({
                        store: e,
                        code: g,
                        object: c.getObject(f, e, g, j),
                        index: j.index,
                        callback: b
                    }, d),
                    a.find(".btn-no").click(function(a) {
                        a.preventDefault()
                    })
                }
            },
            requestDeleteCar: function(e) {
                e.preventDefault();
                var f = (a.useSsoService ? d.URL_MY_TOYOTA_DELETE_CAR : T1.request.getDomainName() + d.URL_MY_TOYOTA_DELETE_CAR) + "/" + c.getToyotaCodeFromConfig(e.data.object);
                if (c.isAuthenticated) {
                    c.unCollectObject(e.data.store, e.data.code);
                    var g = b.ajax({
                        type: "DELETE",
                        url: f,
                        headers: c.getRequestHeaders()
                    });
                    g.done(e.data.callback(e)),
                    g.fail(c.objDeleteError(e))
                }
            },
            getRequestHeaders: function() {
                var b = {
                    "Content-Type": "application/json",
                    Accept: "application/json"
                };
                return a.useSsoService && T1.mypage.user && (b[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                    id: T1.mypage.user._id,
                    email: T1.mypage.user.email,
                    token: T1.mypage.user.token
                })),
                b
            },
            requestDeleteDealer: function(b) {
                b.preventDefault && b.preventDefault();
                var e = a.useSsoService ? T1.constants.URL_USER_DATA : T1.request.getDomainName() + d.URL_MY_TOYOTA_DELETE_DEALER;
                c.requestDelete(b, e)
            },
            requestDelete: function(a, d) {
                if (c.isAuthenticated) {
                    c.unCollectObject(a.data.store, a.data.code);
                    var e = b.ajax({
                        type: "POST",
                        dataType: "JSON",
                        url: d,
                        headers: c.getRequestHeaders(),
                        data: JSON.stringify(c.getUser().data)
                    });
                    e.done(a.data.callback(a)),
                    e.fail(c.objDeleteError(a))
                }
            },
            carDeleted: function(a) {
                return function(b, e) {
                    b.success ? (T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, b.user),
                    c.loadSavedCars()) : c.objDeleteError(a, c.errorMessage(b))()
                }
            },
            dealerDeleted: function(a) {
                return function(b, e) {
                    b.success ? (T1.channels.mytoyota.publish(d.MY_TOYOTA_SET_USER_DATA, b.user),
                    T1.channels.mytoyota.publish(d.MY_TOYOTA_DEALER_REMOVED, b),
                    c.loadSavedDealers()) : c.objDeleteError(a, c.errorMessage(b))()
                }
            },
            objDeleteError: function(a, d) {
                return function(e, f, g) {
                    var h = b(a.target).parents(".del-ovl");
                    c.collectObject(a.data.store, a.data.object, a.data.index),
                    h.addClass("error").find("h5").html(d || e.responseText || T1.labels.forms.errorSubmit),
                    h.animate({
                        height: h.get(0).scrollHeight
                    }, c.animationsDuration)
                }
            },
            closeAllOvl: function(a) {
                b(a.target).is(".btn-edit, .btn-delete, .btn-yes") || b("#forms.my-toyota .del-ovl:not(.template)").remove()
            },
            displayFormError: function(a, b) {
                a.find(".error-message").html(b),
                a.addClass(c.classes.formError)
            },
            resetFormClasses: function(a) {
                a.removeClass(c.classes.formError + " " + c.classes.formSuccess)
            },
            overlayerClosed: function(a) {
                c.overlayerOpen && b(a.container).find("#forms.my-toyota").size() && (c.subscriptions.tabEvent.unsubscribe(),
                c.resetStackEvents(),
                c.overlayerOpen = !1)
            },
            showErrorMessage: function(a) {
                console.log(a),
                T1.channels.dialog.publishAsync(d.TOAST_CUSTOM, {
                    customText: a,
                    centerScreen: !0,
                    timeout: 2e3
                })
            },
            updateCarchapterLinks: function(a) {
                if (a && a.ids && T1.settings.modelMap && T1.settings.modelMap[a.ids.model]) {
                    var b = T1.settings.modelMap[a.ids.model];
                    b.links && b.links.CarChapter && (a.carChapterUrl = b.links.CarChapter)
                }
            },
            validateDealers: function(a, d) {
                if (a = a || [],
                !c.isAuthenticated) {
                    for (var e = {
                        dealers: []
                    }, f = 0; f < a.length; f++)
                        e.dealers.push({
                            uuid: a[f].uuid
                        });
                    var g = T1.settings.dealer.extraCountries ? "?extraCountries=" + T1.settings.dealer.extraCountries.toUpperCase() : ""
                      , h = d && d.container && d.container.data("exclude") || !1;
                    g = b.safe("T1.dealerFinder.setExcludeLeadManagementSystemParam", g)(g, h);
                    var i = T1.utilities.url.concat("/api/dealer/validate" + g)
                      , j = b.ajax({
                        type: T1 && T1.settings && T1.settings.mock ? "GET" : "POST",
                        dataType: "JSON",
                        url: i,
                        headers: {
                            "Content-Type": "application/json",
                            Accept: "application/json"
                        },
                        data: JSON.stringify(e)
                    });
                    return j.done(function(a) {
                        var b = c.getStorage();
                        b.dealers = a.dealers,
                        c.setStorage(b)
                    }),
                    j
                }
                var k = b.Deferred();
                return k.resolve({
                    dealers: a
                }),
                k
            },
            verifyUserTokenState: function() {
                return Object.resolve("T1.sso.userTokenVerificationState") || b.Deferred().resolve()
            },
            api: {
                getDealers: function(a) {
                    var b = c.isAuthenticated ? c.getUser().data.mytoyota.dealers || [] : c.getStorage().dealers
                      , d = c.validateDealers(b, a);
                    return d.done(function(a) {
                        T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_DEALER_READY, a.dealers.reverse())
                    }),
                    d
                },
                removeDealer: function(a) {
                    c.isAuthenticated || c.removeDealer({
                        data: a
                    })
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            isAuthenticated: function() {
                return a.isAuthenticated
            },
            requestCarInfo: function(a, b, d) {
                c.requestCarInfo(a, !1, b, d)
            },
            getDealers: a.api.getDealers
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.modelRangeMyToyota = function() {
        "use strict";
        var b = {
            container: null,
            containerPanelMobile: null,
            storageMyToyota: null,
            carsLocal: [],
            subscriptions: {},
            useSsoService: "true" === T1.settings.ssoUseMicroService,
            user: null,
            currentCar: {},
            init: function() {
                b.container = $("#model-range-my-cars"),
                b.containerPanelMobile = $('*[data-placeholder="#model-range-my-cars"]').parents(".collapsible-panel"),
                b.updateMyCars(),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function(a) {
                    "my-toyota-cars" === a.identifier && b.updateMyCars()
                }),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_DATA_LOADED, function() {
                    b.updateMyCars()
                })
            },
            setEvents: function() {
                $(document).off("click", ".btn-remove", b.handleRemove).on("click", ".btn-remove", b.handleRemove)
            },
            cancel: function() {
                return b.container.addClass("hidden"),
                b.containerPanelMobile.addClass("hidden"),
                !1
            },
            render: function() {
                var c = b.getCars();
                if (!c || !Array.isArray(c.cars) || !c.cars.length)
                    return b.cancel();
                var d = $("#model-range-my-cars-template").html()
                  , e = a.handlebars.compile(d)
                  , f = e(c);
                b.container.find(".container").remove(),
                b.container.append(f),
                b.containerPanelMobile.removeClass("hidden"),
                b.container.removeClass("hidden")
            },
            getLocalStorage: function() {
                if (!window.localStorage)
                    return null;
                try {
                    b.storageMyToyota = JSON.parse(localStorage.getItem("mytoyota"))
                } catch (e) {
                    b.storageMyToyota = {},
                    localStorage.setItem("mytoyota", "{}")
                }
                return b.storageMyToyota
            },
            handleRemove: function(a) {
                a.preventDefault();
                var c = $(a.target).parents(".modelitem")
                  , d = c.attr("data-id")
                  , e = b.container.find("#delete-" + d)
                  , f = "true" === c.attr("data-saved");
                b.currentCar.id = d,
                b.currentCar.isSaved = f,
                b.requestDeleteCar(e)
            },
            getCars: function() {
                var a = [];
                if (b.getLocalStorage() && (b.carsLocal = b.storageMyToyota.cars || [],
                a = b.carsLocal.slice()),
                b.isAuthenticated()) {
                    b.user = T1.mypage.user;
                    var c = b.user.data.mytoyota.cars || null;
                    c && c.length && (c.forEach(function(b) {
                        for (var c = 0; c < a.length; c++)
                            b.code === a[c].code && a.splice(c, 1)
                    }),
                    a = a.concat(c))
                }
                if (a.length) {
                    a = a.reverse().slice(0, 6);
                    for (var d = {}, e = 0; e < a.length; e++)
                        d = a[e],
                        d.price && d.price.listWithDiscount && (d.priceFormatted = b.getPriceFormatted(d.price.listWithDiscount));
                    a.length < 6 && (d = {
                        dummy: !0
                    },
                    a.push(d))
                }
                return {
                    cars: a
                }
            },
            getPriceFormatted: function(a) {
                return globalize.format(a, "c")
            },
            requestDeleteCar: function(a) {
                a.is(":visible") || a.fadeIn(400, b.setOverlay)
            },
            setOverlay: function() {
                var a = $(this)
                  , c = a.find(".btn-yes")
                  , d = a.find(".btn-no");
                c.off("click", b.confirmDelete).on("click", b.confirmDelete),
                d.off("click", b.cancelDelete).on("click", b.cancelDelete),
                $("body").one("click", b.cancelDelete)
            },
            confirmDelete: function(a) {
                a.preventDefault(),
                b.deleteCar(b.currentCar.id, b.currentCar.isSaved)
            },
            cancelDelete: function(a) {
                a.preventDefault(),
                b.container.find("#delete-" + b.currentCar.id).fadeOut(500)
            },
            deleteCar: function(a, c) {
                if (c && b.isAuthenticated()) {
                    for (var d = (b.getCars() || {}).cars, e = 0; e < d.length; e++) {
                        var f = d[e];
                        if (f.id === a) {
                            a = f.personal && f.personal.code || f.personalCode || f.code;
                            break
                        }
                    }
                    var g = (b.useSsoService ? T1.constants.URL_MY_TOYOTA_DELETE_CAR : T1.request.getDomainName() + T1.constants.URL_MY_TOYOTA_DELETE_CAR) + "/" + a
                      , h = {
                        "Content-Type": "application/json",
                        Accept: "application/json"
                    };
                    b.useSsoService && (h[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: b.user._id,
                        email: b.user.email,
                        token: b.user.token
                    })),
                    b.removeSavedCarObject(a);
                    var i = $.ajax({
                        type: "DELETE",
                        url: g,
                        headers: h
                    });
                    i.done(b.handleCarDeleted),
                    i.fail(b.handleCarDeletedError)
                } else {
                    for (var e = 0; e < b.carsLocal.length; e++) {
                        if (b.carsLocal[e].id.trim(" ") === a.trim(" ")) {
                            b.carsLocal.splice(e, 1);
                            break
                        }
                    }
                    var j = JSON.stringify(b.storageMyToyota);
                    localStorage.setItem("mytoyota", j),
                    b.render()
                }
            },
            removeSavedCarObject: function(a) {
                var c = b.user.data.mytoyota.cars;
                if (b.isAuthenticated() && c && c.length)
                    for (var d = 0; d < c.length; d++)
                        if (c[d].id === a) {
                            c.splice(d, 1);
                            break
                        }
            },
            handleCarDeleted: function(a) {
                T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_SET_USER_DATA, a.user),
                b.deleteCar(b.currentCar.id, !1)
            },
            handleCarDeletedError: function(a, b) {
                console.error(b)
            },
            updateMyCars: function() {
                b.container && 0 !== b.container.length && (b.render(),
                b.setEvents())
            },
            isAuthenticated: function() {
                return !(!T1.mypage || !T1.mypage.user)
            }
        };
        return {
            init: b.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.modal = function() {
        "use strict";
        var a = {
            init: function() {
                c.initOnDemand(b("body")),
                T1.channels.global.subscribe(d.ON_DOC_CLICK, function(a) {
                    b(a.target).hasClass("modal-launcher") || b(a.target).parents(".modal-container").size() || c.hideOpenModals()
                })
            },
            initOnDemand: function(a) {
                var b = a.find(".modal-container")
                  , d = a.find(".modal-launcher");
                c.hideOpenModals(),
                b.size() && b.each(c.addCloseButton),
                d.size() && d.click(c.onTriggerClick)
            },
            onTriggerClick: function(a) {
                a.preventDefault(),
                c.hideOpenModals();
                var d = c.getContent(b(this))
                  , e = c.getPosition(d);
                d.css({
                    top: e.y,
                    left: e.x
                }).fadeIn("slow")
            },
            getPosition: function(a) {
                var c = b(window)
                  , d = c.width()
                  , e = c.height()
                  , f = a.outerWidth()
                  , g = a.outerHeight()
                  , h = b("#nav-secondary-level")
                  , i = b("#navigation")
                  , j = h.size() ? i.height() + h.height() : i.height();
                return {
                    x: (d - f) / 2,
                    y: b(".overlayerWrapper").size() ? (e - g) / 2 : (e - g - j) / 2 + j
                }
            },
            getContent: function(a) {
                return b(".modal-container", a.closest("article"))
            },
            hideOpenModals: function() {
                var a = b(".modal-container:visible");
                a.size() && (a.find(".video-js").size() && T1.channels.media.publishAsync(d.VIDEO_STOP, {}),
                a.hide())
            },
            addCloseButton: function(a) {
                var d = b("<a/>").addClass("closelink").attr("href", "#").css({
                    position: "absolute",
                    bottom: "-40px",
                    right: "3px"
                }).html(T1.labels.close).append(b("<i/>").addClass("icon icon-remove"));
                d.click(function(a) {
                    a.preventDefault(),
                    c.hideOpenModals()
                }),
                b(".feature-cbv", this).append(d)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.carousel = function() {
        "use strict";
        var a = {
            carouselId: "T1Carousel",
            carouselIndex: 0,
            carouselClass: "carousel-container",
            carouselInnerClass: "carousel-inner",
            carouselExpanded: "expanded",
            carouselType: "slide",
            carouselInnerNode: null,
            youtubeUrl: "//www.youtube.com/embed/<id>?rel=0&hd=1&loop=<autoloop>;autoplay=1;controls=0;modestbranding=1&wmode=opaque",
            isRtlSite: !1,
            maxCarouselLineIndicators: {
                default: 6,
                xs: 3
            },
            firstBreakpointChange: !0,
            mode: null,
            init: function() {
                c.isRtlSite = "rtl" === T1.settings.siteDirection,
                c.setMode(),
                b("." + c.carouselClass).each(function() {
                    var a, d = b(this);
                    d.data("mode-slide-dependent") ? (c.cloneSlideModeDependentCarousel(d),
                    c.removeSlidesInModeDependentCarousel(d),
                    a = c.getSlidesInfo(d),
                    c.calculateLineIndicatorsInModeDependentCarousel(d, a)) : a = c.getSlidesInfo(d),
                    c.initializeCarousel(this, d.data(), !1, a)
                }),
                c.initializeCarouselExpanders(),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_CREATE, c.buildCarousel),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_EXPAND, c.toggleExpand),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_RESIZE, c.resize),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_INITIALIZE_ON_OVERLAY, c.initOnOverlay),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_SLIDE_ADD, c.addSlide),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_INJECTED_RESET, c.resetInjection),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_START, c.start),
                T1.channels.media.subscribe(T1.constants.CAROUSEL_PAUSE, c.pause),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, c.onbreakPointchange),
                b("body").on("keydown", c.captureKeys)
            },
            getSlidesInfo: function(a) {
                return {
                    activeSlide: 0,
                    numberOfSlides: a.find(".carousel-inner").children().length
                }
            },
            onbreakPointchange: function(a) {
                c.firstBreakpointChange ? c.firstBreakpointChange = !1 : (c.setMode(),
                c.handleModeDependentCarouselsOnBrptChange(),
                c.toggleLineIndicatorsCounter())
            },
            handleModeDependentCarouselsOnBrptChange: function() {
                if (a.previousMode !== a.mode)
                    for (var d, e, f = b(".clonedCarousel"), g = 0; g < f.length; g++)
                        c.removeOrigModeDependentCarousel(b(f[g])),
                        d = c.copyClonedCarousel(b(f[g])),
                        c.switchDataId(d),
                        c.removeSlidesInModeDependentCarousel(d),
                        c.prependClonedClone(b(f[g]), d),
                        e = c.getSlidesInfo(d),
                        c.calculateLineIndicatorsInModeDependentCarousel(d, e),
                        c.initializeCarousel(d, d.data(), !1, e)
            },
            toggleLineIndicatorsCounter: function() {
                a.previousMode !== a.mode && b("." + c.carouselClass).each(function() {
                    var a = b(this)
                      , d = c.getSlidesInfo(b(this))
                      , e = a.find(".carouselNav")
                      , f = a.find(".slide-counter")
                      , g = e.find(".carousel-indicators");
                    d.tooManySlides = c.mode === T1.constants.BREAKPOINTS_MODE.MOBILE || d.numberOfSlides > c.getMaxCarouselLineIndicators(),
                    g.toggleClass("enabled", !d.tooManySlides),
                    f.toggleClass("hidden", !d.tooManySlides)
                })
            },
            calculateLineIndicatorsInModeDependentCarousel: function(b, d) {
                if (a.previousMode !== a.mode) {
                    var e = b.find(".carouselNav")
                      , f = e.find(".carousel-indicators li");
                    if (d.tooManySlides = c.mode === T1.constants.BREAKPOINTS_MODE.MOBILE || d.numberOfSlides > c.getMaxCarouselLineIndicators(),
                    !d.tooManySlides && d.numberOfSlides !== f.length) {
                        f.slice(d.numberOfSlides, f.length).addClass("hidden")
                    }
                }
            },
            removeOrigModeDependentCarousel: function(a) {
                var c = a.data("id");
                b("[id=" + c + "]").remove()
            },
            copyClonedCarousel: function(a) {
                var b = a.clone();
                return b.removeClass("hidden").removeClass("clonedCarousel"),
                b
            },
            prependClonedClone: function(a, b) {
                a.parent().prepend(b)
            },
            switchDataId: function(a) {
                var c = a.attr("data-id")
                  , d = a.find("[data-id]");
                if (c) {
                    a.removeAttr("data-id").attr("id", c);
                    for (var e = 0; e < d.length; e++) {
                        var f = b(d[e]).attr("data-id");
                        b(d[e]).removeAttr("data-id").attr("id", f)
                    }
                }
            },
            start: function(a) {
                a.carousel.hasClass(c.getExpandedClass()) || a.carousel.carousel("cycle")
            },
            pause: function(a) {
                a.carousel.carousel("pause")
            },
            initOnOverlay: function(a) {
                a || (a = {}),
                (a.target || b(".overlayerWrapper")).find("." + c.carouselClass).each(function() {
                    var a = b(this)
                      , d = a.find(".carousel-inner")
                      , e = d.children().length
                      , f = {
                        activeSlide: 0,
                        numberOfSlides: e
                    };
                    c.initializeCarousel(this, a.data(), !1, f)
                }),
                c.initializeCarouselExpanders()
            },
            animations: {
                set: function(a) {
                    for (var b in c.animations)
                        "set" !== b && c.animations[b].init && c.animations[b].init(a)
                },
                fade: {
                    init: function(a) {
                        var c = a.hasClass("fade") ? a : [];
                        !Modernizr.csstransitions && c.length > 0 && (c.find(".item").css({
                            zoom: 1,
                            filter: "alpha(opacity=0)",
                            opacity: 0
                        }),
                        c.find(".item.active").css({
                            zoom: 1,
                            filter: "alpha(opacity=100)",
                            opacity: 1
                        }),
                        c.on("slid.bs.carousel", function() {
                            b(this).find(".item.active").animate({
                                opacity: 1
                            }, 500)
                        }).on("slide.bs.carousel", function() {
                            b(this).find(".item.active").animate({
                                opacity: 0
                            }, 500, function() {
                                b(this).trigger("slid.bs.carousel")
                            })
                        }))
                    }
                }
            },
            next: function() {
                b(".carousel:not(." + c.getExpandedClass() + ") .carousel-control.right").trigger("click")
            },
            previous: function() {
                b(".carousel:not(." + c.getExpandedClass() + ") .carousel-control.left").trigger("click")
            },
            captureKeys: function(a) {
                if (a = window.event || a)
                    switch (a.keyCode) {
                    case T1.constants.KEYCODE_LEFT:
                        c.previous();
                        break;
                    case T1.constants.KEYCODE_RIGHT:
                        c.next()
                    }
            },
            initializeCarousel: function(a, d, e, f) {
                var g, h = b(a), i = d.enableswipe || !0, j = h.find(".carouselNav");
                f.tooManySlides = c.mode === T1.constants.BREAKPOINTS_MODE.MOBILE || f.numberOfSlides > c.getMaxCarouselLineIndicators(),
                d || (d = {},
                d.interval = !1),
                h.carousel(d),
                e || c.animations.set(h),
                i && c.enableSwipe({
                    carousel: h
                }),
                j.find(".carousel-indicators").toggleClass("enabled", !f.tooManySlides),
                c.handleBootstrapSlidAndSlideEvents(h),
                g = c.buildSlideCounter(f),
                j.append(g),
                T1.channels.media.publishAsync(T1.constants.SLIDER_ADDCOUNTER, {
                    slideCounter: g,
                    initialIndex: f.activeSlide,
                    numberOfSlides: f.numberOfSlides
                }),
                e && T1.channels.media.publish(T1.constants.CAROUSEL_RESIZE, {
                    carousel: h,
                    height: f.carouselHeight
                }),
                T1.channels.media.publishAsync(T1.constants.CAROUSEL_CREATED, h)
            },
            getMaxCarouselLineIndicators: function() {
                return a.mode === T1.constants.BREAKPOINTS_MODE.DESKTOP || a.mode === T1.constants.BREAKPOINTS_MODE.TABLET ? c.maxCarouselLineIndicators.default : c.maxCarouselLineIndicators.xs
            },
            handleSlideCounter: function(a, b) {
                var c = b.find(".slide-counter:first")
                  , d = a + 1;
                c && T1.channels.media.publishAsync(T1.constants.SLIDER_UPDATECOUNTER, {
                    slideCounter: c,
                    activeSlideNumber: d
                })
            },
            handleBootstrapSlidAndSlideEvents: function(a) {
                a.on("slid.bs.carousel", function(b) {
                    T1.channels.media.publishAsync(T1.constants.CAROUSEL_SLIDE, {
                        carousel: a
                    });
                    var d = a.find(".carousel-inner .item.active")
                      , e = d.index();
                    c.handleSlideCounter(e, a)
                }),
                a.on("slide.bs.carousel", function(b) {
                    if (a.hasClass(c.getExpandedClass()))
                        b.preventDefault();
                    else {
                        var d = b.originalEvent || window.event;
                        T1.channels.media.publishAsync(T1.constants.CAROUSEL_BEFORE_SLIDE, {
                            carousel: a
                        }),
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK_CAROUSEL, {
                            el: a,
                            originalEvent: b,
                            userInitiated: !!d
                        })
                    }
                })
            },
            getExpandedClass: function() {
                return "xs" === b.safe("T1.breakpoints.currentBP")() ? "mobile-" + c.carouselExpanded : c.carouselExpanded
            },
            initializeCarouselExpanders: function() {
                var a = b(".carousel-expander[data-carousel]");
                a.length && a.off("click", c.toggleExpandClickHandler).on("click", c.toggleExpandClickHandler)
            },
            toggleExpandClickHandler: function(a) {
                var d = b(this);
                T1.channels.media.publish(T1.constants.CAROUSEL_EXPAND, {
                    expanded: !d.hasClass(c.getExpandedClass()),
                    expander: d,
                    carousel: b(d.data("carousel")).find("." + c.carouselClass)
                }),
                a.preventDefault()
            },
            toggleExpand: function(a) {
                var b = c.getExpandedClass()
                  , d = a.expander.find(".toggle-text");
                a.carousel.hide(),
                a.expander.toggleClass(b, a.expanded),
                a.carousel.toggleClass(b, a.expanded),
                a.expander.closest("section").toggleClass(b, a.expanded),
                a.carousel.hasClass(b) ? (d.text(T1.labels.viewLess),
                a.carousel.carousel("pause"),
                a.carousel.find("." + c.carouselInnerClass).css("overflow", "visible")) : (d.html(T1.labels.viewAll + "<span> (" + a.expander.data("carousel-size") + ") </span>"),
                a.carousel.carousel("cycle"),
                a.carousel.find("." + c.carouselInnerClass).css("overflow", "hidden")),
                a.carousel.fadeIn()
            },
            buildCarousel: function(a) {
                a.id || c.carouselIndex++;
                var d = a.id ? a.id : c.carouselId + c.carouselIndex
                  , e = a.activeSlide || 0
                  , f = a.targetNode || b("body")
                  , g = a.additionalClass ? " " + a.additionalClass : ""
                  , h = b("<div></div>").attr("id", d)
                  , i = b("<div></div>").addClass("carouselNav")
                  , j = b("<a></a>").addClass("t1-arrow-control carousel-control left").attr("data-slide", "prev").attr("data-target", "#" + d)
                  , k = b("<a></a>").addClass("t1-arrow-control carousel-control right").attr("data-slide", "next").attr("data-target", "#" + d)
                  , l = a.options || {}
                  , m = a.slides || c.getGallerySlides(a.gallery, a.isPrimaryGallery, a.isDesktopImagesMode)
                  , n = a.counterBelowCarousel || !1
                  , o = {
                    activeSlide: e,
                    numberOfSlides: m.length,
                    carouselHeight: a.height,
                    counterBelowCarousel: n
                };
                h.addClass(c.carouselClass + " carousel " + (a.type ? a.type : c.carouselType) + g),
                a.isTopFeaturesV2 && h.addClass("gallery-horizontal topfeatures-v2-carousel"),
                i.append(c.buildIndicators(m.length, e, d)),
                h.append(c.buildCarouselSlideWrapper(m, a.sectionTitle, e, a.isOverlayer || !1)),
                i.append(j),
                i.append(k),
                h.append(i),
                f.append(h),
                l.interval = a.interval,
                l.interval || (l.interval = !1),
                c.initializeCarousel(h, l, !0, o)
            },
            buildSlideCounter: function(a) {
                var d = c.mode === T1.constants.BREAKPOINTS_MODE.MOBILE || a.tooManySlides || !1
                  , e = a.counterBelowCarousel || !1
                  , f = b('<div class="slide-counter"></div>')
                  , g = b('<div class="counter-bg"></div>')
                  , h = b('<span class="current-index"></span>');
                return f.toggleClass("hidden", !d),
                e && f.addClass("below-carousel"),
                g.prepend(h),
                f.prepend(g),
                f
            },
            getGallerySlides: function(a, c, d) {
                var e = b(a)
                  , f = c ? e.find(".gallery-item:has(>.item-link)") : e.find(".gallery-item:not(:has(>.gallery-link)), .gallery-link")
                  , g = [];
                return f.size() || (f = e.find("a")),
                f.each(function(a, f) {
                    f = b(f);
                    var h = f.hasClass("item-link") ? f : f.find(".item-link").or(f)
                      , i = e.hasClass("topfeatures-v2-gallery") && !c
                      , j = i ? h.data("type") : f.data("type");
                    switch (i || f.addClass("overlayerNode"),
                    j) {
                    case "image":
                        var k = d || b(window).width() > T1.constants.SCREEN_SMALL ? "desktop" : "mobile";
                        h.each(function(a, c) {
                            c = b(c);
                            var d = c.data("src-" + k) || c.attr("href");
                            g.push({
                                type: j,
                                src: d,
                                isLazyLoad: !0,
                                dataNode: f
                            })
                        });
                        break;
                    case "video":
                        var l = {
                            type: j,
                            srcMp4: h.data("media-sourcemp4"),
                            srcOgv: h.data("media-sourceogv"),
                            srcWebm: h.data("media-sourcewebm"),
                            srcFlv: h.data("media-sourceflv"),
                            srcVtt: h.data("media-sourcevtt"),
                            srcVttLang: h.data("media-sourcevttlang"),
                            poster: h.data("media-poster"),
                            isLazyLoad: !0,
                            dataNode: f
                        };
                        l.tagging = b.safe("T1.statistics.getAttributes")(h),
                        g.push(l);
                        break;
                    case "html":
                        if (f.hasClass("topfeatures-v2-item")) {
                            var m = f.clone();
                            g.push({
                                type: j,
                                dataNode: m
                            })
                        } else
                            g.push({
                                type: j,
                                dataNode: f
                            });
                        break;
                    case "iframe":
                        g.push({
                            type: j,
                            link: h.attr("href"),
                            isLazyLoad: !0,
                            dataNode: f
                        });
                        break;
                    case "external-video":
                        g.push({
                            type: j,
                            youtubeId: T1.utilities.youtube.getYouTubeId(h.attr("href")),
                            isLazyLoad: !0,
                            dataNode: f
                        })
                    }
                }),
                g
            },
            resize: function(a) {
                a.carousel && a.height && a.carousel.find("." + c.carouselInnerClass).css("min-height", a.height + "px")
            },
            buildIndicators: function(a, c, d) {
                var e = b("<ol></ol>")
                  , f = null
                  , g = null;
                for (e.addClass("carousel-indicators"),
                g = 0; g < a; g++)
                    f = b("<li></li>").attr("data-target", "#" + d).attr("data-slide-to", g.toString()).addClass(g === c ? "active" : ""),
                    e.append(f);
                return e
            },
            buildCarouselSlideWrapper: function(c, d, e, f) {
                for (var g = a, h = null, i = b("<div/>").addClass(g.carouselInnerClass), j = null, k = null, l = null, m = 0; m < c.length; m++) {
                    switch (j = b("<div></div>").addClass("item").addClass(m === e ? "active" : ""),
                    h = c[m],
                    h.dataNode && j.data("dataNode", h.dataNode),
                    h.type) {
                    case "image":
                        j.attr("data-type", "image"),
                        k = b("<img>"),
                        l = h.isLazyLoad ? {
                            "data-lazy-load": h.src
                        } : {
                            src: h.src
                        },
                        k.attr(l),
                        j.append(k);
                        break;
                    case "video":
                        j.attr("data-type", "video"),
                        h.target = j,
                        h.lazyLoadPoster = !0,
                        h.isOverlayer = f,
                        m === e && (h.autoplay = !0),
                        T1.channels.media.publish(T1.constants.VIDEO_CREATEPLAYER, h);
                        break;
                    case "iframe":
                        j.attr("data-type", "iframe"),
                        k = b("<iframe></iframe>"),
                        k.attr({
                            "data-lazy-load": h.link,
                            width: "100%",
                            height: "100%",
                            frameborder: "0"
                        }),
                        j.append(k);
                        break;
                    case "external-video":
                        j.attr("data-type", "external-video"),
                        k = b('<iframe class="youtube-video"></iframe>'),
                        k.attr({
                            "data-lazy-load": g.youtubeUrl.replace(/<id>/gi, h.youtubeId).replace(/<autoloop>/gi, T1.settings.videoPlayer.autoLoop && "true" === T1.settings.videoPlayer.autoLoop ? "1" : "0"),
                            width: "100%",
                            height: "100%",
                            frameborder: "0"
                        }),
                        j.append(k);
                        break;
                    case "html":
                        var n = b(h.dataNode);
                        n.size() && n.hasClass("topfeatures-v2-item") ? (k = n,
                        d && j.append(b('<header class="section-title"><h1>' + d + "</h1> </header>"))) : k = b(h.html),
                        j.append(k)
                    }
                    i.append(j)
                }
                return g.carouselInnerNode = i,
                i
            },
            enableSwipe: function(a) {
                var d = "ontouchstart"in window || navigator.msMaxTouchPoints > 0;
                if (a.carousel && d) {
                    var e = b(a.carousel)
                      , f = a.prevFn || function() {
                        e.carousel("prev")
                    }
                      , g = a.nextFn || function() {
                        e.carousel("next")
                    }
                    ;
                    e.find(".carouselNav, ." + c.carouselInnerClass).swipe({
                        swipeLeft: c.isRtlSite ? f : g,
                        swipeRight: c.isRtlSite ? g : f,
                        excludedElements: "button, input, select, textarea, .noSwipe"
                    })
                }
            },
            setMode: function() {
                var b = T1.breakpoints.currentMode();
                a.previousMode = a.mode,
                a.mode = b
            },
            removeSlidesInModeDependentCarousel: function(a) {
                for (var d = a.find("[data-display-target]"), e = 0; e < d.length; e++) {
                    var f = b(d[e]).data("display-target");
                    f && (c.mode === T1.constants.BREAKPOINTS_MODE.MOBILE && "desktop" == f && b(d[e]).remove(),
                    c.mode !== T1.constants.BREAKPOINTS_MODE.TABLET && c.mode !== T1.constants.BREAKPOINTS_MODE.DESKTOP || "mobile" != f || b(d[e]).remove())
                }
            },
            cloneSlideModeDependentCarousel: function(a) {
                var c = a.clone()
                  , d = c.attr("id")
                  , e = c.find("[id]");
                if (c.addClass("clonedCarousel"),
                c.addClass("hidden"),
                d) {
                    c.removeAttr("id").attr("data-id", d);
                    for (var f = 0; f < e.length; f++) {
                        var g = b(e[f]).attr("id");
                        b(e[f]).removeAttr("id").attr("data-id", g)
                    }
                }
                a.parent().append(c)
            },
            addSlide: function(a) {
                if (a.html) {
                    var d = a.targetNode || b(".carousel-container")
                      , e = d.find(".carousel-inner")
                      , f = b(a.html)
                      , g = a.showInjected || !1
                      , h = a.method || "append";
                    f.addClass("injected-slide"),
                    f.removeClass("active"),
                    T1.utilities.injection[h]({
                        target: e,
                        html: f,
                        waitForImages: !0,
                        forceLazyLoad: !0,
                        callback: c.addSlideInjected.bind(c, d, {
                            showInjected: g
                        })
                    })
                }
            },
            addSlideInjected: function(b, c) {
                var d = b.find(".carousel-inner")
                  , e = d.children().length - 1
                  , f = b.find(".carouselNav ol")
                  , g = f.find("li").first();
                c || (c = {}),
                f.append(g.clone().attr({
                    "data-slide-to": e,
                    class: "injected-slide"
                })),
                c.showInjected && setTimeout(a.showSlide.bind(this, b, 0), 500)
            },
            showSlide: function(a, b) {
                a.carousel(b),
                a.carousel("pause").removeData()
            },
            resetInjection: function(a) {
                var c = a.targetNode || b(".carousel-container")
                  , d = c.find(".injected-slide");
                d.length > 0 && (c.carousel(1),
                d.remove())
            }
        }
          , c = a;
        return {
            init: a.init,
            getExpandedClass: a.getExpandedClass
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.carouselResponsive = function() {
        "use strict";
        var a = {
            breakpoints: ["lg", "md", "sm", "xs"],
            currentBreakpoint: "xs",
            carouselLoadQueue: [],
            init: function() {
                T1.channels.media.subscribe(d.CAROUSEL_CREATERESPONSIVE, c.buildResponsiveCarousels),
                T1.channels.media.subscribe(d.CAROUSEL_REFRESH, c.OnCarouselRefresh),
                T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, c.rebuildResponsiveCarousels),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPAND, c.onCollapsiblePanelExpand),
                T1.channels.scrolling.subscribe(d.LAZY_LOAD_COMPLETE, c.onCarouselLazyLoaded),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function(a) {
                    var b = a.container.find(".responsive-carousel");
                    b.length && c.buildResponsiveCarousels({
                        container: b
                    })
                }),
                T1.channels.form.subscribe(d.SUBMIT_FORM_RETURN, function() {
                    var a = b(".overlayerWrapper .forms .tab-pane.active").find(".responsive-carousel");
                    a.each(function() {
                        c.refreshCarousel(b(this))
                    }),
                    T1.lazyLoad.onDemand(a)
                })
            },
            getCarouselData: function(a) {
                if (a.container) {
                    for (var d = a.container.find(".responsive-item").get(), e = a.currentBreakpoint || c.currentBreakpoint || "xs", f = [], g = a.maxCols || 12, h = a.container.parent().data(), i = c.isExpanded(a.container.parent()), j = !!a.container.closest(".container").length, k = 0, l = 0, m = b("<div></div>").toggleClass("container", !j), n = b("<div></div>").addClass("row"), o = 0; o < d.length; o++) {
                        var p = b(d[o]);
                        (p.hasClass("hide") || p.hasClass("hide-mobile") && "xs" === e || p.hasClass("hide-desktop") && "xs" !== e) && !i || (l = c.getColumnSize({
                            node: p,
                            breakpoint: e
                        }),
                        k += l,
                        k <= g && n.append(d[o]),
                        k >= g && (m.append(n),
                        f.push({
                            type: "html",
                            html: m
                        }),
                        a.container.append(m),
                        m = b("<div></div>").toggleClass("container", !j),
                        n = b("<div></div>").addClass("row"),
                        k > g ? (n.append(d[o]),
                        k = l) : k = 0))
                    }
                    return 0 !== k && (m.append(n),
                    f.push({
                        type: "html",
                        html: m
                    }),
                    a.container.append(m)),
                    h.slides = f,
                    h.targetNode = a.container,
                    h
                }
            },
            getCarouselHeight: function(a, c) {
                var d = b.Deferred()
                  , e = 0
                  , f = function(f, g) {
                    b(g).waitForImages().done(function() {
                        var g = b(this)
                          , h = g.height();
                        if (e = h > e ? h : e,
                        f === a.length - 1) {
                            var i = g.closest(".carousel-container").find(".carousel-indicators:visible, .slide-counter:visible");
                            d.resolve(e + i.height(), c)
                        }
                    })
                };
                return b(a).each(f),
                d.promise()
            },
            refreshHeight: function(a, d) {
                var e = b.Deferred()
                  , f = a.parent().data()
                  , g = a.find(".responsive-item:not(.orig-data-copy .responsive-item)").closest(".container").get()
                  , h = parseInt(a.attr("data-id"));
                return c.carouselLoadQueue[h] = c.carouselLoadQueue[h] || [],
                c.carouselLoadQueue[h].push(c.carouselLoadQueue[h].length + 1),
                b.when(c.getCarouselHeight(g, c.carouselLoadQueue[h].length)).done([function(b, d) {
                    T1.channels.media.publish(T1.constants.CAROUSEL_RESIZE, {
                        carousel: a,
                        height: b
                    }),
                    d === c.carouselLoadQueue[h].length ? e.resolve(f) : e.fail()
                }
                ].concat(d)),
                e.promise()
            },
            onCollapsiblePanelExpand: function(a) {
                c.refreshCarousel(a.panel)
            },
            onCarouselLazyLoaded: function(a) {
                a.component && (a.component.find(".responsive-carousel").length || a.component.is(".responsive-carousel")) && c.refreshCarousel(a.component)
            },
            OnCarouselRefresh: function(a) {
                c.refreshCarousel(a.target)
            },
            refreshCarousel: function(a, d) {
                a.is(":visible") && a.filter(".responsive-carousel").or(a.find(".responsive-carousel")).each(function(a, e) {
                    var f = b(e).removeClass("loaded");
                    c.refreshHeight(f, [function() {
                        c.setLoaded(f)
                    }
                    , d])
                })
            },
            setLoaded: function(a) {
                a.addClass("loaded"),
                T1.channels.dialog.publishAsync(d.LOADING_COMPLETE, {
                    target: a
                })
            },
            rebuildResponsiveCarousels: function(a) {
                c.currentBreakpoint = a,
                c.buildResponsiveCarousels({})
            },
            buildResponsiveCarousels: function(a) {
                var d = a.container || b(".responsive-carousel:not(.on-demand)")
                  , e = d.filter(":not(." + b.safe("T1.carousel.getExpandedClass")() + ".orig-data-carousel)");
                c.currentBreakpoint = a.breakpoint || c.currentBreakpoint || "xs",
                e.each(c.createCarousel(a.settings)),
                "xs" === c.currentBreakpoint ? d.each(function() {
                    c.setLoaded(b(this))
                }) : d.not(e).each(function() {
                    c.setLoaded(b(this))
                })
            },
            getColumnSize: function(a) {
                if (a.node) {
                    var b = a.breakpoint || c.currentBreakpoint || "xs"
                      , d = a.node.attr("class") || ""
                      , e = c.breakpoints.indexOf(b)
                      , f = 12;
                    for (e; e < c.breakpoints.length; e++)
                        if (-1 !== d.indexOf("col-" + c.breakpoints[e]))
                            return parseInt(d.replace(new RegExp(".*col-" + c.breakpoints[e] + "-| .*","g"), ""), 10);
                    return f
                }
            },
            isExpanded: function(b) {
                var c = "xs" === a.currentBreakpoint ? "mobile-" : "";
                return b.hasClass(c + "expanded") || b.find(".carousel").hasClass(c + "expanded")
            },
            hideCarousel: function(a) {
                if (a.data("excluded-bps"))
                    for (var b = a.data("excluded-bps").split(","), d = 0; d < b.length; d++)
                        if (c.currentBreakpoint === b[d])
                            return !0;
                return !1
            },
            createCarousel: function(a) {
                return function(e, f) {
                    var g = b(f)
                      , h = g.filter(".responsive-carousel").or(g.find(".responsive-carousel"))
                      , i = h.find(".orig-data-copy")
                      , j = h.find(".carousel-wrapper");
                    if (c.hideCarousel(h))
                        i.show(),
                        j.hide();
                    else {
                        j.children().remove(),
                        i.size() || (i = b("<div></div>").addClass("orig-data-copy").append(h.children()),
                        h.append(i)),
                        j.length || (j = b('<div data-id="' + e + '"></div>').addClass("carousel-wrapper"),
                        h.append(j)),
                        j.append(i.children().clone(!0));
                        var k = c.getCarouselData({
                            container: j,
                            maxCols: h.data("maxcols")
                        });
                        if (k = b.extend(k, a),
                        k.slides.length > 1) {
                            T1.channels.media.publish(d.CAROUSEL_CREATE, k);
                            var l = j.find(".carousel");
                            T1.channels.media.publish(d.CAROUSEL_EXPAND, {
                                expanded: c.isExpanded(h),
                                expander: b('.carousel-expander[data-carousel="#' + h.attr("id") + '"]'),
                                carousel: l
                            })
                        }
                        c.refreshCarousel(h, function() {
                            T1.channels.media.publishAsync(d.CAROUSEL_RESPONSIVECREATED, j)
                        })
                    }
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.carousel3d = function() {
        "use strict";
        var a = {
            containerGradeIntro: null,
            container: null,
            carousel: null,
            items: null,
            itemNames: ["item-03", "item-01", "item-02"],
            dataGrades: null,
            currentItem: "grade-01",
            currentIndex: 0,
            direction: {
                next: "right",
                prev: "left",
                int: {
                    left: -1,
                    right: 1
                }
            },
            isInstance: !1,
            hasCounter: !1,
            init: function() {
                a.containerGradeIntro = $(".grade-intro"),
                a.container = a.containerGradeIntro.find(".carousel-3d"),
                a.direction.next = "rtl" === T1.settings.siteDirection ? "left" : "right",
                a.direction.prev = "rtl" === T1.settings.siteDirection ? "right" : "left",
                a.isInstance = a.container.length > 0,
                a.isInstance && (a.dataGrades = T1.data.gradeIntro,
                a.dataGrades || (console.error("no grade data"),
                T1.settings.mock ? a.setMockData() : a.dataGrades = {}),
                a.carousel = a.container.children(".carousel:first"),
                a.items = a.carousel ? a.carousel.find(".item") : null,
                a.setEvents(),
                a.setGradeInfo(),
                a.setCtaButton(),
                a.toggleBackground(1))
            },
            switchMobile: function() {
                a.isInstance && (a.hasCounter || (a.carouselSlideCounter = a.carousel.find(".slide-counter:first"),
                a.addCounter()))
            },
            addCounter: function() {
                var b = a.carousel.find("> .item").length;
                T1.channels.media.publishAsync(T1.constants.SLIDER_ADDCOUNTER, {
                    slideCounter: a.carouselSlideCounter,
                    initialIndex: a.currentIndex,
                    numberOfSlides: b
                }),
                a.hasCounter = !0
            },
            setEvents: function() {
                a.container.find(".carousel-control").off("click", a.handleClick).on("click", a.handleClick),
                a.items.off("click", a.handleClick).on("click", a.handleClick),
                T1.utilities.isTouchCapable && a.carousel.swipe({
                    swipeLeft: function() {
                        a.handleSwipe(null, a.direction.prev)
                    },
                    swipeRight: function() {
                        a.handleSwipe(null, a.direction.next)
                    }
                })
            },
            handleClick: function(b) {
                b.preventDefault();
                var c = $(b.target)
                  , d = c.attr("href") || c.parent().attr("href");
                if (d === "#" + a.itemNames[0])
                    a.shift(a.direction.int.right);
                else {
                    if (d !== "#" + a.itemNames[2])
                        return;
                    a.shift(a.direction.int.left)
                }
            },
            handleSwipe: function(b, c, d, e, f, g) {
                var h = c === a.direction.prev
                  , i = c === a.direction.next;
                h ? a.shift(a.direction.int.left) : i && a.shift(a.direction.int.right)
            },
            updateSlides: function(b) {
                for (var c = null, d = 0; d < a.items.length; d++) {
                    c = $(a.items[d]);
                    var e = c.attr("href").replace("#", "")
                      , f = 1 * e.split("-")[1]
                      , g = f + b
                      , h = "";
                    g < 1 ? g = a.items.length : g > a.items.length && (g = 1),
                    h = "item-0" + g,
                    c.attr("href", "#" + h),
                    c.addClass(h),
                    c.removeClass(e);
                    if (1 === g) {
                        var i = c.attr("data-grade");
                        a.currentItem = "grade-" + i,
                        a.currentIndex = c.index(),
                        a.containerGradeIntro.addClass(a.currentItem),
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: c
                        }),
                        setTimeout(function() {
                            a.toggleBackground(1)
                        }, 500),
                        a.setGradeInfo(),
                        a.setCtaButton()
                    }
                }
            },
            shift: function(b) {
                a.toggleBackground(0),
                a.resetItemClasses(),
                a.updateSlides(b),
                a.hasCounter && a.updateCarouselCounter()
            },
            updateCarouselCounter: function() {
                T1.channels.media.publishAsync(T1.constants.SLIDER_UPDATECOUNTER, {
                    slideCounter: a.carouselSlideCounter,
                    activeSlideNumber: a.currentIndex + 1
                })
            },
            toggleBackground: function(b) {
                a.containerGradeIntro.find(".background").css("opacity", b)
            },
            setGradeInfo: function() {
                var b = a.container.find(".grade-info")
                  , c = b.find(".details")
                  , d = b.find(".price");
                if (b && !(b.length < 1)) {
                    c.html(""),
                    b.removeAttr("class");
                    var e = a.dataGrades[a.currentItem];
                    for (var f in e.features) {
                        var g = $("<li></li>");
                        g.html(e.features[f]),
                        c.append(g)
                    }
                    d.html(e.priceFrom),
                    b.addClass("grade-info"),
                    b.addClass(a.currentItem),
                    e.invert && "true" === e.invert.toLowerCase() ? a.carousel.addClass("inverse") : a.carousel.removeClass("inverse");
                    var h = b.find(".finance");
                    if (h.length) {
                        h.data("html") ? h.html(h.data("html")) : h.data("html", h.html()),
                        b.find(".finance").data("tfs-code", e.configRef).data("tfs-set", "enableTfsForComponent"),
                        "after-price" === e.monthlyRatePosition ? d.after(h) : d.before(h);
                        var i = {};
                        i[e.configRef] = T1.data.finance.configs[e.configRef],
                        T1.financeRates.requestRates(b, {
                            configs: i,
                            source: "grade introduction component"
                        })
                    }
                }
            },
            setCtaButton: function() {
                var b = a.container.find(".grade-ctas")
                  , c = b.find(".cta-carconfig")
                  , d = a.dataGrades[a.currentItem] || {}
                  , e = d.id
                  , f = d.carId
                  , g = d.colourId
                  , h = d.bodytypeId;
                if (!b || b.length < 1 || !e)
                    return void b.removeClass("active");
                var i = "#" + T1.constants.URL_CAR_CONFIG_OVERLAYER + "modelid=" + T1.ctx.modelId;
                f && (i += "/carid=" + f),
                g && (i += "/colour=" + g),
                e && (i += "/gradeid=" + e),
                h && (i += "/bodytypeid=" + h),
                b.addClass("active"),
                c.attr("href", i)
            },
            setMockData: function() {
                var b = b || {};
                b.data = b.data || {},
                b.data.gradeIntro = {
                    "grade-01": {
                        name: "x-cite (1)",
                        id: "5a269fb4-4304-449f-8533-331c6b95f2f3",
                        colourId: "colorid01",
                        bodytypeId: "bodytypeid01",
                        carId: "modelId01",
                        features: ["Sport Trim", "Automatic transmission with paddles", "x-citing to drive"],
                        priceFrom: "From € 12.700,00 (1)",
                        configRef: "df077687-f330-4b82-b438-3fb6c6e01e0f",
                        monthlyRatePosition: "before-price",
                        invert: "true"
                    },
                    "grade-02": {
                        name: "x-play (2)",
                        id: "254bafef-0899-4b3d-9573-b953d018731a",
                        colourId: "colorid02",
                        bodytypeId: "bodytypeid02",
                        carId: "modelId02",
                        features: ["The spanish grain has the hurricane doorstain. The spanish grain has the hurricane doorstain.", "Automatic air conditioning", "Heated door mirrors"],
                        priceFrom: "From € 10.550,00 (2)",
                        configRef: "df077687-f330-4b82-b438-3fb6c6e01e0f",
                        monthlyRatePosition: "after-price"
                    },
                    "grade-03": {
                        name: "x-pure (3)",
                        id: "d40e7c7a-7e15-48e7-a219-ec7281bf39b9",
                        colourId: "colorid03",
                        bodytypeId: "bodytypeid03",
                        carId: "modelId03",
                        features: ["Bluetooth Connectivity", "Manual air conditioning", "Electric door mirrors"],
                        priceFrom: "From € 12.320,00 (3)",
                        configRef: "df077687-f330-4b82-b438-3fb6c6e01e0f",
                        monthlyRatePosition: "before-price"
                    }
                },
                a.dataGrades = b.data.gradeIntro
            },
            resetItemClasses: function() {
                a.containerGradeIntro.removeClass("grade-01 grade-02 grade-03")
            }
        };
        return {
            init: a.init,
            switchMobile: a.switchMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.ctaBar = function() {
        "use strict";
        var a = {
            container: null,
            contractedClass: "contracted",
            expandedClass: "expanded",
            tolerance: 0,
            init: function() {
                b.container = $("#ctaBar"),
                b.container.length && !T1.utilities.isTouchCapable && T1.channels.global.subscribe(c.ON_BREAKPOINT_CHANGE, b.breakpointChanged)
            },
            isContracted: function() {
                return b.container.hasClass(b.contractedClass)
            },
            enable: function() {
                b.container.length && b.container.fadeIn({
                    duration: 1e3,
                    complete: b.contractAll
                })
            },
            disable: function() {
                b.container.length && b.container.hide()
            },
            contractAll: function() {
                b.isContracted() || setTimeout(function() {
                    b.container.addClass(b.contractedClass)
                }, 1e3)
            },
            resetPosition: function() {
                b.container.css({
                    top: ($(window).height() - b.container.outerHeight() + b.tolerance) / 2
                })
            },
            breakpointChanged: function(a) {
                b.resetTolerance(),
                b.resetPosition(),
                T1.breakpoints.list[a] >= c.SCREEN_LARGE ? b.enable() : b.disable()
            },
            resetTolerance: function() {
                b.tolerance = $("#navigation").height() + $("#nav-secondary-level").outerHeight()
            }
        }
          , b = a
          , c = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.collapsibleGroup = function() {
        "use strict";
        var a = {
            selectorBtn: ">h4:not(:has(>.btn-expand)), >h4 >.btn-expand",
            selectorGroup: ".collapsible-group",
            selectorPanel: ".collapsible-panel:not(.link)",
            selectorLinks: ".collapsible-panel.link",
            init: function() {
                c.initOnDemand(),
                T1.channels.dialog.subscribe(d.PAGEOVERLAYER_LOAD, function(a) {
                    c.initOnDemand(a.el)
                }),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function(a) {
                    c.initOnDemand(a.container)
                }),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_REQUEST_EXPAND, c.onPanelRequestExpand),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_REQUEST_CLOSE, c.onPanelRequestClose),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_INIT, c.initOnDemand),
                T1.channels.hash.subscribe(d.HASH_CHANGED, c.onHashChanged)
            },
            initMobile: function() {
                var a = b("#" + c.mobileInpageCollapsibleMenu.mobileInpageCollapsibleMenuId);
                a.length && c.mobileInpageCollapsibleMenu.init(a),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPANDED, function(a) {
                    if (a.active && a.panel.has("h4.sticky")) {
                        var b = a.group.closest(".material-box");
                        b.size() && b.scrollTop() > a.group.offset().top && b.scrollTo(a.panel)
                    }
                }),
                T1.channels.global.subscribe(d.ON_WIN_UNLOAD, c.mobileInpageCollapsibleMenu.repositionToCollapsiblePanelHeader)
            },
            initOnDemand: function(a) {
                if (a && a.length) {
                    var d = c.selectorGroup.replace(".", "");
                    a = a.hasClass(d) ? a : a.find(c.selectorGroup)
                } else
                    a = b("body").find(c.selectorGroup);
                var e = b.proxy(c.panelClick, a)
                  , f = a.hasClass(c.selectorGroup.replace(/^\./, "")) ? a : a.find(c.selectorGroup);
                c.getBtns(f).off("click.collapsibleGroup", e).on("click.collapsibleGroup", e).find("> a").off("click", c.linkClick).on("click", c.linkClick),
                a.find(".btn-close-accordion").off("click", c.linkCloseAccordionClick).on("click", c.linkCloseAccordionClick),
                a.find(c.selectorLinks).off("click", c.closeActivePanel).on("click", c.closeActivePanel)
            },
            onPanelRequestExpand: function(a) {
                c.getBtns(a.target).filter(":visible").each(function(a, c) {
                    var d = b(c);
                    d.closest(".collapsible-panel").hasClass("active") || d.trigger("click")
                })
            },
            onPanelRequestClose: function(a) {
                c.getBtns(a.target).filter(":visible").each(function(a, c) {
                    var d = b(c);
                    d.closest(".collapsible-panel").hasClass("active") && d.trigger("click")
                }),
                window.scrollTo(0, 0)
            },
            onHashChanged: function(a) {
                for (var d = 0; d < a.newHashes.length; d++)
                    if (/^[A-Za-z]+[\w\-\:\.]*$/.test(a.newHashes[d])) {
                        var e = b(c.selectorPanel + "#" + a.newHashes[d]).or(b(c.selectorPanel + " #" + a.newHashes[d]));
                        e.size() && c.onPanelRequestExpand({
                            target: e.closest(c.selectorPanel)
                        })
                    }
            },
            getBtns: function(a) {
                return (a.is(c.selectorPanel) ? a : a.find(c.selectorPanel)).find(c.selectorBtn)
            },
            closeActivePanel: function(a) {
                var d = b(this).closest(c.selectorGroup).find(c.selectorPanel + ".active");
                d.size() && c.getBtns(d).trigger("click.collapsibleGroup")
            },
            panelClick: function(a) {
                var d = b(a.currentTarget)
                  , e = d.data("source-node") || d
                  , f = e.closest(".collapsible-panel")
                  , g = f.closest(c.selectorGroup)
                  , h = g.find(".active.collapsible-panel")
                  , i = e
                  , j = null;
                do {
                    "H" === i.prop("tagName").replace(/\d/g, "") ? (j = i,
                    i = null) : i = i === f ? null : i.parent()
                } while (null !== i);g.find(".panel-section").is(":animated") || (h.size() && !f.is(h) && c.togglePanel(this, g, h, null, j, {
                    shouldScrollTo: !0
                }),
                c.togglePanel(this, g, f, !1, j, {
                    shouldScrollTo: !0
                }))
            },
            linkClick: function(a) {
                a.stopPropagation()
            },
            linkCloseAccordionClick: function(a) {
                var c = b(a.target).closest(".collapsible-panel");
                if (c.length > 0) {
                    var d = c.find(".icon-chevron");
                    d.length > 0 && d[0].click()
                }
            },
            togglePanel: function(a, e, f, g, h, i) {
                var j = f.find(".panel-section")
                  , k = f.closest(".collapsible-scroll")
                  , l = i.shouldScrollTo;
                j.slideToggle({
                    duration: 400,
                    start: function() {
                        !f.hasClass("active") && l && (f.add(k).addClass("animated"),
                        b(this).is(j.last()) && T1.channels.global.publish(d.COLLAPSIBLE_PANEL_EXPAND, {
                            root: a,
                            group: e,
                            panel: f,
                            active: !1
                        }))
                    },
                    complete: function() {
                        var i = b(this)
                          , k = i.closest(".collapsible-scroll");
                        g || i.is(":visible") ? (i.show(),
                        f.add(k).removeClass("animated").addClass("active"),
                        l && c.scrollToTopOfActivePanel(f)) : f.add(k).removeClass("active"),
                        b(this).is(j.last()) && (l && f.hasClass("active") && (e.data("auto-scroll") || f.data("auto-scroll")) && setTimeout(function() {
                            f.closest(".dropdown-menu, .navigation-dropdown").or("body").scrollTo(f, 250, {
                                interrupt: !T1.utilities.isIOS()
                            })
                        }),
                        T1.channels.global.publishAsync(d.COLLAPSIBLE_PANEL_EXPANDED, {
                            root: a,
                            group: e,
                            panel: f,
                            active: f.hasClass("active"),
                            headerClicked: h
                        }))
                    }
                })
            },
            scrollToTopOfActivePanel: function(a) {
                var c = "xs" === T1.utilities.currentBreakpoint() ? null : b("#navigation")
                  , d = "xs" === T1.utilities.currentBreakpoint() ? null : b("#nav-secondary-level")
                  , e = b(".overlayerWrapper .toolbar")
                  , f = (c && c.length && "none" !== c.css("display") ? c.height() : 0) + (d && d.length && "none" !== d.css("display") ? d.height() : 0) + (e.length && "none" !== e.css("display") ? e.height() : 0)
                  , g = a.offset().top;
                b(window).scrollTop() > g + f && b("html, body").animate({
                    scrollTop: g - f
                })
            },
            mobileInpageCollapsibleMenu: {
                mobileInpageCollapsibleMenuId: "second-level-buttons",
                $mobileInpageCollapsibleMenu: null,
                init: function(a) {
                    c.mobileInpageCollapsibleMenu.$mobileInpageCollapsibleMenu = a || b("#" + c.mobileInpageCollapsibleMenu.mobileInpageCollapsibleMenuId),
                    c.mobileInpageCollapsibleMenu.$mobileInpageCollapsibleMenu.length && c.mobileInpageCollapsibleMenu.handleCurrentSplitPagePanel()
                },
                handleCurrentSplitPagePanel: function() {
                    var a = c.mobileInpageCollapsibleMenu.$mobileInpageCollapsibleMenu
                      , d = a.find(".collapsible-panel.current");
                    if (d.data("scroll-to-current")) {
                        var e = d.next()
                          , f = e.hasClass("collapsible-panel") ? e : e.find(".collapsible-panel").first()
                          , g = f.hasClass("link");
                        f.length && !g && c.togglePanel(a, a, f, !1, null, {
                            shouldScrollTo: !1
                        }),
                        b("body").scrollTo(d, 500, {
                            interrupt: !0
                        })
                    }
                },
                repositionToCollapsiblePanelHeader: function(a) {
                    var c = a || b(".collapsible-panel.active:visible");
                    c.length && scrollTo(0, c.offset().top)
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initMobile: a.initMobile,
            initOnDemand: a.initOnDemand
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.accessories = function() {
        "use strict";
        var a = T1.constants
          , b = {
            subscriptions: {},
            accessories: null,
            init: function() {
                b.accessories = $(".accessories"),
                !b.accessories || b.accessories.length < 1 || T1.channels.carchapter.subscribe(a.ACCESSORIES_DESKTOP_REINIT, b.desktop.init)
            },
            initOnDemand: function(a) {
                var c = a.find('.search-component ul input[type="checkbox"]');
                c.size() && (c.prop("checked", !0).trigger("change"),
                c.on("change", b.filterAccessories)),
                a.find(".reset").on("click", b.reset)
            },
            reset: function(a) {
                var c = $(a.target);
                b.desktop.getDesktopOverlayer(c).find(".search-component:visible .filter-group").or(c.closest(".search-component")).each(function(a, c) {
                    var d = $(c);
                    d.find('input[type="checkbox"]').prop("checked", !0),
                    b.filterAccessories({
                        target: d.find('input[type="checkbox"]:first')
                    }, "reset")
                })
            },
            filterAccessories: function(c, d) {
                var e, f, g = $(c.target), h = g.closest(".filter-group").data("group"), i = b.desktop.getDesktopOverlayer(g), j = i.find('.accessories-list[data-group="' + h + '"]').or(g.closest(".accessories-list")), k = j.find(".accessories-item");
                "reset" !== d && ("link" === d ? (e = "off",
                f = "link") : (e = g[0].checked ? "on" : "off",
                f = "checkbox"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: g,
                    extraData: {
                        event: {
                            toggle: e,
                            toggle_element: f
                        }
                    }
                })),
                k.addClass("hide"),
                g.closest("ul").find('input[type="checkbox"]:checked').each(function(a, b) {
                    var c = $(b).val().toLowerCase();
                    k.each(function(a, b) {
                        var d = $(b);
                        -1 !== d.data("filter").toLowerCase().indexOf(c) && d.removeClass("hide")
                    })
                });
                var l = i.find(".accessories-item").or(k).filter(":not(.hide)").size()
                  , m = i.find(".orig-data-copy .accessories-item").or(j.find(".orig-data-copy .accessories-item")).filter(":not(.hide)").size();
                g.closest(".search-component").addClass("filtered"),
                b.refreshFilterSet(g.closest(".search-component"), l - (i.size() ? 0 : m)),
                i.size() && !b.mobile.isMobile() && j.find("> *:not(.search-component)").toggle(0 !== k.filter(":not(.hide)").size()),
                b.desktop.inDesktopOverlayer(g) || b.mobile.isMobile() || T1.channels.media.publish(a.CAROUSEL_CREATERESPONSIVE, {
                    container: j.find("> .responsive-carousel")
                })
            },
            refreshFilterSet: function(a, c) {
                var d = a.find(".filter-set");
                if (d.size()) {
                    d.empty();
                    a.find('input[type="checkbox"]:checked').each(function(a, c) {
                        var e = $(c)
                          , f = e.siblings("label").text()
                          , g = e.closest(".filter-group").data("group")
                          , h = $('<span class="search-result-selected-filter">' + (g ? g + ": " + f : f) + '<a href="#" class="icon icon-remove search-result-remove-filter"></a></span>');
                        h.data("value", e.val()),
                        h.data("group", g),
                        h.find(".search-result-remove-filter").on("click", b.removeFilter),
                        d.append(h)
                    });
                    var e = a.find(".filter-prefix > div");
                    e.hide().find("strong span").empty(),
                    e.filter('[data-filter-match="' + (1 === c ? "1" : "n") + '"]').css("display", "inline-block").find("strong span").text(c)
                }
            },
            removeFilter: function(a) {
                var c = $(a.target).parent()
                  , d = b.desktop.getDesktopOverlayer(c).find('.filter-group[data-group="' + c.data("group") + '"]').or(c.closest(".search-component"))
                  , e = d.find('input[type="checkbox"][value="' + c.data("value") + '"]');
                e.prop("checked", !1),
                b.filterAccessories({
                    target: e
                }, "link")
            },
            desktop: {
                init: function(c) {
                    if (b.accessories = c || b.accessories,
                    b.accessories.length > 0) {
                        var d = b.accessories.find(".toyota-tabs > a");
                        b.initOnDemand(b.accessories),
                        b.subscriptions.viewAll || (b.subscriptions.viewAll = T1.channels.carchapter.subscribe(a.ACCESSORIES_INTERACTION_VIEWALL, b.desktop.viewAll)),
                        b.accessories.find(".filter-bar .viewall").on("click", function() {
                            T1.channels.hash.publishAsync(a.HASH_CHANGE, "/publish/accessories_interaction_viewall")
                        }),
                        b.accessories.find(".switch-view").on("click", b.desktop.switchView),
                        d.one("click", function(a) {
                            var c = b.desktop.getSlidesToLoad($(a.target.hash));
                            $.safe("T1.lazyLoad.onDemand")(c)
                        }),
                        d.click(b.desktop.switchTab),
                        d.filter(".active").length < 1 && b.desktop.switchTab({
                            target: d.eq(0)
                        }),
                        b.subscriptions.carouselSlide || (b.subscriptions.carouselSlide = T1.channels.media.subscribe(a.CAROUSEL_SLIDE, b.desktop.onCarouselSlide)),
                        b.subscriptions.carouselCreated || (b.subscriptions.carouselCreated = T1.channels.media.subscribe(a.CAROUSEL_CREATED, b.desktop.onCarouselCreated)),
                        b.accessories.find(".btn-disclaimer").on("click", b.desktop.ovlDisclaimerClick),
                        b.accessories.find(".inline-disclaimer .toggleLink").on("click", b.desktop.inlineDisclaimerClick)
                    }
                },
                onCarouselCreated: function(a) {
                    var c = b.accessories.find(".carousel.slide")
                      , d = a.closest(".tab-pane.active");
                    a.is(c) && (d.length > 0 ? $.safe("T1.lazyLoad.onDemand")(d.find(".item.active, .item.active + .item")) : a.find(".item").addClass("lazy-loader"),
                    a.find(".item.desktop.active .btn-disclaimer").off("click", b.desktop.ovlDisclaimerClick).on("click", b.desktop.ovlDisclaimerClick))
                },
                onCarouselSlide: function(a) {
                    if (a.carousel.is(b.accessories.find(".carousel.slide"))) {
                        a.carousel.find(".item.desktop.active .btn-disclaimer").off("click", b.desktop.ovlDisclaimerClick).on("click", b.desktop.ovlDisclaimerClick);
                        var c = b.desktop.getSlidesToLoad($(a.carousel));
                        $.safe("T1.lazyLoad.onDemand")(c)
                    }
                },
                getSlidesToLoad: function(a) {
                    var b = a.find(".item")
                      , c = a.find(".item.active").index()
                      , d = c - 1 < 0 ? b[b.length - 1] : b[c - 1]
                      , e = c + 1 === b.length ? b[0] : b[c + 1];
                    return $(b[c]).add(d).add(e)
                },
                ovlDisclaimerClick: function(a) {
                    a.preventDefault();
                    var b = $(this).closest(".expansion-content")
                      , c = b.find(".ovl-disclaimer")
                      , d = c.is(":visible") ? -c.height() : c.height();
                    c.slideToggle(),
                    b.hasClass("top") && b.animate({
                        top: b.offset().top - d
                    })
                },
                inlineDisclaimerClick: function(a) {
                    a.preventDefault(),
                    $(this).closest(".inline-disclaimer").find(".disclaimer-content").slideToggle()
                },
                switchTab: function(c) {
                    var d = b.accessories.find(".toyota-tabs")
                      , e = $(c.target)
                      , f = $(e.prop("hash"));
                    if (d.find("a").removeClass("active"),
                    e.addClass("active"),
                    c.preventDefault && c.preventDefault(),
                    b.desktop.inDesktopOverlayer(e)) {
                        var g = e.closest(".material-box").last()
                          , h = g.find(c.target.hash)
                          , i = $(c.target);
                        i.removeClass("active"),
                        T1.channels.statistics.publishAsync(a.STATS_TRACK, {
                            node: i
                        }),
                        g.scrollTo(h, a.ANIMATION_SPEED_SCROLL),
                        c.stopPropagation()
                    } else
                        b.accessories.find(".tab-pane").css({
                            display: "none"
                        }),
                        f.fadeIn(a.ANIMATION_SPEED_FADE),
                        T1.channels.media.publish(T1.constants.CAROUSEL_REFRESH, {
                            target: f
                        })
                },
                inDesktopOverlayer: function(a) {
                    return a.closest("section").hasClass("view-all")
                },
                getDesktopOverlayer: function(a) {
                    return a.closest("section.view-all")
                },
                viewAll: function() {
                    var c = b.accessories.clone(!0);
                    c.addClass("container view-all"),
                    c.find(".container").removeClass("container"),
                    c.find(".viewall").remove(),
                    c.find(".carousel-wrapper").remove(),
                    c.find(".responsive-carousel").removeClass("responsive-carousel"),
                    c.find(".tab-pane").css({
                        display: "inline-block",
                        opacity: 1
                    }),
                    c.find(".filter-bar > .toyota-tabs > a").removeClass("active"),
                    c.find(".accessories-item").removeClass("hide"),
                    c.find(".orig-data-copy").show(),
                    c.toggleClass("image-view", c.find(".switch-view .icon").hasClass("icon-list-ul")),
                    T1.channels.form.publishAsync(a.FORM_LOAD, c.find("form, .form")),
                    T1.channels.dialog.publishAsync(a.MATERIALBOX_OPEN, {
                        html: c,
                        el: b.accessories,
                        styleClass: "accessories-all",
                        size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                        type: "box-ajax",
                        hashAction: "accessories"
                    });
                    var d = T1.channels.dialog.subscribe(a.MATERIALBOX_OPENED, function(a) {
                        $.safe("T1.lazyLoad.onDemand")(a.container),
                        d.unsubscribe()
                    })
                },
                switchView: function(b) {
                    var c = $(this)
                      , d = $(b.target).closest("section")
                      , e = d.find(".accessories-item")
                      , f = d.hasClass("image-view");
                    e.removeClass(f ? "col-sm-3" : "col-sm-6").addClass(f ? "col-sm-6" : "col-sm-3"),
                    e.each(function() {
                        var a = $(".row > div", this);
                        if (a.length > 0)
                            f ? (a.eq(0).removeClass("col-xs-12").addClass("col-xs-3"),
                            a.eq(1).removeClass("col-xs-12").addClass("col-xs-9")) : (a.eq(0).addClass("col-xs-12").removeClass("col-xs-3"),
                            a.eq(1).addClass("col-xs-12").removeClass("col-xs-9"));
                        else {
                            var b = $(".list-unstyled", this);
                            b.length > 0 && (f ? $("li", b).eq(0).addClass("col-xs-3") : $("li", b).eq(0).removeClass("col-xs-3"))
                        }
                    }),
                    c.find("span:not(.icon)").text(T1.labels.switchTo + " " + T1.labels[f ? "imageView" : "listView"]),
                    c.find(".icon").toggleClass("icon-th-large", f).toggleClass("icon-list-ul", !f),
                    d.toggleClass("list-view", f).toggleClass("image-view", !f),
                    $.safe("T1.statistics.isTrackingEnabled")() && T1.channels.statistics.publishAsync(a.STATS_TRACK, {
                        node: $(this),
                        extraData: {
                            action: "switch_view",
                            value: f ? "list" : "images"
                        }
                    })
                }
            },
            mobile: {
                init: function() {
                    T1.channels.carconfig.subscribe(a.ACCESSORIES_VIEW, b.mobile.openOverlayer)
                },
                openOverlayer: function() {
                    T1.channels.dialog.publishAsync(a.MATERIALBOX_OPEN, {
                        url: b.accessories.data("mobile-url"),
                        ajax: !0,
                        sync: !0,
                        size: "fullscreen",
                        type: "box-ajax",
                        styleClass: "mobile-accessories",
                        hashAction: "mobile-accessories"
                    });
                    var c = T1.channels.dialog.subscribe(a.MATERIALBOX_OPENED, function(a) {
                        c.unsubscribe();
                        var d = a.container.find(".mobile-accessories");
                        d.size() && b.initOnDemand(d)
                    })
                },
                isMobile: function() {
                    return "xs" === T1.breakpoints.currentBP()
                }
            }
        };
        return {
            init: b.init,
            initDesktop: b.desktop.init,
            initMobile: b.mobile.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.gallery = function() {
        "use strict";
        var a = {
            mainContainer: null,
            swipingImagesArea: null,
            swipingImagesMode: "mobile",
            galleryExists: !1,
            swipeToNext: null,
            swipeToPrevious: null,
            isRtlSite: !1,
            swipingGalleryExists: !1,
            $swipingMobileGallery: null,
            initialized: {
                desktop: !1,
                mobile: !1
            },
            isIE8: T1.utilities.ieVersion() <= 8,
            articleThumbnailHeightSelector: '[height="248"]',
            articleThumbnailHeightContainerClass: "artThumbHeight",
            IE8: {
                drag: !1,
                startPoint: 0,
                moved: !1,
                lastX: 0,
                arrowInterval: 200,
                lastNode: null,
                lastDate: (new Date).getTime(),
                on: function() {},
                refresh: function() {},
                options: {}
            },
            scrollSettings: {
                scrollX: !0,
                scrollY: !1,
                momentum: !T1.utilities.isIpad(),
                eventPassthrough: !0
            },
            init: function() {
                c.isRtlSite = "rtl" === T1.settings.siteDirection
            },
            initDesktop: function() {
                if (c.mainContainer = b(".gallery-horizontal"),
                c.galleryExists = c.mainContainer.length > 0,
                !c.initialized.desktop && c.galleryExists) {
                    var a = b(".gallery-horizontal-row", c.mainContainer);
                    a.each(c.initRow),
                    c.mainContainer.each(function() {
                        var a = b(this).on("dragstart", function() {
                            return !1
                        });
                        a.find(".gallery-item").css("height", a.attr("data-highest-height")),
                        T1.channels.dialog.publishAsync(d.TOAST_CUSTOM, {
                            customContainer: a
                        })
                    }),
                    c.isIE8 && c.fixIe8(a),
                    c.initialized.desktop = !0
                }
            },
            switchDesktop: function() {
                c.galleryExists && (c.mainContainer.closest("section").addClass("gallery-horizontal"),
                c.initDesktop())
            },
            initMobile: function() {
                c.mainContainer = b(".gallery-horizontal"),
                c.galleryExists = c.mainContainer.length > 0,
                c.$swipingMobileGalleries = b(".swiping-mobile-gallery"),
                c.swipingGalleryExists = c.$swipingMobileGalleries.length > 0,
                c.swipingGalleryExists && (c.$swipingMobileGalleries.each(function(a, d) {
                    var e = b(d);
                    c.buildMobileGallery(e),
                    e.is(":visible") && c.enableSwipingMobileGallery(e, !1)
                }),
                c.subscriptionsSwipingMobileGallery()),
                c.initialized.mobile = !0
            },
            switchMobile: function() {
                c.$swipingMobileGalleries = b(".swiping-mobile-gallery"),
                c.swipingGalleryExists = c.$swipingMobileGalleries.length > 0,
                c.swipingGalleryExists && !c.initialized.mobile && (c.$swipingMobileGalleries.each(function(a, d) {
                    var e = b(d);
                    c.buildMobileGallery(e),
                    e.is(":visible") && c.enableSwipingMobileGallery(e, !1)
                }),
                c.subscriptionsSwipingMobileGallery(),
                c.initialized.mobile = !0)
            },
            subscriptionsSwipingMobileGallery: function() {
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPANDED, function(a) {
                    var b = a.panel
                      , d = b.find(".swiping-mobile-gallery:visible");
                    d.length > 0 && c.enableSwipingMobileGallery(d, !1)
                }),
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, function() {
                    b("body").hasClass("overlayer-open") ? c.enableSwipingMobileGalleryOnOverlayerClose = !0 : c.$swipingMobileGalleries.each(function(a, d) {
                        var e = b(d);
                        e.is(":visible") && c.enableSwipingMobileGallery(e, !0)
                    })
                }),
                T1.channels.dialog.subscribe(d.MATERIALBOX_CLOSED, function() {
                    c.enableSwipingMobileGalleryOnOverlayerClose && (c.$swipingMobileGalleries.each(function(a, d) {
                        var e = b(d);
                        e.is(":visible") && c.enableSwipingMobileGallery(e, !0)
                    }),
                    c.enableSwipingMobileGalleryOnOverlayerClose = !1)
                })
            },
            initSwipe: function(a, d, e, f) {
                function g(b, d, e, f) {
                    if (d != p || "left" != e && "right" != e)
                        d == q ? j(a * k, m, !1, q) : d == r && ("right" == e ? c.isRtlSite ? i() : h() : "left" == e && (c.isRtlSite ? h() : i()));
                    else {
                        var f, g = 0;
                        "left" == e ? (f = c.isRtlSite ? a * k - f : a * k + f,
                        j(f, g, !1, p)) : "right" == e && (f = c.isRtlSite ? a * k + f : a * k - f,
                        j(f, g, !1, p))
                    }
                }
                function h() {
                    var b = k - 1 < 0;
                    T1.channels.media.publishAsync(T1.constants.SLIDER_UPDATECOUNTER, {
                        slideCounter: n,
                        activeSlideNumber: b ? d : k
                    }),
                    k = b ? d - 1 : Math.max(k - 1, 0),
                    e.data("active-img-index", k),
                    c.loadImage(l, k, c.swipingImagesMode),
                    j(a * k, m, b, r)
                }
                function i() {
                    var b = k + 1 === d;
                    T1.channels.media.publishAsync(T1.constants.SLIDER_UPDATECOUNTER, {
                        slideCounter: n,
                        activeSlideNumber: b ? 1 : k + 2
                    }),
                    c.loadImage(l, k + 5, c.swipingImagesMode),
                    k = Math.min((k + 1) % d, d - 1),
                    e.data("active-img-index", k),
                    j(a * k, m, b, r)
                }
                function j(a, d, e, f) {
                    var g = {
                        getInverseSign: function() {
                            return c.isRtlSite ? a < 0 ? "-" : "" : a < 0 ? "" : "-"
                        }
                    }
                      , h = g.getInverseSign()
                      , i = h + Math.abs(a).toString();
                    e ? l.fadeOut(0, function() {
                        b(this).css("transform", "translate(" + i + "px,0)"),
                        b(this).fadeIn(1e3)
                    }) : (l.css("transition-duration", (d / 1e3).toFixed(1) + "s"),
                    l.css("transform", "translate(" + i + "px,0)"))
                }
                var k = f ? e.data("active-img-index") : 0
                  , l = e.find(".swiping-images")
                  , m = 500
                  , n = l.closest("section").find(".slide-counter:first")
                  , o = {
                    triggerOnTouchEnd: !0,
                    swipeStatus: g,
                    allowPageScroll: "vertical",
                    threshold: 75,
                    excludedElements: ".noSwipe"
                }
                  , p = "move"
                  , q = "cancel"
                  , r = "end";
                e.data("active-img-index", k),
                e.swipe(o),
                T1.channels.media.publishAsync(T1.constants.SLIDER_ADDCOUNTER, {
                    slideCounter: n,
                    initialIndex: k,
                    numberOfSlides: d
                })
            },
            initializeSwipingGalleryPosition: function(a, b, d) {
                var e = a.find(".swiping-images")
                  , f = a.data("active-img-index");
                if (d) {
                    var g = c.isRtlSite ? b * f : -b * f;
                    e.css("transform", "translate(" + g + "px,0)")
                } else
                    e.css("transform", "translate(0px,0)")
            },
            initImages: function(a, c) {
                a.find("img").each(function(a, d) {
                    var e = b(d)
                      , f = e.data("src-" + c);
                    f && e.attr("src", f)
                })
            },
            initFirstImages: function(a, b) {
                c.loadFirstHeightDefinitionImage(a, b),
                c.loadFirstImages(a, b, 5)
            },
            loadFirstImages: function(a, b, d) {
                for (var e = 0; e < d; e++)
                    c.loadImage(a, e, b)
            },
            loadFirstHeightDefinitionImage: function(a, b) {
                var d = a.find("a[data-type='image']").first().index();
                c.loadImage(a, d, b)
            },
            loadImage: function(a, d, e) {
                var f = b(a.find("img")[d])
                  , g = f ? f.data("src-" + e) : null;
                g && f.attr("src", g),
                e === c.swipingImagesMode && c.setMobileImageOffset(f)
            },
            setMobileImageOffset: function(a) {
                function c() {
                    var a = b(this).width()
                      , c = b(this).parent().width() || b("body").width();
                    if (a > c) {
                        var d = (a - c) / -2;
                        b(this).css("marginLeft", d)
                    }
                }
                a.length && (a[0].complete ? c.bind(a[0])() : a.load(c))
            },
            buildMobileGallery: function(a) {
                var d = a.closest("section")
                  , e = d.find(".mobile.gallery")
                  , f = 0;
                d.find(".gallery-item").each(function(a, d) {
                    var g = b(d);
                    g.find("img[data-lazyload-mobile], img[data-src-mobile]").length && c.cloneGalleryItem(g, f++, e)
                }),
                c.initFirstImages(e, c.swipingImagesMode)
            },
            cloneGalleryItem: function(a, b, c) {
                var e = a.clone()
                  , f = a.hasClass("item-link") ? e : e.find(".item-link")
                  , g = "mobile_" + (f.attr("id") || (new Date).getTime());
                f.attr("id", g),
                e.children().attr("data-type", e.data("type")),
                e.removeAttr("style"),
                e.find("img").removeAttr("width height data-lazyload-desktop"),
                e.find(".item-content").hide(),
                f.click(function(a) {
                    a.preventDefault(),
                    T1.channels.hash.publishAsync(d.HASH_ADD, "/gallery/" + g + "/" + b)
                }),
                c.find(".swiping-images").append(e.children())
            },
            setSwipingMobileGallerySizes: function(a, d, e) {
                function f() {
                    var e = d.find("img");
                    g = b(this).height(),
                    d.css("height", g),
                    a.css("height", g),
                    a.addClass("heightSet"),
                    e.each(function() {
                        c.setMobileImageOffset(b(this))
                    })
                }
                var g, h = a.find(".swiping-images").first(), i = d.filter("[data-type='image']").first() || d.first(), j = i.find("img:first"), k = j.prop("complete"), l = e * d.length;
                h.css("width", l),
                a.css("width", e),
                d.css("width", e),
                a.removeClass("heightSet"),
                k ? f.bind(j)() : j.load(f)
            },
            enableSwipingMobileGallery: function(a, b) {
                var d = a.closest("section")
                  , e = d.find(".gallery-horizontal:first")
                  , f = a.find(".swiping-images")
                  , g = f.children("a")
                  , h = e.parents(".panel-section:first").width() || e.parent().width();
                c.initSwipe(Math.floor(h * g.length / g.length), g.length, a, b),
                c.setSwipingMobileGallerySizes(a, g, h),
                c.initializeSwipingGalleryPosition(a, h, b)
            },
            fixIe8: function(a) {
                var e = b(".gallery")
                  , f = function(a) {
                    var d = (new Date).getTime();
                    if (a.delta || !(d - c.IE8.lastDate < 100)) {
                        var e = a.delta || a.pageX - c.IE8.lastX
                          , f = c.IE8.lastNode
                          , g = f.offset().left + e
                          , h = -(f[0].scrollWidth - b(window).width());
                        c.IE8.lastDate = d,
                        c.IE8.lastX = a.pageX,
                        e > 10 && (c.IE8.hasMooved = !0),
                        g > 0 && (g = 0),
                        g < h && (g = h),
                        f.css({
                            "margin-left": g + "px"
                        }),
                        b(".left", f).css("margin-left", Math.abs(g) + "px")
                    }
                }
                  , g = function(a) {
                    c.IE8.lastNode = b(this).closest(".gallery-horizontal-row"),
                    a.delta = c.IE8.arrowInterval,
                    f(a)
                }
                  , h = function(a) {
                    c.IE8.lastNode = b(this).closest(".gallery-horizontal-row"),
                    a.delta = -c.IE8.arrowInterval,
                    f(a)
                }
                  , i = function(a) {
                    c.IE8.drag = !1,
                    Math.abs(c.IE8.startPoint - a.pageX) > 10 && (T1.channels.media.publishAsync(d.GALLERY_SCROLL, this),
                    c.IE8.moved = !0)
                }
                  , j = function(a) {
                    c.IE8.drag = !0,
                    c.IE8.lastX = a.pageX,
                    c.IE8.startPoint = a.pageX,
                    c.IE8.lastNode = b(this),
                    c.IE8.moved = !1
                }
                  , k = function(a) {
                    c.IE8.drag && f(a)
                };
                a.mousedown(j),
                e.find(".navigation-arrows .left").click(g),
                e.find(".navigation-arrows .right").click(h),
                e.mouseup(i),
                e.mousemove(k)
            },
            initRow: function(a, e) {
                var f = b(this)
                  , g = b(".iscroller", this)
                  , h = c.getRowDimensions(f)
                  , i = b(".gallery-horizontal-row-inner", this);
                h.artThumbHeight && f.addClass(c.articleThumbnailHeightContainerClass),
                f.height(h.height),
                g.width(h.width);
                var j = c.createIScroll(e, f, g);
                c.SetArrowsState(g, f, j),
                b("a:not(.btn-hybrid-view, .youtube-overlayer, .video-overlayer, .html5-overlayer)", i).on("click", function(a) {
                    if (a.preventDefault(),
                    !j.moved) {
                        var c = b(this)
                          , d = c.is(".gallery-item, .gallery-link") ? c : c.closest(".gallery-item");
                        location.hash = "/gallery/" + this.id + "/" + c.closest(".gallery").find(".gallery-item:not(:has(>.gallery-link)), .gallery-link").index(d)
                    }
                }),
                b(".youtube-overlayer, .video-overlayer, .html5-overlayer", i).on("click", function(a) {
                    a.preventDefault(),
                    j.moved || T1.channels.hash.publishAsync(d.HASH_ADD, c.getMediaHash(b(this)))
                }),
                c.isIE8 || c.initNavigation(f)
            },
            getMediaHash: function(a) {
                return a.is(".html5-overlayer") ? "/publish/pageoverlayer_open/html5id=" + a.data("html5id") + "/el=.html5-overlayer/noScroll=true" : a.is(".youtube-overlayer") ? "/youtube/" + a.data("id") : "/video/" + a.attr("id")
            },
            createIScroll: function(a, e, f) {
                c.isRtlSite && (c.scrollSettings.startX = -(f.width() - e.width()));
                var g = c.isIE8 ? c.IE8 : new IScroll(a,c.scrollSettings);
                return g.options.tap = !0,
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, function() {
                    g.refresh()
                }),
                g.on("scrollStart", function() {
                    b(".gallery-horizontal-row-inner a", e).add("row").css("cursor", "move")
                }),
                g.on("scrollEnd", function() {
                    T1.channels.media.publishAsync(d.GALLERY_SCROLL, e.closest(".gallery")),
                    b(".gallery-horizontal-row-inner a", e).add("row").css("cursor", ""),
                    c.SetArrowsState(f, e, g)
                }),
                e.data("iScroll", g),
                c.isRtlSite && g.refresh(),
                g
            },
            SetArrowsState: function(a, d, e) {
                var f = ".left"
                  , g = ".right";
                c.isRtlSite && (f = ".right",
                g = ".left"),
                b(f, d).toggleClass("inactive", a.size() && 0 === a.position().left),
                b(g, d).toggleClass("inactive", a.size() && a.position().left === e.maxScrollX)
            },
            getRowDimensions: function(a) {
                var d = {
                    height: 0,
                    width: 0,
                    artThumbHeight: !1
                }
                  , e = a.closest(".gallery");
                return b(".gallery-item", a).each(function() {
                    var a = b(this)
                      , f = a.height()
                      , g = b("img", a)
                      , h = g.width();
                    a.width(h),
                    d.height = f > d.height ? f : d.height,
                    d.width += h,
                    !d.artThumbHeight && g.is(c.articleThumbnailHeightSelector) && (d.artThumbHeight = !0);
                    var i = e.attr("data-highest-height") || 0;
                    d.height > i && e.attr("data-highest-height", d.height)
                }),
                d
            },
            initNavigation: function(a) {
                var d = !0;
                c.isRtlSite && (d = !1),
                b(".zoomContainer", a).toggleClass("touchable", T1.utilities.isTouchCapable),
                b(".left", a).on("click", function() {
                    b(this).is(".inactive") || c.navigate(a, d)
                }),
                b(".right", a).on("click", function() {
                    b(this).is(".inactive") || c.navigate(a, !d)
                })
            },
            navigate: function(a, d) {
                var e = b(".gallery-item", a).filter(function() {
                    return c.inViewPort(this)
                }).first()
                  , f = d ? b(e).prev() : b(e).next()
                  , g = f.size() ? f.position().left + 1 : 0;
                a.data("iScroll").scrollTo(-g, 0, 500)
            },
            inViewPort: function(a) {
                var c = b(window)
                  , d = b(a)
                  , e = {
                    top: c.scrollTop(),
                    left: c.scrollLeft(),
                    right: c.scrollLeft() + c.width(),
                    bottom: c.scrollTop() + c.height()
                }
                  , f = d.offset();
                return f.right = f.left + d.outerWidth(),
                f.bottom = f.top + d.outerHeight(),
                !(e.right < f.left || e.left > f.right || e.bottom < f.top || e.top > f.bottom)
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initMobile: a.initMobile,
            initDesktop: a.initDesktop,
            switchMobile: a.switchMobile,
            switchDesktop: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.otherfeatures = function() {
        "use strict";
        var a = {
            container: $(".fc-group-container"),
            mainContainer: null,
            controls: null,
            otherFeaturesClass: "otherfeatures",
            featureGroup: null,
            inOverlayer: !1,
            subscriptionCloseAllFeatures: null,
            runClickEventToResetView: !0,
            initDesktop: function() {
                b.initComponent(),
                b.initSubscriptions()
            },
            initComponent: function() {
                if (b.mainContainer = $(".otherfeatures"),
                !(b.container.length < 1)) {
                    var a = b.mainContainer.find(".fb-toggle")
                      , c = b.mainContainer.hasClass("hybrid-only");
                    b.controls = $(".fb-group .fb-item"),
                    b.controls.off("click", b.tabControlClick).on("click", b.tabControlClick),
                    a.off("click", b.toggleClick).on("click", b.toggleClick),
                    $(".icon-play.modal-launcher").off("click", b.onVideoClick).on("click", b.onVideoClick),
                    b.runClickEventToResetView && (b.controls.length > 1 && b.tabControlClick({
                        target: b.controls.eq(0)
                    }),
                    b.featureGroup && $(b.featureGroup).hasClass("hybrid-only") && b.toggleClick({
                        target: a
                    })),
                    c && b.filterHybrid(!0)
                }
            },
            initSubscriptions: function() {
                T1.channels.dialog.subscribe(c.OTHER_FEATURES_SHOWALL, b.openAllFeatures),
                T1.channels.dialog.subscribe(c.MATERIALBOX_OPENED, b.initOnDemand),
                T1.channels.dialog.subscribe(c.MATERIALBOX_CLOSED, function() {
                    b.inOverlayer = !1
                })
            },
            onVideoClick: function(a) {
                var b = $(this).parent().prev(".modal-container");
                if (b.find("figure").length)
                    T1.channels.figure.publishAsync(c.FIGURE_LOAD, b);
                else {
                    var d = b.find(".posterWrapper");
                    d.length && T1.channels.media.publish(c.VIDEO_CLICK, d)
                }
            },
            tabControlClick: function(a) {
                var d = $(a.target)
                  , e = d.data("section-filter");
                if (".group-features" === e)
                    return window.location.hash = d.attr("href"),
                    "view_all" === d.data("bt-value") && T1.channels.dialog.publishAsync(c.STATS_TRACK_OTHERFEATURES_VIEWALL, a),
                    !1;
                a.preventDefault && a.preventDefault(),
                b.controls.removeClass("active"),
                b.inOverlayer || d.addClass("active"),
                b.featureGroup = e,
                b.hideAll(),
                b.showOne(b.featureGroup),
                b.refreshCarousel($(e, b.container).find(".fc-group-content:visible"))
            },
            toggleClick: function(a) {
                var c = $(a.target)
                  , d = c.closest("section");
                a.preventDefault && a.preventDefault(),
                c.toggleClass("activated").toggleClass("inactivated"),
                c.is(".activated") ? (d.attr("data-bt-state", "hybrid"),
                c.text(c.attr("data-viewnonhybrid"))) : (d.attr("data-bt-state", "nonhybrid"),
                c.text(c.attr("data-viewhybrid"))),
                b.filterHybrid(c.is(".activated")),
                b.refreshCarousel($(d.find(".fb-item.active").data("section-filter")).find(".fc-group-content:visible"))
            },
            refreshCarousel: function(a) {
                "true" === T1.settings.useLazyLoading && $.safe("T1.lazyLoad.onDemand")(a),
                T1.channels.media.publish(c.CAROUSEL_REFRESH, {
                    target: a
                })
            },
            switchDesktop: function() {
                if (b.container.size()) {
                    var a = $(".feature").find(".read-more-container a");
                    a.size() && a.removeClass("listed-feature").addClass("readMore").off("click", b.openFeature)
                }
            },
            switchMobile: function() {
                if (b.container.size()) {
                    var a = $(".feature").find(".read-more-container a");
                    a.size() && a.removeClass("readMore").addClass("listed-feature").on("click touchstart", b.openFeature)
                }
            },
            openFeature: function(a) {
                a.preventDefault();
                var b = $(a.target).closest("article");
                $(".expansion-feature").slideUp().prev(".feature").find(".read-more-container a").removeClass("open-state"),
                b.next(".expansion-feature").is(":visible") || b.next(".expansion-feature").slideDown().prev(".feature").find(".read-more-container a").addClass("open-state")
            },
            filterHybrid: function(a) {
                a = void 0 !== a && a,
                a ? $(".fc-group-content").hide().filter(".hybrid").fadeIn(1e3) : $(".fc-group-content").hide().not(".hybrid").fadeIn(1e3)
            },
            hideAll: function() {
                b.inOverlayer || b.container.children().hide()
            },
            showOne: function(a) {
                b.inOverlayer ? $(".material-box").animate({
                    scrollTop: $(".material-box").find(a).offset().top - 30
                }, "slow") : $(a, b.container).eq(0).fadeIn(1e3)
            },
            openAllFeatures: function() {
                T1.channels.media.publish(c.VIDEO_RESET, {});
                var a = $("." + b.otherFeaturesClass).clone(!0)
                  , d = a.attr("data-section-title");
                a.find("a[data-section-filter='.group-features']").remove(),
                a.find(".group-features").css({
                    display: "inline-block",
                    opacity: 1
                }),
                b.container = a.find(".fc-group-container").addClass("container"),
                b.container.find("h2.container").removeClass("container"),
                b.controls = a.find(".fb-item", ".fb-group"),
                b.controls.filter(".active").removeClass("active"),
                a.find(".carousel-wrapper").remove(),
                a.find(".responsive-carousel").removeClass("responsive-carousel"),
                a.find(".orig-data-copy").show();
                var e = T1.channels.dialog.subscribe(c.MATERIALBOX_OPENED, function(a) {
                    $.safe("T1.lazyLoad.onDemand")(a.container),
                    e.unsubscribe()
                });
                T1.channels.dialog.publishAsync(c.MATERIALBOX_OPEN, {
                    html: a,
                    pageName: d,
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                    hashAction: "otherFeatures"
                }),
                b.inOverlayer = !0,
                b.subscriptionCloseAllFeatures = T1.channels.dialog.subscribe(c.PAGEOVERLAYER_REOPEN_MAINCONTENT, b.closeAllFeatures)
            },
            closeAllFeatures: function() {
                b.container = $(".fc-group-container"),
                b.controls = $(".fb-item", ".fb-group"),
                b.inOverlayer = !1,
                b.controls.length > 1 && b.controls.eq(0).trigger("click"),
                b.subscriptionCloseAllFeatures && b.subscriptionCloseAllFeatures.unsubscribe()
            },
            initOnDemand: function(a) {
                a && a.container && a.container.find(".otherfeatures").length < 1 || (b.container = $(".fc-group-container"),
                b.runClickEventToResetView = !1,
                b.initComponent(),
                b.runClickEventToResetView = !0)
            }
        }
          , b = a
          , c = T1.constants;
        return {
            initDesktop: a.initDesktop,
            switchDesktop: a.switchDesktop,
            switchMobile: a.switchMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.readMore = function() {
        "use strict";
        var a = {
            subscriptions: {},
            classes: {
                bottomToTop: "bottom-to-top",
                activeState: "active-state",
                readMore: "readMore",
                closeLink: "closelink",
                expansionContent: "expansion-content",
                mobileExpansion: "mobile-expansion",
                expansionArrow: "expansion-arrow",
                activeTooltip: "active",
                countryActiveTooltip: "active-tooltip",
                countryContainer: "country"
            },
            init: function() {
                b("body").on("tap click", "." + c.classes.readMore, function(a) {
                    a.preventDefault(),
                    a.stopPropagation(),
                    T1.channels.dialog.publishAsync(d.READMORE_SHOW, {
                        target: b(this),
                        e: a,
                        navIsHidden: c.getNavigationState(a)
                    })
                }),
                c.resetSubscriptions(),
                T1.channels.dialog.subscribe(d.READMORE_HIDE_TARGET, c.hideAll),
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, function() {
                    c.hideAll({
                        target: b("body")
                    })
                }),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_OPEN, c.hideAll),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, c.hideAll)
            },
            getNavigationState: function(a) {
                return b(a.currentTarget).closest("body").hasClass("main-navigation-hidden")
            },
            show: function(a) {
                var e, f, g, h = a.target, i = h.data("tooltip-sibling"), j = h.closest(".container").or("body"), k = h.attr("data-tooltip-selector"), l = (i ? h.siblings(k) : j.find(k)).last(), m = h.hasClass(c.classes.activeState), n = h.closest(".markers-container");
                m ? c.handleMobileCountryTooltip(h, l) || c.hide(h) : (c.hideAll(),
                e = h.closest(".overlayerContent, .material-box"),
                f = c.getTooltipContainer(h, l, e),
                g = b('<figure class="tooltip-placeholder"/>'),
                l.data({
                    "tooltip-placeholder": g,
                    "read-more": h
                }).before(g).appendTo(f),
                h.data("tooltip", l).addClass(c.classes.activeState),
                n.length && n.addClass("tooltip-active"),
                T1.channels.global.publish(T1.constants.SPECIAL_LINK_INIT_ON_DEMAND, l),
                c.subscriptions[d.NAVIGATION_VISIBILITY] = T1.channels.navigation.subscribe(d.NAVIGATION_VISIBILITY, function(b) {
                    var d = b.navContainer.children("." + c.classes.expansionContent);
                    b.navIsHidden ? d.css("margin-top", a.navIsHidden ? "0" : "-50px") : d.css("margin-top", a.navIsHidden ? "50px" : "0")
                }),
                c.handleMobileCountryTooltip(h, l) || (c.isMobile() && l.hasClass(c.classes.bottomToTop) ? c.showBottomToTop(l, h, f) : c.showTooltip(l, h, f, j, e)))
            },
            AddTooltipEvents: function(a) {
                a.off("tap click touchstart", c.onTooltipClick).on("tap click touchstart", c.onTooltipClick),
                a.find("." + c.classes.closeLink).off("tap click touchstart", c.onCloseClick).on("tap click touchstart", c.onCloseClick)
            },
            onCloseClick: function(a) {
                a.preventDefault(),
                a.stopPropagation(),
                c.hide(b(this).closest("." + c.classes.expansionContent).data("read-more"))
            },
            onTooltipClick: function(a) {
                a.stopPropagation()
            },
            showTooltip: function(a, b, d, e, f) {
                c.AddTooltipEvents(a),
                a.removeAttr("style").toggleClass("expansion-pageovelayer-content", !!f.length),
                c.setPosition(a, b, e, f, d),
                c.shouldInteractWithCarousel(b) && c.pauseCarousel(b),
                setTimeout(function() {
                    a.addClass(c.classes.activeTooltip)
                }, 0)
            },
            showBottomToTop: function(a, e, f) {
                var g = b("<div/>").addClass([c.classes.mobileExpansion, c.classes.expansionContent, c.classes.bottomToTop].join(" "));
                g.html(a.html()).prependTo(f).height(0),
                g.data("read-more", e),
                c.AddTooltipEvents(g),
                b("." + c.classes.expansionArrow, g).remove(),
                g.animate({
                    height: a.height()
                }, d.ANIMATION_SPEED_FADE),
                setTimeout(c.resetSubscriptions, 500)
            },
            setPosition: function(a, d, e, f, g) {
                var h = c.getVerticalDirection(d, a, f)
                  , i = c.getVerticalOffset(h, d, a, g, f)
                  , j = c.getHorizontalDirection(d, e, a, f)
                  , k = c.getHorizontalOffset(j, d, a, f)
                  , l = "rtl" === T1.settings.siteDirection && "right" === j ? {
                    top: i,
                    right: k,
                    left: "auto"
                } : {
                    top: i,
                    left: k
                };
                a.css(l).show({
                    duration: 100,
                    start: function() {
                        if (!a.hasClass(c.classes.bottomToTop)) {
                            var e = a.find("." + c.classes.expansionArrow);
                            if (e.length) {
                                var f = d.find(">span:first()").or(b(".car-range .icon-info-sign")).or(d)
                                  , g = f.offset().left + f.outerWidth() / 2 - e.outerWidth() / 2 - a.offset().left
                                  , h = a.width() - e.outerWidth() - 5
                                  , i = {};
                                if (g = g > h ? h : g,
                                "rtl" === T1.settings.siteDirection) {
                                    var j = b(window).width() - (f.offset().left + f.outerWidth())
                                      , k = b(window).width() - (a.offset().left + a.outerWidth())
                                      , l = j + f.outerWidth() / 2 - e.outerWidth() / 2 - k;
                                    l = l > h ? h : l,
                                    i = {
                                        right: l > 5 ? l : 5,
                                        left: "auto"
                                    }
                                } else
                                    i = {
                                        left: g > 5 ? g : 5
                                    };
                                e.css(i)
                            }
                        }
                    }
                }).removeClass("top bottom left right"),
                a.addClass(h + " " + j)
            },
            getTooltipContainer: function(a, d, e) {
                return e.length ? e : d.hasClass(c.classes.bottomToTop) ? b("body") : a.closest(".collapser").or("body")
            },
            getVerticalDirection: function(a, d, e) {
                var f = e.css("margin-top") ? parseInt(e.css("margin-top")) : 0
                  , g = b(window).scrollTop()
                  , h = a.offset().top
                  , i = c.getTooltipHeight(d)
                  , j = h - g;
                if (a.hasClass("over"))
                    return "over";
                if (e.length)
                    j -= f;
                else {
                    j -= b("#navigation").height() + b("#nav-secondary-level").height()
                }
                return j >= i ? "top" : "bottom"
            },
            getVerticalOffset: function(a, d, e, f, g) {
                var h = "bottom" === a ? d.offset().top + d.height() + 5 : d.offset().top - c.getTooltipHeight(e) - 5;
                return h += "over" === a ? d.height() + 8 : 0,
                h += f.is("body") ? 0 : f.parents(".material-box").scrollTop() || f.scrollTop(),
                h -= f.is(".dropdown-menu, .navigation-dropdown, .collapser") ? b("#navigation").height() : 0,
                h -= g.length ? parseInt(g.css("margin-top"), 10) : 0
            },
            getHorizontalDirection: function(a, c, d, e) {
                var f = d.width()
                  , g = e.length ? e.prev(".toolbar").outerWidth() : 0
                  , h = a.outerWidth()
                  , i = "rtl" === T1.settings.siteDirection ? b(window).width() - (c.offset().left + c.outerWidth()) : c.offset().left
                  , j = "rtl" === T1.settings.siteDirection ? b(window).width() - (a.offset().left + h) : a.offset().left
                  , k = i + c.width() > j + f || c.width() < f || f > j + h - g ? "right" : "left"
                  , l = c.width() + i - j > f
                  , m = j + h - i > f;
                return "right" === k && !l || "left" === k && !m ? k = "center" : "rtl" === T1.settings.siteDirection && (k = "right" === k ? "left" : "right"),
                k
            },
            getHorizontalOffset: function(a, d, e, f) {
                if (c.isMobile())
                    return 0;
                var g, h = d.offset(), i = d.width(), j = e.width(), k = parseInt(d.css("padding-left")) + parseInt(d.css("padding-right"));
                return g = "rtl" === T1.settings.siteDirection && "right" === a ? b(window).width() - j - h.left : "center" === a ? h.left + i / 2 - j / 2 : "right" === a ? h.left : h.left + i - j + k,
                f.length ? g - f.offset().left : g
            },
            getTooltipHeight: function(a) {
                return a.height() + 10
            },
            pauseCarousel: function(a) {
                var b = a.closest(".carousel");
                b.length && T1.channels.media.publishAsync(T1.constants.CAROUSEL_PAUSE, {
                    carousel: b
                })
            },
            startCarousel: function(a) {
                var b = a.closest(".carousel");
                b.length && T1.channels.media.publishAsync(T1.constants.CAROUSEL_START, {
                    carousel: b
                })
            },
            resetSubscriptions: function() {
                for (var a in c.subscriptions)
                    c.subscriptions[a].unsubscribe();
                c.subscriptions = {},
                c.subscriptions[d.ON_DOC_CLICK] = T1.channels.global.subscribe(d.ON_DOC_CLICK, function() {
                    c.hideAll({
                        target: b("body")
                    })
                }),
                c.subscriptions[d.READMORE_SHOW] = T1.channels.dialog.subscribe(d.READMORE_SHOW, c.show)
            },
            handleMobileCountryTooltip: function(a, d) {
                if (c.isMobile()) {
                    var e = a.parent();
                    if (e.hasClass(c.classes.countryContainer)) {
                        var f = b("." + c.classes.countryActiveTooltip);
                        return f.is(e) || c.toggleCountryTooltip(f, f.find("." + c.classes.expansionContent)),
                        c.toggleCountryTooltip(e, d),
                        !0
                    }
                }
                return !1
            },
            toggleCountryTooltip: function(a, d) {
                a.toggleClass(c.classes.countryActiveTooltip),
                a.hasClass(c.classes.countryActiveTooltip) && b("." + c.classes.countryContainer).removeClass(c.countryActiveTooltip).find("." + c.classes.expansionContent).hide(),
                d.appendTo(a).slideToggle("slow")
            },
            hideAll: function(a) {
                a = a || {},
                c.hide(b(a.target).or("body").find("." + c.classes.readMore + "." + c.classes.activeState))
            },
            hide: function(a) {
                a && a.length && (a.each(function() {
                    var a = b(this)
                      , d = a.closest(".markers-container")
                      , e = a.data("tooltip");
                    e.length && (c.isMobile() && e.hasClass(c.classes.bottomToTop) ? c.hideBottomToTop() : e.removeClass(c.classes.activeTooltip).removeAttr("style"),
                    e.data("tooltip-placeholder") && e.data("tooltip-placeholder").replaceWith(e)),
                    a.removeClass(c.classes.activeState),
                    d.length && d.removeClass("tooltip-active"),
                    c.shouldInteractWithCarousel(a) && c.startCarousel(a)
                }),
                c.subscriptions[d.NAVIGATION_VISIBILITY] && c.subscriptions[d.NAVIGATION_VISIBILITY].unsubscribe())
            },
            hideBottomToTop: function() {
                b("." + c.classes.mobileExpansion).animate({
                    height: 0
                }, T1.constants.ANIMATION_SPEED_FADE, function() {
                    b(this).remove()
                })
            },
            isMobile: function() {
                return "xs" === b.safe("T1.breakpoints.currentBP")()
            },
            shouldInteractWithCarousel: function(a) {
                return !a.data("noCarouselInteraction")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.article = function() {
        "use strict";
        var a = {
            init: function() {
                c.setVideoButton(),
                c.setAjaxRequest(),
                c.setIFrameContent()
            },
            setVideoButton: function() {
                var a = b(".sprite-videoplayer-start-button");
                a.size() && a.on("click", function() {
                    var a = b(this)
                      , c = a.data("youtubeid") || a.data("video");
                    location.hash = "/youtube/" + c.replace(/(.*v=|&.*)|(.*embed\/|\?.*)/g, "")
                })
            },
            setAjaxRequest: function() {
                var a = b("#articleAjax");
                a.size() && a.on("click", function(a) {
                    location.hash = "/ajax/" + this.id,
                    location.hash && a.preventDefault()
                })
            },
            setIFrameContent: function() {
                var a = b("#articleIFrame");
                a.size() && a.on("click", function(a) {
                    location.hash = "/iframe/" + encodeURIComponent(b(this).prop("href")),
                    location.hash && a.preventDefault()
                })
            }
        }
          , c = a;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.topfeatures = function() {
        "use strict";
        var a = {
            CLASS_BUTTON_HYBRID: "btn-hybrid-view",
            CLASS_MODE_HYBRID: "secondary-content-active",
            CLASS_CC_TOP_FEATURES_V2: "carchapter-topfeatures-v2",
            out_ms: 600,
            in_ms: 400,
            init: function() {
                b("." + c.CLASS_CC_TOP_FEATURES_V2).length && c.setupHybrid(),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPEN, function(a) {
                    "object" == typeof a.html && c.initOnDemand(a.html)
                })
            },
            initMobile: function() {
                c.switchMobile(),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPAND, c.onCollapsiblePanelExpand)
            },
            switchMobile: function() {
                b(".topfeatures-mobile").length && c.onCollapsiblePanelExpand(b("div ." + c.CLASS_CC_TOP_FEATURES_V2 + ":empty"))
            },
            onCollapsiblePanelExpand: function(a) {
                (a.panel ? a.panel.find("." + c.CLASS_CC_TOP_FEATURES_V2 + ":empty") : a).each(function() {
                    var a = b(this)
                      , e = a.data("section-to-clone") || ""
                      , f = e.indexOf("#") > -1
                      , g = !f && e.length ? "#" + e : e
                      , h = e.length ? b(g + " .gallery") : null;
                    if (h && h.length && a.length) {
                        var i = T1.channels.scrolling.subscribe(d.LAZY_LOAD_COMPLETE, function() {
                            i.unsubscribe(),
                            T1.channels.media.publish(d.CAROUSEL_CREATERESPONSIVE, {
                                container: a,
                                settings: {
                                    isPrimaryGallery: !0,
                                    isTopFeaturesV2: !0
                                }
                            }),
                            c.initOnDemand(a)
                        });
                        h.clone().appendTo(a),
                        T1.channels.dialog.publish(d.LOADING_START, {
                            target: a,
                            lazyloader: !0
                        }),
                        b.safe("T1.lazyLoad.onDemand")(a)
                    }
                })
            },
            initOnDemand: function(a) {
                a = a || b("body"),
                a.hasClass(c.CLASS_CC_TOP_FEATURES_V2) && (c.setupHybrid(a),
                a.find(".gallery-link, .html5-overlayer, .video-overlayer, .youtube-overlayer").each(function(a) {
                    b(this).on("click", function(c) {
                        c.preventDefault();
                        var e = b(this)
                          , f = e.attr("id")
                          , g = "/gallery/" + f + "/" + a;
                        e.is(".html5-overlayer") ? g = "/publish/pageoverlayer_open/html5id=" + e.data("html5id") + "/el=.html5-overlayer/noScroll=true" : e.is(".youtube-overlayer") ? g = "/youtube/" + e.data("id") : e.is(".video-overlayer") && (g = "/video/" + f),
                        T1.channels.hash.publishAsync(d.HASH_ADD, g)
                    })
                }))
            },
            setupHybrid: function(a) {
                a = a || b("body"),
                (a.hasClass(c.CLASS_CC_TOP_FEATURES_V2) ? a.find(".gallery-item:has(.zoomContainer[data-hybrid], h4[data-hybrid])") : a.find("." + c.CLASS_CC_TOP_FEATURES_V2 + " .gallery-item:has(.zoomContainer[data-hybrid], h4[data-hybrid])")).each(function() {
                    var a = b(this)
                      , d = c.getItemHandler(a);
                    d = _.throttle(d, c.in_ms + c.out_ms),
                    a.find("." + c.CLASS_BUTTON_HYBRID).click(d)
                })
            },
            animate: function(a, b) {
                a.animate({
                    opacity: 0
                }, c.out_ms, function() {
                    b(a),
                    a.animate({
                        opacity: 1
                    }, c.in_ms)
                })
            },
            animateImage: function(a, b) {
                b.css("opacity", 0),
                a.animate({
                    opacity: 0
                }, c.out_ms, function() {
                    a.hide().removeClass("active"),
                    b.show().addClass("active"),
                    b.animate({
                        opacity: 1
                    }, c.in_ms)
                })
            },
            toggleHybridAttr: function(a) {
                var b = a.attr("data-hybrid");
                if (a.is("header[data-hybrid]"))
                    a.attr("data-hybrid", a.css("background-image")),
                    c.animate(a, function(a) {
                        a.css("background-image", b)
                    });
                else if (a.is(".zoomContainer[data-hybrid], div[data-hybrid], .unlinked-topfeature[data-hybrid]")) {
                    var d = a.eq(0).hasClass("active")
                      , e = d ? a.eq(1) : a.eq(0)
                      , f = d ? a.eq(0) : a.eq(1);
                    c.animateImage(f, e)
                } else
                    a.is("h2[data-hybrid]") || a.is("h4[data-hybrid]") || a.is(".topfeature-description p") || a.is(".item-content p") ? (a.attr("data-hybrid", a.text()),
                    c.animate(a, function(a) {
                        a.text(b)
                    })) : a.is("a[data-hybrid]") ? (a.attr("data-hybrid", a.attr("href")),
                    a.attr("href", b)) : a.is("." + c.CLASS_BUTTON_HYBRID) && (a.attr("data-hybrid", a.text()),
                    a.text(b).toggleClass("btn-action-secondary").toggleClass("btn-simple"))
            },
            getItemHandler: function(a) {
                return function(e) {
                    e.preventDefault(),
                    e.stopPropagation();
                    var f = b(e.target)
                      , g = a.find("a[data-hybrid], div[data-hybrid], .unlinked-topfeature[data-hybrid]");
                    if (f.attr("data-bt-state", f.hasClass("btn-action-secondary") ? "hybrid" : "nonhybrid"),
                    g.length < 2) {
                        var h = b(this);
                        setTimeout(function() {
                            c.toggleHybridAttr(h)
                        }, c.out_ms + c.in_ms)
                    }
                    c.toggleHybridAttr(g),
                    c.toggleHybridAttr(a.find(".zoomContainer[data-hybrid]")),
                    c.toggleHybridAttr(a.find("h4[data-hybrid]")),
                    c.toggleHybridAttr(a.find(".item-content p[data-hybrid]")),
                    T1.channels.statistics.publish(d.STATS_TRACK, {
                        node: f
                    })
                }
            },
            setHybridState: function(a) {
                a.preventDefault();
                var c = b(a.target);
                c.attr("data-bt-state", c.hasClass("btn-action-secondary") ? "hybrid" : "nonhybrid")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initMobile: a.initMobile,
            switchMobile: a.switchMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.engineMobileCompare = function() {
        "use strict";
        var a = {
            container: null,
            data: null,
            directCall: !1,
            directEngine: null,
            initMobile: function() {
                b.container = $(".mobile-compare"),
                b.container.size() && (T1.channels.dialog.subscribe(c.PAGEOVERLAYER_OPEN, function(a) {
                    a.html && a.html.is(b.container) && b.getData(function() {
                        var a = $(".ecm-section-toggle[data-ecm-task='" + b.container.attr("data-extended-param") + "']");
                        a.length && a.trigger("click")
                    })
                }),
                T1.channels.dialog.subscribe(c.MATERIALBOX_OPENED, function(a) {
                    1 === $(".ecm-container", a.container[0]).length && setTimeout(function() {
                        scrollTo(0, 0)
                    }, 1)
                }),
                T1.channels.carchapter.subscribe(c.MOBILE_COMPARE_CHANGE, b.toDataPage),
                $(".ecm-section-toggle", b.container).click(b.onTabClick),
                $(".ecm-engine-trigger", b.container).click(b.onEngineNodeClick),
                $(".ecm-back-button", b.container).click(b.toOverviewPage))
            },
            onTabClick: function(a) {
                a.preventDefault && a.preventDefault(),
                $(".ecm-section-toggle", b.container).removeClass("active");
                var c = $(this).addClass("active");
                b.container.find(".ecm-sub-container").hide(),
                $("." + c.data("ecm-task")).show(),
                scrollTo(0, 0)
            },
            onEngineNodeClick: function(a) {
                a.preventDefault && a.preventDefault(),
                T1.channels.hash.publishAsync(c.HASH_ADD, "/publish/mobile_compare_change/engineCode=" + $(this).data("ecm-engine-type"))
            },
            generateDataTable: function(a) {
                var d = a.specs
                  , e = $(".ecm-data-table", b.container)
                  , f = $(".ecm-data-head", b.container);
                $(".ecm-selected-title", f).text(a.name),
                a.promotions && a.promotions.length ? ($(".ecm-promo-count-holder", f).text("(" + a.promotions.length + ")"),
                $(".ecm-promo-count").show()) : $(".ecm-promo-count").hide(),
                b.showSelectedEnginePromotions(a.code, ".ecm-data-container"),
                $(".ecm-selected-specs-table", e).remove();
                for (var g = $("<table/>").addClass("ecm-selected-specs-table table table-striped").prependTo(e), h = 0; h < d.length; h++)
                    if (d[h].quick) {
                        var i = $("<tr/>").addClass("ecm-selected-specs-row").appendTo(g);
                        $("<td/>").addClass("ecm-specs-cell-name").text(d[h].name).appendTo(i),
                        $("<td/>").addClass("ecm-specs-cell-value").text(d[h].value).appendTo(i)
                    }
                T1.channels.dialog.publishAsync(c.PAGEOVERLAYER_OPEN, {
                    html: $(".ecm-data-container"),
                    preserveContent: !0,
                    pageName: b.container.data("section-title")
                })
            },
            toDataPage: function(a) {
                var c = a.engineCode;
                if (b.data.engines) {
                    for (var d = null, e = 0; e < b.data.engines.length; e++) {
                        var f = b.data.engines[e];
                        if (f.code === c) {
                            d = f;
                            break
                        }
                    }
                    d && b.generateDataTable(d)
                } else
                    b.directCall = !0,
                    b.directEngine = c
            },
            toOverviewPage: function(a) {
                a.preventDefault(),
                T1.channels.hash.publishAsync(c.HASH_REMOVE, "")
            },
            getData: function(a) {
                b.data ? a() : $.getJSON("/api/cardb/mobilespecs/" + b.getCarModel(), b.onGetData).always(a)
            },
            onGetData: function(a) {
                b.data = a;
                var c = b.countPromotions();
                $(".ecm-engine-available-title", b.container).append("(" + b.data.engines.length + ")"),
                c ? $(".ecm-engine-promotions-title", b.container).append("(" + c + ")") : $(".ecm-engine-promotions-title", b.container).hide().prev("span").hide(),
                b.generateBodySpecs()
            },
            getCarModel: function() {
                return b.container.data("car-model") || $(".car-model").data("car-model")
            },
            generateBodySpecs: function() {
                var a = b.countPromotions(!0)
                  , c = $(".ecm-model-container > div.section-title", b.container);
                $(".ecm-model-available-title", c).append("(" + b.data.bodyTypes.length + ")"),
                a ? $(".ecm-model-promotions-title", c).append("(" + a + ")") : $(".ecm-model-promotions-title", c).hide().prev("span").hide();
                for (var d = 0; d < b.data.bodyTypes.length; d++)
                    b.addModelTable(b.data.bodyTypes[d]);
                b.addPromotions()
            },
            addModelTable: function(a) {
                var c = $(".ecm-grid-container", b.container)
                  , d = $("<table/>").addClass("table table-striped ecm-body-info-table").prependTo(c)
                  , e = $("<tr/>").addClass("ecm-body-info-row").appendTo(d);
                if (a.promotions) {
                    var f = $("<div/>").addClass("ecm-promotions-holder ecm-promotions-holder-body").prependTo(c);
                    $("<h4/>").append($("<span/>").addClass("ecm-model-promotions-title").text(a.name + " " + T1.labels.comparator.promotions + "(" + a.promotions.length + ")").append($("<i/>").addClass("icon icon-tag"))).appendTo(f),
                    b.generatePromotionsNodes(a.promotions, f, "body")
                }
                $("<td/>").addClass("ecm-body-info-header").text(a.name).attr("colspan", 2).appendTo(e);
                for (var g = 0; g < a.specs.length; g++)
                    if (a.specs[g].quick) {
                        var h = $("<tr/>").addClass("ecm-body-info-row").appendTo(d);
                        $("<td/>").addClass("ecm-body-info-cell-name").text(a.specs[g].name).appendTo(h),
                        $("<td/>").addClass("ecm-body-info-cell-value").text(a.specs[g].value).appendTo(h)
                    }
            },
            countPromotions: function(a) {
                void 0 === a && (a = !1);
                for (var c = a ? b.data.bodyTypes : b.data.engines, d = [], e = 0; e < c.length; e++)
                    if (c[e].promotions)
                        for (var f = 0; f < c[e].promotions.length; f++) {
                            var g = c[e].promotions[f]
                              , h = "code"in g ? g.code : null;
                            $.inArray(h, d) < 0 && d.push(h)
                        }
                return d.length
            },
            addPromotions: function() {
                for (var a = [], c = $(".ecm-data-table", b.container), d = 0; d < b.data.engines.length; d++)
                    if (b.data.engines[d].promotions) {
                        $(".promolabel", ".ecm-engine-trigger[data-ecm-engine-type='" + b.data.engines[d].code + "']").show();
                        for (var e = 0; e < b.data.engines[d].promotions.length; e++) {
                            var f = b.data.engines[d].promotions[e];
                            f.engineCode = b.data.engines[d].code,
                            f.engine = !0,
                            a.push(f)
                        }
                    }
                var g = $("<div/>").addClass("ecm-promotions-holder ecm-promotions-holder-engine").insertBefore(c);
                b.generatePromotionsNodes(a, g, "engine")
            },
            generatePromotionsNodes: function(a, d, e) {
                d.empty();
                for (var f = '<a class="ecm-promotions-node ecm-promotions-node-{{TYPE}}" ecm-promotion-code="{{CODE}}" href="{{LINK}}"><img src="{{IMG}}" /><span class="ecm-promotions-special-offer">' + T1.labels.comparator.promotions + '<span class="icon icon-tag"></span></span><h4 class="ecm-promotions-title">{{NAME}}</h4><span class="ecm-promotions-sub-title">{{SUB_TITLE}}</span><span class="finance-rate">{{REPAYMENT_RATE}}</span><span class="icon icon-angle-right"></span></a>', g = "None" === b.data.ccVersion ? -1 : parseInt(b.data.ccVersion.split(".")[0], 10), h = -1 !== b.data.ccVersion.indexOf("HD") && g > 5, i = b.data.modelId.replace("{", "").replace("}", ""), j = 0; j < a.length; j++) {
                    var k = "true" !== T1.settings.hidePrices ? T1.labels.priceFrom.replace("%s", globalize.format(a[j].price.listWithDiscount, "c")) : ""
                      , l = a[j].payments !== {} && void 0 !== a[j].payments ? T1.labels.pricePerMonth.replace("%a", a[j].payments.amount).replace("%m", a[j].payments.months) : " "
                      , m = T1.settings.modelMap[i]
                      , n = "true" === T1.settings.enableCarDbTokens && m ? m.token : null
                      , o = T1.settings.CCISHost + (n ? "product-token/" + n : "") + "vehicle/" + i + "/" + a[j].cheapestCar.replace("{", "").replace("}", "") + "/" + c.CAR_IMG_SIZE_160 + "/" + (h ? c.HD_IMAGE_DAY : "") + c.DEFAULT_EXTERIOR_VIEW
                      , p = f.replace(/{{TYPE}}/g, e).replace(/{{LINK}}/g, "/promo/" + a[j].code.replace("{", "").replace("}", "")).replace(/{{IMG}}/g, o).replace(/{{NAME}}/g, a[j].name).replace(/{{SUB_TITLE}}/g, k);
                    p = p.replace(/{{CODE}}/g, a[j].engine ? a[j].engineCode : "body"),
                    p = p.replace(/{{REPAYMENT_RATE}}/g, l),
                    d.append(p)
                }
                d.append($("<div/>").addClass("clearfix")),
                b.directCall && "engine" === e && (b.showSelectedEnginePromotions(b.directEngine, d),
                b.directCall = !1,
                b.toDataPage({
                    engineCode: b.directEngine
                }))
            },
            showSelectedEnginePromotions: function(a, b) {
                $(".ecm-promotions-node-engine", b).hide(),
                $(".ecm-promotions-node-engine[ecm-promotion-code='" + a + "']", b).show()
            }
        }
          , b = a
          , c = T1.constants;
        return {
            initMobile: a.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.compareModelsMobile = function() {
        "use strict";
        var a = {
            container: $("#compareModelsMobile"),
            dataContainer: $("#gcmEquipments"),
            data: {
                source: null,
                hybrid: {
                    grades: []
                },
                nonHybrid: {
                    grades: []
                },
                index: null
            },
            deferOvl: null,
            featuresLabel: $("#gcmEquipments").find("#gcmFeatures p.standard-features").text(),
            initMobile: function() {
                b.container.size() && (T1.channels.dialog.subscribe(c.PAGEOVERLAYER_OPEN, function(a) {
                    a.html && a.html.is(b.container) ? b.getData() : a.grade && a.html.is(b.dataContainer) && b.loadDetails(a.grade)
                }),
                T1.channels.carchapter.subscribe(c.MOBILE_COMPARE_MODELS_CHANGE, b.mobileCompareModelsChange),
                b.container.find(".gcm-section-toggle").click(b.onTabClick),
                b.container.find(".gcm-model-trigger").click(b.onModelNodeClick))
            },
            onTabClick: function(a) {
                a.preventDefault && a.preventDefault(),
                b.container.find(".gcm-section-toggle").removeClass("active");
                var c = $(this).addClass("active");
                b.container.find(".gcm-sub-container").removeClass("active"),
                $("." + c.data("gcm-task")).addClass("active"),
                scrollTo(0, 0)
            },
            onModelNodeClick: function(a) {
                a.preventDefault && a.preventDefault(),
                $(a.target).closest("a").size() || T1.channels.hash.publishAsync(c.HASH_ADD, "/publish/mobile_compare_models_change/modelCode=" + encodeURIComponent($(this).data("gcm-model-code")))
            },
            loadDetails: function(a) {
                var d = b.groupCarEquipment(a)
                  , e = b.data.source.ccVersion || "None";
                b.dataContainer.find("header h1").html(a.name);
                var f = (T1.labels.priceFrom || "").replace("%s", globalize.format(a.minPrice.listWithDiscount, "c"));
                if (b.dataContainer.find("header h4:not(.gcm-promo-count)").html(f),
                a.minPrice.discounts && b.dataContainer.find("header .gcm-promo-count-holder").html("(" + a.minPrice.discounts.length + ")"),
                b.dataContainer.find("header .gcm-promo-count").toggle(a.minPrice.discountsApplied || !1),
                "None" !== e) {
                    var g = (-1 !== e.indexOf("HD") && parseInt(e.split(".")[0], 10) > 5 ? c.HD_IMAGE_DAY : "") + c.DEFAULT_EXTERIOR_VIEW
                      , h = T1.settings.modelMap[b.data.source.code]
                      , i = "true" === T1.settings.enableCarDbTokens && h ? h.token : null;
                    b.dataContainer.find("header img").attr("src", T1.settings.CCISHost + (i ? "product-token/" + i : "") + "vehicle/" + b.data.source.code + "/" + a.minPrice.car + "/width/367/height/158/" + g)
                }
                b.dataContainer.find("header p").html(a.description || ""),
                b.dataContainer.find("header a").attr("href", b.data.source.links.CarConfigurator),
                b.loadCarOptions(d),
                b.loadCarAccessories(d, a.labels || {}),
                b.dataContainer.find("#gcmFeatures p.standard-features").text(b.featuresLabel.replace("%s", a.name))
            },
            groupCarEquipment: function(a) {
                var b = {};
                if (a.equipment)
                    for (var c = 0; c < a.equipment.length; c++) {
                        var d = a.equipment[c];
                        b[d.type] || (b[d.type] = []),
                        b[d.type].push(d)
                    }
                return b
            },
            loadCarOptions: function(a) {
                var c = b.dataContainer.find("#topFeatures").empty();
                if (b.dataContainer.find("#gcmFeatures .top-features").hide(),
                a.CarOption) {
                    for (var d = 0; d < a.CarOption.length; d++) {
                        var e = $('<div class="col-xs-6"></div>')
                          , f = b.getOptionImage(a.CarOption[d]);
                        f && ($("<img/>").attr("src", T1.settings.cardbImageHost + f.fileName).appendTo(e),
                        $("<p/>").html(a.CarOption[d].name).appendTo(e),
                        e.appendTo(c))
                    }
                    b.dataContainer.find("#gcmFeatures .top-features").show()
                }
            },
            getOptionImage: function(a) {
                if (a.images)
                    for (var b = 0; b < a.images.length; b++)
                        if ("IMG_PNG_285x260" === a.images[b].type)
                            return a.images[b]
            },
            loadCarAccessories: function(a, c) {
                var d = b.dataContainer.find("#standardFeatures").empty();
                if (b.dataContainer.find("#gcmFeatures .standard-features").hide(),
                c.ALLFEATURETEXT && d.before("<div class='custom-intro'>" + c.ALLFEATURETEXT + "</div>"),
                a.CarOption) {
                    for (var e = 0; e < a.CarOption.length; e++)
                        $("<li/>").html(a.CarOption[e].name).appendTo(d);
                    b.dataContainer.find("#gcmFeatures .standard-features").show()
                }
            },
            mobileCompareModelsChange: function(a) {
                if (b.data.source) {
                    var d = b.getGrade(a.modelCode);
                    d && T1.channels.dialog.publishAsync(c.PAGEOVERLAYER_OPEN, {
                        html: b.dataContainer,
                        preserveContent: !0,
                        grade: d
                    }),
                    b.deferOvl = null
                } else
                    b.deferOvl = {
                        data: a
                    },
                    b.getData()
            },
            getCarModel: function() {
                return b.container.data("car-model") || $(".car-model").data("car-model")
            },
            getData: function() {
                b.data.source || $.getJSON("/api/cardb/gradesequipment/" + b.getCarModel(), b.onGetData)
            },
            onGetData: function(a) {
                b.data.source = a;
                for (var c = 0; c < a.subModels.length; c++) {
                    var d = a.subModels[c];
                    d.isHybrid ? b.data.hybrid = d : b.data.nonHybrid = d
                }
                "None" === a.ccVersion && (b.dataContainer.find("header img").css("display", "none"),
                b.dataContainer.find("header p").css("display", "none")),
                b.deferOvl && b.mobileCompareModelsChange(b.deferOvl.data),
                b.loadPromotions()
            },
            getGrade: function(a) {
                if (!b.data.source.index) {
                    b.data.source.index = {};
                    for (var c = b.getGrades(), d = 0; d < c.length; d++)
                        b.data.source.index[c[d].code] = c[d]
                }
                return b.data.source.index[a]
            },
            getGrades: function() {
                return b.data.hybrid.grades.concat(b.data.nonHybrid.grades)
            },
            loadPromotions: function() {
                b.data.source && $(".gcm-model-trigger").each(function() {
                    var a = $(this)
                      , c = b.getGrade(a.data("gcm-model-code"));
                    c && c.minPrice.discountsApplied && a.find(".promolabel").show()
                })
            }
        }
          , b = a
          , c = T1.constants;
        return {
            initMobile: a.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.dimensions = function() {
        "use strict";
        var a = {
            container: null,
            init: function() {
                c.container = b("#dimensions"),
                c.container.length && c.container.find(".body-filter .dropdown-menu a").click(c.bodyFilterChanged)
            },
            bodyFilterChanged: function(a) {
                var d = b(a.target);
                a.preventDefault(),
                d.closest(".dropdown-menu").find("li a").removeClass("selected"),
                c.container.find(".body-filter .dropdown-toggle .selected-item").html(d.html()),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: c.container,
                    extraData: {
                        event: {
                            action: "body_selected",
                            value: d.text()
                        }
                    }
                }),
                d.addClass("selected"),
                c.container.find(".specifications.active").removeClass("active"),
                c.container.find(d.attr("href")).addClass("active")
            }
        }
          , c = a;
        T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.spotlights = function() {
        "use strict";
        var a = {
            labels: {},
            init: function() {
                var a = b(".spotlights");
                if (a.length) {
                    var e = a.find('a:not(.btn-toggle)[data-toggle="collapse"]')
                      , f = a.find(".spotlight:not(.direct-link)");
                    T1.channels.spotlight.subscribe(d.SPOTLIGHTS_CLICK, c.changeText),
                    e.length && e.on("click", c.onSpotlightClick),
                    f.length && f.on("click", c.clickedSpotlight)
                }
            },
            changeText: function(a) {
                var c = b(a)
                  , d = c.parents(".spotlights");
                if (d.hasClass("expanded")) {
                    var e = " <span> (" + b(".spotlight", d).length + ") </span> "
                      , f = T1.labels.viewAll + e;
                    c.html(f),
                    d.removeClass("expanded").attr("data-bt-state", "collapse")
                } else
                    c.text("" + T1.labels.viewLess),
                    d.addClass("expanded"),
                    d.attr("data-bt-state", "")
            },
            onSpotlightClick: function() {
                T1.channels.spotlight.publishAsync(d.SPOTLIGHTS_CLICK, this)
            },
            clickedSpotlight: function(a) {
                a.preventDefault();
                var d = b(this)
                  , e = d.parents(".spotlights")
                  , f = c.isMobile() ? ":not(.hidden-xs)" : ":not(.hidden-desktop)"
                  , g = e.attr("id")
                  , h = e.find(".spotlight:not(.direct-link)").filter(f).index(d);
                location.hash = "/spotlight/" + g + "/" + h
            },
            isMobile: function() {
                return "xs" === b.safe("T1.breakpoints.currentBP")()
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.specialLink = function() {
        "use strict";
        var a = {
            selectors: ".action-overlayer, .action-overlayer-ajax, .action-scroll-to, .action-box-ajax, .action-box-iframe, .action-box-selector,.action-overlay-ajax,.action-overlay-iframe",
            carGradesCompareSelectors: ".compare",
            gradeLinkSelectors: ".grade-link",
            buildLinkSelectors: ".grade-build-link",
            init: function() {
                var d = b("body")
                  , e = d.hasClass("grade-explore");
                c.initOnDemand(d),
                e && c.initCarGradesPages(d),
                T1.channels.global.subscribe(T1.constants.SPECIAL_LINK_INIT_ON_DEMAND, a.initOnDemand)
            },
            initOnDemand: function(a) {
                a && a.length && a.off("click", c.selectors, c.open).on("click", c.selectors, c.open)
            },
            initCarGradesPages: function(a) {
                a.on("click", c.carGradesCompareSelectors, c.addCarToGradeCompare),
                a.on("click", c.buildLinkSelectors, c.goToPersonalizedBuild),
                a.on("click", c.gradeLinkSelectors, c.goToPersonalizedGrade)
            },
            addCarToGradeCompare: function(a) {
                var c = b(a.currentTarget)
                  , d = b.safe("T1.personalization.getCurrentGradeConfig")() || {}
                  , e = c.data();
                T1.channels.gradecompare.publish(T1.constants.COMPARE_GRADES, {
                    modelId: e.model || d.model,
                    bodyTypeId: e.bodyTypeId || d.bodyTypeId,
                    subModelId: e.subModelId || d.subModelId,
                    gradeId: e.gradeId || d.gradeId,
                    engineId: e.engineId || d.engineId,
                    wheeldriveId: e.wheeldriveId || d.wheeldriveId,
                    transmissionId: e.transmissionId || d.transmissionId,
                    colourId: d.colourId
                })
            },
            goToPersonalizedGrade: function(a) {
                a.preventDefault();
                var c = b(a.target)
                  , d = b(a.currentTarget)
                  , e = !(!c.is(T1.util.Constants.CLASS_PREVENT_DEFAULT.toSelector()) && !c.closest(T1.util.Constants.CLASS_PREVENT_DEFAULT.toSelector()).length)
                  , f = b.safe("T1.personalization.getCurrentGradeConfig")()
                  , g = "";
                if (!c.is('[class^="action-"]') && !c.closest('[class^="action-"]').length) {
                    if (d.parents("#nav-secondary-level").length > 0 || c.is(".btn") || c.is(".brand-types-tab")) {
                        f.explicitSelection = f.clickedColour && f.colourId !== T1.ctx.grade.defaultColourId || f.clickedEngine && f.engineEtw !== T1.ctx.grade.defaultEngineEtw;
                        var h = f.explicitSelection || !T1.ctx.grade.isPromotedGradeBodyType ? "gradebaseurl" : "promotedcanonical"
                          , i = d.data(h);
                        g = b.safe("T1.personalization.generateGradeUrl")(f, null, i)
                    } else {
                        if (!d.parents("#gradeCarousel") || e)
                            return;
                        f.gradeId = d.data("gradeId"),
                        f.bodyTypeId = d.data("bodyTypeId"),
                        f.colourId = !0 === f.clickedColour && d.data("colourId"),
                        f.engineEtw = !0 === f.clickedEngine && f.engineEtw,
                        (f.colourId || f.engineEtw) && (f.explicitSelection = !0),
                        g = b.safe("T1.personalization.generateGradeUrl")(f, {
                            excludeFilters: !0
                        })
                    }
                    window.location.assign(g)
                }
            },
            goToPersonalizedBuild: function(a) {
                a.preventDefault();
                var c = b.safe("T1.personalization.getCurrentGradeConfig")()
                  , d = {
                    modelId: T1.ctx.modelId,
                    carId: c.carId,
                    bodyTypeId: c.bodyTypeId
                };
                c.clickedEngine ? (d.exteriorColourId = c.colourId,
                d.engineId = c.engineId) : d.gradeId = c.gradeId,
                T1.channels.carconfig.publish(T1.constants.CARCONFIG_LOAD, d)
            },
            open: function(a) {
                var d, e = b(this), f = e.attr("href");
                a.preventDefault && a.preventDefault(),
                e.hasClass("action-overlayer") ? c.handleActionOverlayer(e, d, f) : e.hasClass("action-box-iframe") ? c.handleActionBoxIframe(f) : e.hasClass("action-overlayer-ajax") ? c.handleActionOverlayerAjax(e, d, f) : e.hasClass("action-box-ajax") || e.hasClass("action-overlay-ajax") ? c.handleActionBoxAjax(e, d, f) : e.hasClass("action-scroll-to") ? c.handleActionScrollTo(e) : e.hasClass("action-box-selector") ? c.handleActionBoxSelector(e, d) : e.hasClass("action-overlay-iframe") && c.handleActionOverlayIframe(f)
            },
            handleActionOverlayer: function(a, c, d) {
                var e = a.context.origin;
                if (!e) {
                    e = "";
                    for (var f = b.safe("T1.utilities.youtube.isYoutubeUrl")(a.attr("href")) || [], g = 0; g < f.length; g++)
                        e += f[g]
                }
                c = b.safe("T1.utilities.youtube.isYoutubeUrl")(e) ? "/youtube/" : "/box-iframe/",
                c += encodeURIComponent(d) + "/size=fullscreen",
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, c)
            },
            handleActionBoxIframe: function(a) {
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, "/box-iframe/" + encodeURIComponent(a))
            },
            handleActionOverlayerAjax: function(a, b, c) {
                b = "/box-ajax/url=" + encodeURIComponent(c) + "/size=fullscreen",
                a.data("styleclass") && (b = b + "/styleClass=" + a.data("styleclass")),
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, b)
            },
            handleActionBoxSelector: function(a, b) {
                b = "/box-selector/selector=" + encodeURIComponent(a.data("action-box-selector") || a.attr("href")),
                a.data("styleclass") && (b = b + "/styleClass=" + a.data("styleclass")),
                a.data("size") && (b = b + "/size=" + a.data("size")),
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, b)
            },
            handleActionBoxAjax: function(a, b, c) {
                var d = a.data("styleclass") || a.data("action-box-styleclass") || a.data("actionbox-styleclass");
                b = "/box-ajax/url=" + encodeURIComponent(c),
                d && (b = b + "/styleClass=" + d),
                a.data("globalclose") && (b += "/globalClose=true"),
                a.data("ignoreCloseFromEsc") && (b = b + "/ignoreCloseFromEsc=" + a.data("ignoreCloseFromEsc")),
                T1.channels.hash.publishAsync(T1.constants.HASH_ADD, b)
            },
            handleActionScrollTo: function(a) {
                var c = a.closest(".overlayerContent");
                (c.length > 0 ? c : b(window)).scrollTo(b(a.prop("hash")), T1.constants.ANIMATION_SPEED_SCROLL, {
                    offset: -(b("#navigation").height() + b("#nav-secondary-level").height())
                })
            },
            handleActionOverlayIframe: function(a) {
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGE, "/overlay-iframe/" + encodeURIComponent(a))
            }
        }
          , c = a;
        return {
            init: a.init,
            initOnDemand: a.initOnDemand,
            selectors: a.selectors
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.socialSharePrivacy = function() {
        "use strict";
        var a = {
            targetClass: "socialshareprivacy",
            infoClass: "settings_info",
            params: {
                services: {
                    facebook: {
                        status: "off"
                    },
                    twitter: {
                        status: "off"
                    },
                    gplus: {
                        status: "off"
                    }
                },
                css_path: T1.constants.URL_NODE_MODULES + "jquery.socialshareprivacy/socialshareprivacy/socialshareprivacy.css"
            },
            init: function() {
                "true" === T1.settings.socialSharePrivacy && (T1.channels.social.subscribe(T1.constants.SOCIAL_SHARE_INIT, c.checkSharePrivacy),
                c.checkSharePrivacy())
            },
            checkSharePrivacy: function(a) {
                b.fn.socialSharePrivacy ? c.applySharePrivacy(a) : c.getPrivacyScript(a)
            },
            getPrivacyScript: function(a) {
                b.loadScript(T1.constants.URL_NODE_MODULES + "jquery.socialshareprivacy/jquery.socialshareprivacy.min.js").done(function(b) {
                    c.applySharePrivacy(a)
                })
            },
            applySharePrivacy: function(a) {
                if (a && a.targets) {
                    var d = b.extend({}, c.params)
                      , e = a.targets.find("." + c.targetClass);
                    d.services[a.service].status = "on",
                    d.services[a.service].language = T1.settings.language + "_" + T1.settings.country.toUpperCase(),
                    d.services[a.service].txt_info = T1.labels[a.service + "PrivacyTxtInfo"],
                    a.cancel = !0,
                    e.socialSharePrivacy(d),
                    e.find("." + c.infoClass).remove()
                }
            }
        }
          , c = a;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.social = function() {
        "use strict";
        window.___gcfg = {
            lang: "en-GB"
        };
        var c = {
            shareButton: null,
            isFadingIn: !1,
            CLASS_SHARE_BUTTON: "share-button",
            CLASS_LIKE_BUTTON: "like-button",
            CLASS_NO_POPUP: "no-popup",
            CLASS_SHARE_ARROW: "sprite-share-arrow",
            CLASS_SHARE_ARROW_BOTTOM: "sprite-share-arrow-inverted",
            CLASS_POSITION_BOTTOM: "bottom",
            CLASS_EPRIVACY_FIGURE: "eprivacy-component",
            CLASS_SOCIAL_CHANNELS: "social-channels",
            ID_VK_LIKE: "vk_like",
            subscriptions: {},
            init: function() {
                d.initShare(b("." + d.CLASS_SHARE_BUTTON)),
                d.initRating(),
                d.initSocialFB(b("." + d.CLASS_LIKE_BUTTON)),
                d.initVkLike(b("#" + d.ID_VK_LIKE)),
                d.initSocialChannels(b("." + d.CLASS_SOCIAL_CHANNELS)),
                T1.channels.global.subscribe(e.COOKIE_SET_EPRIVACY, function(a) {
                    T1.channels.figure.publishAsync(e.FIGURE_LOAD, b(".social-tools"))
                }),
                T1.channels.global.subscribe(e.COLLAPSIBLE_PANEL_EXPANDED, d.onCollapsiblePanelExpanded),
                T1.channels.global.subscribe(e.ON_WIN_RESIZE, d.onWinResize)
            },
            onCollapsiblePanelExpanded: function(a) {
                if (a.active) {
                    var b = d.isMobile();
                    d.initVkScript(b, a.panel),
                    d.initYtChannel(b, a.panel),
                    d.initFbPage(b, a.panel, !0)
                }
            },
            onWinResize: function() {
                var a = d.isMobile();
                d.initVkScript(a, null, !0),
                d.initYtChannel(a, null, !0),
                d.initFbPage(a, null, !0)
            },
            initShare: function(a) {
                a.size() && (d.subscriptions.hideBox || (d.subscriptions.hideBox = T1.channels.global.subscribe(e.ON_DOC_CLICK, d.hideBox)),
                a.find("> a").off("click", d.toggleBox).on("click", d.toggleBox),
                a.find(".share-options a").off("click", d.onShareLinkClick).on("click", d.onShareLinkClick),
                d.shareButton = d.shareButton ? d.shareButton.add(a) : a)
            },
            initRating: function() {
                if (T1.mypage && T1.mypage.rating) {
                    var a = T1.mypage.rating.ratingTotal
                      , c = T1.mypage.rating.count
                      , e = c > 0 ? a / c : 0;
                    e > 0 && d.updateRating(b(".icon-star").eq(0), e)
                }
                b(".rate-button .share-options .icon").click(d.rate)
            },
            initSocialFB: function(a) {
                if (a.size()) {
                    var b = {
                        service: "facebook",
                        targets: a,
                        cancel: !1
                    };
                    T1.channels.social.publish(e.SOCIAL_SHARE_INIT, b),
                    b.cancel ? a.hide() : (d.loadFBApi(),
                    d.initLikeButtons(a),
                    d.parseFB(a))
                }
            },
            initVkLike: function(a) {
                a.length && (window.VK.init({
                    apiId: a.attr("data-id"),
                    onlyWidgets: !0
                }),
                window.VK.Widgets.Like("vk_like"))
            },
            isMobile: function() {
                return "xs" === b.safe("T1.breakpoints.currentBP")()
            },
            initSocialChannels: function(a) {
                if (a.length) {
                    var c = d.isMobile();
                    d.initTwitter(),
                    d.initVkScript(c),
                    d.initYtChannel(c),
                    d.initFbPage(c),
                    d.initInstaFeed(),
                    a.find(".channel").click(function(a) {
                        var c = b(this);
                        T1.channels.statistics.publish(e.STATS_TRACK, {
                            node: c,
                            extraData: {
                                event: {
                                    action: "social-header-channel-click",
                                    value: c.find(".channel-header-right >span:first()").text().trim()
                                }
                            }
                        })
                    }),
                    b(window).on("blur", function(c) {
                        var d = b(document.activeElement);
                        a.find(d).length && d.is("iframe") && T1.channels.statistics.publish(e.STATS_TRACK, {
                            node: d,
                            extraData: {
                                event: {
                                    action: "social-iframe-channel-click",
                                    value: d.attr("title") || d.attr("src")
                                }
                            }
                        })
                    })
                }
            },
            initTwitter: function() {
                window.twttr = function(a, c, d) {
                    var e = a.getElementById(d)
                      , f = a.getElementsByTagName(c)[0]
                      , g = window.twttr || {};
                    return e ? g : (b(".twitter-timeline").each(function() {
                        var a = b(this);
                        a.parent().data("timeline", a.clone())
                    }),
                    e = a.createElement(c),
                    e.id = d,
                    e.src = "https://platform.twitter.com/widgets.js",
                    f.parentNode.insertBefore(e, f),
                    g._e = [],
                    g.ready = function(a) {
                        g._e.push(a)
                    }
                    ,
                    g)
                }(document, "script", "twitter-wjs")
            },
            initVkScript: function(a, c, d) {
                var e = b(c).or("body").find("#vk-script:visible");
                if (d || (e = e.not(".built")),
                e.length) {
                    var f = a ? e.parent().width() + 10 : e.parent().width();
                    b('<script type="text/javascript">VK.Widgets.Group("vk_groups", {mode: 2, width: "' + f + '", height: "' + b("#vk-script").parent().height() + '"}, ' + b("#vk-script").attr("data-channel") + ");<\/script>").appendTo("#vk-script"),
                    e.addClass("built")
                }
            },
            initYtChannel: function(a, c, d) {
                var e = b(c).or("body").find("#youtube-channel:visible");
                if (d || (e = e.not(".built")),
                e.length) {
                    var f = a ? e.parent().width() + 10 : e.parent().width();
                    f !== e.find(">iframe").width() && (e.empty(),
                    b("<iframe />").attr({
                        src: "//www.youtube.com/embed/?listType=user_uploads&list=" + e.attr("data-channel"),
                        width: f,
                        height: e.parent().height()
                    }).appendTo(e),
                    e.addClass("built"))
                }
            },
            initFbPage: function(a, c, e) {
                var f = b(c).or("body").find(".fb-page:visible");
                if (e || (f = f.not(".built")),
                f.length) {
                    d.loadFBApi();
                    var g = a ? f.parent().width() + 10 : f.parent().width();
                    g !== Number(f.attr("data-width")) && (f.attr("data-width", g),
                    f.addClass("built"),
                    e && window.FB && (f.empty(),
                    window.FB.XFBML.parse(f.parent()[0])))
                }
            },
            initInstaFeed: function() {
                var c = b("#instafeed");
                if (c.length) {
                    new a.instafeed({
                        get: "user",
                        limit: "20",
                        target: "instafeed",
                        userId: c.attr("data-user-id"),
                        resolution: "thumbnail",
                        accessToken: c.attr("data-token"),
                        template: '<li><a href={{link}} target="_blank" class="breakword"><img src={{image}} alt=""/>{{caption}}</a></li>'
                    }).run()
                }
            },
            loadFBApi: function() {
                b("#facebook-jssdk").size() || b("<script/>").attr({
                    id: "facebook-jssdk",
                    src: "//connect.facebook.net/" + T1.settings.country + "_" + T1.settings.language.toUpperCase() + "/all.js#xfbml=1"
                }).appendTo("head")
            },
            initLikeButtons: function(a) {
                a.click(function() {
                    var a = b(this)
                      , c = a.find(".fb-like > span > iframe");
                    c.length && a.attr("data-interval", setInterval(function() {
                        var a = new RegExp("height[:][s]*[^;'\"]*")
                          , b = c.attr("style").toLowerCase().match(a);
                        b && b[0] && parseInt(b[0].match(/\d+/g)) > 300 ? c.parent().css({
                            height: parseInt(b[0].match(/\d+/g))
                        }).addClass("full-height") : c.parent().css("height", "").removeClass("full-height")
                    }, 500))
                })
            },
            parseFB: function(a) {
                a.each(function() {
                    var a = b(this).find(".fb-like");
                    a.length && "xs" === T1.breakpoints.currentBP() && (a.addClass("inpage-small"),
                    a.attr("data-width", "250px")),
                    window.FB && (window.FB.XFBML.parse(this),
                    a.find("span").css("width", a.data("width")))
                })
            },
            clearLikeSurvey: function() {
                d.shareButton && d.shareButton.size() && d.shareButton.filter("." + d.CLASS_LIKE_BUTTON).each(function() {
                    var a = b(this);
                    clearInterval(a.attr("data-interval")),
                    a.attr("data-interval", null)
                })
            },
            rate: function(a) {
                a.stopPropagation();
                var c = b(this)
                  , e = b.ajax({
                    type: "POST",
                    dataType: "JSON",
                    url: c.parents(".rate-button").data("url"),
                    data: {
                        tcmid: b("body").attr("data-tcmid"),
                        score: 5 - c.index()
                    }
                });
                e.done(d.ratingSuccess(c)),
                e.fail(d.ratingError(c))
            },
            ratingSuccess: function(a) {
                return function(b) {
                    b.success ? (b.rating && d.updateRating(a, b.rating.ratingTotal / b.rating.count),
                    d.ratingMessage(a, T1.labels.rateSubmitted, !b.success)) : d.ratingMessage(a, T1.labels.rateAlreadySubmitted, !0)
                }
            },
            ratingError: function(a) {
                return function(b, c, e) {
                    d.ratingMessage(a, e || T1.labels.forms.errorSubmit, !0)
                }
            },
            ratingMessage: function(a, b, c) {
                a.parents(".share-options").html('<p class="response' + (c ? " error " : "") + '">' + b + "</p>")
            },
            updateRating: function(a, b) {
                b = Math.round(2 * b) / 2;
                var c = a.parents(".rate-button").find(">a i.icon-star");
                c.removeClass("highlighted half"),
                c.filter(":lt(" + Math.floor(b) + ")").addClass("highlighted"),
                b % 1 && c.filter(":eq(" + Math.floor(b) + ")").addClass("highlighted half")
            },
            switchMobile: function() {
                d.shareButton && d.shareButton.size() && (d.shareButton.addClass(d.CLASS_NO_POPUP),
                b("figure." + d.CLASS_EPRIVACY_FIGURE).addClass(d.CLASS_NO_POPUP)),
                b(".channel").size() && b(".channel").addClass("channel-mobile")
            },
            switchDesktop: function() {
                d.shareButton && d.shareButton.size() && (d.shareButton.removeClass(d.CLASS_NO_POPUP),
                b("figure." + d.CLASS_EPRIVACY_FIGURE).removeClass(d.CLASS_NO_POPUP))
            },
            onShareLinkClick: function(a) {
                var c = b(this)
                  , f = c.data("url-original") || null
                  , g = f || c.attr("href")
                  , h = c.attr("data-link") || c.closest("section").attr("data-link") || window.location.href
                  , i = c.closest(".overlayerContent")
                  , j = i.find(".carousel")
                  , k = !!j.length;
                g = T1.settings.facebookId && c.hasClass("share-facebook") && k ? d.getFacebookSharedHyperlink(j) : d.replaceShareLinkPlaceHolders(g, k, j, h, c),
                d.openShareLinkWindow(c, g, a),
                T1.channels.social.publishAsync(e.SOCIAL_SHARED, {
                    href: g,
                    url: h,
                    node: c
                })
            },
            replaceShareLinkPlaceHolders: function(a, c, d, e, f) {
                var g, h, i, j = "";
                return c && (g = b.safe("T1.mediaOverlayer.getCarouselActiveItem")(d) || b(null),
                j = b.safe("T1.mediaOverlayer.getImgSrcOfActiveItem")(d) || "",
                j.length && (j = j.indexOf("http") > -1 ? j : "http:" + j),
                i = g.data() ? g.data().dataNode.attr("href") : null,
                e = i || e),
                j.length || (j = b('meta[property="og:image"]').attr("content")),
                h = encodeURIComponent(b(document).find("title").text() || ""),
                f.data("encode") && (e = encodeURIComponent(e)),
                a = a.replace(/\[URL\]/g, e).replace(/\[TITLE\]/g, h).replace(/\[IMG\]/g, j)
            },
            getFacebookSharedHyperlink: function(a) {
                var c, d, f = e.URL_FACEBOOK_APPID, g = b.safe("T1.mediaOverlayer.getImgSrcOfActiveItem")(a) || "", h = "";
                return void 0 !== g && !1 !== g && "" !== g && (h = g.indexOf("http") > -1 ? "&picture=" + g : "&picture=http:" + g),
                c = "&link=" + encodeURIComponent(window.location.href) + "&redirect_uri=" + e.URL_FACEBOOK,
                d = "app_id=" + T1.settings.facebookId + "&display=popup" + h + c,
                f = f.replace(/\[OPTIONS\]/g, d)
            },
            openShareLinkWindow: function(a, b, c) {
                a.parents("." + d.CLASS_SHARE_BUTTON).hasClass(d.CLASS_NO_POPUP) ? a.attr("href", b) : (window.open(b, "_blank", "location=yes,height=420,width=550"),
                c.preventDefault())
            },
            setCustomTargetUrl: function(a, b) {
                a.attr("data-link", b)
            },
            hideBox: function(a) {
                d.isFadingIn || b(a.target).closest(".share-options").size() || (d.doHideBox(),
                d.clearLikeSurvey())
            },
            doHideBox: function() {
                var a = d.shareButton && d.shareButton.size() ? d.shareButton.not(".no-popup").find(".share-box") : null
                  , c = b("#social-tools-gallery").find(".share-box");
                c.parent(".no-popup").size() || c.fadeOut("fast"),
                a && a.size() && a.fadeOut("fast", function() {
                    var a = b(this);
                    a.hasClass(d.CLASS_POSITION_BOTTOM) && a.removeClass(d.CLASS_POSITION_BOTTOM)
                })
            },
            toggleBox: function(a) {
                var c = b(this)
                  , e = c.parent()
                  , f = e.closest(".social-tools")
                  , g = e.find(".share-box")
                  , h = f.offset()
                  , i = g.offset();
                if (!g || g.is(":visible") || e.hasClass("no-popup")) {
                    if (e.hasClass("no-popup")) {
                        var j = g.closest(".social-tools").find(".share-box");
                        g.is(":visible") ? g.slideUp("slow") : (j.slideUp("slow"),
                        g.slideDown("slow"))
                    }
                } else if (d.doHideBox(),
                d.isFadingIn = !0,
                g.fadeIn(function() {
                    d.isFadingIn = !1
                }),
                h && i) {
                    g.offset().left + g.width() > f.width() && g.css("margin-left", f.width() - g.offset().left - g.width() - 15);
                    var k = g.offset()
                      , l = b(window)
                      , m = b("#navigation")
                      , n = b("#nav-secondary-level")
                      , o = l.scrollTop() + m.height();
                    o = n.length > 0 ? o + n.height() : o,
                    k.top < o && g.addClass(d.CLASS_POSITION_BOTTOM)
                }
                a.preventDefault()
            }
        }
          , d = c
          , e = T1.constants;
        return {
            init: c.init,
            switchMobile: c.switchMobile,
            switchDesktop: c.switchDesktop,
            share: {
                init: c.initShare
            },
            like: {
                init: function(a) {
                    c.initShare(a),
                    c.initSocialFB(a)
                }
            },
            setCustomTargetUrl: c.setCustomTargetUrl
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.tables = function() {
        "use strict";
        a.$.tablesorter.addParser({
            id: "curr",
            is: function(a) {
                return /^[\u004b\u010d\u00a3\u20ac\u0024\u00a4\u00a5\u00a2].*|.*([\u004b\u010d\u00a3\u20ac\u0024\u00a4\u00a5\u00a2]|[0-9]\s?(p.?))$/.test((a || "").replace(/\s[+\-,. ]/g, ""))
            },
            format: function(a, b) {
                var c, d = a.lastIndexOf(","), e = a.lastIndexOf("."), f = a.indexOf("р.");
                return d > e || -1 == d && -1 == e ? (b.config.usNumberFormat = !1,
                c = $.tablesorter.formatFloat((a || "").replace(/[^\w,. \-()]/g, ""), b)) : -1 == d && f > 0 ? (b.config.usNumberFormat = !1,
                c = $.tablesorter.formatFloat((a || "").replace(/[^\w,. \-()]/g, ""), b)) : (b.config.usNumberFormat = !0,
                c = $.tablesorter.formatFloat((a || "").replace(/£|[^\w,. \-()]/g, ""), b)),
                a && "number" == typeof c ? c : a ? $.trim(a && b.config.ignoreCase ? a.toLocaleLowerCase() : a) : a
            },
            type: "numeric"
        }),
        a.$.tablesorter.addParser({
            id: "dataNumeric",
            is: function(a) {
                return !1
            },
            format: function(a, b, c, d) {
                return $(c).data("sort")
            },
            type: "numeric"
        }),
        a.$.tablesorter.addParser({
            id: "dataText",
            is: function(a) {
                return !1
            },
            format: function(a, b, c, d) {
                decodeURIComponent($(c).data("sort"));
                return $(c).data("sort")
            },
            type: "text"
        });
        var b = {
            init: function() {
                return T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, b.sortable),
                b.sortable(),
                null
            },
            sortable: function() {
                for (var a = $(".sortable-table"), b = 0; b < a.length; b++) {
                    for (var d = 0, e = {
                        headers: {},
                        sortList: []
                    }, f = $(a[b]), g = f.find("th"), h = 0; h < g.length; h++) {
                        var i = g[h]
                          , j = $(i)
                          , k = j.data("sortable-headers")
                          , l = j.data("sortable-sort");
                        switch (k && (e.headers[d] = k),
                        l) {
                        case "asc":
                            e.sortList.push([d, 0]);
                            break;
                        case "desc":
                            e.sortList.push([d, 1])
                        }
                        d++
                    }
                    f.tablesorter(e),
                    f.on("sortEnd", function() {
                        T1.channels.global.publishAsync(T1.constants.TABLE_SORTED, {
                            $table: $(this)
                        })
                    })
                }
                $("body").find(".overlayerContent").length > 0 ? c.sortableLoad() : $(window).load(function() {
                    c.sortableLoad()
                })
            },
            sortableLoad: function() {
                for (var a = $(".sortable-table"), b = 0; b < a.length; b++) {
                    var c = $(a[b])
                      , d = c.find("th")
                      , e = c.parent(".table-responsive").eq(0).width();
                    if (c.width() > e)
                        for (var f = 0; f < d.length; f++) {
                            var g = d[f]
                              , h = $(g)
                              , i = h.width();
                            if (i > 120) {
                                i > 140 ? h.addClass("tooltip-header-lg") : h.addClass("tooltip-header-md");
                                var j = h.find(".tablesorter-header-inner:eq(0)").html();
                                h.find(".tablesorter-header-inner:eq(0)").addClass("nopointer"),
                                h.append('<div class="tooltip-block">' + j + "</div>")
                            }
                        }
                }
            }
        }
          , c = b;
        return {
            init: b.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.disclaimer = function() {
        "use strict";
        var a = {
            container: null,
            CLASS_ACTIVE: "active",
            CLASS_HIDDEN: "hidden",
            init: function() {
                a.container = b(".disclaimer"),
                a.container.length < 1 || a.setDisclaimer()
            },
            setDisclaimer: function() {
                var b = a.container.find(".disclaimer-view")
                  , c = a.container.find(".disclaimer-close");
                b.length > 0 && b.off("click", a.handleDisclaimerToggle).on("click", a.handleDisclaimerToggle),
                c.length > 0 && c.off("click", a.handleDisclaimerToggle).on("click", a.handleDisclaimerToggle)
            },
            handleDisclaimerToggle: function(b) {
                b.preventDefault();
                var c = a.container.find(".disclaimer-view");
                a.container.find(".disclaimer-content").toggleClass(a.CLASS_ACTIVE),
                c.toggleClass(a.CLASS_HIDDEN)
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.ePrivacySettings = T1.ePrivacySettings || {},
    T1.ePrivacy = function() {
        "use strict";
        var a = {
            ePrivacyDisclaimer: null,
            ePrivacyPage: null,
            overlayerOpen: !1,
            figures: null,
            isMobile: !1,
            CLASS_FIGURE: "eprivacy-component",
            basic: {
                enabled: !1,
                init: function() {
                    c.basic.enabled = !("true" !== T1.settings.enableEprivacy || !T1.settings.eprivacy || c.ePrivacyDisclaimer.is(".gdpr")),
                    c.basic.enabled && (T1.constants.EPRIVACY_COOKIE_NAME = b("head").data("eprivacy-cookie") || T1.constants.EPRIVACY_COOKIE_NAME,
                    T1.utilities.cookies.getCookie("btpstkn") || c.basic.checkBrighttagPrivacy(),
                    c.basic.initExplicitInteraction())
                },
                checkBrighttagPrivacy: function() {
                    window.BTPrivacy && BTPrivacy.getPrivacySettings(c.basic.setBrighttagPrivacy)
                },
                setDynatracePrivacy: function() {
                    if (c.basic.enabled && window.dtrum) {
                        var a = c.basic.getCurrentLevel();
                        a && a > T1.settings.eprivacy.levels[1] ? window.dtrum.enable() : window.dtrum.disable()
                    }
                },
                setBrighttagPrivacy: function(a) {
                    if (a && !a.doNotTrack) {
                        var b = c.basic.getCurrentLevel();
                        b && b > "20" ? BTPrivacy[b > "30" ? "optIn" : "functional"]() : BTPrivacy.optOut()
                    }
                },
                getCurrentLevel: function(a) {
                    if (c.basic.enabled) {
                        var b = T1.utilities.cookies.getCookie(d.EPRIVACY_COOKIE_NAME)
                          , e = "explicit" !== T1.settings.eprivacy.type || a ? T1.settings.eprivacy.defaultLevel : T1.settings.eprivacy.levels[0];
                        return parseInt(b ? b.replace(/#.*/g, "") : e, 10)
                    }
                    return Number.MAX_VALUE
                },
                isLevelSet: function() {
                    return !!c.basic.enabled && !!T1.utilities.cookies.getCookie(d.EPRIVACY_COOKIE_NAME)
                },
                getVirtualLevel: function(a) {
                    if (c.basic.enabled && c.ePrivacyPage && c.ePrivacyPage.length) {
                        var d = b("#functionalBox").prop("checked") ? 1 : 0;
                        return T1.settings.eprivacy.levels[b("#targetingBox").prop("checked") ? 2 : d]
                    }
                    return c.basic.getCurrentLevel(a)
                },
                saveCurrentLevel: function(a) {
                    var b = c.basic.getVirtualLevel(a);
                    T1.utilities.cookies.setCookie(d.EPRIVACY_COOKIE_NAME, b + "#" + T1.settings.eprivacy.version, 365),
                    c.basic.checkBrighttagPrivacy(),
                    c.setDynatracePrivacy(),
                    T1.channels.global.publish(T1.constants.COOKIE_SET_EPRIVACY, {})
                },
                setDefaultLevel: function() {
                    c.basic.isLevelSet() || (c.basic.applyCurrentLevel(!0),
                    c.basic.saveCurrentLevel(!0))
                },
                applyCurrentLevel: function(a) {
                    if (c.ePrivacyPage && c.ePrivacyPage.length) {
                        var d = b("#functionalBox")
                          , e = b("#targetingBox")
                          , f = c.basic.getCurrentLevel(a);
                        d.prop("checked", f >= T1.settings.eprivacy.levels[1]),
                        e.prop("checked", f >= T1.settings.eprivacy.levels[2]),
                        c.fadeSettings([d, e])
                    }
                },
                validateLevel: function(a) {
                    return a <= c.basic.getCurrentLevel()
                },
                overlayerClosed: function() {
                    c.basic.enabled && c.basic.setDefaultLevel()
                },
                initOverlayer: function() {
                    c.basic.enabled && (b("#eprivacyCancel").click(c.cancel),
                    b("#eprivacySave").click(c.basic.save),
                    b("#functionalBox").click(c.basic.functionalChanged),
                    b("#targetingBox").click(c.basic.targetingChanged),
                    c.basic.applyCurrentLevel(!0),
                    T1.channels.dialog.publishAsync(d.PAGEOVERLAYER_RESIZE))
                },
                save: function(a) {
                    a.preventDefault(),
                    c.basic.saveCurrentLevel(),
                    c.reviewComponents(),
                    c.setHash(),
                    T1.channels.eprivacy.publishAsync(d.EPRIVACY_SAVED)
                },
                functionalChanged: function() {
                    var a = b("#functionalBox")
                      , d = b("#targetingBox");
                    a.prop("checked") || d.prop("checked", !1);
                    var e = c.basic.getVirtualLevel();
                    a.prop("checked", e >= T1.settings.eprivacy.levels[1]),
                    c.fadeSettings([a, d])
                },
                targetingChanged: function() {
                    var a = b("#functionalBox")
                      , d = b("#targetingBox");
                    d.prop("checked") && a.prop("checked", !0);
                    var e = c.basic.getVirtualLevel();
                    d.prop("checked", e >= T1.settings.eprivacy.levels[2]),
                    c.fadeSettings([a, d])
                },
                autoApprove: function() {
                    c.basic.enabled && (c.basic.setDefaultLevel(),
                    c.hideDisclaimer())
                },
                initExplicitInteraction: function() {
                    c.basic.isLevelSet() || "explicit" !== T1.settings.eprivacy.type || "true" !== T1.settings.eprivacy.explicitInteraction || b([window, "body"]).on("scroll click", c.basic.applyExplicitInteraction)
                },
                applyExplicitInteraction: function() {
                    c.basic.applyCurrentLevel(!0),
                    c.basic.saveCurrentLevel(!0),
                    b([window, "body"]).off("scroll click", c.basic.applyExplicitInteraction)
                },
                onShowDisclaimerDone: function() {
                    c.basic.enabled && "implicit" === T1.settings.eprivacy.type && (c.ePrivacyDisclaimer.mouseenter(c.basic.stopDisclaimerTimeout).mouseleave(c.basic.startDisclaimerTimeout),
                    c.basic.startDisclaimerTimeout())
                },
                startDisclaimerTimeout: function() {
                    c.basic.stopDisclaimerTimeout(),
                    c.basic.ePrivacyDisclaimerTimeoutId = setTimeout(c.basic.autoApprove, T1.settings.eprivacy.delay || 7e3)
                },
                stopDisclaimerTimeout: function() {
                    clearTimeout(c.basic.ePrivacyDisclaimerTimeoutId),
                    c.basic.ePrivacyDisclaimerTimeoutId = null
                },
                onHideDisclaimer: function() {
                    c.basic.enabled && c.basic.stopDisclaimerTimeout()
                },
                flexSpecs: function() {
                    var a = c.getObjectsMaxHeight(b("#cookie-specs > li > footer"), !0);
                    b("#cookie-specs > li > footer").css("min-height", a + "px")
                }
            },
            gdpr: {
                enabled: !1,
                init: function() {
                    var a = "function" != typeof T1.ePrivacySettings.didCustomerSetEprivacyLevel || !T1.ePrivacySettings.didCustomerSetEprivacyLevel();
                    c.gdpr.enabled = !("true" !== T1.settings.enableEprivacy || !T1.ePrivacySettings.isGDPR),
                    c.gdpr.enabled && a && c.ePrivacyDisclaimer.length && c.gdpr.initDisclaimer()
                },
                overlayerClosed: function(a) {
                    c.gdpr.enabled && c.gdpr.applyLevels(c.ePrivacyDisclaimer, c.gdpr.getVirtualLevel(c.ePrivacyPage))
                },
                initDisclaimer: function() {
                    c.gdpr.enabled && (b("#disclaimerEprivacySave").click(c.gdpr.save),
                    c.ePrivacyDisclaimer.find(".btn-close").click(c.gdpr.save),
                    c.gdpr.applyLevels(c.ePrivacyDisclaimer, c.gdpr.getVirtualLevel(c.ePrivacyDisclaimer)),
                    c.ePrivacyDisclaimer.find(".spec-container").click(c.gdpr.onBoxClick))
                },
                initOverlayer: function() {
                    if (c.gdpr.enabled) {
                        var a;
                        b("#eprivacyCancel").click(c.cancel),
                        b("#eprivacySave").click(c.gdpr.save),
                        b('#ePrivacy input[type="checkbox"]').click(c.gdpr.onBoxClick),
                        a = "function" == typeof T1.ePrivacySettings.didCustomerSetEprivacyLevel && T1.ePrivacySettings.didCustomerSetEprivacyLevel() ? c.ePrivacyDisclaimer.is(":visible") ? c.gdpr.getVirtualLevel(c.ePrivacyDisclaimer) : c.gdpr.getCurrentLevel() : Object.resolve("T1.ePrivacySettings.LEVELS.GDPR.ALL") || [10, 20, 30, 40],
                        c.gdpr.applyLevels(c.ePrivacyPage, a),
                        T1.channels.dialog.publishAsync(d.PAGEOVERLAYER_RESIZE)
                    }
                },
                flexSpecs: function() {
                    var a = b("#cookie-specs").addClass("no-flex")
                      , d = a.find("> li")
                      , e = c.getObjectsMaxHeight(d, !1);
                    d.find(".cookie-spec").css("min-height", e + "px")
                },
                save: function(a) {
                    if (a && a.preventDefault && a.preventDefault(),
                    c.gdpr.enabled) {
                        var e = a && a.target ? b(a.target).closest(".gdpr") : null;
                        c.reviewComponents(),
                        null === e || e.is(c.ePrivacyDisclaimer) ? (c.gdpr.autoApprove(),
                        c.hideDisclaimer()) : (c.gdpr.saveCurrentLevel(e),
                        c.setHash()),
                        T1.channels.eprivacy.publish(d.EPRIVACY_SAVED),
                        window.location.reload()
                    }
                },
                onBoxClick: function(a) {
                    var d = b(a.target);
                    if (d.is(a.currentTarget)) {
                        var e = b(this).find('input[type="checkbox"]').or(this);
                        d.is(e) || e.click(),
                        c.fadeSettings([e])
                    }
                },
                autoApprove: function() {
                    c.gdpr.enabled && "function" == typeof T1.ePrivacySettings.setCustomerPrivacyLevel && T1.ePrivacySettings.setCustomerPrivacyLevel([10, 20, 30, 40])
                },
                applyLevels: function(a, d) {
                    if (c.gdpr.enabled && a.length) {
                        for (var e = a.find('input[type="checkbox"]').prop("checked", !1), f = 0; f < d.length; f++)
                            a.find('input[type="checkbox"][value=' + d[f] + "]").prop("checked", !0);
                        c.fadeSettings(b.map(e, function(a) {
                            return b(a)
                        }))
                    }
                },
                getVirtualLevel: function(a) {
                    if (c.gdpr.enabled && a.length) {
                        var d = [10];
                        return a.find('input[type="checkbox"]').each(function() {
                            var a = b(this);
                            a.is(":checked") && d.push(parseInt(a.val(), 10))
                        }),
                        d.filter(function(a, b, c) {
                            return c.indexOf(a) === b
                        })
                    }
                    return c.gdpr.getCurrentLevel()
                },
                getCurrentLevel: function() {
                    return c.gdpr.enabled && "function" == typeof T1.ePrivacySettings.getCustomerPrivacyLevel ? T1.ePrivacySettings.getCustomerPrivacyLevel() : [10]
                },
                saveCurrentLevel: function(a) {
                    c.gdpr.enabled && "function" == typeof T1.ePrivacySettings.setCustomerPrivacyLevel && (T1.ePrivacySettings.setCustomerPrivacyLevel(c.gdpr.getVirtualLevel(a)),
                    c.setDynatracePrivacy())
                },
                validateLevel: function(a) {
                    if (c.gdpr.enabled) {
                        if (0 === a)
                            return !0;
                        return -1 !== (c.gdpr.getCurrentLevel() || [10]).indexOf(a)
                    }
                    return !1
                },
                isLevelSet: function() {
                    return !(!c.gdpr.enabled || "function" != typeof T1.ePrivacySettings.didCustomerSetEprivacyLevel) && T1.ePrivacySettings.didCustomerSetEprivacyLevel()
                },
                setDynatracePrivacy: function() {
                    if (c.gdpr.enabled && window.dtrum) {
                        var a = c.gdpr.getCurrentLevel();
                        a && -1 !== a.indexOf(T1.settings.eprivacy.levels[1]) ? window.dtrum.enable() : window.dtrum.disable()
                    }
                },
                onShowDisclaimerDone: function() {
                    c.gdpr.enabled
                },
                onHideDisclaimer: function() {
                    c.gdpr.enabled
                }
            },
            init: function() {
                c.ePrivacyDisclaimer = b("#ePrivacyDisclaimer"),
                c.figures = b([]),
                c.basic.init(),
                c.gdpr.init(),
                c.setDynatracePrivacy(),
                T1.channels.eprivacy.subscribe(d.EPRIVACY_LOAD_COMPONENT, c.loadComponent);
                var a = c.getEprivacyType();
                a && c[a].enabled && (T1.channels.dialog.subscribe(d.PAGEOVERLAYER_RESIZE, c.flexSpecs),
                T1.channels.dialog.subscribe(d.MATERIALBOX_CLOSED, c.overlayerClosed),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.initOverlayer),
                c.ePrivacyDisclaimer.length && (T1.channels.eprivacy.subscribe(d.EPRIVACY_AUTO_APPROVED, c.autoApprove),
                c.transformEprivacyOpenLink(),
                b(".ePrivacyAutoApproveLink").on("click", function(a) {
                    a.preventDefault(),
                    T1.channels.eprivacy.publish(d.EPRIVACY_AUTO_APPROVED)
                }),
                c.isLevelSet() || c.showDisclaimer()))
            },
            transformEprivacyOpenLink: function() {
                var a = b(".ePrivacyOpenLink")
                  , c = a.attr("href") || "";
                a.length && -1 === c.indexOf("#") && (c = encodeURIComponent(a.attr("href")),
                c = "#/ajax/" + c,
                a.attr("href", c))
            },
            initOverlayer: function() {
                c.ePrivacyPage = b("#ePrivacy"),
                !c.overlayerOpen && c.ePrivacyPage.length && (c.overlayerOpen = !0,
                c[c.getEprivacyType()].initOverlayer(),
                c.setOverlayerClass(),
                c.hideDisclaimer())
            },
            getEprivacyType: function() {
                return c.basic.enabled ? "basic" : c.gdpr.enabled ? "gdpr" : null
            },
            isLevelSet: function() {
                return c[c.getEprivacyType()].isLevelSet()
            },
            switchMobile: function() {
                c.switchDevice(!0)
            },
            switchDesktop: function() {
                c.switchDevice(!1)
            },
            switchDevice: function(a) {
                c.isMobile = a,
                c.ePrivacyDisclaimer.is(":visible") && c.applyStyles(c.getDisclaimerAnimations().show)
            },
            setOverlayerClass: function() {
                c.ePrivacyPage.parents(".material-box").addClass("ePrivacy")
            },
            getDisclaimerAnimations: function() {
                return {
                    hide: [{
                        objects: c.ePrivacyDisclaimer,
                        style: {
                            name: "bottom",
                            value: "-" + c.ePrivacyDisclaimer.outerHeight() + "px"
                        }
                    }, {
                        objects: b("section.footer"),
                        style: {
                            name: "margin-bottom",
                            value: "0px"
                        }
                    }],
                    show: [{
                        objects: c.ePrivacyDisclaimer,
                        style: {
                            name: "bottom",
                            value: "0px"
                        }
                    }]
                }
            },
            removeAnimationsStyles: function() {
                for (var a = c.getDisclaimerAnimations().hide, b = 0; b < a.length; b++) {
                    var d = {};
                    d[a[b].style.name] = "",
                    a[b].objects.css(d)
                }
            },
            flexSpecs: function() {
                c.overlayerOpen && c[c.getEprivacyType()].flexSpecs()
            },
            getObjectsMaxHeight: function(a, c) {
                var d = 0;
                return a.each(function() {
                    var a = b(this)
                      , e = c ? a.innerHeight() : a.height();
                    d = e > d ? e : d
                }),
                d
            },
            cancel: function(a) {
                a.preventDefault(),
                c.setHash(),
                T1.channels.eprivacy.publishAsync(d.EPRIVACY_CANCELED)
            },
            autoApprove: function() {
                c.ePrivacyDisclaimer.length && ("gdpr" === c.getEprivacyType() ? c.gdpr.save() : c.basic.autoApprove())
            },
            showDisclaimer: function() {
                c.ePrivacyDisclaimer.show(),
                c.ePrivacyDisclaimer.length && b(function() {
                    c.ePrivacyDisclaimer.css("bottom", -c.ePrivacyDisclaimer.innerHeight()).show();
                    for (var a = b([]), d = c.getDisclaimerAnimations().show, e = 0; e < d.length; e++)
                        a = a.add(c.playAnimation(d[e]));
                    a.promise().done(c[c.getEprivacyType()].onShowDisclaimerDone)
                })
            },
            hideDisclaimer: function() {
                c.ePrivacyDisclaimer.length && (c[c.getEprivacyType()].onHideDisclaimer(),
                b(function() {
                    for (var a = b([]), d = c.getDisclaimerAnimations().hide, e = 0; e < d.length; e++)
                        a = a.add(c.playAnimation(d[e]))
                }))
            },
            overlayerClosed: function() {
                var a = c.getEprivacyType();
                c.overlayerOpen && (c[a].overlayerClosed(),
                c.overlayerOpen = !1,
                delete c.ePrivacyPage,
                c[a].isLevelSet() || c.showDisclaimer())
            },
            setHash: function(a) {
                T1.channels.hash.publish(a ? d.HASH_ADD : d.HASH_REMOVE, a || "")
            },
            playAnimation: function(a) {
                var b = {};
                return b[a.style.name] = a.style.value,
                a.objects.animate(b)
            },
            applyStyles: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = {};
                    c[a[b].style.name] = a[b].style.value,
                    a[b].objects.css(c)
                }
            },
            fadeSettings: function(a) {
                for (var b = 0; b < a.length; b++)
                    a[b].closest(".col-xs-12").fadeTo(400, a[b].prop("checked") ? 1 : .5)
            },
            loadComponent: function(a) {
                if (c.figures = c.figures.add(a.figures || (a.root ? a.root.find("figure." + c.CLASS_FIGURE) : null)),
                !a.defer) {
                    var d = c.groupComponents(c.figures)
                      , e = [];
                    for (var f in d) {
                        var g = d[f][0]
                          , h = g.data()
                          , i = g.parents(".eprivacy-parent");
                        if (c[c.getEprivacyType()].validateLevel(h.level)) {
                            var j = c.getIncludeUrl(h);
                            e.push(b.get(j, c.loadGroup(d[f], h))),
                            i.length && i.removeClass("eprivacy-parent")
                        }
                    }
                    b.when.apply(b, e).done(function() {
                        c.figures = b([]),
                        a.callback && a.callback()
                    })
                }
            },
            getIncludeUrl: function(a) {
                if (!0 !== a.addLevel)
                    return a.url;
                var b, d = a.url, e = c.getEprivacyType();
                return e ? (b = c[e] && c[e].getCurrentLevel() || T1.settings.eprivacy.defaultLevel,
                Array.isArray(b) && (b = b.length ? b.join("|") : T1.settings.eprivacy.defaultLevel),
                d += /\/$/gm.test(d) ? "" : "/",
                d += b.toString()) : a.url
            },
            loadGroup: function(a, d) {
                return function(e) {
                    for (var f = 0; f < a.length; f++) {
                        var g = a[f]
                          , h = c.registerComponent(b(e).filter(function() {
                            return 1 === this.nodeType
                        }), g, d.level)
                          , i = Object.resolve(d.namespace, T1);
                        g.replaceWith(h),
                        i && i.init && i.init(h)
                    }
                }
            },
            unloadComponent: function(a) {
                a.replaceWith(a.data("figure"))
            },
            reviewComponents: function() {
                b("." + c.CLASS_FIGURE).filter(function() {
                    return !c[c.getEprivacyType()].validateLevel(parseInt(b(this).attr("data-eprivacy"), 10))
                }).each(function() {
                    c.unloadComponent(b(this))
                }),
                T1.channels.figure.publish(T1.constants.FIGURE_LOAD)
            },
            registerComponent: function(a, b, d) {
                return a.data("figure", b).attr("data-eprivacy", d).addClass(c.CLASS_FIGURE).addClass(b.attr("class"))
            },
            groupComponents: function(a) {
                var c = {};
                return a.each(function() {
                    var a = b(this);
                    c[a.data("url")] || (c[a.data("url")] = []),
                    c[a.data("url")].push(a)
                }),
                c
            },
            setDynatracePrivacy: function() {
                if (window.dtrum) {
                    var a = c.getEprivacyType();
                    a ? c[a].setDynatracePrivacy() : window.dtrum.enable()
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            getCurrentLevel: function() {
                return a[a.getEprivacyType()].getCurrentLevel()
            },
            validateLevel: function(b) {
                return a[a.getEprivacyType()].validateLevel(b)
            },
            registerComponent: a.registerComponent,
            switchMobile: a.switchMobile,
            switchDesktop: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.bazaarvoice = function() {
        "use strict";
        var a = {
            productId: null,
            reviewPage: null,
            reviewsLimit: null,
            containers: null,
            stars: null,
            init: function() {
                c.stars = b(".review .big-rating"),
                c.containers = b("[data-car-model][data-view-url]"),
                c.productId = c.containers.filter("[data-car-model]").data("car-model"),
                c.reviewPage = c.containers.filter("[data-view-url]").data("view-url"),
                c.reviewsLimit = c.containers.filter("[data-reviews-limit]").data("reviews-limit") || 3,
                c.productId && (T1.channels.reviews.subscribe(T1.constants.REVIEW_OPENREVIEWS, function() {
                    c.openBazaarvoicePage("show_reviews")
                }),
                T1.channels.reviews.subscribe(T1.constants.REVIEW_GETREVFORM, function() {
                    c.openBazaarvoicePage("submit_review")
                }),
                c.loadApi([c.requestProducts, c.requestReviews]))
            },
            isMobile: function() {
                return T1.breakpoints.list[T1.breakpoints.currentBP()] <= d.SCREEN_XTRASMALL
            },
            reviewPageNumber: function() {
                var a = parseInt(location.hash.split("/").pop(), 10);
                return a || 1
            },
            getJsonReviewsApiUrl: function() {
                return T1.settings.bazaarVoiceReviewsJsonLink ? T1.settings.bazaarVoiceReviewsJsonLink.replace(/<id>/g, c.productId).replace(/<limit>/g, c.reviewsLimit) : null
            },
            getJsonProductsApiUrl: function() {
                return T1.settings.bazaarVoiceProductsJsonLink ? T1.settings.bazaarVoiceProductsJsonLink.replace(/<id>/g, c.productId) : null
            },
            loadApi: function(a) {
                T1.settings.bazaarVoiceApiLink && (window.$BV ? b(a).each(function(a, b) {
                    b()
                }) : b.loadScript(T1.settings.bazaarVoiceApiLink).done([function() {
                    b($BV.docReady)
                }
                ].concat(a)))
            },
            requestReviews: function() {
                b.getJSON(c.getJsonReviewsApiUrl(), function(a) {
                    a.HasErrors || c.applyTemplates(b(".reviews-individual"), a)
                })
            },
            requestProducts: function() {
                b.getJSON(c.getJsonProductsApiUrl(), function(a) {
                    if (!a.HasErrors) {
                        var d = a.Results[0];
                        d && c.applyTemplates(b(".reviews-summary"), d)
                    }
                })
            },
            applyTemplates: function(a, c) {
                a.each(function() {
                    var a = b(this)
                      , d = a.find(".template")
                      , e = _.template(d.html())
                      , f = e(c);
                    d.remove(),
                    a.append(f)
                })
            },
            openBazaarvoicePage: function(a) {
                var b = {
                    device: c.isMobile() ? "mobile" : "",
                    page: c.reviewPageNumber(),
                    type: a
                };
                T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                    type: "iframe",
                    url: c.reviewPage + "#" + c.productId + "/" + JSON.stringify(b),
                    pageName: T1.labels.reviews.pageName,
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                    styleClass: "bazaarvoice",
                    hashAction: !0
                })
            },
            truncate: function(a, b) {
                return "string" == typeof a && a.length > b && (a = a.substring(0, b),
                a = a.replace(/\s*\S+$/, ""),
                a += " ..."),
                a
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            truncate: a.truncate,
            getProductId: function() {
                return a.productId
            }
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.video = function() {
        "use strict";
        var a = {
            _player: null,
            _playerVideoNode: null,
            _playerNode: null,
            _playerId: "videoWrapper",
            _posterImage: null,
            _evPlay: null,
            _evFull: null,
            _flashFallback: !1,
            _trackingDataVideoComplete: null,
            _autoLoop: !1,
            isIeMobile: T1.utilities.isIeMobile,
            playerPlaceHolderSelector: ".internal-video figure",
            slickCarouselContainerClass: "t1-carousel-container",
            slickCarouselVideoActiveClass: "active-video",
            shouldUseVjs: !1,
            init: function() {
                T1.channels.media.subscribe(T1.constants.VIDEO_CLICK, c.loadVideo),
                T1.channels.media.subscribe(T1.constants.VIDEO_STOP, c.stop),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, c.initOverlayerPlayers),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_LOAD, c.initOverlayerPlayers),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_CLOSE, c.stop),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, c.stop),
                T1.channels.media.subscribe(T1.constants.VIDEO_CREATEPLAYER, c.addVideoPlayer),
                T1.channels.media.subscribe(T1.constants.VIDEO_RESET, c.reset),
                c._flashFallback = T1.utilities.ieVersion <= 10 && !c.isIeMobile,
                c.initPlayers(),
                b("body").on("click", ".video-overlayer", c.showVideoOverlayer)
            },
            initOverlayerPlayers: function(a) {
                var b = a.container || a.el;
                c.initPlayers(b, {
                    track: !1
                })
            },
            initPlayers: function(a, d) {
                var e = b(a || "body")
                  , f = e.find(c.playerPlaceHolderSelector);
                d && d.track;
                c.initCreatePlayerMode(f, d),
                c.requireVjsPlugin()
            },
            initCreatePlayerMode: function(a, d) {
                var e = function(a) {
                    var b = a.el || a.container;
                    c.createPlayerRequest(b, d)
                };
                a.each(function() {
                    var a = b(this);
                    !d || d && d.track ? T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                        elements: a,
                        options: {
                            once: !0,
                            callback: e
                        }
                    }) : e({
                        el: a
                    })
                })
            },
            createPlayerRequest: function(a, b) {
                var c = b && !b.track;
                T1.channels.media.publish(T1.constants.VIDEO_CREATEPLAYER, {
                    figure: a,
                    poster: a.data("video-poster"),
                    srcMp4: a.data("video-mp4"),
                    srcWebm: a.data("video-webm"),
                    srcOgv: a.data("video-ogv"),
                    srcFlv: a.data("video-flv"),
                    srcVtt: a.data("video-vtt"),
                    srcVttLang: a.data("video-vtt-lang"),
                    autoPlay: !c && a.data("autoplay"),
                    autoPause: !c && a.data("autopause"),
                    autoMute: !c && a.data("automute"),
                    autoLoop: !c && a.data("autoloop")
                })
            },
            requireVjsPlugin: function() {
                var a = !T1.utilities.isIOS() && !T1.utilities.isMobileAndroid()
                  , b = a && (!requirejs.specified("videojs") || !window.vjs);
                c.shouldUseVjs = a,
                b && requirejs(["videojs"], function(a) {
                    window.vjs = a,
                    T1.channels.global.publishAsync(T1.constants.VIDEO_LIBRARY_LOADED, {})
                })
            },
            trackEndVideo: function(a) {
                var d = a.target ? b(a.target) : null;
                c._trackingDataVideoComplete && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, c._trackingDataVideoComplete),
                d && c.toggleCarouselActiveVideo(d, !1)
            },
            toggleCarouselActiveVideo: function(a, b) {
                a.closest("." + c.slickCarouselContainerClass).toggleClass(c.slickCarouselVideoActiveClass, b)
            },
            createPlayer: function(a) {
                return c._flashFallback && (vjs.options.techOrder = ["flash", "html5", "links"]),
                c._playerNode || (c._playerNode = c._playerVideoNode = b("<video id=" + c._playerId + " poster=" + a + " preload='auto'></video>").addClass("video-js vjs-default-skin t1-skin"),
                c._playerNode.appendTo(b("body")),
                c.shouldUseVjs ? (c._player = vjs(c._playerId, {
                    controls: !0,
                    autoplay: !1,
                    preload: "auto"
                }),
                c._player.on("ended", function(a) {
                    c.trackEndVideo(a)
                })) : (c._player = c._playerNode.get(0),
                b(c._player).on("click", c.togglePlay)),
                c._playerNode = b("#" + c._playerId).css({
                    width: "100%"
                })),
                T1.channels.media.publishAsync(T1.constants.VIDEO_CREATEDPLAYER, {}),
                c._player
            },
            loadVideo: function(a) {
                var d = b(a) || b(".item.active .posterWrapper")
                  , e = {
                    mp4: d.data("video-mp4"),
                    webm: d.data("video-webm"),
                    ogv: d.data("video-ogv"),
                    flv: d.data("video-flv")
                }
                  , f = d.data("video-vtt")
                  , g = d.data("video-vtt-lang")
                  , h = d.data("autoloop")
                  , i = []
                  , j = d.find(".sprite-videoplayer-start-button");
                j.length > 0 && j.is("[data-bt-track]") ? c._trackingDataVideoComplete = {
                    node: j,
                    extraData: {
                        event: {
                            action: "video_completed"
                        }
                    }
                } : c._trackingDataVideoComplete = null,
                e.mp4 && !c._flashFallback && i.push({
                    type: "video/mp4",
                    src: e.mp4
                }),
                e.webm && !c._flashFallback && i.push({
                    type: "video/webm",
                    src: e.webm
                }),
                e.ogv && !c._flashFallback && i.push({
                    type: "video/ogg",
                    src: e.ogv
                }),
                e.flv && i.push({
                    type: "video/flv",
                    src: e.flv
                });
                var k = d.find("img").attr("src") || d.find("img").attr("data-lazy-load");
                c._player ? c._player && c._playerNode && !c.shouldUseVjs && b(c._player).off("click", c.togglePlay).on("click", c.togglePlay) : c._player = c.createPlayer(k),
                c.addPosterToVideo(d, k, h),
                c.switchSource(i),
                c.loadSubs(f, g),
                c.toggleCarouselActiveVideo(d, !0),
                c.play()
            },
            addPosterToVideo: function(a, d, e) {
                a.parent().prepend(c._playerNode),
                a.stop(),
                b(".posterWrapper").css({
                    display: "block"
                }),
                a.css({
                    display: "none"
                }),
                c.shouldUseVjs ? (b("#videoWrapper_html5_api").attr("poster", d),
                c._player.on("ended", function() {
                    c.reset(e)
                })) : (c._playerNode.attr("poster", d),
                c._player.onended = function() {
                    c.reset(e)
                }
                )
            },
            switchSource: function(a) {
                c.shouldUseVjs ? c._player.src(a) : "video/mp4" === a[0].type ? c._playerNode.attr("src", a[0].src) : (c._playerNode.attr("src", ""),
                c.showError(T1.labels ? T1.labels.videoSourceNotSupported : "Not supported source"))
            },
            showError: function(a) {
                var d = c._playerNode.parent()
                  , e = d.find(".error-inner");
                if (0 === e.length) {
                    var f = b("<div></div>").addClass("error").appendTo(d);
                    e = b("<div></div>").addClass("error-inner").appendTo(f)
                }
                e.html(a)
            },
            stop: function() {
                c._player && (c._player.pause(),
                (c._flashFallback || c._playerNode.find("> object").length > 0) && (c._playerNode.prev(".posterWrapper").css({
                    display: "block"
                }),
                c._player.dispose(),
                c._playerNode.remove(),
                c._playerNode = null,
                c._player = null))
            },
            loadSubs: function(a, b) {
                if (c.removeSubs(),
                a) {
                    var d = b || "en"
                      , e = {
                        mode: "showing",
                        kind: "captions",
                        srclang: d,
                        label: d,
                        src: a
                    };
                    c.shouldUseVjs ? c._player.ready(function() {
                        c._player.addRemoteTextTrack(e, !1),
                        c._player.textTrackSettings.setValues({
                            backgroundOpacity: "0.5",
                            fontPercent: .75
                        })
                    }) : c._playerNode.html('<track kind="subtitles" label="' + d + '" src="' + a + '" srclang="' + d + '" default></track>')
                }
            },
            removeSubs: function() {
                var a, b;
                c.shouldUseVjs ? (a = c._player.remoteTextTrackEls(),
                void 0 !== (b = a[0]) && c._player.removeRemoteTextTrack(b)) : c._playerNode.children("track").remove()
            },
            play: function() {
                c._player && (c._player.play(),
                setTimeout(function() {
                    function a() {
                        c.reset(!1)
                    }
                    c.shouldUseVjs ? c._player.on("ended", a) : c._player.onended = a
                }, T1.constants.VIDEOPLAYER_AUTOLOOP_TIMEFRAME_MS))
            },
            pause: function() {
                c._player && c._player.pause()
            },
            mute: function(a) {
                c._player && c._player.muted(a)
            },
            togglePlay: function() {
                c._player && (c._player.paused ? c._player.play() : c._player.pause())
            },
            reset: function(a) {
                if (c._playerNode) {
                    if (c.stop(),
                    a)
                        return void c.play();
                    b(".posterWrapper").css({
                        display: "block"
                    });
                    var d = b(".overlayerContent").last()
                      , e = d.find(".item.active img.noAspect");
                    if (d.length && e.length) {
                        var f = (d.height() - e.height()) / 2;
                        e.removeClass("noAspect").css({
                            "margin-top": f
                        }),
                        T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_RESIZE_IMAGE, {})
                    }
                    c._playerNode.remove()
                }
            },
            getPosterImgAttr: function(a, b) {
                var c = a.figure
                  , d = a.lazyLoadPoster || !1
                  , e = {};
                return d ? e["data-lazy-load"] = a.poster : (e.src = a.poster,
                b && (e["data-lazyload-xs"] = c.data("lazyload-xs"),
                e["data-lazyload-sm"] = c.data("lazyload-sm"),
                e["data-lazyload-md"] = c.data("lazyload-md"),
                e["data-lazyload-lg"] = c.data("lazyload-lg"))),
                e
            },
            addVideoPlayer: function(a) {
                var d, e = b('<div class="posterWrapper"></div>'), f = a.target || b("body"), g = a.figure || null, h = a.autoPlay || a.autoplay || !1, i = a.autoPause || !1, j = a.autoMute || !1, k = a.autoLoop || a.autoloop || !1, l = b("<img>"), m = T1.utilities.hasFlash(), n = (T1.utilities.ieVersion,
                "https://get.adobe.com/flashplayer/"), o = b('<div class="sprite-videoplayer-start-button" style="display:block;" onclick=""></div>'), p = function(a) {
                    a.preventDefault(),
                    T1.channels.media.publishAsync(T1.constants.VIDEO_CLICK, b(this).parent())
                }, q = g ? g.data("add-img-class") : null, r = g ? g.data("lazyload-bkpt-dependent") : null, s = {};
                if (a.tagging && void 0 !== a.tagging["data-bt-track"] && o.attr(a.tagging),
                c._flashFallback && !m)
                    return e = b("<div class=noflash ><h2>" + T1.labels.FLASH_ERROR + "</h2><p>" + T1.labels.FLASH_YOU_NEED + " <a href=" + n + " >" + T1.labels.FLASH_FLASHPLAYER + "</a> " + T1.labels.FLASH_TO_PLAY + "</p></div>"),
                    !1;
                var t = c.getPosterImgAttr(a, r);
                l.attr(t),
                q && q.length && l.addClass(q),
                a.srcMp4 && (s["data-video-mp4"] = a.srcMp4),
                a.srcWebm && (s["data-video-webm"] = a.srcWebm),
                a.srcOgv && (s["data-video-ogv"] = a.srcOgv),
                a.srcFlv && (s["data-video-flv"] = a.srcFlv),
                a.srcVtt && (s["data-video-vtt"] = a.srcVtt),
                a.srcVttLang && (s["data-video-vttLang"] = a.srcVttLang),
                e.attr(s),
                e.attr("data-autoloop", k),
                e.append(o),
                e.append(l),
                a.figure ? a.figure.replaceWith(e) : f.append(e);
                var u = T1.utilities.hasEvent("ontouchend") ? "touchend" : "click";
                o.off(u, p).on(u, p),
                d = a.isOverlayer || e.parent().hasClass("overlayerContent") || e.parent().hasClass("material-box"),
                c.handleAutoFunctions(e, h, i, j, d),
                T1.channels.media.publishAsync(T1.constants.VIDEO_ADDEDPLAYER, {
                    target: e
                })
            },
            handleAutoFunctions: function(a, d, e, f, g) {
                var h = function() {
                    var h = a.parent();
                    if (d = g ? "true" === T1.settings.videoPlayer.autoPlayOverlayer && d : "true" === T1.settings.videoPlayer.autoPlay && d,
                    e = "true" === T1.settings.videoPlayer.autoPause && e,
                    f = "true" === T1.settings.videoPlayer.autoMute && f,
                    d && !c.isIeMobile)
                        if (g)
                            var i = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function() {
                                i.unsubscribe(),
                                T1.channels.media.publishAsync(T1.constants.VIDEO_CLICK, a)
                            });
                        else
                            T1.channels.media.publishAsync(T1.constants.VIDEO_CLICK, a);
                    !(d || e || f) || c.isIeMobile || g || (f && h.on("mouseenter", "#videoWrapper", function() {
                        c.mute(!1)
                    }),
                    T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                        elements: h,
                        options: {
                            threshold: -b("#navigation").height(),
                            reactWhenLeavingView: !0,
                            callback: function(b, g) {
                                c.mute(f),
                                h.find("#videoWrapper").size() ? d && g.visible ? c.play() : e && !g.visible && c.pause() : d && g.visible && T1.channels.media.publishAsync(T1.constants.VIDEO_CLICK, a)
                            }
                        }
                    }))
                };
                c.shouldUseVjs ? h() : T1.channels.global.subscribe(T1.constants.VIDEO_LIBRARY_LOADED, h)
            },
            showVideoOverlayer: function(a) {
                a.preventDefault(),
                b(this).parents(".topfeatures-v2-item").length || (location.hash = "/video/" + b(this).attr("id"))
            }
        }
          , c = a;
        return {
            init: a.init,
            loadVideo: a.loadVideo,
            stop: a.stop,
            play: a.play,
            createPlayer: a.createPlayer
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.promotions = function() {
        "use strict";
        var a = {
            containers: $(".promotions"),
            stepNow: 2,
            stepMore: 2,
            filterMore: 0,
            groups: {
                week: 1,
                month: 2,
                other: 3
            },
            storage: null,
            pillSpanSelector: "span:not(.icon)",
            init: function() {
                b.initSessionStorage(),
                T1.channels.global.subscribe(c.SORT_PROMOTIONS, b.onSortPromotions),
                T1.channels.global.subscribe(c.CURRENT_OFFERS_FILTER, b.filterModel),
                T1.channels.tab.subscribe(c.TABS_SWITCH, b.onTabSwitch),
                b.containers.length && (b.containers.find("a[data-sort-type]").click(b.onFilter),
                b.containers.find(".btn-reset").off("click").on("click", function(a) {
                    a.preventDefault(),
                    b.resetFilters($(this).closest(".promotions"))
                }),
                b.containers.find(".btn-expand").each(function() {
                    var a = $(this);
                    b.setShowMoreText(!0, a),
                    a.click(b.showMore)
                }),
                b.containers.each(function() {
                    var a = $(this)
                      , c = a.find('input[type="radio"][name="offer"]');
                    a.find("form").each(function() {
                        this.reset()
                    }),
                    b.loadFilter(a),
                    b.toggleModelBtnFilter(a, a.find(".models.hidden-xs .checkbox-btn:not(.disabled)"), !0),
                    b.toggleTypeBtnFilter(a, c.filter(":checked"), !0),
                    b.refreshDisplay(a)
                }))
            },
            initSessionStorage: function() {
                try {
                    Modernizr.sessionstorage && (b.storage = window.sessionStorage)
                } catch (e) {
                    console.log("Initialization of session storage failed:" + e.message)
                }
            },
            onTabSwitch: function(a) {
                switch (a) {
                case "pane-model-filter":
                    var c = $("#" + a);
                    b.trackPromotionFilterPaneViewChange(c),
                    c.find(".models .checkbox-btn:not(.disabled)").off("click", b.onModelFilterClick).on("click", b.onModelFilterClick);
                    break;
                case "pane-type-filter":
                    var c = $("#" + a);
                    b.trackPromotionFilterPaneViewChange(c),
                    b.reflowList(c.find('ul:has(input[type="radio"][name="offer"])')),
                    c.find('input[type="radio"][name="offer"]').off("change", b.onTypeFilterChange).on("change", b.onTypeFilterChange);
                    break;
                case "pane-price-filter":
                    var c = $("#" + a);
                    b.trackPromotionFilterPaneViewChange(c);
                    var d = c.closest(".promotions")
                      , e = b.getSliders(d);
                    e.length && e.slider && $.each(e, function() {
                        var a = $(this);
                        a.data("slider") ? a.slider("relayout") : b.createPriceSlider(a, d)
                    })
                }
            },
            createPriceSlider: function(a, c) {
                a.slider({
                    id: "_" + (new Date).getTime(),
                    max: b.handleSliderMaxValue(a),
                    formatter: function(b) {
                        var c = a.data("slider-original-max");
                        return b = b > c ? c : b,
                        globalize.format(b, "c")
                    }
                }),
                b.attachPriceSliderEvents(a, c)
            },
            attachPriceSliderEvents: function(a, c) {
                a.on("slideStop", b.onSlideStop(c, a)),
                a.on("slide", b.onSlide(a.siblings(".slider").find(".tooltip-main"), a.siblings(".slider").find(".slider-handle")))
            },
            handleSliderMaxValue: function(a) {
                var b = a.data("slider-min")
                  , c = a.data("slider-max")
                  , d = a.data("slider-step")
                  , e = c - (c - b) % d + d;
                return a.data("slider-original-max", c),
                e
            },
            onModelFilterClick: function(a) {
                var c = $(this)
                  , d = c.closest(".promotions")
                  , e = "boolean" === $.type(a) ? a : !c.find('input[type="checkbox"]').prop("checked")
                  , f = d.find('.models .checkbox-btn:not(.disabled)[data-model="' + c.data("model") + '"]').not(c);
                "boolean" === $.type(a) && (f = f.add(c)),
                f.find('input[type="checkbox"]').prop("checked", e),
                c.add(f).toggleClass("active"),
                b.toggleModelBtnFilter(d, c),
                b.refreshDisplay(d)
            },
            toggleModelBtnFilter: function(a, c, d) {
                var e = a.find(".filters .btn-filter.template");
                c.each(function() {
                    var c = $(this);
                    if (c.hasClass("active")) {
                        var f = e.clone().removeClass("template").attr("data-model", c.data("model"));
                        f.find(b.pillSpanSelector).text(c.find(".check").text()),
                        f.on("click", function(a) {
                            a.preventDefault(),
                            $.proxy(b.onModelFilterClick, c)(!1)
                        }),
                        f.appendTo(e.parent()),
                        f.after(f.parent().find(".btn-filter:not(.template):not([data-model])"))
                    } else
                        d || a.find('.filters .btn-filter[data-model="' + c.data("model") + '"]').remove()
                })
            },
            onTypeFilterChange: function() {
                var a = $(this)
                  , c = a.closest(".promotions");
                b.toggleTypeBtnFilter(c, a),
                b.refreshDisplay(c)
            },
            toggleTypeBtnFilter: function(a, c, d) {
                c.each(function() {
                    var c = $(this);
                    if (d || a.find(".filters .btn-filter[data-offer]").remove(),
                    c.is(":checked") && c.val()) {
                        var e = a.find(".filters .btn-filter.template")
                          , f = e.clone().removeClass("template").attr("data-offer", c.val());
                        f.find(b.pillSpanSelector).text(c.siblings(".check:first()").text()),
                        c.val() ? f.on("click", function(c) {
                            c.preventDefault(),
                            $.proxy(b.onTypeFilterChange, a.find('input[type="radio"][name="offer"][value=""]'))()
                        }) : (f.on("click", function(a) {
                            a.preventDefault()
                        }),
                        f.find(".icon-remove").remove()),
                        f.appendTo(e.parent())
                    } else
                        c.is(":checked") || c.val() || c.prop("checked", !0)
                })
            },
            reflowList: function(a) {
                var b = "xs" === T1.utilities.currentBreakpoint() ? 2 : 4
                  , c = a.data("items") || a.find("li")
                  , d = c.length
                  , e = Math.ceil(d / b);
                a.data("items", c).empty();
                for (var f = 0; f < e; f++)
                    for (var g = 0; g < b; g++) {
                        var h = f + g * e;
                        h >= d ? a.append('<li class="col-xs-6 col-sm-3"/>') : a.append($(c[h]))
                    }
            },
            onSlide: function(a, b, c) {
                return function(d) {
                    var e = 3
                      , f = 25
                      , g = (new Date).getTime()
                      , h = g - a.data("lastTimeStamp") || 1
                      , i = b.offset().left - (b.data("lastOffsetLeft") || 0)
                      , j = i < 0 ? -1 : 1
                      , k = Math.abs(i) / h
                      , l = Math.min(Math.abs(i * k) * e, f);
                    a.stop(!0, !0),
                    $({
                        deg: a.data("deg")
                    }).animate({
                        deg: void 0 !== c ? c : l * -j
                    }, {
                        duration: 50,
                        step: function(b) {
                            a.data("deg", b).css({
                                transform: "translateX(-50%) rotate(" + b + "deg)"
                            })
                        }
                    }),
                    a.data("lastTimeStamp", g),
                    b.data("lastOffsetLeft", b.offset().left)
                }
            },
            onSlideStop: function(a, c) {
                return function(d) {
                    var e = c.data("slider-original-max")
                      , f = d.value > e ? e : d.value;
                    T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: c
                    }),
                    a.find(".filters .btn-filter[data-price]").remove(),
                    f !== c.data("slider-value") && b.createPriceFilterBtn(a, c, f),
                    b.onSlide(c.siblings(".slider").find(".tooltip-main"), c.siblings(".slider").find(".slider-handle"), 0)(),
                    b.refreshDisplay(a)
                }
            },
            createPriceFilterBtn: function(a, c, d) {
                if (c.length && !isNaN(d)) {
                    var e = a.find(".filters .btn-filter.template")
                      , f = e.clone().removeClass("template").attr("data-price", d)
                      , g = globalize.format(d, "c");
                    f.find(b.pillSpanSelector).text(g),
                    f.on("click", function(d) {
                        d.preventDefault(),
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: $(d.target).closest(".filters"),
                            extraData: {
                                event: {
                                    action: "remove filter",
                                    value: "price"
                                }
                            }
                        }),
                        f.remove(),
                        c.slider("setValue", c.data("slider-value")),
                        b.refreshDisplay(a)
                    }),
                    f.appendTo(e.parent())
                }
            },
            onFilter: function(a) {
                a.preventDefault();
                var c = $(this)
                  , d = c.is(".active")
                  , e = c.closest(".promotions");
                e.find(".filters .btn[data-sort-type]").not(c).removeClass("active"),
                c.toggleClass("active", !d),
                b.refreshDisplay(e)
            },
            filterModel: function(a) {
                b.containers.each(function() {
                    var c = $(this)
                      , d = c.find('.models .checkbox-btn:not(.disabled)[data-model="' + a.model + '"]:first');
                    b.resetFilters(c),
                    $.proxy(b.onModelFilterClick, d)(!0)
                })
            },
            onSortPromotions: function(a) {
                b.containers.each(function() {
                    var b = $(this).find(".orig-data-copy").or(".responsive-carousel")
                      , d = b.find(">.responsive-item").filter(function(b, c) {
                        var d = $(c).data("model");
                        return d = d ? d.split(",") : [],
                        d.indexOf(a.model) > -1
                    });
                    d.length && (b.prepend(d),
                    b.is(".orig-data-copy") && T1.channels.media.publishAsync(c.CAROUSEL_CREATERESPONSIVE, {
                        container: b = b.parent()
                    }),
                    b.data("interval", !1))
                })
            },
            refreshDisplay: function(a, d) {
                if (!a.hasClass(".filtering").length) {
                    b.resetView(a);
                    var e = a.find(">.fixed-height")
                      , f = e.find(".btn-expand")
                      , g = a.find(".filterable-wrapper >.row")
                      , h = g.find(">.filterable");
                    if (h.length) {
                        d || T1.channels.dialog.publishAsync(c.LOADING_START, {
                            target: e
                        }),
                        d || g.hide(),
                        b.isFiltering(a, !0);
                        var i, j = {
                            sort: b.getSortType(a),
                            models: b.getModelsFilter(a),
                            offer: b.getOfferType(a),
                            price: b.getPricesFilter(a)
                        };
                        b.group(h, j),
                        b.order(g, j),
                        b.filter(g, j),
                        b.setVisibleCount(a, g),
                        b.setRangeCount(a, g),
                        i = g.children(".group:not(.template)"),
                        i.length ? i.each(function() {
                            b.setEven($(this))
                        }) : b.setEven(g),
                        b.storeFilter(a.attr("id"), j),
                        b.isFiltering(a, !1),
                        d || g.fadeIn(),
                        f && b.setShowMoreText(!1, f)
                    }
                    d || T1.channels.dialog.publishAsync(c.LOADING_COMPLETE, {
                        target: e
                    })
                }
            },
            group: function(a, c) {
                var d = a.siblings(".group.template:first()");
                a.each(function() {
                    var a = $(this)
                      , b = a.data(c.sort)
                      , e = a.data("group") || [];
                    if (e.length && -1 !== e.indexOf(c.sort) && b) {
                        for (var f = 0; f < b.length; f++) {
                            var g = a.siblings('.group[data-id="' + b[f].value + '"]:first()');
                            g.length || (g = d.clone().removeClass("template"),
                            g.data(c.sort, b[f]),
                            g.attr("data-id", b[f].value),
                            g.find("h2").text(b[f].title),
                            a.closest(".row").append(g));
                            var h = a.clone().data(c.sort, b[f]).addClass("clone");
                            g.append(h)
                        }
                        a.addClass("hidden")
                    }
                });
                var e = a.first().closest(".row");
                e.find('.group:hidden[data-id!="' + b.groups.other + '"]').not(".template").length || e.find('.group[data-id="' + b.groups.other + '"] >h2').remove()
            },
            showMore: function(a) {
                a.preventDefault();
                var d = $(this)
                  , e = d.closest(".promotions")
                  , f = d.data("step") || b.stepMore
                  , g = (e.data("initial") || b.stepNow) + f;
                e.data("initial", g),
                b.refreshDisplay(e, !0),
                T1.channels.scrolling.publishAsync(c.SCROLL_TO, {
                    jumpTo: e.find(".filterable:visible:eq(" + (g - f) + ")"),
                    offset: -10
                })
            },
            setShowMoreText: function(a, c) {
                var d, e = c.data("step") || b.stepMore, f = b.filterMore < e, g = c.data("step-change"), h = void 0 !== g, i = b.filterMore > 0 ? b.filterMore : e;
                a ? c.text(c.text().replace(/{next}/g, i)) : f ? (d = h ? new RegExp(g,"g") : new RegExp(e,"g"),
                c.text(c.text().replace(d, i)),
                c.data("step-change", i)) : h && (d = new RegExp(g,"g"),
                c.text(c.text().replace(d, e)))
            },
            loadFilter: function(a) {
                var c = T1.request.getQueryStringParameters();
                $.isEmptyObject(c) ? b.loadStoredFilter(a) : b.loadQuerystringParameterFilter(a, c)
            },
            loadQuerystringParameterFilter: function(a, c) {
                if ((c.offer || c.select) && b.setOfferType(a, c.offer || c.select),
                c.sort && b.setSortType(a, c.sort),
                c.view || c.model) {
                    var d = {};
                    if (c.view)
                        for (var e = c.view.split(","), f = 0; f < e.length; f++)
                            d[e[f]] = !0;
                    else
                        d[c.model] = !0;
                    b.setModelsFilter(a, d)
                }
                c.price && b.setPricesFilter(a, c.price)
            },
            loadStoredFilter: function(a) {
                var c = b.getStorage(a.attr("id"));
                c && c.filter && (b.setSortType(a, c.filter.sort),
                b.setOfferType(a, c.filter.offer),
                b.setModelsFilter(a, c.filter.models),
                b.setPricesFilter(a, c.filter.price))
            },
            storeFilter: function(a, c) {
                if (b.storage && a) {
                    var d = b.getStorage(a);
                    d.filter = c,
                    b.setStorage(a, d)
                }
            },
            getStorage: function(a) {
                if (b.storage) {
                    var c = b.storage.promotions ? $.parseJSON(b.storage.promotions) : null;
                    return c ? c[a] || b.defaultStorage() : b.defaultStorage()
                }
                return b.defaultStorage()
            },
            setStorage: function(a, c) {
                if (b.storage) {
                    var d = $.parseJSON(b.storage.promotions || "{}");
                    d[a] = c,
                    b.storage.promotions = JSON.stringify(d)
                }
            },
            defaultStorage: function() {
                return {
                    filter: null
                }
            },
            isFiltering: function(a, b) {
                a.toggleClass("filtering", b)
            },
            setVisibleCount: function(a, c) {
                var d, e;
                e = a.find(".group:not(.template)"),
                e.length ? e.each(function() {
                    d = $(this).find(".filterable:not(.hidden):not(:lt(" + (a.data("initial") || b.stepNow) + "))").addClass("hidden"),
                    b.filterMore += d.length
                }) : (d = c.find(".filterable:not(.hidden):not(:lt(" + (a.data("initial") || b.stepNow) + "))").addClass("hidden"),
                b.filterMore = d.length),
                c.find(".group").removeClass("hidden").not(c.find(".group:has(.filterable:not(.hidden))")).addClass("hidden"),
                a.find(".filter-bar:has(.btn-expand)").toggleClass("hidden", !b.filterMore)
            },
            setRangeCount: function(a, c) {
                var d = c.find("> .group:not(.hidden) .filterable:not(.hidden), > .filterable:not(.hidden)").length;
                a.toggleClass("has-results", d > 0).find(".range-count").text(d + b.filterMore)
            },
            setEven: function(a) {
                a.find(".filterable:not(.hidden):even").addClass("even")
            },
            order: function(a, c) {
                if (c.sort) {
                    var d = a.find(">.group:not(.template), >.filterable:not(.hidden)");
                    if (d.sort(function(a, b) {
                        var d = $(a).data(c.sort) || {
                            weight: 0
                        }
                          , e = $(b).data(c.sort) || {
                            weight: 0
                        };
                        return (e.weight || e.value) < (d.weight || d.value) ? 1 : -1
                    }).appendTo(a),
                    "expiry-date" === c.sort) {
                        var e = d.filter(".group");
                        b.orderGroupPromotionsByExpiryDate(e)
                    }
                }
            },
            orderGroupPromotionsByExpiryDate: function(a) {
                a.each(function() {
                    var a = $(this);
                    a.find(">.filterable:not(.hidden)").sort(function(a, b) {
                        var c = $(a).data("expiry-date");
                        return $(b).data("expiry-date").expiringDate < c.expiringDate ? 1 : -1
                    }).detach().appendTo(a)
                })
            },
            filter: function(a, c) {
                a.find(".filterable:not(.hidden)").each(function() {
                    var a = $(this)
                      , d = b.runHideFilter(c.offer, a.data("offer")) || c.price && void 0 === a.data("price") || (a.data("price") || 0) > c.price;
                    d || $.isEmptyObject(c.models) || (d = d || b.runHideFilter(c.models, a.data("model"))),
                    a.toggleClass("hidden", d)
                })
            },
            runHideFilter: function(a, b) {
                var c = void 0 !== a;
                if (b = b || [],
                c)
                    for (var d = 0; d < b.length; d++)
                        if ($.isPlainObject(a))
                            for (var d = 0; d < b.length; d++)
                                c = c && (void 0 === a[b[d].value] || !a[b[d].value]);
                        else
                            c = c && b[d].value !== a;
                return c
            },
            resetView: function(a) {
                var c = a.find(".filterable-wrapper >.row");
                c.find(".filterable").appendTo(c).removeClass("hidden even"),
                c.find(">.filterable.clone, >.group:not(.template)").remove(),
                b.filterMore = 0,
                b.resetInitialPosition(c)
            },
            resetFilters: function(a) {
                var c = a.find(".filters")
                  , d = b.getSliders(a);
                c.find(".models .checkbox-btn.active").removeClass("active").find('input[type="checkbox"]').prop("checked", !1),
                c.find('input[type="radio"][name="offer"]:checked').prop("checked", !1),
                c.find('input[type="radio"][name="offer"][value=""]').prop("checked", !0),
                c.find(".btn-filter.active:not(.template)").removeClass("active").filter(":not(.static, .template)").remove(),
                d.each(function() {
                    var a = $(this);
                    a.data("slider") && a.slider("setValue", a.data("slider-value"))
                }),
                b.refreshDisplay(a)
            },
            resetInitialPosition: function(a) {
                var b = a.find(".filterable");
                void 0 !== b.data("initial-position") ? b.sort(function(a, b) {
                    return $(b).data("initial-position") < $(a).data("initial-position") ? 1 : -1
                }).appendTo(a) : b.each(function() {
                    var a = $(this);
                    a.data("initial-position", a.index()),
                    a.attr("data-position", a.index())
                })
            },
            getSortType: function(a) {
                return a.find(".btn-filter.active[data-sort-type]").data("sort-type")
            },
            setSortType: function(a, b) {
                b && (a.find(".btn-filter.active[data-sort-type]").removeClass("active"),
                a.find('.btn-filter[data-sort-type="' + b + '"]').addClass("active"))
            },
            getOfferType: function(a) {
                return a.find('input[type="radio"][name="offer"]:checked').val() || void 0
            },
            setOfferType: function(a, b) {
                a.find('input[type="radio"][name="offer"]:checked').prop("checked", !1),
                a.find('input[type="radio"][name="offer"][value="' + (b || "") + '"]').prop("checked", !0)
            },
            getModelsFilter: function(a) {
                var b = {};
                return a.find(".models .checkbox-btn.active").each(function() {
                    b[$(this).data("model")] = !0
                }),
                b
            },
            setModelsFilter: function(a, b) {
                a.find(".models .checkbox-btn.active").removeClass("active"),
                a.find(".models .checkbox-btn").each(function() {
                    var a = $(this);
                    b[a.data("model")] && (a.addClass("active"),
                    a.find('input[type="checkbox"]').prop("checked", !0))
                })
            },
            getSliders: function(a, b) {
                return a.find('input[data-input-type="slider"]').filter(b || "*")
            },
            getPricesFilter: function(a) {
                if ($(".btn-filter.active[data-price]").length)
                    return b.getSliders(a, '[name="price-filter"]').val()
            },
            setPricesFilter: function(a, c) {
                var d = b.getSliders(a, '[name="price-filter"]')
                  , c = parseInt(c);
                d.length && !isNaN(c) && c !== parseInt(d.data("slider-value").toFixed()) && (d.data("slider") || b.createPriceSlider(d, a),
                d.slider("setValue", c),
                b.createPriceFilterBtn(a, d, c))
            },
            trackPromotionFilterPaneViewChange: function(a) {
                $("#promotions-overview").length && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a,
                    extraData: {
                        event: {
                            action: (a.hasClass("active") ? "view" : "hide") + "-filter-promotions"
                        }
                    }
                })
            }
        }
          , b = a
          , c = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.ctaButton = function() {
        "use strict";
        var a = {
            ccInjectionUrl: T1.settings && T1.settings.urlCarConfigurator,
            init: function() {
                c.initOnDemand({
                    button: b(".btn-finance, .btn-insurance")
                }),
                T1.ctaButton.listenToCCCtas && T1.channels.carconfig.subscribe("summ_cta_clicked", c.execCta)
            },
            initOnDemand: function(a) {
                if (a.button && a.button.is(".btn-finance, .btn-insurance")) {
                    var b = {
                        financing: c.ccInjectionUrl ? c.openCCSummary : c.postFinanceData,
                        insurance: c.ccInjectionUrl ? c.openCCSummary : c.postInsuranceData
                    };
                    a.button.filter(".btn-finance").off("click", b.financing).on("click", b.financing),
                    a.button.filter(".btn-insurance").off("click", b.insurance).on("click", b.insurance),
                    a.modelId && a.button.removeData("config").data({
                        "model-id": a.modelId,
                        "car-id": a.carId,
                        "colourI-id": a.colourId
                    }),
                    a.config && a.button.removeData(["model-id", "car-id", "colour-id"]).data("config", a.config)
                }
            },
            openCCSummary: function(a) {
                c.openCC(b(this), "summary")
            },
            openCC: function(a, b) {
                a.preventDefault && a.preventDefault(),
                b || (b = "finance");
                var c = a.data("config");
                if (!c && a.data("model-id") && (c = {
                    ModelID: a.data("model-id"),
                    CarID: a.data("car-id"),
                    ExteriorColourID: a.data("colour-id")
                }),
                !c)
                    return console.log("No data found for opening " + b);
                T1.channels.carconfig.publish(T1.constants.CARCONFIG_LOAD, {
                    step: b,
                    preventHistoryUpdate: !1,
                    ModelID: c.ModelID,
                    CarID: c.CarID,
                    ExteriorColourID: c.ExteriorColourID,
                    UpholsteryID: c.UpholsteryID
                })
            },
            postFinanceData: function(a) {
                a.preventDefault(),
                c.ProcessCarConfigObject(b(this), function(a) {
                    if (a)
                        try {
                            T1.channels.finance.publish(c.isMobile() ? d.FINANCE_EXTERNAL_POST_REQUEST_MOBILE : d.FINANCE_EXTERNAL_POST_REQUEST, a)
                        } catch (error) {
                            console.log("Error while trying to open the finance link " + error)
                        }
                })
            },
            postInsuranceData: function(a) {
                a.preventDefault(),
                c.ProcessCarConfigObject(b(this), function(a) {
                    if (a)
                        try {
                            T1.channels.finance.publish(c.isMobile() ? d.INSURANCE_EXTERNAL_POST_REQUEST_MOBILE : d.INSURANCE_EXTERNAL_POST_REQUEST, a)
                        } catch (error) {
                            console.log("Error while trying to open the insurance link " + error)
                        }
                })
            },
            ProcessCarConfigObject: function(a, b) {
                if (a.data("config"))
                    b(a.data("config"));
                else if (a.data("model-id")) {
                    var c = Object.resolve("T1.loadSave");
                    if (c) {
                        var d = c.get({
                            type: "",
                            configuration: {
                                carId: a.data("car-id"),
                                modelId: a.data("model-id"),
                                exteriorColourId: a.data("colour-id")
                            }
                        });
                        d.done([function(b) {
                            a.data("config", b)
                        }
                        , b]),
                        d.fail(function(a, b, c) {
                            console.log(b + ": " + c)
                        })
                    }
                }
            },
            isMobile: function() {
                return T1.breakpoints.list[T1.breakpoints.currentBP()] <= d.SCREEN_XTRASMALL
            },
            execCta: function(a, b) {
                if (a.target || (a.target = a.attr("data-link") ? a : a.parent()),
                a.type = a.type || a.target.attr("data-link"),
                a.url = a.target.attr("href"),
                a.urlWebsite = (Object.resolve && Object.resolve("T1.settings.carconfig.urlWebsite") || "").replace(/\/\s*$/, ""),
                a.config || (a.config = T1.ctx && T1.ctx.config),
                b && (a.event = {
                    channel: b.channel,
                    topic: b.topic
                }),
                b.topic && "summ_cta_clicked" === b.topic && ("save" === a.type || "finance" == a.type))
                    return !1;
                a.type && c.actions[a.type] ? c.actions[a.type](a) : c.actions.default(a)
            },
            actions: {
                send: function(a) {
                    c.actions._track({
                        trackvalue: "send_to_dealer",
                        trackworkflowname: "send_to_dealer",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url = (Object.resolve && Object.resolve("T1.settings.carconfig.urlSendToDealer") || "/forms/send-to-dealer.json?tab=pane-contact-dealer").replace(/[&\?]\s*$/, ""),
                    c.actions._CCUrlOpenUrlWithAjax(a)
                },
                "send-to-dealer-v2": function(a) {
                    c.actions._track({
                        trackvalue: "send_to_dealer",
                        trackworkflowname: "send_to_dealer",
                        trackworkflowstep: "0",
                        trackvariant: "v2"
                    }, a.target),
                    a.url || (a.url = "/forms-v2/forms?type=send-to-dealer"),
                    c.actions._CCUrlOpenWithMaterialBox(a)
                },
                "ebrochure-personalized": function(a) {
                    c.actions._track({
                        trackvalue: "ebrochure_personalized",
                        trackworkflowname: "ebrochure_personalized",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url = (Object.resolve && Object.resolve("T1.settings.carconfig.urlSendToDealer") || "/forms/send-to-dealer.json").replace(/\?[^?]+.*/, "") + "?tab=pane-personalized-ebrochure",
                    c.actions._CCUrlOpenUrlWithAjax(a)
                },
                "ebrochure-personalized-v2": function(a) {
                    c.actions._track({
                        trackvalue: "ebrochure_personalized",
                        trackworkflowname: "ebrochure_personalized",
                        trackworkflowstep: "0",
                        trackvariant: "v2"
                    }, a.target),
                    a.url || (a.url = "/forms-v2/forms?type=personalbrochure"),
                    c.actions._CCUrlOpenWithMaterialBox(a)
                },
                mailconfig: function(a) {
                    c.actions._track({
                        trackvalue: "mailconfig",
                        trackworkflowname: "mailconfig",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url = (Object.resolve && Object.resolve("T1.settings.carconfig.urlMailConfig") || "/forms/send-to-dealer.json?tab=pane-mail-config").replace(/[&\?]\s*$/, ""),
                    c.actions._CCUrlOpenUrlWithAjax(a)
                },
                "send-configuration-v2": function(a) {
                    c.actions._track({
                        trackvalue: "mailconfig",
                        trackworkflowname: "mailconfig",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url || (a.url = "/forms-v2/forms?type=send-configuration"),
                    c.actions._CCUrlOpenWithMaterialBox(a)
                },
                download: function(a) {
                    if (!a.config || a.url)
                        return !1;
                    c.actions._track({
                        trackvalue: "download-config"
                    }, a.target);
                    var b = (Object.resolve && Object.resolve("T1.settings.carconfig.urlPrint") || "/carconfig").replace(/\/\s*$/, "")
                      , d = a.config.PersonalCode ? "/mypdf/" + a.config.PersonalCode : "/pdf/" + a.config.ConfigurationCode;
                    window.open(b + d, "Print")
                },
                print: function(a) {
                    if (!a.config || a.url)
                        return !1;
                    c.actions._track({
                        trackvalue: "print-config"
                    }, a.target);
                    var b = (Object.resolve && Object.resolve("T1.settings.carconfig.urlPrint") || "/carconfig").replace(/\/\s*$/, "")
                      , d = a.config.PersonalCode ? "/myprint/" + a.config.PersonalCode : "/print/" + a.config.ConfigurationCode;
                    window.open(b + d, "Print")
                },
                load: function(a) {
                    c.actions._track({
                        trackvalue: "load-config",
                        trackworkflowname: "load-config",
                        trackworkflowstep: "0"
                    }, a.target),
                    T1.channels.hash.publish(T1.constants.HASH_ADD, "/publish/my_toyota_my_cars")
                },
                testdrive: function(a) {
                    c.actions._track({
                        trackvalue: "test_drive",
                        trackworkflowname: "test_drive",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url = (Object.resolve && Object.resolve("T1.settings.dealer.formUrl") || "").replace(/\?[^?]+.*/, "") + "?tab=pane-testdrive",
                    a.param = "",
                    c.actions._CCUrlOpenUrlWithAjax(a)
                },
                "testdrive-v2": function(a) {
                    c.actions._track({
                        trackvalue: "test_drive",
                        trackworkflowname: "test_drive",
                        trackworkflowstep: "0",
                        trackvariant: "v2"
                    }, a.target),
                    a.url || (a.url = "/forms-v2/forms?type=testdrive"),
                    a.model || (a.model = c.actions._getModelFromContext()),
                    c.actions._CCUrlOpenWithMaterialBox(a)
                },
                dealerfinder: function(a) {
                    c.actions._track({
                        trackvalue: "dealerfinder",
                        trackworkflowname: "dealerfinder",
                        trackworkflowstep: "0"
                    }, a.target),
                    a.url = (Object.resolve && Object.resolve("T1.settings.dealer.formUrl") || "").replace(/\?[^?]+.*/, "") + "?tab=pane-dealer",
                    a.param = "",
                    c.actions._CCUrlOpenUrlWithAjax(a)
                },
                default: function(a) {
                    a.target && a.target.text && c.actions._track({
                        trackvalue: a.target.text(),
                        trackworkflowname: a.target.text(),
                        trackworkflowstep: "0"
                    }, a.target);
                    var b = a.target.attr("target");
                    if (a.url && b) {
                        var d = !!a.url.match(/^(\/?#)/gi);
                        (-1 === a.url.search(/^\s*(https?:)?\/\//) && !d || "_blank" === b && d) && (a.url = a.urlWebsite + a.url),
                        "overlayer" === b ? d ? T1.channels.hash.publish(T1.constants.HASH_ADD, a.url) : T1.channels.hash.publish(T1.constants.HASH_ADD, "/iframe/" + encodeURIComponent(a.url)) : "_self" === b ? d ? T1.channels.hash.publish(T1.constants.HASH_ADD, a.url) : window.location = a.url : "_blank" === b && window.open(a.url)
                    } else
                        try {
                            var e = Object.resolve && Object.resolve(a.target.data("link"));
                            e && e.call(this, a.config.ConfigurationCode)
                        } catch (f) {
                            console.log(f.message)
                        }
                },
                _CCUrlOpenUrlWithAjax: function(a) {
                    if (!a.config || !a.url)
                        return !1;
                    var b = "/box-ajax";
                    b += "/url=" + encodeURIComponent(c.actions._transformUrlWithParameters(a)),
                    b += "/size=fullscreen",
                    T1.channels.hash.publish(T1.constants.HASH_ADD, b)
                },
                _CCUrlOpenWithMaterialBox: function(a) {
                    var b = a.target.attr("id") || "box-" + (new Date).getTime();
                    a.target.attr({
                        id: b,
                        href: c.actions._transformUrlWithParameters(a)
                    }),
                    T1.channels.hash.publish(T1.constants.HASH_ADD, "/box-ajax/target=%23" + b)
                },
                _transformUrlWithParameters: function(a) {
                    if (!a.url)
                        return "";
                    var b = a.url
                      , c = a && a.config && a.config.PersonalCode
                      , d = a && a.config && a.config.ConfigurationCode
                      , e = a && a.model;
                    return b = T1.request.setQueryStringParameter(b, "personalCar", c),
                    b = T1.request.setQueryStringParameter(b, "car", d),
                    b = T1.request.setQueryStringParameter(b, "model", e)
                },
                _track: function(a, b) {
                    var c = {
                        eventclass: a.trackeventclass || "carconfigevent",
                        category: a.tools || "tools",
                        componentname: a.trackcomponent || "carconfig",
                        value: a.trackvalue || "send_to_dealer",
                        action: a.trackaction || "cc_cta",
                        carconfigstep: "summary",
                        workflowconversion: a.trackworkflowconversion || "0"
                    };
                    a.trackvariant && (c.variant = a.trackvariant),
                    a.trackworkflowname && (c.workflowname = a.trackworkflowname),
                    a.trackworkflowstep && (c.workflowstep = a.trackworkflowstep),
                    T1.channels.statistics.publish(T1.constants.STATS_TRACK, {
                        extraData: {
                            event: c
                        },
                        node: b
                    })
                },
                _getModelFromContext: function() {
                    if (T1.ctx && T1.ctx.model)
                        return T1.ctx.model;
                    var a = T1.settings && T1.settings.carconfig && T1.settings.carconfig.modelMap
                      , b = T1.settings && T1.settings.carconfig && T1.settings.carconfig.modelID;
                    if (!a || !b)
                        return null;
                    for (var c in a)
                        if (a.hasOwnProperty(c) && a[c].id === b)
                            return a[c].internalCode
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initOnDemand: a.initOnDemand,
            listenToCCCtas: !0,
            ProcessCarConfigObject: a.ProcessCarConfigObject
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a._;
    T1.carconfig = function() {
        "use strict";
        var c = {
            params: {},
            subscriptions: {},
            urlContent: null,
            viewportMeta: null,
            urlValid: !1,
            reProtocol: /^(\s)*(https?:)?\/\//i,
            windowMobileCC: null,
            ccInjectionUrl: T1.settings && T1.settings.urlCarConfigurator,
            ccBuildUrl: T1.settings && T1.settings.orCarExplorer,
            ccInjectionParameterMapping: {
                exteriorcolourid: "colour",
                upholsteryid: "upholstery",
                wheelid: "wheel",
                inlayid: "inlay",
                packid: "packs",
                gradeid: "QUERYSTRING:gradeid",
                submodelid: "QUERYSTRING:submodelid",
                engineid: "QUERYSTRING:engineid",
                fueltypeid: "QUERYSTRING:fueltypeid",
                transmissionid: "QUERYSTRING:transmissionid",
                wheeldriveid: "QUERYSTRING:wheeldriveid",
                promotionid: "QUERYSTRING:promotionid",
                dealerid: "QUERYSTRING:dealerid",
                standalone: "QUERYSTRING:standalone"
            },
            QUERYSTRING: {
                KEYS: {
                    PATH: "path",
                    TYCODE: "tyCode",
                    PERSONALCODE: "personalCode",
                    HASH: "hash",
                    PROMOTION: "promotion",
                    BASKET: {
                        COLOUR: "c",
                        WHEEL: {
                            GENERIC: "w",
                            CUSTOM: "w[i]",
                            FINISH: "w[f]",
                            CAP: "w[c]",
                            SURROUND: "w[s]"
                        },
                        UPHOLSTERY: "u",
                        PACKS: "p[%INDEX%]",
                        EXTRAS: "e[%INDEX%]",
                        COLOUR_ACCENT_PRIMARY: "pac",
                        COLOUR_ACCENT_SECONDARY: "sac"
                    }
                },
                MAP: {}
            },
            PATH: {
                DELIMITER: "/",
                STEP_1A: "model",
                STEP_1B: "engine",
                STEP_2: "customize",
                STEP_3: "summary",
                MAP: {}
            },
            init: function() {
                var a = T1.settings.carconfig
                  , b = a.urlContent;
                c.QUERYSTRING.MAP = {
                    exteriorcolourid: c.QUERYSTRING.KEYS.BASKET.COLOUR,
                    colour: c.QUERYSTRING.KEYS.BASKET.COLOUR,
                    upholsteryid: c.QUERYSTRING.KEYS.BASKET.UPHOLSTERY,
                    wheelid: c.QUERYSTRING.KEYS.BASKET.WHEEL.GENERIC,
                    packid: c.QUERYSTRING.KEYS.BASKET.PACKS,
                    promotionid: c.QUERYSTRING.KEYS.PROMOTION
                },
                c.PATH.MAP = {
                    engine_grades: c.PATH.STEP_1A,
                    exterior: c.PATH.STEP_2,
                    interior: c.PATH.STEP_2,
                    accessories: c.PATH.STEP_2,
                    summary: c.PATH.STEP_3
                },
                "/" === b.slice(-1) && (b = b.slice(0, -1)),
                c.urlContent = b,
                c.reProtocol.test(b) && (c.urlContent += "/" + a.country + "/" + a.language,
                c.urlValid = !0),
                c.subscriptions.load = T1.channels.carconfig.subscribe(T1.constants.CARCONFIG_LOAD, c.openCarConfig)
            },
            openCarConfig: function(a) {
                c.ccBuildUrl ? c.ccBuild.open(a) : c.ccInjectionUrl ? c.ccInjection.open(a) : c.ccIframe.open(a)
            },
            ccBuild: {
                open: function(a) {
                    window.location.href = c.ccBuild.getBuildUrl(c.ccBuild.cleanParameters(a))
                },
                cleanParameters: function(a) {
                    a = c.ccBuild.parametersToLowerCase(a);
                    var b = {};
                    a.tycode && (b.tyCode = a.tycode),
                    a.personalcode && (b.tyCodePersonal = a.personalcode),
                    a.carid && (b.car = a.carid),
                    (a.modelid || a.model) && (b.model = a.modelid || a.model),
                    a.gradeid && (b.grade = a.gradeid),
                    a.bodytypeid && (b.bodytype = a.bodytypeid),
                    a.promotionid && (b.promotion = a.promotionid),
                    a.step && (b.carConfiguratorStep = a.step);
                    var d = a.packid || a.packids || a.packs;
                    return d && (b.packs = d instanceof Array ? d.join(",") : d),
                    a.exteriorcolourid && (b.colour = a.exteriorcolourid),
                    b
                },
                parametersToLowerCase: function(a) {
                    var b = {};
                    for (var c in a)
                        b[c.toLowerCase()] = a[c];
                    return b
                },
                getBuildUrl: function(a) {
                    var b = "/carconfig/";
                    !a.model || a.tyCode || a.tyCodePersonal || (b += a.model);
                    var c = [];
                    for (var d in a)
                        c.push(d + "=" + a[d]);
                    return b += "?" + c.join("&")
                }
            },
            ccInjection: {
                open: function(a) {
                    a = a ? b.transform(a, function(a, b, c) {
                        a[c.toLowerCase()] = b
                    }) : {};
                    var d = "/" + c.ccInjectionUrl.replace(/^\s*\/|(\/|\.json\/?)\s*$/g, "")
                      , e = a.model || a.modelid || ""
                      , f = c.ccInjection.getModel(e)
                      , g = a.tycode
                      , h = a.car || a.carid
                      , i = a.preventhistoryupdate || !0
                      , j = a.step
                      , k = {
                        step: "exterior",
                        carId: "00000000-0000-0000-0000-000000000000"
                    };
                    a.step && delete a.step,
                    a.preventhistoryupdate && delete a.preventhistoryupdate,
                    g ? d += "/" + g : "" !== e && (d += "/" + (f.ccName || "string" == typeof f && f || "").toLowerCase());
                    var l = []
                      , m = null
                      , n = null
                      , o = /^QUERYSTRING:/i;
                    for (var p in a) {
                        var q = p.toLowerCase();
                        "model" !== q && "modelid" !== q && "carid" !== q && "car" !== q && "tycode" !== q && a[p] && (c.ccInjectionParameterMapping[q] && o.test(c.ccInjectionParameterMapping[q]) ? n = (n ? n + "&" : "?") + c.ccInjectionParameterMapping[q].replace(o, "") + "=" + a[p] : l.push((c.ccInjectionParameterMapping[q] || q) + "/" + a[p]))
                    }
                    (j || h || l.length) && (m = "#/carconfig/" + (j || k.step) + "/" + (f.id || f) + "/" + (h || k.carId) + (l.length ? "/" + l.join("/") : "")),
                    d += (n || "") + (m || ""),
                    i ? window.location.replace(d) : window.location.href = d
                },
                getModel: function(a) {
                    if (!T1.settings || !T1.settings.modelMap)
                        return a;
                    var b = T1.settings.modelMap
                      , c = a.toUpperCase();
                    for (var d in b)
                        if (c === d || c === b[d].name.toUpperCase() || c === b[d].ccName.toUpperCase() || c === b[d].id.toUpperCase() || c === b[d].internalCode.toUpperCase() || c === b[d].localCode.toUpperCase())
                            return b[d];
                    return a
                }
            },
            ccIframe: {
                setCarConfigParams: function() {
                    var a = $('.overlayerContent iframe[src="' + c.urlContent + '"]');
                    0 === a.length && (a = $('.overlayerContent iframe[src="' + c.urlContent.replace(c.reProtocol, "//") + '"]'));
                    var b = a[0] ? a[0].contentWindow : null
                      , d = {};
                    b ? (d.eventName = T1.constants.OVERLAY_READY,
                    d.preconfig = c.params,
                    b.postMessage(JSON.stringify(d), "*")) : c.urlValid && (console.log(T1.labels.whitelistError || "Failed to load url, please check whitelist."),
                    T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                        customContainer: $(".overlayerContent .white"),
                        customText: T1.labels.whitelistError || "Failed to load url, please check whitelist.",
                        timeout: 3e3
                    }),
                    setTimeout(function() {
                        T1.channels.hash.publish(T1.constants.HASH_REMOVE, "")
                    }, 3e3)),
                    c.subscriptions.overlay.unsubscribe()
                },
                open: function(b) {
                    c.params = b,
                    T1.utilities.isTouchCapable && (c.ccIframe.scale(),
                    c.subscriptions.overlayclose = T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_REOPEN_MAINCONTENT, c.ccIframe.resetScale));
                    var d = T1.settings
                      , e = d.carconfig;
                    if ("xs" === T1.utilities.currentBreakpoint())
                        if ("true" === T1.settings.useCarconfigMobile) {
                            var f = e.urlContent + "/" + d.country + "/" + d.language + "/mobile" || "http://t1-dev-carconfig.herokuapp.com/nl/nl/mobile/"
                              , g = encodeURIComponent(window.location.href.split("#")[0]);
                            if (b.tyCode)
                                f += "?tyCode=" + b.tyCode;
                            else if ("object" != typeof b || a._.isEmpty(b)) {
                                if (T1.ctx && T1.ctx.model) {
                                    var h = T1.ctx.model.toUpperCase();
                                    f += "?model=" + h
                                }
                            } else
                                f = c.convertArgumentsToQuerystring(b, f);
                            window.location.replace(c.convertArgumentsToQuerystring({
                                referrer: g
                            }, f))
                        } else if (c.subscriptions.openMobile = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, c.ccIframe.openCarConfigMobile),
                        0 === $("#minicarconfig").length) {
                            var i = c.ccIframe.getCarconfigMiniHtml();
                            T1.channels.mobile.publish(T1.constants.MOBILE_OPEN, {
                                sections: $(i)
                            })
                        } else
                            T1.channels.mobile.publish(T1.constants.MOBILE_OPEN, {
                                ids: ["minicarconfig", "carconfig-mini-ecolabel"]
                            });
                    else if ("true" === T1.settings.carconfig.inOverlay) {
                        if (c.subscriptions.overlay = T1.channels.dialog.subscribe(T1.constants.POSTMESSAGE_IFRAME_LOAD, c.ccIframe.setCarConfigParams),
                        c.params && !$.isEmptyObject(c.params)) {
                            var j = "?";
                            for (var k in c.params)
                                j += k + "=" + c.params[k] + "&";
                            c.urlContent += j.slice(0, -1)
                        }
                        var l = window.location || document.location;
                        l && l.href.indexOf("#") < 0 && (window.location.hash = c.urlContent),
                        T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_OPEN, {
                            iframe: !0,
                            url: c.urlContent,
                            sync: !0,
                            noScroll: !T1.utilities.isIOS()
                        })
                    } else
                        window.location.replace(c.convertArgumentsToQuerystring(b, "/carconfig"))
                },
                scale: function() {
                    if ("xs" !== T1.utilities.currentBreakpoint()) {
                        var a = $("head").find("meta[name=viewport]");
                        c.viewportMeta || (c.viewportMeta = a.attr("content")),
                        a.attr("content", "width=1100px;")
                    }
                },
                resetScale: function() {
                    if ("xs" !== T1.utilities.currentBreakpoint()) {
                        $("head").find("meta[name=viewport]").attr("content", c.viewportMeta),
                        c.subscriptions.overlayclose.unsubscribe()
                    }
                },
                getCarconfigMiniHtml: function() {
                    return $.ajax({
                        async: !1,
                        url: T1.constants.URL_CAR_CONFIG_MINI
                    }).responseText
                },
                openCarConfigMobile: function(a) {
                    c.subscriptions.openMobile.unsubscribe(),
                    T1.channels.carconfig.publishAsync(T1.constants.CARCONFIG_MINI_INIT, {
                        repositionImage: !0
                    }),
                    T1.channels.carconfig.publishAsync(T1.constants.CARCONFIG_MINI_LOAD, c.params)
                }
            },
            convertArgumentsToQuerystring: function(a, b) {
                a || (a = {}),
                b || (b = ""),
                b += b.indexOf("?") > -1 ? "&" : "?";
                for (var c in a)
                    b += c + "=" + a[c] + "&";
                return b.replace(/(\&|\?)*$/g, "")
            }
        };
        return {
            init: c.init,
            openCarConfig: c.openCarConfig
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.carconfigMini = function() {
        "use strict";
        var a = {
            miniConfig: null,
            jsonData: null,
            dropdowns: null,
            dropdownIndex: 0,
            step: 0,
            steps: {},
            selectedItems: [],
            selectedSteps: {},
            selectedLists: {},
            iconChevron: $("<i>"),
            wasStartedMobile: !1,
            wasStartedDesktop: !1,
            isMobile: !1,
            hasMobileInit: !1,
            isFinalized: !1,
            CLASS_HIDE: "hide",
            CLASS_HIDDEN_XS: "hidden-xs",
            CLASS_DROPDOWN_MENU: "dropdown-menu",
            CLASS_DISABLED: "disabled",
            subscriptions: {},
            dfdCurrentConfig: null,
            init: function() {
                T1.channels.carconfig.subscribe(T1.constants.CARCONFIG_MINI_INIT, b.initModuleVariables),
                T1.channels.carconfig.publish(T1.constants.CARCONFIG_MINI_INIT, {}),
                T1.channels.carconfig.subscribe(T1.constants.CARCONFIG_END, b.requestCarCode),
                T1.channels.finance.subscribe(T1.constants.FINANCE_RATES_ON, b.loadConfigFinanceData),
                T1.channels.finance.subscribe(T1.constants.FINANCE_RATES_OFF, b.hideFinance)
            },
            initModuleVariables: function(a) {
                a || (a = {}),
                b.miniConfig = a.el || $(".carconfig-mini"),
                b.miniConfig.length > 0 && (b.isTrackingEnabled = "object" == typeof window.t1DataLayer,
                b.configObj = null,
                b.getDropdownWrapper().off("click", "a[data-id]", b.handleSelection).on("click", "a[data-id]", b.handleSelection),
                a.repositionImage && b.positionCarImage(),
                b.modelPreselect(),
                b.steps = T1.constants.CARCONFIG_STEPS)
            },
            getDropdownWrapper: function() {
                return b.dropdownWrapper || (b.dropdownWrapper = b.miniConfig.find(".carconfig-mini-select"))
            },
            getDropdowns: function() {
                return b.dropdowns || (b.dropdowns = b.getDropdownWrapper().find(".dropdown"))
            },
            getPreSelectedLink: function() {
                return b.preSelectedLink || (b.preSelectedLink = b.getDropdowns().find("." + b.CLASS_DROPDOWN_MENU + " a[data-selected]"))
            },
            getPreviewWrapper: function() {
                return b.previewWrapper || (b.previewWrapper = b.miniConfig.find(".carconfig-mini-preview"))
            },
            getSummary: function() {
                return b.summary || (b.summary = b.miniConfig.find(".carconfig-mini-summary"))
            },
            getSummarylist: function() {
                return b.summaryList || (b.summaryList = b.getSummary().find(".summary-selection"))
            },
            getPriceTable: function() {
                return b.priceTable || (b.priceTable = b.getSummary().find(".summary-price"))
            },
            getImageResult: function() {
                return b.imageResult || (b.imageResult = b.miniConfig.find(".image-result"))
            },
            getCtaContainer: function() {
                return b.ctaContainer || (b.ctaContainer = $(".carconfig-mini-cta"))
            },
            getFinanceBtn: function() {
                return b.financeBtn || (b.financeBtn = b.getCtaContainer().find(".btn-finance"))
            },
            getOptionalBtn: function() {
                return b.optionalBtn || (b.optionalBtn = b.getCtaContainer().find(".btn-optional"))
            },
            getBtnInsurance: function() {
                return b.btnInsurance || (b.btnInsurance = b.getCtaContainer().find(".btn-insurance"))
            },
            getConfigBtn: function() {
                return b.configBtn || (b.configBtn = b.getPreviewWrapper().find(".btn-car-configurator"))
            },
            initMobile: function() {
                b.setMobile(!0),
                b.hasMobileInit = !0,
                b.miniConfig.length > 0 && (b.wasStartedDesktop || (b.wasStartedMobile = !0),
                b.resetButton = b.getSummary().find(".btn-reset").on("click", b.reset)),
                b.subscriptions.load = T1.channels.carconfig.subscribe(T1.constants.CARCONFIG_MINI_LOAD, b.handleCarConfigLoad)
            },
            handleCarConfigLoad: function(a) {
                var c = Object.resolve("T1.loadSave");
                if (a.tyCode && c) {
                    var d = c.get({
                        configuration: {
                            configCode: a.tyCode,
                            modelId: a.modelid,
                            carId: a.carid,
                            colourId: a.colourid
                        },
                        type: "full"
                    })
                      , e = c.get(a)
                      , f = $.ajax({
                        type: "GET",
                        dataType: "JSON",
                        url: T1.constants.URI_FINANCE_MATRIX + a.tyCode + "/minicarconfig-mobile"
                    });
                    $.when(d, e, f).done(b.handleRequestCarInfoSuccess(a.tyCode)).fail(b.handleRequestCarInfoError)
                } else
                    console.log("Toyota code required")
            },
            handleRequestCarInfoSuccess: function(a) {
                return function(c, d, e) {
                    var f = T1.labels.carconfigMini
                      , g = c[0]
                      , h = e[0]
                      , i = {
                        model: f.selectedModel,
                        body: f.selectedBodyType,
                        engine: f.selectedEngine,
                        transmission: f.selectedTransmission,
                        wheeldrive: f.selectedWheelDrive,
                        grade: f.selectedGrade,
                        colour: f.selectedColour
                    };
                    $("ul.carconfig-mini-select, a.btn-reset").hide(),
                    $("ul.summary-selection li").remove(),
                    b.selectedSteps.grades = {
                        config: d[0],
                        carId: g.guids.car
                    },
                    b.jsonData = {
                        modelId: g.car.model
                    },
                    g.car.colour && (b.selectedSteps.colours = {
                        code: g.car.colour.exterior.code,
                        id: d[0].ExteriorColourID
                    });
                    for (var j in g.car) {
                        var k = j.toLowerCase();
                        i[k] && b.addToSummary({
                            key: i[k],
                            value: "colour" === k ? g.car[j].exterior.name : g.car[j]
                        })
                    }
                    if (g.price) {
                        var l = g.price.base.listWithDiscount
                          , m = g.price.options ? g.price.options.price.listWithDiscount : 0
                          , n = g.price.colour ? g.price.colour.listWithDiscount : 0;
                        b.finalize(g.energy, {
                            code: a,
                            matrix: h,
                            priceCar: l + m,
                            priceColour: n
                        })
                    } else
                        console.log("no price defined"),
                        b.finalize(g.energy, {
                            code: a,
                            skipPrices: !0
                        })
                }
            },
            handleRequestCarInfoError: function(a, b, c) {
                console.log(b + ": " + c)
            },
            initDesktop: function() {
                b.setMobile(!1),
                b.miniConfig.length > 0 && (b.wasStartedMobile || (b.wasStartedDesktop = !0),
                b.niceSummary = b.miniConfig.find(".summary-selection-nice"),
                b.actionsWrapper = b.miniConfig.find(".carconfig-mini-actions"),
                b.btnMoreAbout = b.actionsWrapper.find(".btn-more-about"),
                b.changeCarButton = b.actionsWrapper.find(".btn-reset"),
                b.myToyotaButton = b.actionsWrapper.find(".btn-my-toyota"),
                b.cta = $(".carconfig-mini-cta"),
                b.iconChevron.addClass("icon-chevron-down"),
                b.getDropdownWrapper().on("click", "a." + b.CLASS_DISABLED, function(a) {
                    a.preventDefault()
                }),
                b.changeCarButton.on("click", b.reset),
                b.myToyotaButton.on("click", b.save))
            },
            showSummaryDisclaimer: function(a) {
                var c = b.miniConfig.find(".carconfig-mini-summary .disclaimer");
                a ? c.removeAttr("style") : c.css("display", "none")
            },
            switchMobile: function() {
                b.setMobile(!0),
                b.miniConfig.length > 0 && (b.setButtonLook(),
                b.hideDropdowns(),
                b.positionCarImage(),
                b.showSummaryDisclaimer(b.isFinalized))
            },
            switchDesktop: function() {
                b.setMobile(!1),
                b.miniConfig.length > 0 && (b.setButtonLook(),
                b.showDropdowns(),
                b.positionCarImage(),
                b.showSummaryDisclaimer(!0),
                b.isFinalized && (b.hideDropdownsWrapper(),
                b.showNiceOptions(),
                b.showActions(),
                b.showCTA()))
            },
            setMobile: function(a) {
                b.isMobile = a
            },
            setButtonLook: function() {
                var a = "btn btn-simple btn-full-width"
                  , c = b.getDropdowns().find("ul a");
                b.isMobile ? c.addClass(a) : c.removeClass(a)
            },
            hideDropdowns: function() {
                var a = b.getDropdowns();
                if (a.addClass(b.CLASS_HIDE),
                !b.isFinalized) {
                    var c = b.getPreSelectedLink();
                    if (b.hasMobileInit && !b.wasStartedDesktop && c.size())
                        b.hasMobileInit = !1,
                        b.handleSelection({
                            target: c
                        });
                    else {
                        a.find(".dropdown-toggle").not("." + b.CLASS_DISABLED).last().parent().removeClass(b.CLASS_HIDE)
                    }
                }
            },
            showDropdowns: function() {
                b.getDropdowns().removeClass(b.CLASS_HIDE)
            },
            showDropdownsWrapper: function() {
                b.getDropdownWrapper().show()
            },
            hideDropdownsWrapper: function() {
                b.getDropdownWrapper().hide()
            },
            positionCarImage: function() {
                b.isMobile ? b.getImageResult().parent().is(b.getPreviewWrapper()) && b.getSummarylist().before(b.getImageResult()) : b.getImageResult().next().is(b.getSummarylist()) && b.getPreviewWrapper().prepend(b.getImageResult())
            },
            dropdownSwitch: function(a) {
                b.isMobile && (a.addClass(b.CLASS_HIDE),
                a.next().removeClass(b.CLASS_HIDE))
            },
            modelPreselect: function() {
                var a = b.getPreSelectedLink();
                a.length && (b.handleSelection({
                    target: a
                }),
                a.parents(".dropdown").find(".dropdown-toggle").addClass(b.CLASS_DISABLED))
            },
            addToSummary: function(a) {
                if (a) {
                    var c, d, e, f = $("<li>");
                    if (a.parents ? (c = a.parents(".dropdown").data("step"),
                    e = a.text()) : (c = a.key,
                    e = a.value),
                    "wheelDrives" === c && b.getDropdownWrapper().find('.dropdown[data-step="wheelDrives"] .dropdown-menu li').length < 2)
                        return void b.getSummarylist().append(f);
                    d = b.getStepLabel(c),
                    f.html("<strong>" + d + ": </strong>" + e),
                    b.getSummarylist().append(f)
                }
            },
            getStepLabel: function(a) {
                return {
                    models: T1.labels.carconfigMini.selectedModel,
                    bodyType: T1.labels.carconfigMini.selectedBodyType,
                    engine: T1.labels.carconfigMini.selectedEngine,
                    transmission: T1.labels.carconfigMini.selectedTransmission,
                    wheelDrives: T1.labels.carconfigMini.selectedWheelDrive,
                    grades: T1.labels.carconfigMini.selectedGrade,
                    colours: T1.labels.carconfigMini.selectedColour
                }[a] || a
            },
            reset: function(a) {
                if (a.preventDefault(),
                b.step = 0,
                0 === b.getPreSelectedLink().length && (b.jsonData = null),
                b.resetSummary(),
                b.configObj = null,
                b.resetDropdowns(b.step + 1),
                b.isMobile) {
                    b.hideDropdowns();
                    b.getDropdowns().eq(0).removeClass(b.CLASS_HIDE)
                }
                0 === b.getPreSelectedLink().length && b.resetDropdownLabel(0),
                b.showDropdownsWrapper(),
                b.getPriceTable().hide(),
                b.hidePrices(),
                b.hideResultImage(),
                b.hideFinance(),
                b.hideOptionalCTA(),
                b.ecolabel.hide(),
                b.hideNiceOptions(),
                b.hideActions(),
                b.hideCTA(),
                b.resetShareButton(),
                b.resetCarCode(),
                b.isFinalized = !1,
                b.modelPreselect()
            },
            save: function(a) {
                a.preventDefault(),
                b.myToyotaButton.attr("data-car-config-code") && T1.channels.hash.publishAsync(T1.constants.HASH_ADD, "/publish/CARCONFIG_SAVE_CONFIG/configCode=" + b.myToyotaButton.attr("data-car-config-code"))
            },
            handleSelection: function(a) {
                a.preventDefault && a.preventDefault();
                var c = (T1.constants,
                $(a.target))
                  , d = c.data("id")
                  , e = c.parents(".dropdown")
                  , f = e.data("step")
                  , g = c.html();
                if (c.addClass("selected"),
                b.selectedItems.push(c),
                b.setDropdownLabel(e, g),
                b.dropdownSwitch(e),
                b.addToSummary(c),
                b.dropdownIndex = b.getDropdowns().index(e),
                b.dropdownIndex < b.step ? (b.step = b.dropdownIndex + 1,
                c !== b.selectedItems[b.dropdownIndex] && (b.resetDropdowns(b.step),
                b.resetSummary(b.step))) : b.dropdownIndex === b.step && b.step++,
                b.isTrackingEnabled && "click" === a.type) {
                    if (!b.indexFirstUserSelectableDropdown) {
                        b.indexFirstUserSelectableDropdown = b.dropdownIndex;
                        var h, i = e;
                        do {
                            h = i.data("bt-workflowname"),
                            h ? b.workflowName = h : "BODY" === i.prop("tagName") ? b.workflowName = "" : i = i.parent()
                        } while ("string" != typeof b.workflowName)
                    }
                    b.indexFirstUserSelectableDropdown === b.dropdownIndex ? T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: e,
                        extraData: {
                            event: {
                                workflowname: b.workflowName + ";" + b.workflowName,
                                workflowstep: "0;" + e.data("bt-workflowstep")
                            }
                        }
                    }) : T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: e
                    })
                }
                1 === b.step ? b.jsonData && b.getPreSelectedLink().size() ? b.handleDataResponse(b.jsonData, d) : b.requestCarConfigData(d, b.handleDataResponse) : b.step > 1 && (b.selectedSteps[f] = b.selectedLists[b.step - 1][d],
                b.step === b.getDropdowns().length ? b.finalize(b.selectedSteps.grades.energy) : b.handleDataResponse(b.jsonData, d))
            },
            requestCarConfigData: function(a, b) {
                $.getJSON(T1.constants.URI_MINI_CARCONFIG_DATA + a, function(a) {
                    b(a, 0)
                })
            },
            handleDataResponse: function(a, c) {
                var d = $(b.getDropdowns()[b.step])
                  , e = 0 === b.step || 1 === b.step ? a : b.selectedLists[b.step - 1][c]
                  , f = d.data("step");
                if (b.selectedLists[b.step] = e[f],
                b.jsonData !== a) {
                    b.jsonData = a;
                    var g = b.getDropdownWrapper().find('.dropdown[data-step="wheelDrives"]');
                    a.hasWheeldrives && !1 !== a.hasWheeldrives ? g.show() : g.hide()
                }
                b.populateDropdown(d, b.selectedLists[b.step])
            },
            populateDropdown: function(a, c) {
                function d(a, c) {
                    var d = $("<li>")
                      , f = $("<a>");
                    if (0 === b.step ? f.attr("data-id", c.code) : f.attr("data-id", a),
                    b.step === b.getDropdowns().length - 1) {
                        var g = c.rgb;
                        if (void 0 !== g) {
                            if (1 === g.length) {
                                for (var h = "", i = 0; i < 6; i++)
                                    h += g;
                                g = h
                            }
                            var j, k = T1.utilities.contrastYIQ(g);
                            j = "white" === k && "color:" + k + " !important";
                            var l = b.getInlineBackground(g);
                            j ? f.attr("style", l + j) : f.attr("style", l)
                        }
                    }
                    f.html(c.name || c.gradeName),
                    d.append(f),
                    e.append(d)
                }
                var e = $("<ul>");
                b.clearDropdown(a),
                e.addClass(b.CLASS_DROPDOWN_MENU),
                e.attr("role", "menu"),
                c && c.length > 1 ? ($.each(c, d),
                a.append(e),
                b.toggleDropdown(a, !1)) : c && 1 === c.length && (a.find(".dropdown-toggle > .select").html(c[0].name || c[0].gradeName),
                b.toggleDropdown(a, !0),
                d(0, c[0]),
                a.append(e),
                b.handleSelection({
                    target: a.find("ul li:first > a")
                })),
                b.setButtonLook()
            },
            getInlineBackground: function(a) {
                if (a) {
                    var b = !0 === T1.utilities.isTooDark(a, 30) ? 60 : 15
                      , c = T1.utilities.lightenDarken(a, b);
                    return "background: -moz-linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);" + ("-webkit-gradient(left bottom, right top, color-stop(0%, #" + a + "), color-stop(60%, #" + a + "), color-stop(64%, #" + c + "), color-stop(100%, #" + c + "));") + (" -webkit-linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);") + ("-o-linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);") + ("-ms-linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);") + ("background: linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);") + ("filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#" + a + "', endColorstr='#" + c + "', GradientType=1 );") + ("background: -webkit-linear-gradient(20deg, #" + a + " 0%, #" + a + " 60%, #" + c + " 64%, #" + c + " 100%);")
                }
            },
            clearDropdown: function(a) {
                a.children().length > 1 && a.children("." + b.CLASS_DROPDOWN_MENU).remove()
            },
            resetDropdowns: function(a) {
                for (var c = a; c <= b.getDropdowns().length; c++) {
                    var d = $(b.getDropdowns()[c]);
                    d.children().length > 1 && (b.clearDropdown(d),
                    b.toggleDropdown(d, !0),
                    b.resetDropdownLabel(c))
                }
            },
            resetDropdownLabel: function(a) {
                var c = $(b.getDropdowns()[a])
                  , d = [T1.labels.carconfigMini.chooseModel, T1.labels.carconfigMini.chooseBodytype, T1.labels.carconfigMini.chooseEngine, T1.labels.carconfigMini.chooseTransmission, T1.labels.carconfigMini.chooseWheeldrive, T1.labels.carconfigMini.chooseGrade, T1.labels.carconfigMini.chooseColour];
                b.setDropdownLabel(c, d[a])
            },
            setDropdownLabel: function(a, b) {
                a.find(".dropdown-toggle > .select").html(b)
            },
            toggleDropdown: function(a, c) {
                var d = a.children(".dropdown-toggle");
                !0 === c ? d.addClass(b.CLASS_DISABLED) : d.removeClass(b.CLASS_DISABLED)
            },
            resetSummary: function(a) {
                if (a)
                    for (var c = b.getSummarylist().find("li"), d = a - 1, e = c.length - 2; e >= d; e--) {
                        var f = c.eq(e);
                        f.length > 0 && f.remove()
                    }
                else {
                    b.miniConfig.find(".carconfig-mini-summary").removeAttr("style"),
                    b.showSummaryDisclaimer(!1),
                    b.getSummarylist().empty()
                }
            },
            finalize: function(a, c) {
                if (b.resetCarCode(),
                b.dfdCurrentConfig = $.Deferred(),
                c = c || {},
                b.isTrackingEnabled) {
                    var d = {
                        configuration: {
                            type: b.workflowName,
                            modelid: b.jsonData.code,
                            carid: b.selectedSteps.grades.carId + "_" + T1.settings.country + T1.settings.language,
                            extcolorid: b.jsonData.modelId + "_" + b.selectedSteps.colours.id + "_" + T1.settings.country + T1.settings.language
                        }
                    };
                    T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: b.getSummary(),
                        extraData: d
                    })
                }
                b.isFinalized = !0,
                b.showResultImage(),
                b.showSummary(),
                c.skipPrices || (b.showPrices(c.matrix || b.jsonData.finance, c.priceCar, c.priceColour),
                b.loadConfigFinanceData()),
                b.ecolabel.show({
                    energy: a
                }),
                b.isMobile || (b.hideDropdownsWrapper(),
                b.showNiceOptions(),
                b.showActions());
                try {
                    T1.channels.carconfig.publishAsync(T1.constants.CARCONFIG_END, {
                        modelId: b.jsonData.modelId,
                        carId: b.selectedSteps.grades.carId,
                        colourId: b.selectedSteps.colours.id,
                        code: c.code
                    })
                } catch (e) {
                    console.log(e.message)
                }
            },
            loadConfigFinanceData: function() {
                b.isFinalized && (b.hideFinance(),
                b.createConfigObj(),
                b.handleFinanceData(),
                b.showOptionalCTA())
            },
            setShareButton: function(a) {
                b.isFinalized && (T1.social.setCustomTargetUrl(b.miniConfig.find(".share-box a"), "http://bit.ly/" + a),
                b.actionsWrapper && b.actionsWrapper.find(".share-button").css("display", "inline-block"))
            },
            resetShareButton: function() {
                T1.social.setCustomTargetUrl(b.miniConfig.find(".share-box a"), ""),
                b.actionsWrapper && b.actionsWrapper.find(".share-button").hide()
            },
            requestCarCode: function(a) {
                0 !== b.step && (a.code ? b.setCarCode(a) : T1.myToyota.requestCarInfo(a, b.setCarCode, function(a, c, d) {
                    console.log(c + ": " + d),
                    b.resetCarCode()
                }))
            },
            createConfigObj: function(a) {
                try {
                    b.selectedSteps.grades.config && (b.configObj = b.selectedSteps.grades.config,
                    b.configObj.ExteriorColourID = b.selectedSteps.colours.id || b.configObj.ExteriorColourID,
                    b.configObj.TotalPrice = a || b.configObj.TotalPrice)
                } catch (e) {
                    console.log(e.message)
                }
            },
            showSummary: function() {
                b.miniConfig.find(".carconfig-mini-summary").css("display", "block"),
                b.showSummaryDisclaimer(!0)
            },
            showResultImage: function(a, c, d, e) {
                b.getImageResult().data("orig") || b.getImageResult().data("orig", b.getImageResult().attr("src"));
                var f = b.getResultImageUrl(a, c, d, e);
                f && b.getImageResult().attr("src", f)
            },
            getResultImageUrl: function(a, c, d, e) {
                var f = $.safe("T1.utilities.modelMapping.getModelData")(b.jsonData.code)
                  , g = "true" === T1.settings.enableCarDbTokens && f ? f.token : null
                  , h = T1.settings.CCISHost + (g ? T1.constants.URL_TOKEN_MINI_CARCONFIG_IMG : T1.constants.URL_MINI_CARCONFIG_IMG)
                  , i = c || b.selectedSteps.grades.carId
                  , j = d || b.selectedSteps.colours.code;
                if (e = e || b.jsonData.ccVersion && b.jsonData.ccVersion.indexOf("HD") > 0,
                i)
                    return h = h.replace(/\[TOKEN\]/g, g),
                    h = h.replace(/\[MODEL\]/g, a || b.jsonData.modelId),
                    h = h.replace(/\[GRADE\]/g, i),
                    h = h.replace(/\[COLOUR\]/g, j),
                    h = h.replace(/\[VERSION\]/g, e ? T1.constants.HD_IMAGE_DAY : ""),
                    h = h.replace(/\[SIZE\]/g, T1.constants.CAR_IMG_SIZE_555)
            },
            hideResultImage: function() {
                b.getImageResult().attr("src", b.getImageResult().data("orig"))
            },
            showPrices: function(a, c, d) {
                var f = b.getSecurityContext(a);
                if (f.canShowPrice)
                    try {
                        var g = 0
                          , h = 0
                          , i = 0
                          , j = 0
                          , k = !1;
                        c ? g = c : b.selectedSteps.grades.price && (g = parseInt(b.selectedSteps.grades.price[f.priceKey], 10),
                        h = parseInt(b.selectedSteps.grades.price.list, 10),
                        isNaN(h) ? h = g : k = !0),
                        d ? i = d : b.selectedSteps.colours.price && (i = parseInt(b.selectedSteps.colours.price[f.priceKey], 10),
                        j = parseInt(b.selectedSteps.colours.price.list, 10),
                        isNaN(j) ? j = i : k = !0),
                        isNaN(i) && (i = 0),
                        isNaN(j) && (j = 0);
                        var l = g + i
                          , m = h + j
                          , n = 0;
                        b.jsonData.finance.priceFormatMatrix && b.jsonData.finance.priceFormatMatrix.licenseFee && b.jsonData.finance.priceFormatMatrix.licenseFee.ranges.forEach(function(a) {
                            g >= a.min && g <= a.max && (n = a.fee)
                        });
                        var o = b.getPriceTable().find(".color")
                          , p = o.find("td:nth-child(2)");
                        "in-license-fee" === a.priceFormatMatrix.priceType ? p.html(b.formatPricesWithLicenseFee(f.priceFormat, i, n, !0)) : p.text(f.priceFormat.replace(/%s/g, globalize.format(i, "c"))),
                        o.addClass("visible").removeClass("hidden");
                        var q = b.getPriceTable().find(".price")
                          , r = "";
                        if (b.createConfigObj(l),
                        "in-license-fee" === a.priceFormatMatrix.priceType ? q.find("td:nth-child(2)").html(b.formatPricesWithLicenseFee(f.priceFormat, g, n)) : q.find("td:nth-child(2)").text(f.priceFormat.replace(/%s/g, globalize.format(g, "c"))),
                        q.addClass("visible").removeClass("hidden"),
                        k) {
                            var s = void 0 === a.priceFormatMatrix.showDiscountInfo || a.priceFormatMatrix.showDiscountInfo;
                            r = '<span class="promo price">' + f.priceFormat.replace(/%s/g, globalize.format(l, "c")) + (s ? '<span class="icon icon-tag"></span></span><br/><span class="old price">' + f.priceFormat.replace(/%s/g, globalize.format(m, "c")) + "</span>" : "</span>")
                        } else
                            r = "in-license-fee" === a.priceFormatMatrix.priceType ? b.formatPrice(f.priceFormat, l, n) : f.priceFormat.replace(/%s/g, globalize.format(l, "c"));
                        var t = b.getPriceTable().find(".price-total");
                        t.find("td:nth-child(2)").html(r),
                        t.addClass("visible").removeClass("hidden"),
                        b.getPriceTable().show()
                    } catch (e) {
                        console.log(e.message)
                    }
            },
            setCarCode: function(a) {
                if (b.dfdCurrentConfig && b.dfdCurrentConfig.resolve(a),
                b.isFinalized)
                    try {
                        a && null !== a.code && void 0 !== a.code ? (b.getPriceTable().find(".code td:nth-child(2)").text(globalize.format(a.code, "c")),
                        b.getPriceTable().find(".code").show(),
                        b.getConfigBtn().attr("href", "#" + T1.constants.URL_CAR_CONFIG_OVERLAYER + "tyCode=" + globalize.format(a.code, "c")).show(),
                        b.myToyotaButton && b.myToyotaButton.attr("data-car-config-code", globalize.format(a.code, "c")).show().css("display", "inline-block"),
                        T1.settings.carconfigMini.showShareButtonMiniConfig && b.setShareButton(a.code),
                        $(".carconfig-mini-cta .btn-custom").length > 0 && $(".carconfig-mini-cta .btn-custom").each(function() {
                            var b = $(this)
                              , c = a.code;
                            b.data("custom-args", c)
                        })) : b.resetCarCode()
                    } catch (c) {
                        console.log(c.message)
                    }
            },
            resetCarCode: function() {
                b.dfdCurrentConfig && b.dfdCurrentConfig.reject();
                var a = b.getConfigBtn();
                b.getPriceTable().find(".code td:nth-child(2)").empty(),
                b.getPriceTable().find(".code").hide(),
                a.size() && a.removeAttr("href").hide(),
                b.myToyotaButton && b.myToyotaButton.removeAttr("data-car-config-code").hide()
            },
            formatPricesWithLicenseFee: function(a, c, d, e) {
                return e ? globalize.format(c, "c") : a ? b.formatPrice(a, c, d) : void 0
            },
            formatPrice: function(a, b, c) {
                var d, e, f;
                return d = a.match(/\[price\].+\[\/price\]/gi),
                d = (null != d ? d[0].replace(/\[\/?price\]/gi, " ") : "").replace("{value}", globalize.format(b, "c")),
                e = a.match(/\[fee\].+\[\/fee\]/gi),
                e = (null != e ? e[0].replace(/\[\/?fee\]/gi, " ") : "").replace("{value}", globalize.format(c, "c")),
                f = a.match(/\[total\].+\[\/total\]/gi),
                f = (null != f ? f[0].replace(/\[\/?total\]/gi, " ") : "").replace("{value}", globalize.format(b + c, "c")),
                d + " " + e + " " + f
            },
            handleFinanceData: function() {
                b.configObj && "true" !== T1.settings.hidePrices && b.canShowFinance() && T1.financeService.requestFinanceData({
                    configs: b.configObj,
                    success: b.showFinance(b.jsonData.finance),
                    source: "MiniCarConfig"
                })
            },
            canShowFinance: function() {
                return !(!(b.jsonData.finance && b.jsonData.finance.monthlyRateFormatting || "true" === T1.settings.carconfigMini.showMonthlyRateMiniConfig || b.showFinanceButtonMiniConfig() || b.showInsuranceButtonMiniConfig()) || "true" === T1.settings.hidePrices || !T1.financeRates.enabled())
            },
            showFinanceButtonMiniConfig: function() {
                return "true" === T1.settings.carconfigMini.showFinanceButtonMiniConfig && !b.isMobile || "true" === T1.settings.carconfigMini.showFinanceButtonMiniConfigMobile && b.isMobile
            },
            showInsuranceButtonMiniConfig: function() {
                return "true" === T1.settings.carconfigMini.showInsuranceButtonMiniConfig && !b.isMobile || "true" === T1.settings.carconfigMini.showInsuranceButtonMiniConfigMobile && b.isMobile
            },
            hideFinance: function() {
                var a = b.miniConfig.find(".price-monthly")
                  , c = b.miniConfig.find(".finance-rate-details")
                  , d = b.miniConfig.find(".finance-quote")
                  , e = b.getFinanceBtn();
                a.removeClass("visible").addClass("hidden"),
                c.removeClass("visible").addClass("hidden"),
                d.removeClass("visible").addClass("hidden"),
                a.find(".price-monthly-value").empty(),
                c.find(".finance-rate-details-value").empty(),
                d.empty(),
                e.size() && e.removeClass("visible").addClass("hidden")
            },
            hidePrices: function() {
                b.getPriceTable().find(".color, .price, .price-total").removeClass("visible").addClass("hidden").find("td:nth-child(2)").empty()
            },
            hideOptionalCTA: function() {
                var a = b.getOptionalBtn();
                a.size() && a.removeClass("visible").addClass("hidden")
            },
            showOptionalCTA: function() {
                var a = b.getOptionalBtn();
                a.size() && (a.addClass("visible").removeClass("hidden"),
                b.showCTA())
            },
            showFinance: function(a) {
                return function(c) {
                    if (c.error)
                        return void console.log(c.message);
                    if (b.isFinalized) {
                        var d = c.show || (c.query && c.query.results ? c.query.results.json : null) || c || {}
                          , f = b.miniConfig.find(".price-monthly")
                          , g = b.miniConfig.find(".finance-quote")
                          , h = b.miniConfig.find(".finance-rate-details")
                          , i = h.find(".finance-rate-details-value")
                          , j = b.getSecurityContext(a, c, d);
                        try {
                            if (j.canShowRates) {
                                if (d.miniccRate) {
                                    if (j.canShowMonthlyPrice) {
                                        var k = c.rate.monthlyPayment.formatted;
                                        k.indexOf("&nbsp;") > -1 && (k = k.replace(/&nbsp;/g, " ")),
                                        f.find(".price-monthly-value").html(k),
                                        f.addClass("visible").removeClass("hidden")
                                    }
                                    var l = $.safe("T1.financeService.formatFinanceString")(j.financeFormatString, c.rate, d);
                                    l && (i.html(l).find(".expansion-content").toggleClass("medium-grey", b.isMobile),
                                    h.addClass("visible").removeClass("hidden")),
                                    b.getPriceTable().show()
                                }
                                if (j.canShowDisclaimer) {
                                    var m = T1.labels.viewFinanceDisclaimer || T1.labels.viewDisclaimer
                                      , n = c.rate.productName ? c.rate.productName.formatted : m
                                      , o = $.safe("T1.financeService.getDisclaimer")(c.rate, !0, "true" === T1.settings.carconfigMini.showFinanceDisclaimerInOverlayMiniConfig ? n : null);
                                    o && ("true" === T1.settings.carconfigMini.showFinanceDisclaimerInOverlayMiniConfig ? (i.append($('<a href="#" class="readMore" />').html(m).attr("data-tooltip-selector", "#miniCCDisclaimer")),
                                    i.append($.safe("T1.financeService.getExpansionContainer")("miniCCDisclaimer", o).toggleClass("medium-grey", b.isMobile)),
                                    h.addClass("visible").removeClass("hidden")) : (g.html(o),
                                    g.addClass("visible").removeClass("hidden")),
                                    b.getPriceTable().show())
                                }
                            }
                            b.showFinanceButtonMiniConfig() && d.miniccFinance && (T1.ctaButton.initOnDemand({
                                button: b.getFinanceBtn(),
                                config: b.configObj
                            }),
                            b.getFinanceBtn().addClass("visible").removeClass("hidden"),
                            b.showCTA(),
                            b.getFinanceBtn().parent().hide(),
                            b.getFinanceBtn().parent().fadeIn());
                            var p = b.getOptionalBtn();
                            p.size() && p.addClass("visible").removeClass("hidden"),
                            b.showInsuranceButtonMiniConfig() && d.miniccInsurance && (T1.ctaButton.initOnDemand({
                                button: b.getBtnInsurance(),
                                config: b.configObj
                            }),
                            b.getBtnInsurance().addClass("visible").removeClass("hidden"),
                            b.showCTA(),
                            b.getBtnInsurance().parent().hide(),
                            b.getBtnInsurance().parent().fadeIn())
                        } catch (e) {
                            console.log("error showing finance information " + e)
                        }
                    }
                }
            },
            getSecurityContext: function(a, b, c) {
                return a = $.isEmptyObject(a) ? null : a,
                {
                    canShowRates: !!(a && a.monthlyRateFormatting || !a && "true" === T1.settings.carconfigMini.showMonthlyRateMiniConfig),
                    canShowMonthlyPrice: !(a || !b || !b.rate || !b.rate.monthlyPayment),
                    canShowDisclaimer: !(a || !c || !c.miniccRate && !c.miniccFinance),
                    financeFormatString: a && a.monthlyRateFormatting && a.monthlyRateFormatting.formats ? a.monthlyRateFormatting.formats.join(" ") : T1.labels.carconfigMini.priceRates,
                    canShowPrice: !("true" === T1.settings.hidePrices || a && a.priceFormatMatrix && a.priceFormatMatrix.hidden),
                    priceKey: a && a.priceData ? a.priceData : "listWithDiscount",
                    priceFormat: a && a.priceFormatMatrix && a.priceFormatMatrix.format ? a.priceFormatMatrix.format : "%s"
                }
            },
            showNiceOptions: function() {
                var a = b.getNiceOptions();
                b.niceSummary.html(a),
                b.niceSummary.show()
            },
            getNiceOptions: function() {
                var a = "";
                return b.getSummarylist().find("li").each(function(b, c) {
                    var d = $(this).clone().children().remove().end().text();
                    d && "" !== d && (0 !== b && 2 !== b && (a += ", "),
                    0 === b && (a += "<h3>"),
                    a += d,
                    1 === b && (a += "</h3>"))
                }),
                a
            },
            hideNiceOptions: function() {
                b.niceSummary && (b.niceSummary.hide(),
                b.niceSummary.html())
            },
            showActions: function() {
                if (b.getPreSelectedLink().size())
                    b.btnMoreAbout.hide();
                else {
                    var a = b.getSummarylist().find("li").eq(0).clone().children().remove().end().text();
                    b.btnMoreAbout.text(T1.labels.moreAbout + " " + a);
                    var c = b.jsonData.links.CarChapter;
                    b.btnMoreAbout.attr("href", c),
                    b.btnMoreAbout.show()
                }
                b.actionsWrapper && b.actionsWrapper.show()
            },
            hideActions: function() {
                b.actionsWrapper && (b.actionsWrapper.hide(),
                b.btnMoreAbout.text(""))
            },
            showCTA: function() {
                b.cta && b.cta.show()
            },
            hideCTA: function() {
                b.cta && b.cta.hide()
            },
            ecolabel: {
                setting: (T1.settings && T1.settings.useEcoLabels || "").toLowerCase(),
                show: function(a) {
                    b.ecolabel.init(),
                    "true" === b.ecolabel.setting ? b.ecolabel.generateClientSide(a.energy) : "il" === b.ecolabel.setting && b.dfdCurrentConfig && b.dfdCurrentConfig.done(b.ecolabel.generateServerSide)
                },
                init: function(a) {
                    b.ecolabel.section || ("il" === b.ecolabel.setting ? (b.ecolabel.section = $("<div></div>").addClass("carconfig-mini-ecolabels"),
                    b.miniConfig.after(b.ecolabel.section)) : (b.ecolabel.section = $(".carconfig-mini-ecolabels"),
                    b.ecolabel.image = b.ecolabel.section.find(".eco-grade"),
                    b.ecolabel.table = b.ecolabel.section.find(".eco-table"),
                    b.ecolabel.section.find("h3").html(T1.settings.ecoLabel.title),
                    b.ecolabel.section.find("h4").html(T1.settings.ecoLabel.intro),
                    b.ecolabel.section.find(".ecolabels-disclaimer").html(T1.settings.ecoLabel.disclaimer),
                    b.ecolabel.section.find(".ecolabels-specs-condition").html(T1.settings.ecoLabel.specsCondition)))
                },
                generateServerSide: function(a) {
                    requirejs(["/scripts/components/integration/T1-injection-components.js"], function(c) {
                        postal.publish({
                            channel: c.contract.channel,
                            topic: c.contract.evtInject,
                            data: {
                                model: a.code,
                                target: b.ecolabel.section,
                                component: "energyefficiency",
                                url: "/cardata/energyefficiency",
                                callback: function() {
                                    b.ecolabel.section.removeClass("hidden")
                                }
                            }
                        })
                    })
                },
                generateClientSide: function(a) {
                    try {
                        var c = a && a.value && a.value.toLowerCase();
                        c = c.replace(/\+/g, "Plus");
                        var d = T1.settings.ecoLabel.images
                          , f = "";
                        for (var g in d)
                            if (d.hasOwnProperty(g) && g === c) {
                                f = d[g];
                                break
                            }
                        b.ecolabel.image.attr("src", f);
                        for (var h in a)
                            if (a.hasOwnProperty(h) && a[h] !== c) {
                                var i = a[h].name
                                  , j = a[h].value
                                  , k = a[h].unit;
                                if (k && j) {
                                    var l = $("<tr/>")
                                      , m = $("<td/>");
                                    m.text(i);
                                    var n = $("<td/>");
                                    n.text(j + " " + k),
                                    l.append(m),
                                    l.append(n),
                                    b.ecolabel.table.find("tbody").prepend(l)
                                }
                            }
                        b.ecolabel.section.removeClass("hidden").show()
                    } catch (e) {
                        console.log(e.message)
                    }
                },
                hide: function() {
                    b.ecolabel.init(),
                    b.ecolabel.table && b.ecolabel.table.find("tr").not(":last").remove(),
                    b.ecolabel.section.addClass("hidden")
                }
            }
        }
          , b = a;
        return {
            init: a.init,
            initMobile: a.initMobile,
            initDesktop: a.initDesktop,
            switchMobile: a.switchMobile,
            switchDesktop: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.integrator = function() {
        "use strict";
        var a = {
            urlContent: "",
            subscriptions: {},
            init: function() {
                var c = a;
                c.subscriptions.load = T1.channels.figure.subscribe(T1.constants.IFRAME_REQUEST, c.handleIframeRequest),
                b(window).on("message", c.handleMessage)
            },
            handleMessage: function(a) {
                if (a && "message" === a.type)
                    try {
                        var b = a.originalEvent
                          , c = JSON.parse(b.data)
                          , d = c.eventName
                          , e = c.functionName
                          , f = c.eventChannel ? postal : T1.channels;
                        if (d)
                            c.sync ? f.publish({
                                channel: c.eventChannel,
                                topic: d,
                                data: c.data
                            }) : f.publishAsync({
                                channel: c.eventChannel,
                                topic: d,
                                data: c.data
                            });
                        else if (e) {
                            for (var g = e.split("."), h = g.pop(), i = window, j = 0; j < g.length; j++)
                                i = i[g[j]];
                            i[h](c.data)
                        }
                    } catch (e) {
                        return !0
                    }
            },
            handleIframeRequest: function(c) {
                var d = a
                  , e = "?";
                c.url && (d.urlContent = c.url),
                c.content && (d.urlContent = T1.settings[c.content].urlContent.replace(/\s+/g, "") || "//osb-b2c-ui-dev.s3-website-eu-west-1.amazonaws.com/",
                delete c.content),
                b.each(c, function(a, b) {
                    e += a + "=" + b + "&"
                }),
                e.length > 0 && (e = e.slice(0, -1),
                d.urlContent += e,
                d.urlContent = d.urlContent.replace(/^(http)(s)*(:)(\/\/)*/gi, "//")),
                T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                    type: "box-iframe",
                    hashAction: !0,
                    url: d.urlContent,
                    noScroll: !T1.utilities.isIOS(),
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN
                })
            }
        };
        return {
            init: a.init,
            show: a.show
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.flipBook = function() {
        "use strict";
        var a = {
            initDesktop: function() {
                var c = b(".flipBook");
                c.length && T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                    elements: c,
                    options: {
                        once: !0,
                        callback: function() {
                            a.initOnDemand(c)
                        }
                    }
                }),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(c) {
                    a.initOnDemand(c.container),
                    b.safe("T1.social.share.init")(c.container.find(".share-button"))
                })
            },
            initOnDemand: function(c) {
                c.find(".fb5").length && (b.flipbook ? b.flipbook(c) : Modernizr.csstransforms ? b.loadScript("/scripts/flipbook/turn.min.js").done(function(b, c) {
                    a.loadFlipbook()
                }) : b.loadScript("/scripts/flipbook/turn.html4.min.js").done(function(b, c) {
                    a.loadFlipbook()
                }))
            },
            loadFlipbook: function() {
                b.loadScript("/scripts/flipbook/flipbook.js")
            }
        };
        return {
            initDesktop: a.initDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.filterbar = function() {
        "use strict";
        var a = {
            init: function() {
                b("body").on("click", ".filter-bar a.btn", function(c) {
                    b(this).data("nopreventdefault") || (c.preventDefault(),
                    a.setButtonFocus(b(this)))
                })
            },
            setButtonFocus: function(a) {
                var c = a.closest(".filter-bar");
                1 === b("a.btn", c).length || a.hasClass("fb-toggle") || (c.find("a.btn").removeClass("active"),
                a.addClass("active"))
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.statistics = function() {
        "use strict";
        var b = {
            statsTracked: [],
            currentObject: {},
            base: {},
            ignoreBtTags: "%track%scroll%collapse%state%click%",
            settings: {},
            scrollingElements: null,
            brightTagPrefix: "bt",
            initialized: !1,
            init: function() {
                T1.channels.statistics.subscribe(d.STATS_BASE_UPDATE, c.refreshBaseObj),
                T1.channels.statistics.subscribe(d.STATS_SUFFIX_CONTAINER, c.suffixAttrValues),
                T1.channels.statistics.subscribe(d.STATS_BASE_REFRESH, c.refreshBaseObj),
                window.t1DataLayer && (c.settings = window.t1DataLayer.settings || {},
                c.updateBaseObject(),
                c.subscriptions(),
                c.base = c.extendObject({}, window.t1DataLayer),
                c.updateCTAElements())
            },
            subscriptions: function() {
                c.initialized = !0,
                T1.channels.statistics.subscribe(d.STATS_USER_UPDATE, c.updateUserInfo),
                a.$("body").on("click", "[data-bt-track]", c.trackLinkData),
                c.settings.trackScroll && (T1.channels.statistics.subscribe(d.STATS_TRACK_SECTIONSCROLL, c.trackScroll),
                T1.channels.scrolling.publishAsync(d.SCROLL_TRACK_ADD, {
                    elements: a.$("[data-bt-scroll]"),
                    options: {
                        once: !0,
                        event: d.STATS_TRACK_SECTIONSCROLL,
                        threshold: "-25%"
                    }
                })),
                T1.channels.statistics.subscribe(d.STATS_TRACK, c.track),
                T1.channels.statistics.subscribe(d.STATS_TRACK_CAROUSEL, c.trackCarousel),
                T1.channels.dialog.subscribe(d.STATS_TRACK_CLOSE_OVERLAYER, c.trackCloseOverlayerData),
                T1.channels.dialog.subscribe(d.STATS_TRACK_OTHERFEATURES_VIEWALL, c.trackOtherfeaturesViewAll),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_STORED_CAR, c.trackMyToyotaEvents),
                T1.channels.media.subscribe(d.GALLERY_SCROLL, c.trackGalleryScroll),
                T1.channels.social.subscribe(d.SOCIAL_SHARED, c.trackShare),
                T1.channels.form.subscribe(d.FORM_LOAD, c.trackFormLoad),
                T1.channels.dealer.subscribe(d.DEALER_SELECTED, c.trackDealerSelected),
                T1.channels.form.subscribe(d.FORM_MODEL_SELECTED, c.trackModelSelected),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_TAB_SWITCH, c.trackMyToyotaTabSwitch),
                T1.channels.form.subscribe(d.NAVIGATION_FORM_UPDATE, c.trackNavigationFormUpdate),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_SAVED_CAR, c.trackMyToyotaSavedCar),
                T1.channels.form.subscribe(d.FORM_VALIDATION_FAILED, c.trackFormValidationFailed),
                T1.channels.form.subscribe(d.SUBMIT_FORM_RETURN, c.trackSubmitFormReturn),
                T1.channels.mytoyota.subscribe(d.MY_TOYOTA_CAR_ALREADY_SAVED, c.trackMyToyotaCarAlreadySaved),
                T1.channels.search.subscribe(d.SEARCH, c.trackSearch),
                T1.channels.tab.subscribe(d.TABS_SWITCH, c.trackTabsSwitch),
                T1.channels.search.subscribe(d.SEARCH_BUILT_RESULTS, c.trackSearchBuiltResults),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPANDED, c.trackCollapsiblePanelExpandedOrCollapsed),
                T1.channels.finance.subscribe(d.FINANCE_RATES_ON, c.trackFinanceRatesOn),
                T1.channels.finance.subscribe(d.FINANCE_RATES_OFF, c.trackFinanceRatesOff)
            },
            updateBaseObject: function() {
                var a = window.t1DataLayer;
                if (a) {
                    var b = location.href;
                    a.userinfo = c.getUserInfo(a.userinfo),
                    "string" == typeof b && -1 !== b.indexOf("#") && (a.page || (a.page = {}),
                    a.page.entrycomponent = b.substr(b.indexOf("#") + 1))
                }
            },
            refreshBaseObj: function(b) {
                var d = b.baseObj;
                if (b.extend)
                    d = a._.merge(d || c.base, b.extend);
                else if (!d)
                    return;
                c.base = d,
                c.base.userinfo = c.getUserInfo(c.base.userinfo),
                window.t1DataLayer = c.base,
                c.initialized || c.subscriptions()
            },
            getUserInfo: function(a) {
                var b = {}
                  , d = T1.mypage ? T1.mypage.user : null;
                return d && (b.status = "loggedin",
                d._id && (b.userid = d._id),
                b.category = "mytoyota-user"),
                a && a.eprivacy && (b.eprivacy = a.eprivacy),
                b.platform = c.getPlatform(),
                b
            },
            updateUserInfo: function() {
                c.base.userinfo = c.getUserInfo(c.base.userinfo)
            },
            getPlatform: function() {
                var b = navigator.userAgent ? navigator.userAgent : ""
                  , c = b.toLowerCase();
                if (/phone/.test(c))
                    return "mobile";
                if (/tablet|(pad(\d|\b))/.test(c))
                    return "tablet";
                if (/tv\b/.test(c))
                    return "smart-tv";
                var d = navigator.appVersion ? navigator.appVersion : ""
                  , e = c + " " + d.toLowerCase();
                if (/mobile/.test(e))
                    return "mobile";
                if (/android|blackberry/.test(e)) {
                    var f = window.innerWidth || a.$(window).innerWidth()
                      , g = window.innerHeight || a.$(window).innerHeight();
                    return (f > g ? f : g) < 770 ? "mobile" : "tablet"
                }
                return "pc"
            },
            updateCTAElements: function() {
                for (var b = a.$(".inpage-cta"), c = null, d = null, e = 0; e < b.length; e++)
                    c = b.eq(e),
                    d = c.prev(),
                    c.attr("data-bt-componentname", d.attr("data-bt-componentname") || window.t1DataLayer.page.name),
                    c.attr("data-bt-category", d.attr("data-bt-category") || "component")
            },
            trackGalleryScroll: function(b) {
                var c = null;
                c = "own_toyota" === a.$(b).closest("section").data("bt-componentname") ? "browse" : "topfeatures-v2" === a.$(b).closest("section").attr("id") ? "browse_features" : "scroll_gallery",
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.$(b),
                    extraData: {
                        event: {
                            eventclass: "componentevent",
                            action: "click_function",
                            value: c
                        }
                    }
                })
            },
            trackShare: function(a) {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.node,
                    extraData: {
                        event: {
                            href: a.href,
                            value: a.url
                        }
                    }
                })
            },
            trackSearch: function(b) {
                if (c.isSearchFormOpenedAfterNewSearch = !0,
                b && b.origin && "menu" === b.origin) {
                    var e, f = a.$("#menu-search");
                    f.length > 0 ? e = {
                        value: b.q
                    } : (f = a.$("#mySearch"),
                    e = {
                        eventclass: "navevent",
                        category: "component",
                        componentname: "top_menu",
                        action: "search-tool",
                        value: b.q
                    }),
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: f,
                        extraData: {
                            event: e
                        }
                    })
                }
            },
            trackDealerSelected: function(a) {
                var b = a.dealer;
                c.selectedDealerTrackingData = {
                    dealerid: b.guid || b.id || b.uuid || b.localDealerID,
                    dealername: b.name
                }
            },
            trackModelSelected: function(a) {
                c.selectedModelTrackingData = {
                    modelid: a.code,
                    modelname: a.name
                },
                a.engine && (c.selectedModelTrackingData.ishybrid = "hybrid" === a.engine ? "1" : "0")
            },
            trackMyToyotaTabSwitch: function(b) {
                var c = a.$("#" + b);
                switch (b) {
                case "pane-save-car":
                    c.closest(".authenticated").length ? T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: c.find("#form-save-car")
                    }) : T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: c
                    });
                    break;
                case "pane-login":
                    if (T1.settings && T1.settings.ssoUseMicroService && "true" === T1.settings.ssoUseMicroService.toLowerCase())
                        break;
                case "pane-register":
                case "pane-forgotten-password":
                case "pane-my-cars":
                case "pane-my-dealer":
                case "pane-owners-area":
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: c
                    })
                }
            },
            trackNavigationFormUpdate: function(a) {
                var b, e = a.stepContainer, f = a.number;
                e.length && (2 === f && e.closest('form[name="form-send-to-dealer"]').length ? T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: e,
                    extraData: {
                        event: {
                            value: "contact-details",
                            workflowstep: "4"
                        }
                    }
                }) : e.closest(".trade-in-form-v2-container").length ? 2 !== f && 3 !== f || T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: e,
                    extraData: {
                        dealer: c.selectedDealerTrackingData
                    }
                }) : e.closest(".testdrive-form-v2").length && (2 !== f && 3 !== f || (b = {
                    event: {
                        value: 2 === f ? "select-dealer" : "contact-details",
                        workflowstep: "" + f,
                        modelname: c.selectedModelTrackingData.modelname
                    },
                    model: c.selectedModelTrackingData
                },
                3 === f && (b.dealer = c.selectedDealerTrackingData),
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: e,
                    extraData: b
                }))))
            },
            trackTabsSwitch: function(b) {
                if ("pane-search" === b) {
                    var e = a.$("#" + b);
                    !0 !== c.isSearchFormOpenedAfterNewSearch && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: e
                    })
                } else
                    c.isSearchFormOpenedAfterNewSearch = !1
            },
            trackSearchBuiltResults: function(b) {
                var c = a.$("#pane-search")
                  , e = "search-results" + (b.isBrowsingResults ? "-browse" : "");
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: c,
                    extraData: {
                        event: {
                            eventclass: "searchevent",
                            value: e
                        },
                        search: {
                            type: "search-tool",
                            query: b.query,
                            results: b.resultCount > 0 ? "1" : "0",
                            category: b.options.join(";")
                        }
                    }
                })
            },
            trackFormValidationFailed: function(b) {
                var c = a.$(b.form);
                switch (c.attr("id")) {
                case "form-my-cars":
                case "form-login":
                case "form-register":
                case "form-forgotten-password":
                case "form-save-car":
                case "form-login-save-car":
                    c.attr("data-bt-state", "fail"),
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: c.find(".btn-submit")
                    })
                }
            },
            trackSubmitFormReturn: function(b) {
                var e, f, g, h = a.$(b.form), i = h.attr("id"), j = "", k = "";
                if (h.hasClass("testdrive-form-v2")) {
                    if ("success" === b.status && b.data && b.data.success) {
                        var l = {};
                        "form-send-to-dealer" === h.attr("name") ? (g = h.data("extra-data") || {},
                        l = {
                            configuration: {
                                toyotacode: g.car || g.carId || ""
                            }
                        }) : (k = h.find('input[name="model"]').val(),
                        l = {
                            event: {
                                workflowstep: "4",
                                modelname: k || ""
                            },
                            model: c.selectedModelTrackingData,
                            dealer: c.selectedDealerTrackingData
                        }),
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit"),
                            extraData: l
                        })
                    }
                } else if (h.hasClass("newsletter-form-v2"))
                    "success" === b.status && b.data && b.data.success && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: h.find(".btn-submit")
                    });
                else if (h.hasClass("brochure-form-v2"))
                    "success" === b.status && b.data && b.data.success && (k = h.find('input[name="model"]').val(),
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: h.find(".btn-submit"),
                        extraData: {
                            event: {
                                workflowstep: "4",
                                modelname: k || ""
                            },
                            model: c.selectedModelTrackingData
                        }
                    }));
                else if (h.hasClass("personal-brochure-form-v2"))
                    "success" === b.status && b.data && b.data.success && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: h.find(".btn-submit"),
                        extraData: {
                            event: {
                                type: a.$(h.context).hasClass("btn-download") ? "download" : "e-mail"
                            }
                        }
                    });
                else if (h.hasClass("trade-in-form-v2"))
                    "success" === b.status && b.data && b.data.success && (g = {
                        dealer: c.selectedDealerTrackingData
                    },
                    h.closest("#get-quote").length && (g.model = c.selectedModelTrackingData),
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: h.find(".btn-submit"),
                        extraData: g
                    }));
                else if (h.parent().hasClass("form-v2") && "form-send-to-dealer" === h.attr("name"))
                    "success" === b.status && b.data && b.data.success && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: h.find(".btn-submit"),
                        extraData: {
                            event: {
                                workflowstep: "5"
                            }
                        }
                    });
                else
                    switch (i) {
                    case "form-my-cars":
                        e = "success" === b.status ? "success" : "fail",
                        h.attr("data-bt-state", e),
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit")
                        });
                        break;
                    case "form-login":
                    case "form-register":
                    case "form-forgotten-password":
                    case "form-login-save-car":
                    case "form-save-car":
                        e = "success" === b.status && b.data && b.data.success ? "success" : "fail",
                        "success" === e && "form-save-car" === i || (h.attr("data-bt-state", e),
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit")
                        }));
                        break;
                    case "form-contact":
                    case "form-chrContact":
                        if ("success" === b.status && b.data && b.data.success) {
                            var m;
                            h[0].formType && -1 !== h[0].formType.value.indexOf("v2") ? h.data("extra-data") && (m = h.data("extra-data").extraInfo) : m = h.find("#extra-info").val(),
                            T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                                node: h.find(".btn-submit"),
                                extraData: {
                                    event: {
                                        value: "form-submit-" + (m || "")
                                    }
                                }
                            })
                        }
                        break;
                    case "form-contact-dealer":
                        if ("success" === b.status && b.data && b.data.success) {
                            var n = h.find(".tagging-toyota-code");
                            f = 1 === n.length ? n.text() : "",
                            T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                                node: h.find(".btn-submit"),
                                extraData: {
                                    configuration: {
                                        toyotacode: f
                                    }
                                }
                            })
                        }
                        break;
                    case "form-brochure":
                    case "form-testdrive":
                        "success" === b.status && b.data && b.data.success && (h.find('input[name="model"]:checked').each(function(b, c) {
                            k += ";" + c.value,
                            (f = a.$(c).data("code")) && (j += ";" + f)
                        }),
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit"),
                            extraData: {
                                event: {
                                    modelid: j.substr(1),
                                    modelname: k.substr(1)
                                }
                            }
                        }));
                        break;
                    case "form-send-pdf":
                        "success" === b.status && b.data && b.data.success && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit")
                        });
                        break;
                    case "form-personalized-ebrochure":
                    case "form-download-personalized-ebrochure":
                        "success" === b.status && b.data && b.data.success && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: h.find(".btn-submit"),
                            extraData: {
                                event: {
                                    type: -1 !== i.indexOf("download") ? "download" : "e-mail"
                                }
                            }
                        })
                    }
            },
            trackMyToyotaCarAlreadySaved: function(b) {
                var c = a.$("#form-save-car")
                  , e = c.find(".btn-submit");
                c.attr("data-bt-state", "fail"),
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: e
                })
            },
            trackMyToyotaSavedCar: function(b) {
                var c = a.$("#form-save-car")
                  , e = Object.resolve("T1.loadSave")
                  , f = c.find(".btn-submit")
                  , g = b && b.car && b.car.code || ""
                  , h = "_" + T1.settings.country + T1.settings.language
                  , i = {
                    type: "saveconfig",
                    configcode: g
                };
                if (e) {
                    c.attr("data-bt-state", "success");
                    var j = e.get({
                        tyCode: g
                    }).done(function(a) {
                        if (a && a.ModelID) {
                            if (i.modelid = a.ModelID,
                            i.carid = (a.CarID ? a.CarID : "") + h,
                            i.extcolorid = a.ModelID + "_" + (a.ExteriorColourID ? a.ExteriorColourID : "") + h,
                            i.intcolorid = a.ModelID + "_" + (a.UpholsteryID ? a.UpholsteryID : "") + h,
                            i.optionlist = a.Options.length ? a.Options.map(function(b) {
                                return a.ModelID + "_" + b + h
                            }).join(";") : "no_option",
                            i.accessorylist = a.Accessories.length ? a.Accessories.map(function(b) {
                                return a.ModelID + "_" + b + h
                            }).join(";") : "no_accessory",
                            a.Packs.length) {
                                i.packs = {};
                                for (var b = 0; b < a.Packs.length; b++)
                                    i.packs[a.Packs[b] + h] = {}
                            } else
                                i.packs = "no_pack";
                            i.accessories = Array.isArray(i.accessorylist) && i.accessorylist || [],
                            i.options = Array.isArray(i.optionList) && i.optionList || []
                        }
                    })
                      , k = e.get({
                        tyCode: g,
                        type: "full"
                    }).done(function(b) {
                        if (b && b.price) {
                            var c = a.$.isArray(b.price.spotlights) ? b.price.spotlights : []
                              , d = a.$.isArray(b.price.discounts) ? b.price.discounts : []
                              , e = a.$.merge(c, d);
                            i.promotionlist = e.length ? e.join(";") : "no_promotion"
                        }
                    });
                    a.$.when(j, k).always(function() {
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: f,
                            extraData: {
                                configuration: i
                            }
                        })
                    })
                }
            },
            trackMyToyotaEvents: function(a) {
                a.topic === d.MY_TOYOTA_DELETED_CAR && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    extraData: {}
                })
            },
            trackFormLoad: function(b) {
                if (b) {
                    var c = a.$(b)
                      , e = c.attr("id");
                    if (c.hasClass("testdrive-form-v2") || c.hasClass("newsletter-form-v2") || c.hasClass("brochure-form-v2") || c.hasClass("personal-brochure-form-v2"))
                        T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: c
                        });
                    else
                        switch (e) {
                        case "form-contact":
                        case "form-chrContact":
                        case "form-brochure":
                        case "form-personalized-ebrochure":
                        case "form-testdrive":
                        case "form-contact-dealer":
                        case "form-send-pdf":
                            T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                                node: c
                            })
                        }
                }
            },
            trackCollapsiblePanelExpandedOrCollapsed: function(a) {
                var b, c = a.panel, e = a.headerClicked;
                if (c.length > 0 && void 0 !== c.data("bt-click")) {
                    if (e) {
                        var f = "." + (!0 === a.active ? "hidden" : "visible") + "-active"
                          , g = e.find(f);
                        g.length > 0 && T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                            node: g
                        })
                    }
                } else
                    b = {
                        node: c
                    },
                    a.root && a.root.length > 0 && void 0 !== a.root.data("custom-tag") ? c.length > 0 && c.attr("data-bt-state", !0 === a.active ? "" : "collapse") : b.extraData = {
                        event: {
                            action: "click_function",
                            value: !0 === a.active ? "expand" : "collapse"
                        }
                    },
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, b)
            },
            trackFinanceRatesOn: function(a) {
                a && "toggledByUser" === a.event && c.trackFinanceRatesOnOrOffToggled(a.el, "show_rate")
            },
            trackFinanceRatesOff: function(a) {
                a && "toggledByUser" === a.event && c.trackFinanceRatesOnOrOffToggled(a.el, "hide_rate")
            },
            trackFinanceRatesOnOrOffToggled: function(a, b) {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a,
                    extraData: {
                        event: {
                            action: "click_function",
                            value: b
                        }
                    }
                })
            },
            trackCarousel: function(b) {
                var c = a.$(b.el).closest(".carousel")
                  , e = c.find(".item.active")
                  , f = e.data("dataNode")
                  , g = e.data("type")
                  , h = null
                  , i = {
                    event: {}
                };
                if (!0 === c.hasClass("topfeatures-v2-carousel") && (g = "topfeatures-v2"),
                c.is(":visible") && c.inView() > 25) {
                    if (b.userInitiated)
                        switch (g) {
                        case "image":
                            i.event.assettype = g,
                            i.event.value = e.find("img").data("lazy-load"),
                            i.event.assetname = i.event.value,
                            i.event.eventclass = "assetevent";
                            break;
                        case "video":
                            h = e.find(".posterWrapper"),
                            i.event.assettype = g,
                            i.event.value = h.data("video-mp4") || h.data("video-flv") || h.data("video-ogv") || h.data("video-webm"),
                            i.event.assetname = i.event.value,
                            i.event.eventclass = "assetevent";
                            break;
                        case "external-video":
                            i.event.assettype = "video",
                            i.event.value = e.find("iframe").prop("href"),
                            i.event.assetname = i.event.value,
                            i.event.eventclass = "assetevent";
                            break;
                        case "topfeatures-v2":
                            i.event.category = "component",
                            i.event.eventclass = "componentevent",
                            i.event.componentname = "topfeatures-v2",
                            i.event.action = "click_function",
                            i.event.value = "browse_features",
                            f = c.parents("div.carchapter-topfeatures-v2")
                        }
                    else
                        switch (g) {
                        case "homepageFocus":
                        case "ad":
                            if (e.hasClass("viewedTracked"))
                                return;
                            e.addClass("viewedTracked"),
                            i.event.action = e.attr("data-bt-action").replace(/browse/i, "view");
                            break;
                        default:
                            return
                        }
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: f || e,
                        extraData: i
                    })
                }
            },
            trackScroll: function(a) {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.element,
                    extraData: {
                        event: {
                            eventclass: "scrollevent",
                            action: "view_scroll",
                            value: a.element.data("bt-componentname")
                        }
                    }
                })
            },
            trackLinkData: function() {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.$(this)
                })
            },
            trackCloseOverlayerData: function(a) {
                a.on("click", function(b) {
                    T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                        node: a
                    })
                })
            },
            trackOtherfeaturesViewAll: function(b) {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.$(b.target)
                })
            },
            trackCallback: function(b) {
                T1.channels.statistics.publishAsync(d.STATS_TRACK, {
                    node: a.$(b.target)
                })
            },
            track: function(b) {
                var d = b.node || a.$("body")
                  , e = b.extraData || null;
                c.trackNodeData(d, e)
            },
            trackNodeData: function(b, f) {
                var g, h, i, j = [];
                void 0 !== b && 0 !== b.length || (b = a.$("body")),
                b instanceof a.$ || (b = a.$(b));
                var k = c.getState(b);
                if ("no-tracking" !== k) {
                    c.currentObject = f || {},
                    g = c.crawlData(b, k, j);
                    for (var l in g.event)
                        "null" === g.event[l] && delete g.event[l];
                    if (c.extendDataLayer(g),
                    g.event)
                        if ("string" == typeof (h = g.event.eventclass || g.event.eventClass) && h.length > 0) {
                            if (T1.channels.media.publishAsync(d.CTA_EVENT, {
                                eventClass: h
                            }),
                            i = h.substr(0, h.indexOf("event")),
                            !1 !== c.settings["track" + i.charAt(0).toUpperCase() + i.substr(1)])
                                try {
                                    g.event.workflowname && !g.event.workflowconversion && (window.t1DataLayer.event.workflowconversion = "0");
                                    var m = j.length;
                                    if (m > 0) {
                                        var n = 0;
                                        for (n; n < m; n++) {
                                            var o = j[n]
                                              , p = o.key.split("-");
                                            if ("bp" === p[0]) {
                                                if (p.length > 2) {
                                                    var q = p[1];
                                                    T1.breakpoints && T1.breakpoints.currentBP() === q && c.customiseT1DataLayer(p.slice(2), o.value)
                                                }
                                            } else
                                                c.customiseT1DataLayer(p, o.value)
                                        }
                                    }
                                    c.settings.logTracking && console.log("TRIGGER " + h + " STATE " + (k || "default") + " DATA " + JSON.stringify(window.t1DataLayer)),
                                    a.$(window).trigger(h)
                                } catch (e) {
                                    console.log(e.message)
                                }
                        } else
                            c.settings.logTracking && console.log("TRIGGER cancelled because eventclass not defined!")
                }
            },
            customiseT1DataLayer: function(a, b) {
                var c, d, e, f = window.t1DataLayer;
                if ("suffix" === a[0]) {
                    if (a.length < 2)
                        return;
                    c = "suffix",
                    a = a.slice(1)
                }
                a.length > 1 ? (d = a[0],
                e = a[1]) : (d = "event",
                e = a[0]),
                f[d] || (f[d] = {}),
                "suffix" === c ? (f[d][e] || (f[d][e] = ""),
                f[d][e] += b) : f[d][e] = b
            },
            crawlData: function(a, b, d) {
                var e = a.parent();
                return c.extendObject(c.currentObject, c.nodeDataToJSON(a, b, d)),
                c.isTrackChildNode(e) && "BODY" !== a.prop("tagName").toUpperCase() ? c.crawlData(e, b, d) : c.extendObject(c.currentObject, c.nodeDataToJSON(e, b, d))
            },
            isTrackChildNode: function(a) {
                return "BODY" !== a.prop("tagName") && 0 !== a.length && void 0 === a.data("bt-category")
            },
            nodeDataToJSON: function(a, b, d) {
                return c.filterData(a, b, d)
            },
            filterData: function(a, b, d) {
                for (var e = {}, f = c.getNodeAttributes(a), g = null, h = 0; h < f.length; h++)
                    (g = c.getAttrValues(f[h], d)) && (e[g.category] || (e[g.category] = {}),
                    b && "" !== b && g.state.toLowerCase() === b.toLowerCase() ? e[g.category][g.key] = g.value : e[g.category][g.key] || "" !== g.state || (e[g.category][g.key] = g.value));
                return e
            },
            getAttrValues: function(a, b) {
                var e = a.nodeName.toLowerCase()
                  , f = "data-" + c.brightTagPrefix + "-"
                  , g = []
                  , h = ""
                  , i = {
                    category: d.STATS_CATEGORY_EVENT,
                    key: "",
                    state: "",
                    value: ""
                };
                if (e.indexOf(f) > -1)
                    return h = e.substring(f.length),
                    -1 !== c.ignoreBtTags.indexOf("%" + h + "%") ? null : "custom-" === h.substr(0, 7) ? (b.push({
                        key: h.substr(7),
                        value: a.nodeValue
                    }),
                    null) : (g = h.split("-"),
                    1 === g.length ? i.key = g[0] : 2 === g.length ? (i.state = g[0],
                    i.key = g[1]) : g.length > 2 && (i.state = g[0],
                    i.category = g[1],
                    i.key = g[2]),
                    i.value = c.translateValuePlaceholders(a.nodeValue),
                    i)
            },
            translateValuePlaceholders: function(a) {
                return -1 !== a.indexOf("[URL]") && (a = a.replace("[URL]", location.href + location.hash)),
                -1 !== a.indexOf("[TITLE]") && (a = a.replace("[TITLE]", window.title)),
                "string" == typeof a ? a : a.toString()
            },
            getState: function(a) {
                var b = a.attr("data-bt-state");
                return b || (c.isTrackChildNode(a) && "BODY" !== a.prop("tagName").toUpperCase() ? c.getState(a.parent()) : "")
            },
            extendDataLayer: function(a) {
                var b = c.extendObject({}, this.base);
                window.t1DataLayer = b,
                c.extendObject(window.t1DataLayer, a, !0)
            },
            extendObject: function(a, b, c) {
                for (var d in b)
                    if (a[d])
                        for (var e in b[d])
                            a[d][e] && !c || (a[d][e] = b[d][e]);
                    else
                        "settings" !== d && (a[d] = b[d]);
                return a
            },
            suffixAttrValues: function(b) {
                if (b.attr && b.suffix && "" !== b.suffix && b.node) {
                    var c = b.node.find("[" + b.attr + "]")
                      , d = b.node.attr(b.attr);
                    d && b.node.attr(b.attr, d + b.suffix),
                    c.each(function(c, d) {
                        var e = a.$(d);
                        e.attr(b.attr, e.attr(b.attr) + b.suffix)
                    })
                }
            },
            copyAncestorAttributes: function(a, b) {
                for (var d, e, f, g, h, i = {}; "BODY" !== a.prop("tagName") && void 0 === a.data("bt-category"); )
                    for (a = a.parent(),
                    d = c.getNodeAttributes(a),
                    e = 0; e < d.length; e++)
                        f = d[e],
                        g = f.nodeName,
                        0 === g.indexOf("data-bt-") && (i[g] || (h = f.nodeValue,
                        i[g] = h,
                        b.attr(g, h)))
            },
            isTrackingEnabled: function() {
                return "object" == typeof window.t1DataLayer
            },
            getAttributes: function(a, b) {
                "object" == typeof b && null !== b || (b = {});
                var d, e, f, g, h, i = {};
                for (d = c.getNodeAttributes(a),
                e = 0; e < d.length; e++)
                    f = d[e],
                    g = f.nodeName,
                    0 === g.indexOf("data-bt-") && (h = f.nodeValue,
                    i[g] = h);
                if (!0 === b.ancestor && "BODY" !== a.prop("tagName") && void 0 === a.data("bt-category")) {
                    d = c.getAttributes(a.parent(), b);
                    for (g in d)
                        i[g] || (i[g] = d[g])
                }
                return i
            },
            getNodeAttributes: function(a) {
                var b = a.get ? a.get(0) : a;
                return b && b.attributes || []
            }
        }
          , c = b
          , d = T1.constants;
        return {
            init: c.init,
            trackCallback: c.trackCallback,
            updateBaseObject: c.updateBaseObject,
            getPlatform: c.getPlatform,
            isTrackingEnabled: c.isTrackingEnabled,
            copyAncestorAttributes: c.copyAncestorAttributes,
            getAttributes: c.getAttributes
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.html5 = function() {
        var a = {
            init: function() {
                b("body").on("click", ".html5-overlayer", a.openHtml5)
            },
            openHtml5: function(a) {
                a.preventDefault();
                var c = b(this).data("html5id");
                c && (b(this).parents(".topfeatures-v2-item").length || (location.hash = "/publish/materialbox_open/html5id=" + c + "/type=box-iframe/size=fullscreen"))
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c;
    T1.section = function() {
        "use strict";
        var a = {
            childOptionTemplate: null,
            topicsCountTemplate: null,
            bigChildOptionTemplate: null,
            keepRequesting: !0,
            currentBreakpoint: ""
        }
          , d = {
            init: function() {
                T1.channels.global.subscribe(T1.constants.SECTION_HIDE, d.visibility.hide),
                T1.channels.global.subscribe(T1.constants.SECTION_SHOW, d.visibility.show);
                var c = b("#section-childpage-option-template")
                  , e = b("#section-childpage-big-option-template")
                  , f = b("#section-filter-topics-count")
                  , g = b(".section-latest-articles");
                d.isTrackingEnabled = "object" == typeof window.t1DataLayer,
                g.find(".list-buttons .show-more").on("click", d.buttons.showMore.onClick),
                c.length && e.length && f.length && g.length && (a.childOptionTemplate = c.html(),
                c.remove(),
                a.topicsCountTemplate = f.html(),
                f.remove(),
                a.bigChildOptionTemplate = e.html(),
                e.remove(),
                d.filter.resetFilters(g),
                g.find('.search-filter .types-checkboxes input[type="checkbox"]').on("change", d.filter.onTypesChange),
                g.find('.search-filter .dropdown-menu input[type="checkbox"]').on("change", d.filter.onUpdateClick),
                g.find(".dropdown-menu .btn-update").on("click", d.filter.onUpdateClick),
                g.find(".dropdown-menu .btn-close-filters").on("click", d.filter.onCloseFiltersClick),
                g.find(".input-search > a:has(.icon-search)").on("click", d.filter.onFilterChange),
                g.find('.search-field input[type="text"]').on("keypress", d.filter.onSearchTextKeypress),
                T1.channels.global.subscribe(T1.constants.INPUT_SEARCH_CLEAR, d.filter.onFilterChange),
                g.find(".dropdown").on("click", d.filter.dropdown.onClick),
                T1.channels.global.subscribe(T1.constants.ON_DOC_CLICK, d.filter.dropdown.onDOCClick),
                d.buttons.showMore.set(),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, d.buttons.showMore.set),
                b(".jump-top").on("click", d.buttons.jumpToClick),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, d.onBreakPointChange))
            },
            visibility: {
                hide: function(a) {
                    var b = d.visibility.getSection(a);
                    b.length && b.addClass("hide")
                },
                show: function(a) {
                    var b = d.visibility.getSection(a);
                    b.length && b.removeClass("hide")
                },
                getSection: function(a) {
                    if ("string" == typeof a && -1 === a.indexOf(".") && -1 === a.indexOf("#")) {
                        var c = b("section#" + a);
                        if (c.length)
                            return c;
                        if (c = b("section." + a),
                        c.length)
                            return c
                    }
                    return b(a)
                }
            },
            buttons: {
                showMore: {
                    set: function() {
                        var a = b(".section-latest-articles")
                          , c = null
                          , d = null
                          , e = null
                          , f = a.length
                          , g = 0;
                        a.each(function() {
                            g++,
                            c = b(this),
                            d = c.find(".section-sub-spotlights .element").not(":visible"),
                            e = c.find(".list-buttons .show-more"),
                            d.length > 0 ? (e.show(),
                            c.find(".list-buttons").show()) : (e.hide(),
                            g === f && c.find(".list-buttons").hide())
                        })
                    },
                    onClick: function(c) {
                        function e() {
                            j = !0,
                            b.ajax({
                                dataType: "jsonp",
                                url: T1.constants.SECTION_HOMEPAGE_CHILD_PAGES,
                                data: k,
                                success: function(a) {
                                    d.fillHTML(a, f, !0)
                                },
                                timeout: T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_REQ_TIMEOUT,
                                error: function(a, b) {
                                    d.buttons.showMore.hide(f)
                                }
                            })
                        }
                        c.preventDefault();
                        var f = b(this).parents(".section-latest-articles")
                          , g = f.find(".section-sub-spotlights .element").not(":visible")
                          , h = f.find(".list-buttons .jump-top")
                          , i = f.find("input.filter")
                          , j = !1
                          , k = null
                          , l = "SECTION_HOMEPAGE_CHILD_SHOW_MORE_OPTIONS_" + a.currentBreakpoint.toUpperCase()
                          , m = T1.constants[l] ? T1.constants[l] : T1.constants.SECTION_HOMEPAGE_CHILD_SHOW_MORE_OPTIONS;
                        i.length && (k = d.getRequestData(f, !1)),
                        g = b(g.slice(0, m)),
                        f.find(".section-sub-spotlights .element:visible").css("display", "block"),
                        g.slideDown(T1.constants.ANIMATION_SPEED_SCROLL, function() {
                            j || (h.is(":visible") || h.css({
                                opacity: 0,
                                display: "inline-block"
                            }).animate({
                                opacity: 1
                            }, T1.constants.ANIMATION_SPEED_FADE),
                            a.keepRequesting && k ? e() : d.buttons.showMore.hide(f))
                        })
                    },
                    hide: function(a) {
                        0 === a.find(".section-sub-spotlights .element").not(":visible").length && a.find(".list-buttons .show-more").fadeOut(T1.constants.ANIMATION_SPEED_FADE)
                    }
                },
                jumpToClick: function(a) {
                    a.preventDefault()
                }
            },
            filter: {
                dropdown: {
                    toggle: function(b) {
                        var c = b.find(".collapsed-menu")
                          , d = b.find(".dropdown")
                          , e = d.find(".icon")
                          , f = c.find(".dropdown-menu");
                        if (d.hasClass("open")) {
                            var g = function() {
                                d.removeClass("open"),
                                e.removeClass("icon-chevron-up").addClass("icon-chevron-down")
                            };
                            "xs" === a.currentBreakpoint ? c.slideToggle(T1.constants.ANIMATION_SPEED_DROPDOWN, g) : f.slideUp(T1.constants.ANIMATION_SPEED_DROPDOWN, g)
                        } else
                            d.addClass("open"),
                            e.addClass("icon-chevron-up").removeClass("icon-chevron-down"),
                            "xs" === a.currentBreakpoint ? c.slideToggle(T1.constants.ANIMATION_SPEED_DROPDOWN) : f.slideDown(T1.constants.ANIMATION_SPEED_DROPDOWN)
                    },
                    onClick: function(a) {
                        var c = b(this)
                          , e = c.parents(".dropdown-container");
                        a.preventDefault && "function" == typeof a.preventDefault && a.preventDefault(),
                        d.filter.dropdown.toggle(e)
                    },
                    onDOCClick: function(a) {
                        var c = b(a.target);
                        0 === c.parents(".collapsed-menu").length && 0 === c.parents(".dropdown-container").length && d.filter.dropdown.closeAllOpenDropdowns.bind(this)(a)
                    },
                    closeAllOpenDropdowns: function(a) {
                        b("body").find(".dropdown.open").each(function(b) {
                            d.filter.dropdown.onClick.bind(this)(a)
                        })
                    }
                },
                onSearchTextKeypress: function(a) {
                    if (13 === a.keyCode)
                        return d.filter.onFilterChange(null, this),
                        !1
                },
                onCloseFiltersClick: function(a) {
                    var c = b(this).parents(".dropdown-container").find(".dropdown");
                    c.length && d.filter.dropdown.onClick.bind(c[0])(a)
                },
                onUpdateClick: function(a) {
                    b(this).parents(".dropdown-container");
                    a.preventDefault(),
                    d.filter.onFilterChange(null, this)
                },
                onTypesChange: function(a) {
                    var c = b(this)
                      , e = c.parents(".category-tag");
                    !0 === c.prop("checked") ? e.removeClass("unchecked") : e.addClass("unchecked"),
                    d.filter.onFilterChange(null, this)
                },
                onFilterChange: function(a, c) {
                    a && a.preventDefault();
                    var e = b(c ? c : this)
                      , f = e.parents(".section-latest-articles")
                      , g = d.getRequestData(f, !0)
                      , h = d.lastRequestData;
                    e.toggleClass("active", e.is(":checked")),
                    T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                        target: f
                    }),
                    b.ajax({
                        dataType: "jsonp",
                        url: T1.constants.SECTION_HOMEPAGE_CHILD_PAGES,
                        data: g,
                        success: function(a) {
                            d.fillHTML(a, f, !1);
                            var b = f.find(".search-no-results")
                              , c = a.pages.length > 0;
                            if (b.length && (b[0].style.display = c ? "none" : "block"),
                            d.isTrackingEnabled) {
                                var g = {
                                    type: "world-of-toyota",
                                    query: h.query.length > 0 ? h.query : "(no keyword)",
                                    results: c ? "1" : "0",
                                    category: h.selectedKeywords.join(";"),
                                    taxonomy: h.selectedTypes.join(";")
                                }
                                  , i = {
                                    eventclass: "searchevent"
                                };
                                e.hasClass("btn-update") ? (i.action = "update",
                                i.value = "filter_topics") : "checkbox" === e.prop("type") ? (i.action = "filter",
                                i.value = "filter_results") : (i.action = "search",
                                i.value = "search_keyword"),
                                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                                    node: e,
                                    extraData: {
                                        event: i,
                                        search: g
                                    }
                                })
                            }
                            T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                                target: f
                            })
                        },
                        timeout: T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_REQ_TIMEOUT,
                        error: function(a, b) {
                            d.buttons.showMore.hide(f),
                            T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                                target: f
                            })
                        }
                    })
                },
                resetFilters: function(a) {
                    a.find("input:checked:not(.active)").prop("checked", !1)
                }
            },
            onBreakPointChange: function(b) {
                a.currentBreakpoint = b
            },
            fillHTML: function(b, e, f) {
                if (b.pages) {
                    var g = e.find(".search-filter .topics-count")
                      , h = e.find(".section-sub-spotlights .row.big")
                      , i = e.find(".section-sub-spotlights .row.small")
                      , j = e.find(".list-buttons .show-more")
                      , k = e.find(".list-buttons .jump-top")
                      , l = null
                      , m = []
                      , n = []
                      , o = b.pages
                      , p = b.counters
                      , q = 0
                      , r = "";
                    if (!0 === f)
                        o.length > 0 ? (q = i.find(".element").length,
                        i.append(c.template(a.childOptionTemplate)({
                            options: o,
                            count: q
                        }))) : d.buttons.showMore.hide(e);
                    else if (o.length > 0) {
                        o.length > T1.constants.SECTION_HOMEPAGE_CHILD_NUM_BIG_OPTIONS ? (m = o.slice(0, T1.constants.SECTION_HOMEPAGE_CHILD_NUM_BIG_OPTIONS),
                        n = o.slice(T1.constants.SECTION_HOMEPAGE_CHILD_NUM_BIG_OPTIONS)) : (m = o,
                        n = null),
                        h.html(c.template(a.bigChildOptionTemplate)({
                            options: m
                        })),
                        n ? i.html(c.template(a.childOptionTemplate)({
                            options: n,
                            count: q
                        })) : i.html(""),
                        k.hide(),
                        a.isJumpVisible = !1,
                        l = e.find(".section-sub-spotlights .element"),
                        l.not(":visible").length > 0 ? j.show() : j.hide(),
                        r = c.template(a.topicsCountTemplate)({
                            counters: p
                        });
                        try {
                            r = r.trim()
                        } catch (s) {}
                        r.length > 0 ? (g.show(),
                        g.html(r)) : g.hide()
                    } else
                        g.hide(),
                        h.html(""),
                        i.html(""),
                        d.buttons.showMore.hide(e);
                    o.length < T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_COUNT ? a.keepRequesting = !1 : a.keepRequesting = !0
                }
            },
            getRequestData: function(c, e) {
                var f = c.find("input.filter")
                  , g = c.find(".section-sub-spotlights .element")
                  , h = null
                  , i = c.find('.search-filter .dropdown-menu input[type="checkbox"]')
                  , j = !0 === e ? 0 : g.length
                  , k = !0 === e ? T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_COUNT_NEW_FILTER : T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_COUNT
                  , l = ""
                  , m = ""
                  , n = []
                  , o = [];
                return h = "xs" === a.currentBreakpoint ? c.find('.search-filter .types-checkboxes.mobile input[type="checkbox"]') : c.find('.search-filter .types-checkboxes.desktop input[type="checkbox"]'),
                h.each(function() {
                    var a = b(this);
                    !0 === a.prop("checked") && n.push(a.val())
                }),
                i.each(function() {
                    var a = b(this);
                    !0 === a.prop("checked") && o.push(a.val())
                }),
                n.length < h.length && (l = 0 === n.length ? "null" : n.join("|")),
                o.length <= i.length && (m = o.join("|")),
                d.lastRequestData = {
                    query: f.val(),
                    selectedTypes: n,
                    selectedKeywords: o
                },
                {
                    filter: encodeURIComponent(f.val()),
                    keywords: m,
                    types: l,
                    count: k,
                    start: j,
                    includePromos: T1.constants.SECTION_HOMEPAGE_CHILD_FILTERING_PROMOS
                }
            }
        };
        return {
            init: d.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.mainSearch = function() {
        "use strict";
        var a = {
            mainContainer: null,
            searchAPI: "/api/search/",
            filterToggle: null,
            filterPane: null,
            optionTagHolder: null,
            optionCheckboxes: null,
            filterUpdateButton: null,
            searchButton: null,
            searchField: null,
            searchLegend: null,
            results: null,
            resultsContainer: null,
            pagination: null,
            options: [],
            phrase: null,
            pageSize: 10,
            startIndex: 0,
            endIndex: 10,
            pagLimit: 10,
            total: null,
            inOverlayer: !1,
            initialQuery: null,
            subscriptions: {},
            init: function() {
                T1.channels.search.subscribe(T1.constants.SEARCH, a.search),
                b("#searchcomponent").size() && (a.updateGlobalProperties(),
                a.trackPageLoad(),
                a.subscribeButtonEvents(),
                a.optionCheckboxes.prop("checked", !1).trigger("change"));
                var c = null;
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function(b) {
                    a.inOverlayer = !1,
                    a.initialQuery = null,
                    c && c.unsubscribe && c.unsubscribe()
                }),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(b) {
                    T1.channels.tab.subscribe(T1.constants.TABS_SWITCH, function(b) {
                        a.inOverlayer || "pane-search" !== b || (a.inOverlayer = !0,
                        a.updateGlobalProperties())
                    })
                })
            },
            initMobile: function() {
                T1.channels.search.subscribe(T1.constants.SEARCH_BUILT_RESULTS, a.reduceResultHeight)
            },
            reduceResultHeight: function() {
                b(".search-result-node", a.results).each(function(a) {
                    var c = b(this)
                      , d = c.find(".search-result-body");
                    d.length && d.height() > 64 && c.addClass("ellipsis")
                })
            },
            search: function(c) {
                var d = a;
                if (c ? a.initialQuery = c : c = {},
                !a.inOverlayer && !c.noneAjaxSearch) {
                    a.inOverlayer = !0,
                    a.startIndex = 0;
                    var e = T1.settings.mock ? "/html/forms/forms.html" : "/forms/forms.json?tab=pane-search";
                    b("#forms #searchcomponent").length > 0 || !1 ? T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                        html: b("#forms"),
                        preserveContent: !0,
                        addWhiteDiv: !0
                    }) : T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                        url: e,
                        type: "box-ajax",
                        size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                        hashAction: !0
                    }),
                    d.subscriptions.overlay = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function() {
                        T1.channels.tab.publishAsync(T1.constants.TABS_SWITCH, "pane-search"),
                        a.updateGlobalProperties(),
                        a.subscribeButtonEvents(),
                        c.q && (a.searchField.val(c.q),
                        a.phrase = c.q,
                        a.performSearch()),
                        a.optionCheckboxes.prop("checked", !1).trigger("change"),
                        a.searchLegend.hide(),
                        d.subscriptions.overlay.unsubscribe(),
                        a.toggleFilterPrefix()
                    })
                }
            },
            trackPageLoad: function() {
                var c = parseInt(a.searchLegend.find(".search-total-count").html(), 10)
                  , d = a.searchField.val();
                if (isNaN(c)) {
                    var e = b("#pane-search");
                    e.hasClass("tab-pane") || T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: e
                    })
                } else
                    T1.channels.search.publishAsync(T1.constants.SEARCH_BUILT_RESULTS, {
                        query: d,
                        options: [],
                        resultCount: c
                    })
            },
            updateGlobalProperties: function() {
                a.mainContainer = b(".search-component"),
                a.filterPane = b(".search-filter-options", a.mainContainer),
                a.optionTagHolder = b(".search-result-selected-filters", a.mainContainer),
                a.optionCheckboxes = b('input[type="checkbox"]', a.filterPane),
                a.filterUpdateButton = b(".btn-update", a.filterPane),
                a.searchButton = b(".perform-search-button", a.mainContainer),
                a.searchField = b(".main-search-field", a.mainContainer),
                a.searchLegend = b(".search-result-counts", a.mainContainer),
                a.searchNoResults = b(".search-no-results", a.mainContainer),
                a.resultsContainer = b(".search-results", a.mainContainer),
                a.results = b(".search-results-inner", a.mainContainer),
                a.pagination = b(".pagination", a.mainContainer),
                a.optionCheckboxes.prop("checked", !1).trigger("change"),
                a.subscribeButtonEvents()
            },
            subscribeButtonEvents: function() {
                a.filterUpdateButton.unbind("click", a.onFilterButtonClick).on("click", a.onFilterButtonClick),
                a.optionCheckboxes.unbind("change", a.onFilterCheckboxChange).on("change", a.onFilterCheckboxChange),
                a.searchButton.unbind("click", a.onSearchButtonClick).on("click", a.onSearchButtonClick),
                a.searchField.unbind("keydown", a.onKeydownPress).on("keydown", a.onKeydownPress)
            },
            onFilterButtonClick: function(c) {
                c.preventDefault(),
                T1.channels.form.publishAsync(T1.constants.DROPDOWN_CLOSE, {
                    id: b(this).closest(".dropdown-container").attr("id")
                }),
                0 !== a.searchField.val().length && "" !== a.searchField.val().trim() || (a.phrase = "*"),
                ("*" !== a.phrase || a.options.length > 0) && (a.performSearch(),
                a.publishFullSearchEvent())
            },
            onKeydownPress: function(c) {
                13 === c.which && b(this).val().length > 0 && (a.performSearch(),
                a.publishFullSearchEvent())
            },
            onFilterCheckboxChange: function(c) {
                if (b(this).is(":checked")) {
                    var d = b("label[for='" + b(this).attr("id") + "']");
                    a.addOption(b(this).val(), d)
                } else
                    a.removeOption(b(this).val())
            },
            onSearchButtonClick: function(b) {
                b.preventDefault(),
                a.performSearch(),
                a.publishFullSearchEvent()
            },
            publishFullSearchEvent: function() {
                T1.channels.search.publishAsync(T1.constants.FULL_SEARCH, {
                    origin: a.initialQuery ? "overlayer" : "empty-overlayer",
                    q: a.phrase,
                    options: a.options,
                    initialQuery: a.initialQuery,
                    pageIndex: a.startIndex
                })
            },
            onPaginationItemClick: function(b) {
                var c = b.target.innerHTML;
                switch (c) {
                case "&lt;&lt;":
                    a.startIndex = 0;
                    break;
                case "&gt;&gt;":
                    var d = a.total % a.pageSize;
                    a.startIndex = 0 === d ? (a.total - a.pageSize) / a.pageSize : Math.floor(a.total / a.pageSize);
                    break;
                case "&lt;":
                    a.startIndex > 0 ? a.startIndex-- : a.startIndex = 0;
                    break;
                case "&gt;":
                    a.startIndex++;
                    break;
                default:
                    c = parseInt(c),
                    a.startIndex = c ? c - 1 : 0
                }
                a.performSearch(!0),
                a.publishFullSearchEvent()
            },
            buildURL: function(b) {
                a.isBrowsingResults = !0 === b;
                var c = T1.settings.mock ? a.searchAPI + "toyota" : a.searchAPI + a.phrase;
                a.options.length > 0 && !a.isBrowsingResults && (a.startIndex = 0);
                var d = a.startIndex * a.pageSize
                  , e = "?count=" + a.pageSize + "&start=" + d;
                return a.options.length > 0 && (e += "&keywords=",
                e += a.options.join("|")),
                c + e
            },
            concatDesc: function(a) {
                for (var b = "", c = 0; c < a.length; c++)
                    c > 0 && (b += ". "),
                    b += a[c];
                return b
            },
            performSearch: function(c) {
                if (a.searchField.val() && a.searchField.val().length > 0 && "" !== a.searchField.val().trim() && a.phrase !== a.searchField.val() && (a.startIndex = 0,
                a.phrase = a.searchField.val()),
                a.phrase) {
                    var d = a.buildURL(c);
                    b.getJSON(d, a.onGetSearchData)
                }
            },
            onGetSearchData: function(c) {
                if (c) {
                    c.pages || (a.handleEmptyResult(),
                    c.pages = []),
                    a.generatePagination(c.pagination),
                    b(".empty-result-holder").hide(),
                    a.total = 0 === c.pages.length ? c.pages.length : c.total || 0,
                    a.endIndex = a.startIndex * a.pageSize + a.pageSize,
                    a.generateLegend(),
                    a.results.empty(),
                    0 === a.total ? a.handleEmptyResult() : (a.searchLegend.show(),
                    a.searchNoResults.hide());
                    for (var d = 0; d < c.pages.length; d++) {
                        var e = c.pages[d]
                          , f = e.content ? a.concatDesc(e.content) : ""
                          , g = a.generateResultNode({
                            image: e.image,
                            link: e.url,
                            title: e.title,
                            date: e.date,
                            description: f,
                            active: !1
                        });
                        a.results.append(g)
                    }
                    if (T1.channels.search.publishAsync(T1.constants.SEARCH_BUILT_RESULTS, {
                        query: a.phrase,
                        options: a.options,
                        resultCount: c.pages.length,
                        isBrowsingResults: a.isBrowsingResults
                    }),
                    a.mainContainer.length) {
                        var h = a.mainContainer.position().top
                          , i = b(".overlayerContent")
                          , j = h < 0 ? i.scrollTop() + h : h;
                        i.animate({
                            scrollTop: j
                        }, T1.constants.ANIMATION_SPEED_SCROLL)
                    }
                }
            },
            handleEmptyResult: function() {
                a.searchLegend.hide(),
                a.results.empty(),
                a.pagination.children("ul").empty(),
                a.searchNoResults.show()
            },
            toggleFilterPrefix: function() {
                a.optionTagHolder.find(".filter-prefix").length > 0 && (1 === a.optionTagHolder.children().length ? a.optionTagHolder.find(".filter-prefix").hide() : a.optionTagHolder.find(".filter-prefix").show())
            },
            addOption: function(c, d) {
                var e = d.length <= 0 ? c : d.text();
                a.options.push(c);
                var f = b("<span/>").attr("data-filter-keyword", c).addClass("search-result-selected-filter").text(e).appendTo(a.optionTagHolder);
                b("<i/>").addClass("icon icon-remove search-result-remove-filter").appendTo(f).on("click", function(d) {
                    b("input[value='" + c + "']", a.filterPane).prop("checked", !1).trigger("change"),
                    a.removeOption(c),
                    a.performSearch(),
                    a.publishFullSearchEvent()
                }),
                a.toggleFilterPrefix()
            },
            removeOption: function(c) {
                var d = a.options.indexOf(c);
                -1 !== d && (a.options.splice(d, 1),
                b(".search-result-selected-filter[data-filter-keyword='" + c + "']").remove(),
                a.toggleFilterPrefix())
            },
            generatePagination: function(c) {
                a.pagination.children("ul").empty(),
                a.pagination && c && c.length > 0 && _.forEach(c, function(c) {
                    var d = b("<li/>").addClass(c.classes);
                    b("<a/>").attr("alt", c.alt).html(c.label).appendTo(d),
                    d.appendTo(a.pagination.children("ul")),
                    d.on("click", a.onPaginationItemClick)
                })
            },
            generateLegend: function() {
                var c = a.startIndex * a.pageSize;
                0 === c && c++,
                b(".search-start-index", a.searchLegend).text(c),
                b(".search-end-index", a.searchLegend).text(a.total < a.pageSize || a.endIndex > a.total ? a.total : a.endIndex),
                b(".search-total-count", a.searchLegend).text(a.total),
                b(".search-count-phrase", a.searchLegend).text(a.phrase),
                a.searchLegend.show()
            },
            generateResultNode: function(c) {
                var d, e = c.link || "/", f = c.title, g = c.description || "", h = b("<div/>").addClass("search-result-title").text(f), i = b("<div/>").addClass("search-result-body").html(g), j = [];
                if (h.appendTo(i),
                j.push(h),
                "string" == typeof c.date && (d = b("<div/>").addClass("search-result-date").text(c.date),
                j.push(d)),
                j.push(i),
                d = b("<a/>").attr("href", e).addClass("search-result-node"),
                a.resultsContainer.hasClass("highlight-bold")) {
                    d.addClass("row");
                    var k = c.image || "/images/search.png"
                      , l = b("<div/>").addClass("col-xs-9 col-sm-10");
                    l.append(j),
                    d.append([b("<img/>").attr({
                        src: k
                    }).addClass("col-xs-3 col-sm-2"), l])
                } else
                    d.append(j);
                return d
            }
        };
        return {
            init: a.init,
            initMobile: a.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c;
    T1.dealerFinder = function() {
        "use strict";
        var a = {
            loaded: !1,
            mapZoom: 10,
            mapZoomOnlyOne: 15,
            maxFavoritesDealersDisplay: 3,
            maxMarkersNumber: 20,
            markerSize: {
                width: 27,
                height: 55
            },
            markerColors: {
                white: {
                    withIndex: {
                        x: 0,
                        y: 0
                    },
                    withoutIndex: {
                        x: 89,
                        y: 200
                    }
                },
                red: {
                    withIndex: {
                        x: 29,
                        y: 50
                    },
                    withoutIndex: {
                        x: 88,
                        y: 50
                    }
                },
                magenta: {
                    withIndex: {
                        x: 119,
                        y: 50
                    },
                    withoutIndex: {
                        x: 89,
                        y: 150
                    }
                },
                grey: {
                    withIndex: {
                        x: 148,
                        y: 50
                    },
                    withoutIndex: {
                        x: 89,
                        y: 306
                    }
                }
            },
            MAP_CONST: {
                BOUNDS_BUFFER: 15,
                TILE_SIZE: {
                    height: 256,
                    width: 256
                },
                ZOOM_MAX: 16
            },
            context: {},
            favoriteDealersSelector: "favorites",
            searchResultListSelector: "search-results-list",
            distanceUnits: {
                mi: "miles",
                km: "km"
            },
            PIN_ICONS_FILE: "pins-aw-05.png",
            init: function() {
                d.initInPageSearchContainers(),
                T1.channels.tab.subscribe(f.TABS_SWITCH, d.onTabSwitch),
                T1.channels.form.subscribe(f.FORM_LOAD, d.onFormLoad),
                T1.channels.global.subscribe(f.DEALERFINDER_INIT_REQUEST, d.initContainer),
                T1.channels.form.subscribe(f.NAVIGATION_FORM_UPDATE, d.onFormNavigate),
                d.activateContainers(),
                T1.channels.dealer.publish(f.DEALERFINDER_LOADED),
                d.loaded = !0,
                d.markerColors.default = d.markerColors.red
            },
            initInPageSearchContainers: function(a) {
                a || (a = b("body"));
                var c = a.find(".dealer-finder.in-page");
                c.length && (d.initSearchTypes(c),
                d.initGeoLink(c),
                d.initSearchInput(c))
            },
            activateContainers: function() {
                b(".dealer-finder.activate").each(function() {
                    d.onTabSwitch(b(this).attr("id"))
                })
            },
            createContext: function(a, b) {
                if (a.length) {
                    b = void 0 !== b && b;
                    var c = (a.attr("id") ? a : a.attr("id", "_" + (new Date).getTime())).attr("id");
                    return d.context[c] = d.context[c] || d.getNewContextStructure(a),
                    d.context[c].initialized = b,
                    d.context[c]
                }
                return null
            },
            getNewContextStructure: function(a) {
                return {
                    SearchedDealersDisplayStep: 5,
                    searchResultCount: 10,
                    container: a,
                    currentLocation: {
                        dealersMarkers: []
                    },
                    subscriptions: [],
                    map: null,
                    isWorking: !1,
                    markersColor: d.getMarkersColor(a),
                    tracking: {},
                    isCurrentLocation: !1,
                    polygons: {
                        country: []
                    },
                    isOsbDealerFinder: a.is(".osb")
                }
            },
            getContext: function(a) {
                return d.context[a.attr("id")]
            },
            searchContext: function(a) {
                return a = a.find(".dealer-finder:not(.in-page)"),
                a.length ? d.context[a.attr("id")] : null
            },
            destroyContextsFor: function(a) {
                b(a).find(".dealer-finder").each(function(a) {
                    d.destroyContext(b(this))
                })
            },
            destroyContext: function(a) {
                var c = a instanceof b ? a.attr("id") : a.container.attr("id");
                d.context[c] && (d.clearSubscriptions(d.context[c].subscriptions),
                delete d.context[c])
            },
            setOverflowForContent: function(a) {
                a.parents(".overlayerContent, .white").toggleClass("overflow-hidden", "pane-dealer" === a.attr("id"))
            },
            onTabSwitch: function(a) {
                var c = b("#" + a);
                switch (a) {
                case "pane-my-dealer":
                    d.initInPageSearchContainers(c);
                    break;
                case "pane-dealer-card":
                case "pane-dealer":
                case "dealer-inpage":
                    d.initContainer({
                        container: c
                    })
                }
                d.setOverflowForContent(c)
            },
            initContainer: function(a) {
                if (a.container && a.container.length) {
                    var b = a.container.renewDealerContext ? d.destroyContext(a.container) : d.getContext(a.container);
                    if (b && b.initialized)
                        switch (b.tracking.currentStep) {
                        case "displayDealerForm":
                            d.tracking.trackDisplayDealerForm(b);
                            break;
                        case "displayDealerResultsScreen":
                            d.tracking.trackDisplayDealerResultsScreen(b);
                            break;
                        case "displayDealerDetail":
                            d.tracking.trackViewDealerDetail(b);
                            break;
                        case "requestDealerDirections":
                            d.tracking.trackRequestDealerDirections(b);
                            break;
                        case "displayResultRequestDealerDirections":
                            d.tracking.trackDisplayResultRequestDealerDirections(b)
                        }
                    else
                        (b = d.createContext(a.container, !0)) && (d.renderViewPort(b),
                        d.initMapsApi(d.onMapApiInitDone)(b, a),
                        d.initSearchTypes(b.container, b),
                        d.initGeoLink(b.container),
                        d.initSearchInput(b.container),
                        d.initMore(b),
                        d.initClickThrough(b),
                        d.initFilterDropdown(b),
                        b.subscriptions.push(T1.channels.global.subscribe(f.ON_WIN_RESIZE, d.onWindowResize)),
                        b.subscriptions.push(T1.channels.global.subscribe(f.COLLAPSIBLE_PANEL_EXPANDED, function() {
                            d.resizeMap(b)
                        })),
                        b.subscriptions.push(T1.channels.dealer.subscribe(f.DEALERS_FOUND, d.onDealersFound)),
                        b.subscriptions.push(T1.channels.dialog.subscribe(f.PAGEOVERLAYER_CLOSED, function(a) {
                            var b = d.searchContext(a.content);
                            b && d.destroyContext(b)
                        })),
                        b.subscriptions.push(T1.channels.dialog.subscribe(f.MATERIALBOX_CLOSED, function(a) {
                            d.destroyContextsFor(a.container),
                            T1.utilities.isEnvironment.production || console.log("T1.dealerfinder materialbox closed executed")
                        })),
                        d.tracking.trackDisplayDealerForm(b))
                }
            },
            onMapApiInitDone: function(a, b) {
                d.setInitialState(a),
                d.loadFavoriteDealers(a).always(function() {
                    if (b.search) {
                        var c = null
                          , e = function() {
                            b.search.preferredDealer && d.selectPreferredDealer(a),
                            c && c.unsubscribe()
                        };
                        a.map ? e() : c = T1.channels.dealer.subscribe(f.DEALERFINDER_MAP_READY, e)
                    }
                })
            },
            onFormLoad: function(a) {
                if (a) {
                    var b = a.closest(".form-v2").find(".dealer-finder:visible");
                    b.length && (a.renewDealerContext && (b.renewDealerContext = !0),
                    d.initContainer({
                        container: b
                    }),
                    d.loadQueriedDealer(d.getContext(b)))
                }
            },
            onFormNavigate: function(a) {
                if (a && a.stepContainer) {
                    var b = a.stepContainer.find(".dealer-finder");
                    b.length && (d.initContainer({
                        container: b
                    }),
                    a.search ? d.searchDealers(d.getContext(b), a.search.key, a.search.value) : d.loadQueriedDealer(d.getContext(b)))
                }
            },
            loadQueriedDealer: function(a) {
                if (a) {
                    var b = T1.request.getQueryStringParameters();
                    b.dealerId && d.getDealerById(a, b.dealerId)
                }
            },
            setInitialState: function(a) {
                var c = b.extend(!0, {
                    id: a.container.data("dealer-id"),
                    search: a.container.data("search"),
                    services: a.container.data("services")
                }, T1.request.getQueryStringParameters())
                  , e = c.services || c.filter
                  , g = decodeURIComponent(c.search);
                if (a.searchResultCount = c.showAllResults ? 50 : T1.settings.dealer.searchResultCount || a.searchResultCount,
                a.SearchedDealersDisplayStep = c.showAllResults ? Number.MAX_VALUE : a.SearchedDealersDisplayStep,
                a.limitSearchDistance = c.showAllResults ? 50 : T1.settings.dealer.limitSearchDistance || a.limitSearchDistance,
                e ? (e = d.convertSearchOptions(e.split("|")),
                d.setSearchOptions(a, e)) : e = {
                    index: {},
                    set: []
                },
                a.validServices = e.set,
                g && "undefined" !== g || c.id) {
                    d.setSearchType(a.container, c.searchType);
                    var h = a.container.find(".search-dealers .input-search")
                      , i = d.getSearchType(a.container);
                    g && "undefined" !== g && T1.channels.search.publish(f.INPUT_SEARCH_UPDATE, {
                        target: h,
                        value: g
                    }),
                    d.setSearchTypeClass(h.closest(".form"), i),
                    d.handleSearch({
                        container: a.container,
                        input: h,
                        search: g,
                        id: c.id,
                        options: e,
                        searchType: c.id ? "id" : d.getSearchType(a.container)
                    })
                } else
                    d.loadCountryMap(a)
            },
            onDealersFound: function(a) {
                if (d.isMobile()) {
                    var b = a.context.container.find(".collapsible-panel");
                    d.isPortrait() ? T1.channels.global.publish(f.COLLAPSIBLE_PANEL_REQUEST_EXPAND, {
                        target: b
                    }) : T1.channels.global.publish(f.COLLAPSIBLE_PANEL_REQUEST_CLOSE, {
                        target: b
                    })
                } else
                    d.resetSearchBoxHeight(a.context)
            },
            onWindowResize: function() {
                setTimeout(function() {
                    for (var a in d.context)
                        d.renderViewPort(d.context[a]),
                        d.resizeMap(d.context[a])
                }, 250)
            },
            resizeMap: function(a) {
                b.safe("T1.googleServices.maps.loaded")() && setTimeout(function() {
                    google.maps.event.trigger(a.map, "resize"),
                    google.maps.event.clearListeners(a.map, "idle"),
                    google.maps.event.addListenerOnce(a.map, "idle", function() {
                        d.fitMap(a, d.isDirectionEnabled(a) ? a.currentLocation.directionBounds : a.currentLocation.bounds)
                    })
                }, 0)
            },
            renderViewPort: function(a) {
                var c = a.container.closest(".toyota-tabs");
                if (d.isMobile())
                    if (d.isOverlayer(a)) {
                        var e = a.container.closest(".overlayerWrapper").find(">.toolbar")
                          , f = parseInt(c.css("padding-top"));
                        a.container.css("height", a.container.data("mobile-height") || b(window).height() - e.height() - f)
                    } else
                        h = b("#navigation").height() + b("#menu-breadcrumb-xs").height() + 15,
                        a.container.css("height", a.container.data("mobile-height") || b(window).height() - (d.isOverlayer(a) ? 0 : h)),
                        d.isSearchResultSelector(a) || b("body").addClass("noscroll");
                else if (!a.container.hasClass("dealer-inpage")) {
                    var g = c.find("> .toyota-tabs-select")
                      , h = b(window).height() - 13 - g.height();
                    a.container.css("height", a.container.data("desktop-height") || h - (d.isOverlayer(a) ? 0 : b("#navigation").height()))
                }
            },
            initMore: function(a) {
                a.container.find(".btn-expand").on("click", function(c) {
                    c.preventDefault();
                    var e = b(this).closest(".search-results")
                      , f = e.find("> ul > li.hidden")
                      , g = f.filter(":lt(" + a.SearchedDealersDisplayStep + ")").removeClass("hidden");
                    b.each(g, function(c, e) {
                        var f = b(e);
                        d.addMarker(a, a.currentLocation.dealers[f.index() - 1], f.index() - 1, f, a.currentLocation.bounds, c)
                    }),
                    d.fitMap(a, a.currentLocation.bounds),
                    a.container.toggleClass("more-search-results-enabled", f.length > g.length),
                    d.resetSearchBoxHeight(a)
                })
            },
            initBack: function(a, b) {
                a.container.find(".btn-back.to-search").off("click").on("click", function(b) {
                    b.preventDefault(),
                    d.resetSearchInterface(a),
                    d.unSelectFavoriteDealer(a),
                    d.scrollTop(a),
                    a.tracking.currentStep = "displayDealerForm",
                    d.tracking.trackDisplayDealerForm(a)
                }),
                a.container.find(".btn-back.to-results").off("click").on("click", function(b) {
                    b.preventDefault(),
                    a.container.removeClass("search-result-selected"),
                    d.unSelectDealer(a),
                    d.isMobile() && d.resizeMap(a),
                    d.scrollTop(a),
                    a.tracking.currentStep = "displayDealerResultsScreen",
                    d.tracking.trackDisplayDealerResultsScreen(a)
                }),
                a.container.find(".btn-back.to-details").off("click").on("click", function(c) {
                    if (c.preventDefault(),
                    d.clearError(a),
                    d.clearDirections(a),
                    a.currentLocation.dealersMarkers.length) {
                        var e = d.getActiveDealerNode(a).index() - 1;
                        d.setColoredDotMarker(a.currentLocation.dealersMarkers[e], e, !1, a.markersColor),
                        d.toggleMarkers(a, !0)
                    }
                    if (a.currentLocation.bounds)
                        d.fitMap(a, a.currentLocation.bounds);
                    else if (b) {
                        var f = b.position || b.address.geo;
                        f.lat && "number" == typeof f.lat && d.centerMap(a, {
                            latitude: f.lat,
                            longitude: f.lon
                        })
                    }
                    a.container.removeClass("direction-enabled direction-results-enabled"),
                    d.resetSearchBoxHeight(a),
                    d.scrollTop(a),
                    a.tracking.currentStep = "displayDealerDetail",
                    d.tracking.trackViewDealerDetail(a)
                })
            },
            initClickThrough: function(a) {
                var c = a.container.find(".search-box");
                c.length && (c.on("touchstart", function(a) {
                    if (d.isMobile() && c.is(a.target)) {
                        a.preventDefault(),
                        c.hide(),
                        c.addClass("touch-through");
                        var e = a.originalEvent
                          , f = a.clientX || (e && e.touches ? e.touches[0].clientX : void 0)
                          , g = a.clientY || (e && e.touches ? e.touches[0].clientY : void 0);
                        if (f && g) {
                            var h = new e.constructor(e.type,e);
                            b(document.elementFromPoint(f, g))[0].dispatchEvent(h)
                        }
                        c.show()
                    }
                }),
                c.on("touchend", function(a) {
                    d.isMobile() && c.is(a.target) && c.removeClass("touch-through")
                }))
            },
            initDirections: function(a, b) {
                a.container.find(".direction .input-search").off("keydown").on("keydown", d.OnDirectionByKeyDown(a, b)),
                a.container.find(".direction .btn-search").off("click").on("click", function(c) {
                    c.preventDefault(),
                    d.clearError(a),
                    d.renderDealerDirections(a, b) && d.scrollTop(a)
                })
            },
            blurAutocompleteField: function() {
                b.proxy(b.safe("T1.googleServices.places.blur"), this)()
            },
            resetSearchBoxHeight: function(a) {
                if (T1.utilities.browser.isExplorer && !d.isMobile()) {
                    var c = a.container.find(".search-box").removeClass("fixed-height")
                      , e = 0
                      , f = a.container.height() - (parseInt(c.css("top")) || 0) - (parseInt(c.css("bottom")) || 0);
                    c.find(">*:visible").each(function() {
                        e += b(this).outerHeight()
                    }),
                    c.toggleClass("fixed-height", e > f)
                }
            },
            resetSearchInterface: function(a) {
                a.container.removeClass("search-results-enabled search-results-count search-result-selected favorite-selected")
            },
            initFilterDropdown: function(a) {
                a.container.find(".dropdown.filters").click(function(a) {
                    var c = b(a.currentTarget)
                      , e = !c.hasClass("open");
                    d.tracking.trackClickShowHideFilterServices(c, e)
                }),
                a.container.find(".filters .dropdown-menu li:not(:has(.btn-filter))").click(function(a) {
                    if (a.stopPropagation(),
                    a.target && "INPUT" === a.target.tagName && a.target.checked) {
                        var c = a.target.value.toLowerCase();
                        "prius" === c && (c += "dealer"),
                        d.tracking.trackCheckFilterServiceBox(b(a.target), c)
                    }
                })
            },
            initMapsApi: function(a) {
                return function() {
                    var c = arguments;
                    b.safe("T1.googleServices.maps.loaded")() ? a && a.apply(this, c) : (b.safe("T1.googleServices.maps.addListener")("load", function() {
                        a && a.apply(this, c)
                    }),
                    b.safe("T1.googleServices.maps.init")())
                }
            },
            createCountryPolygons: function(a) {
                if (T1.settings.dealer.showCountryPolygons && a.map) {
                    var c = T1.settings.dealer.extraCountries ? T1.settings.dealer.extraCountries.split("|") : [];
                    c.push(d.getSearchableCountry()),
                    d.clearCountryPolygons(a);
                    for (var e = 0; e < c.length; e++) {
                        b.ajax({
                            type: "GET",
                            dataType: "JSON",
                            url: "/polygons/countries/" + c[e].toLowerCase() + ".min.json"
                        }).done(d.injectCountryPolygons(a))
                    }
                }
            },
            injectCountryPolygons: function(a) {
                return function(b) {
                    d.buildPolygone(b.coordinates, a)
                }
            },
            buildPolygone: function(a, b) {
                if (Array.isArray(a))
                    for (var c = 0; c < a.length; c++)
                        d.buildPolygone(a[c], b);
                else {
                    var e = google.maps.geometry.encoding.decodePath(a);
                    new google.maps.Polygon({
                        paths: e,
                        fillColor: "#000000",
                        strokeColor: "#e50000",
                        strokeWeight: 1,
                        strokeOpacity: .5,
                        fillOpacity: .1,
                        map: b.map
                    })
                }
            },
            clearCountryPolygons: function(a) {
                if (a && a.polygons) {
                    if (a.polygons.country)
                        for (var b = 0; b < a.polygons.country.length; b++)
                            a.polygons.country[b].setMap(null);
                    a.polygons.country = []
                }
            },
            loadCountryMap: function(a) {
                if (b.safe("T1.googleServices.maps.loaded")()) {
                    var c = new google.maps.Geocoder
                      , e = {
                        country: d.getSearchableCountry()
                    };
                    T1.settings.dealer.administrativeArea && (e.administrativeArea = T1.settings.dealer.administrativeArea),
                    c.geocode({
                        address: d.getSearchableCountry(),
                        componentRestrictions: e
                    }, function(b, c) {
                        if (c === google.maps.GeocoderStatus.OK) {
                            var e = b[0].geometry.location;
                            e && (d.loadMap(a, new google.maps.LatLng(e.lat(),e.lng())),
                            d.createCountryPolygons(a),
                            a.map.setCenter(b[0].geometry.location),
                            a.map.fitBounds(b[0].geometry.viewport),
                            T1.settings && T1.settings.dealer && T1.settings.dealer.extraCountryZoom && !isNaN(T1.settings.dealer.extraCountryZoom) && google.maps.event.addListenerOnce(a.map, "idle", function() {
                                d.zoomMap(a, a.map.getZoom() + parseInt(T1.settings.dealer.extraCountryZoom))
                            }))
                        } else
                            d.setError(a, T1.labels.dealer.errorGeoFailed),
                            T1.channels.dialog.publishAsync(f.LOADING_COMPLETE, {
                                target: a.container.find(".search-map")
                            })
                    })
                }
            },
            loadMap: function(a, c, e) {
                if (b.safe("T1.googleServices.maps.loaded")())
                    if (a.map)
                        d.clearDirections(a),
                        d.clearMarkers(a),
                        d.centerMap(a, c),
                        e && google.maps.event.addListenerOnce(a.map, "idle", function() {
                            e(a)
                        });
                    else {
                        var g = a.container.find(".search-map")
                          , h = {
                            center: c,
                            zoom: d.mapZoom,
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            disableDefaultUI: !0,
                            scrollwheel: d.isOverlayer(a) || d.isMaterialBox(a),
                            zoomControl: !T1.utilities.isMobileDevice(),
                            zoomControlOptions: {
                                position: google.maps.ControlPosition.RIGHT_BOTTOM
                            }
                        };
                        a.map = new google.maps.Map(g[0],h),
                        google.maps.event.addListenerOnce(a.map, "idle", function() {
                            T1.channels.dialog.publishAsync(f.LOADING_COMPLETE, {
                                target: g
                            }),
                            T1.channels.dealer.publish(f.DEALERFINDER_MAP_READY, {
                                context: a
                            }),
                            e && e(a)
                        }),
                        google.maps.event.addListener(a.map, "tilesloaded", function() {
                            d.resetSearchBoxHeight(a)
                        })
                    }
                else
                    d.initMapsApi(function() {
                        d.loadMap(a, c, e)
                    })(a)
            },
            initGeoLink: function(a) {
                if (Modernizr.geolocation) {
                    a.toggleClass("geolocation-enabled", !0);
                    var c = d.getSearchType(a);
                    a.find(".geo-location").each(function() {
                        var a = b(this);
                        d.setSearchTypeClass(a.closest(".form"), c),
                        a.off("click", d.preventDefault).on("click", d.preventDefault).off("click", d.handleCurrentLocation).on("click", d.handleCurrentLocation)
                    })
                }
            },
            preventDefault: function(a) {
                a.preventDefault && a.preventDefault()
            },
            initSearchTypes: function(a, b) {
                a.find('.search-type input[type="radio"]').off("change", d.onSearchTypeChanged).on("change", {
                    context: b
                }, d.onSearchTypeChanged)
            },
            onSearchTypeChanged: function(a) {
                var c = b(this)
                  , e = c.closest(".dealer-finder")
                  , g = d.getSearchType(e)
                  , h = "location" === g
                  , i = e.find('.input-search input[type="text"]').not(e.find('.direction .input-search  input[type="text"]'));
                i.length && (d.setSearchTypeClass(c.closest(".form"), g),
                i.attr("placeholder", h ? T1.labels.dealer.searchByLocation : T1.labels.dealer.searchByName),
                T1.channels.google.publishAsync(f.GOOGLE_PLACE_ENABLE, {
                    element: i,
                    enabled: h
                }))
            },
            setSearchTypeClass: function(a, b) {
                a.is(".direction") || (a.removeClass(function(a, b) {
                    return (b.match(/(^|\s)searchType-\S+/g) || []).join(" ")
                }),
                a.addClass("searchType-" + b))
            },
            initSearchInput: function(a) {
                var c = a.find(".input-search").not(a.find(".direction .input-search"));
                c.length && (c.each(function() {
                    var a = b(this)
                      , c = a.find(".search-field input")
                      , e = c.closest(".dealer-finder");
                    c.off("keydown", d.OnSearchByKeyDown).on("keydown", d.OnSearchByKeyDown),
                    e.find(".btn-search").off("click").on("click", function(a) {
                        a.preventDefault(),
                        d.handleSearch({
                            container: e,
                            input: c,
                            search: c.val(),
                            coordinates: c.data("coordinates"),
                            options: d.getSearchOptions(e),
                            searchType: d.getSearchType(e)
                        })
                    }),
                    T1.utilities.isMobileAndroid() && c.on("focus", function(a) {
                        setTimeout(function() {
                            this.scrollIntoView(!0)
                        }
                        .bind(this), 0)
                    })
                }),
                a.find(".search-box, .scrollable").off("touchmove scroll", d.blurAutocompleteField).on("touchmove scroll", d.blurAutocompleteField))
            },
            getSearchOptions: function(a) {
                var b = []
                  , e = (a.data("services") || "").split("|");
                return a.find('input[name="options"][value!="selectall"]:checked').each(function() {
                    b.push(this.value)
                }),
                a.find('input[name="options"][value!="selectall"]:not(:checked)').each(function() {
                    var a = e.indexOf(this.value);
                    -1 !== a && e.splice(a, 1)
                }),
                d.convertSearchOptions(c.union(b, e))
            },
            convertSearchOptions: function(a) {
                for (var b = {
                    index: {},
                    set: []
                }, c = 0; c < a.length; c++) {
                    var d = a[c];
                    d.length && ("prius" === d && (d += "dealer"),
                    b.index[d] = d,
                    b.set.push(d))
                }
                return b
            },
            setSearchOptions: function(a, c, d) {
                var e = d || a.container || b(".dealer-finder");
                e && (e !== d && e !== a.container && (a.tracking.skipTrackDisplayDealerForm = !0),
                e.find('input[name="options"]').each(function() {
                    this.checked = c.index[this.value] || !1
                }))
            },
            resetSearchOptions: function(a) {
                a.container.find('input[name="options"]').prop("checked", !1)
            },
            OnSearchByKeyDown: function(a) {
                var c = b(this)
                  , e = c.closest(".dealer-finder");
                if (13 === a.keyCode)
                    a.preventDefault(),
                    T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: c.parent().find(".btn-search")
                    }),
                    d.handleSearch({
                        container: e,
                        input: c,
                        search: c.val(),
                        coordinates: c.data("coordinates"),
                        options: d.getSearchOptions(e),
                        searchType: d.getSearchType(e)
                    }),
                    d.hideVirtualKeyboard();
                else {
                    var g = d.getContext(e);
                    g && (g.isCurrentLocation = !1),
                    c.data("coordinates", null)
                }
            },
            OnDirectionByKeyDown: function(a, c) {
                return function(e) {
                    var g = b(this);
                    13 === e.keyCode ? (T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: g.parent().find(".btn-search")
                    }),
                    d.clearError(a),
                    d.renderDealerDirections(a, c),
                    d.hideVirtualKeyboard()) : g.find('input[type="text"]').data("coordinates", null)
                }
            },
            hideVirtualKeyboard: function() {
                document.activeElement && document.activeElement.blur()
            },
            loadFavoriteDealers: function(a) {
                var e = b.safe("T1.myToyota.getDealers")(a)
                  , f = 0;
                return e.done(function(e) {
                    var g = e.dealers || []
                      , h = a.container.find(d.favoriteDealersSelector.toSelector() + " " + d.searchResultListSelector.toSelector())
                      , i = h.find("> li.template")
                      , j = !1
                      , k = function(b) {
                        return a.validServices.length < 1 || a.validServices.indexOf(b.service.toLowerCase()) > -1
                    };
                    if (i.length) {
                        h.find(">li:not(.template, .prompt)").remove();
                        for (var l = 0; l < g.length && f < d.maxFavoritesDealersDisplay; l++) {
                            if (c.find(g[l].services, k)) {
                                f++;
                                var m = i.clone().removeClass("template")
                                  , n = g[l]
                                  , o = n.address.region && n.address.region.length ? " " + n.address.region : ""
                                  , p = n.address.city && n.address.city.length ? " " + n.address.city : "";
                                n.saved && (j = !0),
                                m.find(".name").html(d.htmlDecode(n.name)),
                                m.find(".address").html(d.htmlDecode(n.address.address1 + " " + n.address.zip + " " + p + " " + o)),
                                d.addDealerRating(m, n),
                                d.addDealerHours(a, m, n),
                                m.find(".icon-remove").click(d.removeDealer(a, n)).toggle(!b.safe("T1.myToyota.isAuthenticated")()),
                                m.has(".btn-select-dealer").length && m.click(d.onFavoriteDealerActive(a, n, m)),
                                m.find(".btn-select-dealer").or(m).click(d.onFavoriteDealerClick(a, n)),
                                m.appendTo(h),
                                m.css("display", "block")
                            }
                        }
                        f > 0 && (h.find("li:not(.template, .prompt)").toggleClass("only-child", 1 === f),
                        a.container.toggleClass("favorites-enabled", g.length > 0),
                        j && a.container.find("." + d.favoriteDealersSelector + " h5").html(T1.labels.dealer.dealerSaved || "Preferred dealer")),
                        d.fitMap(a, a.currentLocation.bounds)
                    }
                }).fail(function() {
                    d.fitMap(a, a.currentLocation.bounds)
                }),
                e
            },
            onFavoriteDealerActive: function(a, c, e) {
                return function(f) {
                    b(f.target).is(".btn-select-dealer") || (f.preventDefault(),
                    d.addDealerContactInfo(a, e, c),
                    d.initCtas(a, e.find(".dealer-ctas .btn"), c),
                    d.setFavoriteDealerActiveOnMap(a, c, e),
                    e.siblings().removeClass(T1.constants.CLASS_ACTIVE),
                    e.addClass(T1.constants.CLASS_ACTIVE),
                    d.scrollToDealer(e))
                }
            },
            onFavoriteDealerClick: function(a, c) {
                return function(e) {
                    d.RejectDealerSelection(b(e.target)) || (a.tracking.contextNode = b(e.currentTarget),
                    a.tracking.dealer = c,
                    e.preventDefault(),
                    d.tracking.trackFavoriteDealerAction(a),
                    d.selectFavoriteDealer(a, c, a.tracking.contextNode))
                }
            },
            selectPreferredDealer: function(a) {
                var b = a.container.find("." + d.favoriteDealersSelector + " ul li:not(.template):not(.prompt):first");
                return b.click(),
                0 !== b.length
            },
            removeDealer: function(a, c) {
                return function(e) {
                    e.stopPropagation();
                    var g = a.container.find("." + d.favoriteDealersSelector)
                      , h = g.find(".prompt")
                      , i = b(this).closest("li");
                    h.find(".btn-no").off("click").on("click", function() {
                        g.removeClass("prompt-active")
                    }),
                    h.find(".btn-yes").off("click").on("click", function() {
                        T1.channels.mytoyota.publish(f.MY_TOYOTA_DEALER_REMOVE, {
                            code: c.id,
                            callback: function() {
                                d.loadFavoriteDealers(a)
                            }
                        }),
                        g.removeClass("prompt-active"),
                        a.tracking.contextNode = h,
                        a.tracking.dealer = c,
                        d.tracking.trackFavoriteDealerAction(a)
                    }),
                    g.addClass("prompt-active"),
                    h.onTransitionEnd(function() {
                        a.container.find(".search-box").scrollTo(i)
                    }, {
                        one: !0
                    })
                }
            },
            retrieveCurrentLocation: function(a, b) {
                if (Modernizr.geolocation) {
                    var c = navigator.geolocation;
                    c ? c.getCurrentPosition(a, b) : b()
                } else
                    b()
            },
            handleCurrentLocation: function() {
                var a = b(this)
                  , c = a.closest(".dealer-finder")
                  , e = d.getContext(c) || d.getNewContextStructure(c)
                  , g = navigator.geolocation
                  , h = a.find("i")
                  , i = a.closest(".form");
                i = i.add(c.find(".direction"));
                var j = i.find('.input-search input[type="text"]');
                b.safe("T1.loader.isLoading")(h) || (d.clearError(e, i),
                g && (T1.channels.dialog.publishAsync(f.LOADING_START, {
                    target: h
                }),
                g.getCurrentPosition(function(b) {
                    e.tracking.coordsGPS = b.coords.latitude + "," + b.coords.longitude;
                    var c = function() {
                        var c = new google.maps.LatLng(b.coords.latitude,b.coords.longitude);
                        if (j.data("coordinates", c),
                        e.map)
                            var g = T1.channels.search.subscribe(f.INPUT_SEARCH_UPDATE, function() {
                                g.unsubscribe(),
                                T1.settings.dealer.showMyLocationPin && (e.isCurrentLocation = !0,
                                d.updateBuddyMarker(e, !0, c),
                                e.currentLocation.currentPosition = c),
                                a.closest(".form").find(".btn-search").click()
                            });
                        d.convertPositionToAddress(e, b, i),
                        T1.channels.dialog.publishAsync(f.LOADING_COMPLETE, {
                            target: h
                        })
                    };
                    T1.googleServices.maps.loaded() ? c() : d.initMapsApi(function() {
                        c()
                    })(e)
                }, function(a) {
                    1 === a.code ? (d.setError(e, T1.labels.dealer.errorUserDeniedGeoLocation || "Please allow your browser to track your location"),
                    e.container.removeClass("geolocation-enabled")) : d.setError(e, a.message),
                    T1.channels.dialog.publishAsync(f.LOADING_COMPLETE, {
                        target: h
                    })
                })))
            },
            centerMap: function(a, b, c) {
                a.map && b && (a.map.setCenter(new google.maps.LatLng(b.latitude || b.lat(),b.longitude || b.lng())),
                d.zoomMap(a, c || d.mapZoom))
            },
            fitMap: function(a, b) {
                b && (d.setMapBounds(a, b),
                d.isMobile() && d.isOneDealerOnly(b) && d.zoomMap(a, d.mapZoomOnlyOne))
            },
            zoomMap: function(a, b) {
                a.map && a.container.is(":visible") && a.map.setZoom(b)
            },
            isOneDealerOnly: function(a) {
                return a.getNorthEast().lat() === a.getSouthWest().lat() && a.getNorthEast().lng() === a.getSouthWest().lng()
            },
            setMapBounds: function(a, b) {
                var c = d.isMobile()
                  , e = a.container.find(".search-map")
                  , f = a.container.find(".search-box")
                  , g = {
                    height: e.height(),
                    width: e.width()
                }
                  , h = {
                    x: d.isRtl() ? a.container.width() - f.position().left : f.position().left + f.width(),
                    y: c ? a.container.height() / 2 : 0
                }
                  , i = {
                    width: g.width - (c ? 2 * d.MAP_CONST.BOUNDS_BUFFER : h.x + 2 * d.MAP_CONST.BOUNDS_BUFFER),
                    height: g.height - h.y - 2 * d.MAP_CONST.BOUNDS_BUFFER - d.markerSize.height
                }
                  , j = d.getBoundsZoomLevel(b, i);
                d.zoomMap(a, j);
                var k = {
                    x: c ? 0 : h.x / 2,
                    y: c ? h.y / 2 - 2 * d.MAP_CONST.BOUNDS_BUFFER : h.y / 2
                };
                google.maps.event.addListenerOnce(a.map, "idle", function() {
                    var c = d.offsetLatLng(a, b.getCenter(), k.x, k.y);
                    a.map.panTo(c)
                })
            },
            offsetLatLng: function(a, b, c, e) {
                c = c || 0,
                e = e || 0;
                var f = Math.pow(2, a.map.getZoom())
                  , g = a.map.getProjection().fromLatLngToPoint(b)
                  , h = new google.maps.Point((d.isRtl() ? -d.MAP_CONST.BOUNDS_BUFFER : c) / f,e / f)
                  , i = new google.maps.Point(g.x - h.x,g.y + h.y);
                return a.map.getProjection().fromPointToLatLng(i)
            },
            getBoundsZoomLevel: function(a, b) {
                var c = function(a) {
                    var b = Math.sin(a * Math.PI / 180)
                      , c = Math.log((1 + b) / (1 - b)) / 2;
                    return Math.max(Math.min(c, Math.PI), -Math.PI) / 2
                }
                  , e = function(a, b, c) {
                    return Math.floor(Math.log(a / b / c) / Math.LN2)
                }
                  , f = a.getNorthEast()
                  , g = a.getSouthWest()
                  , h = (c(f.lat()) - c(g.lat())) / Math.PI
                  , i = f.lng() - g.lng()
                  , j = (i < 0 ? i + 360 : i) / 360
                  , k = e(b.height, d.MAP_CONST.TILE_SIZE.height, h)
                  , l = e(b.width, d.MAP_CONST.TILE_SIZE.width, j);
                return Math.min(k, l, d.MAP_CONST.ZOOM_MAX)
            },
            convertPositionToAddress: function(a, b, c) {
                var e = new google.maps.Geocoder;
                a.currentLocation.position = new google.maps.LatLng(b.coords.latitude,b.coords.longitude),
                e.geocode({
                    latLng: a.currentLocation.position
                }, d.handleGeoCodingReverse(a, c))
            },
            handleGeoCodingReverse: function(a, b) {
                return function(c, e) {
                    e === google.maps.GeocoderStatus.OK ? c[1] ? (a.currentLocation.address = c[1].formatted_address,
                    a.tracking.addressGPS = c[1].formatted_address,
                    T1.channels.search.publish(f.INPUT_SEARCH_UPDATE, {
                        target: b.find(".input-search"),
                        value: a.currentLocation.address
                    })) : d.setError(a, T1.labels.dealer.errorGeoNotFound, b) : d.setError(a, T1.labels.dealer.errorGeoFailed, b)
                }
            },
            handleSearch: function(a) {
                if (a.search.length) {
                    var c = a.container.find("#form-dealer-search");
                    if (0 === c.length || b.safe("T1.formV2.validate")(c)) {
                        var e = d.getContext(a.container);
                        e && e.isWorking || (b.safe("T1.googleServices.maps.loaded")() ? d.search(a) : d.initMapsApi(function() {
                            d.search(a)
                        })())
                    }
                } else
                    d.setError(e, T1.labels.dealer.errorNoValue, a.container)
            },
            clearSearchFields: function(a) {
                var b = a.find('.input-search input[type="text"]');
                b.val(""),
                b.data("coordinates", null)
            },
            search: function(a) {
                var b = d.getContext(a.container);
                if (d.clearCountryPolygons(b),
                d.updateBuddyMarker(b, !1),
                d.clearError(null, a.container),
                b && !b.isCurrentLocation && d.clearSearchFields(a.container),
                !b || !b.isWorking) {
                    var c = {
                        cancel: !1,
                        data: a
                    };
                    if (T1.channels.dealer.publish(f.DEALERS_SEARCH, c),
                    !c.cancel)
                        if (a.input.val(a.search),
                        b)
                            a.search && "undefined" !== a.search && T1.channels.search.publish(f.INPUT_SEARCH_UPDATE, {
                                target: a.container.find(".search-dealers .input-search"),
                                value: a.search
                            }),
                            d.handleSearchType(b, a);
                        else {
                            var e = T1.settings.dealer.formUrl + "?tab=pane-dealer&searchType=" + encodeURIComponent(a.searchType) + "&search=" + encodeURIComponent(a.search);
                            a.options && a.options.set.length && (e += "&services=" + a.options.set.join("|")),
                            T1.channels.hash.publishAsync(f.HASH_ADD, "/box-ajax/url=" + encodeURIComponent(e) + "/size=fullscreen")
                        }
                }
            },
            handleSearchType: function(a, b) {
                switch (b.searchType) {
                case "location":
                    d.geoCodeAddress(a, b, d.onSearchSuccess);
                    break;
                case "name":
                    d.getDealersByName(a, b);
                    break;
                case "id":
                    d.getDealerById(a, b.id)
                }
            },
            onSearchSuccess: function(a, b, c, e) {
                var g = {
                    cancel: !1,
                    reprocess: !1,
                    data: e,
                    results: b
                };
                T1.channels.dealer.publish(f.DEALER_GEOCODE_SUCCESS, g),
                g.cancel || (g.reprocess ? d.search(e) : (a.currentLocation.position = new google.maps.LatLng(c.lat(),c.lng()),
                a.currentLocation.address = b[0].formatted_address,
                a.currentLocation.searchQuery = e,
                d.getDealersByLocation(a, a.currentLocation, e)))
            },
            geoCodeAddress: function(a, b, c, e) {
                b.search && b.coordinates ? c(a, [{
                    formatted_address: b.search
                }], b.coordinates, b) : (d.working(a, !0),
                d.api.geocodeAddress(b).done(function(f, g) {
                    d.trackGeoCoderResponse(a, b, g);
                    var h = !e && T1.settings.dealer.extraCountries ? d.filterGeoCodingResults(a, f.results, b, c) : f.results[0].geometry.location;
                    h && c && c(a, f.results, h, b)
                }).fail(function(c, e) {
                    d.trackGeoCoderResponse(a, b, e),
                    d.setError(a, c, b.container)
                }).always(function() {
                    d.working(a, !1)
                }))
            },
            trackGeoCoderResponse: function(a, b, c) {
                b.options && (b.search === a.tracking.addressGPS ? (a.tracking.searchTypeSuffix = "gps",
                a.tracking.searchQuery = a.tracking.coordsGPS) : (a.tracking.searchTypeSuffix = "address",
                a.tracking.searchQuery = b.search),
                a.tracking.searchCategory = b.options.set.join(";")),
                c === google.maps.GeocoderStatus.OK || c === google.maps.GeocoderStatus.ZERO_RESULTS ? c === google.maps.GeocoderStatus.ZERO_RESULTS ? b.options && (a.tracking.searchResults = "0",
                a.tracking.currentStep = "displayDealerResultsScreen",
                d.tracking.trackDisplayDealerResultsScreen(a)) : b.options && (a.tracking.searchResults = "1") : b.options && (a.tracking.searchResults = "0",
                a.tracking.currentStep = "displayDealerResultsScreen",
                d.tracking.trackDisplayDealerResultsScreen(a))
            },
            filterGeoCodingResults: function(a, c, e, f) {
                var g = []
                  , h = T1.settings.dealer.extraCountries ? T1.settings.dealer.extraCountries.toUpperCase().split("|") : [];
                h.push(d.getSearchableCountry());
                for (var i = 0; i < c.length; i++) {
                    var j = c[i];
                    if (j.address_components)
                        for (var k = j.address_components, l = 0; l < k.length; l++) {
                            var m = k[l];
                            if (m.types)
                                for (var n = 0; n < m.types.length; n++) {
                                    var o = m.types[n];
                                    "country" === o && b.inArray(m.short_name, h) >= 0 && g.push(j)
                                }
                        }
                }
                return g[0] ? g[0].geometry.location : (d.geoCodeAddress(a, e, f, !0),
                null)
            },
            getDealersByLocation: function(a, b, c) {
                var e = a && a.container && a.container.data("exclude");
                d.clearError(a, c.container),
                d.working(a, !0);
                var f = d.api.getDealersByLocation(b, {
                    excludeForContext: e,
                    isCurrentLocation: a.isCurrentLocation,
                    services: c.options
                });
                f.done(d.onGetDealersDone(a)),
                f.fail(d.onGetDealersFail(a)),
                f.always(function() {
                    d.working(a, !1)
                })
            },
            getDealersByName: function(a, b) {
                var c = d.api.getDealersByName(b);
                d.clearError(a, b.container),
                d.working(a, !0),
                a.isCurrentLocation = !1,
                c.done(function(b, c, d) {
                    d && d.position && (a.currentLocation.position = d.position)
                }),
                c.done(d.onGetDealersDone(a)),
                c.fail(d.onGetDealersFail(a)),
                c.always(function() {
                    d.working(a, !1)
                })
            },
            getDealerById: function(a, b) {
                var c = T1.utilities.url.concat(f.URL_DEALERS, encodeURIComponent(b));
                d.getDealerByUrl(a, c)
            },
            searchDealers: function(a, b, c) {
                if (b && c) {
                    var e = T1.utilities.url.concat(f.URL_DEALERS, "find", encodeURIComponent(b), encodeURIComponent(c));
                    d.getDealerByUrl(a, e).done(function() {
                        T1.channels.search.publish(f.INPUT_SEARCH_UPDATE, {
                            target: a.container.find(".search-dealers .input-search"),
                            value: c
                        })
                    })
                }
            },
            getDealerByUrl: function(a, b) {
                var c = [T1.channels.dealer.subscribe(f.DEALERS_FOUND, function() {
                    d.clearSubscriptions(c),
                    d.selectDealerIndex(a, 1)
                }), T1.channels.dealer.subscribe(f.DEALERS_NOT_FOUND, function() {
                    d.clearSubscriptions(c)
                })];
                d.clearError(a),
                d.working(a, !0),
                a.isCurrentLocation = !1;
                var e = d.api.getDealerByUrl(b);
                return e.done(d.onGetDealersDone(a)),
                e.fail(d.onGetDealersFail(a)),
                e.always(function() {
                    d.working(a, !1)
                }),
                e
            },
            onGetDealersDone: function(a) {
                return function(c, e) {
                    var g = a.container.find(".search-results > ul");
                    c.length ? (d.setCurrentLocationBasedOnData(a, e),
                    d.loadMap(a, a.currentLocation.position, function() {
                        var e = g.find("> li.template")
                          , h = []
                          , i = new google.maps.LatLngBounds;
                        d.clearDealers(a, g);
                        for (var j = 0; j < c.length; j++) {
                            var k = c[j].position || c[j].address.geo;
                            0 === k.lat && 0 === k.lon && c.splice(j, 1)
                        }
                        b.each(c, function(c, f) {
                            var j = d.buildDealerNode(a, e, f, h, c);
                            j.click(function(c) {
                                d.isDealerSelected(a) && !d.isSearchResultSelector(a) || d.RejectDealerSelection(b(c.target)) || (c.preventDefault(),
                                d.selectDealer(a, b(this), c.target))
                            }),
                            g.append(j),
                            c < a.SearchedDealersDisplayStep && d.addMarker(a, f, c, j, i),
                            a.currentLocation.dealers.push(f)
                        }),
                        a.currentLocation.bounds = i,
                        d.buildLegend(a, h),
                        d.initBack(a),
                        d.resetSearchInterface(a),
                        a.container.toggleClass("search-results-enabled search-results-count", c.length > 0),
                        a.container.toggleClass("more-search-results-enabled", c.length > a.SearchedDealersDisplayStep),
                        d.fitMap(a, i),
                        d.scrollTop(a),
                        T1.channels.dealer.publishAsync(f.DEALERS_FOUND, {
                            context: a,
                            dealers: c
                        }),
                        a.tracking.currentStep = "displayDealerResultsScreen",
                        d.tracking.trackDisplayDealerResultsScreen(a)
                    })) : (T1.channels.dealer.publishAsync(f.DEALERS_NOT_FOUND),
                    d.setError(a, T1.labels.dealer.errorDealersNotFound),
                    d.clearDealers(a, g),
                    d.clearLegend(a),
                    d.resetSearchOptions(a),
                    a.container.toggleClass("search-results-count more-search-results-enabled", !1),
                    a.tracking.searchResults = "0",
                    a.tracking.currentStep = "displayDealerResultsScreen",
                    d.tracking.trackDisplayDealerResultsScreen(a))
                }
            },
            setCurrentLocationBasedOnData: function(a, b) {
                var c, d = b;
                if (!a.currentLocation.position) {
                    if ("object" != typeof b)
                        try {
                            d = JSON.parse(b)
                        } catch (e) {
                            T1.utilities.isEnvironment.production || window.console.log("Position could not be set based on data from T1.dealerfinder.onGetDealersDone.\n" + e.message)
                        }
                    c = d && d.address && d.address.geo || {
                        lat: 1,
                        lon: 1
                    },
                    c.lat && "function" != typeof c.lat && (c = new google.maps.LatLng(c.lat,c.lon)),
                    a.currentLocation = a.currentLocation || {},
                    a.currentLocation.position = c
                }
            },
            RejectDealerSelection: function(a) {
                return !a.is(".btn-select-dealer") && ("A" === a[0].nodeName || a.closest("a").length)
            },
            buildDealerNode: function(a, b, e, f, g) {
                var h = b.clone().removeClass("template")
                  , i = h.find(".services")
                  , j = i.find("> li.template")
                  , k = function(a) {
                    return a.service == q
                }
                  , l = e.address.region && e.address.region.length ? " " + e.address.region : ""
                  , m = e.address.city && e.address.city.length ? " " + e.address.city : ""
                  , n = h.data("relation")
                  , o = n && !Object.resolve(n, e, !1) || !1;
                if (h.toggleClass("disabled", o),
                h.find(".index").text(void 0 !== g ? g + 1 : ""),
                h.find(".name").html(d.htmlDecode(e.name)),
                h.find(".address").html(d.htmlDecode(e.address.address1 + " " + e.address.zip + " " + m + " " + l)),
                h.toggleClass("hidden", g >= a.SearchedDealersDisplayStep),
                e.services.length) {
                    for (var p = 0; p < e.services.length; p++) {
                        var q = e.services[p].service
                          , r = j.clone().removeClass("template")
                          , s = r.find(".icon-service");
                        s.addClass("icon-" + q.toLowerCase()),
                        s.attr("title", e.services[p].label),
                        e.services[p].icon && (s.addClass("icon-custom"),
                        s.css("background-image", "url('" + e.services[p].icon + "')")),
                        i.append(r);
                        void 0 === c.find(f, k) && f.push({
                            service: q,
                            label: e.services[p].label,
                            icon: e.services[p].icon
                        })
                    }
                    j.remove();
                    var t = d.formatDealerDistance(e);
                    t && h.find(".distance").text(t),
                    h.find(".icon-service").tooltip({
                        container: ".overlayerWrapper"
                    })
                } else
                    i.remove();
                return d.addDealerRating(h, e),
                d.isSearchResultSelector(a) && (d.addDealerHours(a, h, e),
                d.addDealerContactInfo(a, h, e),
                d.initCtas(a, h.find(".dealer-ctas .btn"), e)),
                h
            },
            addDealerContactInfo: function(a, b, c) {
                var e = b.is(".dealer-details") && b || b.find(".dealer-details");
                e.find(".phone a").attr("href", "tel:" + c.phone).text(d.formatPhoneNumber(c.phone).text).on("click", d.tracking.trackDealerInfoClicked(a)),
                e.find(".phone").toggleClass("hidden", !c.hasOwnProperty("phone") || !c.phone || c.phone.length < 1),
                e.find(".fax .content1").text(d.formatPhoneNumber(c.fax1).text),
                e.find(".fax").toggleClass("hidden", !c.hasOwnProperty("fax1") || !c.fax1 || c.fax1.length < 1),
                e.find(".mail a").attr("href", "mailto:" + c.eMail).text(c.eMail).on("click", d.tracking.trackDealerInfoClicked(a)),
                e.find(".mail").toggleClass("hidden", !c.hasOwnProperty("eMail") || !c.eMail || c.eMail.length < 1);
                var f = /^https{0,1}:\/\//.test(c.url) ? c.url : "http://" + c.url
                  , g = T1.settings.dealerUrlQueryString
                  , h = location.hostname;
                g && "string" == typeof c.url && -1 === c.url.toLowerCase().indexOf(h.toLowerCase()) && (-1 === f.indexOf("?") && (f += "?"),
                f += g.replace(/%host%/g, h)),
                e.find(".link a").attr("href", f).text(decodeURIComponent(c.url)).on("click", d.tracking.trackDealerInfoClicked(a)),
                e.find(".link").toggleClass("hidden", !c.hasOwnProperty("url") || !c.url || c.url.length < 1)
            },
            formatDealerDistance: function(a) {
                var c;
                if (a.drive && a.drive.length > 0)
                    c = a.drive[0].distance.text;
                else if (b.isNumeric(a.distance)) {
                    var d = a.imperial ? "miles" : "km";
                    c = Math.round(10 * a.distance) / 10 + " " + d
                }
                return c
            },
            addMarker: function(a, b, c, e, f, g, h) {
                if (c < d.maxMarkersNumber) {
                    var i, j, k = b.position || b.address.geo;
                    -1 === c ? (i = a.markersColor.withoutIndex.x,
                    j = a.markersColor.withoutIndex.y) : "true" !== T1.settings.dealer.hideDealerNumbers || a.isOsbDealerFinder ? (i = d.markerColors.default.withIndex.x,
                    j = a.markersColor.withIndex.y * c) : (i = d.markerColors.default.withoutIndex.x,
                    j = d.markerColors.default.withoutIndex.y),
                    g = void 0 === g ? c : g,
                    k.lat && "number" == typeof k.lat && (k = new google.maps.LatLng(k.lat,k.lon));
                    var l = new google.maps.MarkerImage(T1.settings.dealer.markerPath + d.PIN_ICONS_FILE,new google.maps.Size(d.markerSize.width,d.markerSize.height),new google.maps.Point(i,j));
                    f.extend(k),
                    d.addDelayedMarker(a, {
                        position: k,
                        icon: l,
                        map: a.map
                    }, e, 200 * g, h)
                }
            },
            addDelayedMarker: function(a, b, c, e, f) {
                window.setTimeout(function() {
                    b.animation = google.maps.Animation.DROP;
                    var e = new google.maps.Marker(b);
                    if (c) {
                        var g = c.index();
                        g > 0 ? (a.currentLocation.dealersMarkers[g - 1] && a.currentLocation.dealersMarkers[g - 1].setMap(null),
                        a.currentLocation.dealersMarkers[g - 1] = e,
                        google.maps.event.addListener(e, "click", function() {
                            d.isDirectionEnabled(a) || d.selectDealer(a, c, e)
                        })) : e.setMap(null)
                    }
                    f && f(e)
                }, e)
            },
            toggleMarkers: function(a, b) {
                if (a.currentLocation.dealersMarkers.length)
                    for (var c = 0; c < a.currentLocation.dealersMarkers.length; c++)
                        a.currentLocation.dealersMarkers[c].setVisible(b)
            },
            activateMarker: function(a, b, c, e) {
                var f, g;
                if ("true" === T1.settings.dealer.hideDealerNumbers ? (f = e.withoutIndex.x,
                g = c ? e.withoutIndex.y : d.markerColors.default.withoutIndex.y) : (f = c ? e.withIndex.x : d.markerColors.default.withIndex.x,
                g = e.withIndex.y * b),
                b < d.maxMarkersNumber) {
                    var h = T1.settings.dealer.markerPath + d.PIN_ICONS_FILE
                      , i = new google.maps.MarkerImage(h,new google.maps.Size(29,55),new google.maps.Point(f,g));
                    a.setIcon(i),
                    a.setAnimation(c ? 4 : null)
                }
            },
            setColoredDotMarker: function(a, b, c, e) {
                if (c) {
                    var f = new google.maps.MarkerImage(T1.settings.dealer.markerPath + d.PIN_ICONS_FILE,new google.maps.Size(d.markerSize.width,d.markerSize.height),new google.maps.Point(e.withoutIndex.x,e.withoutIndex.y));
                    a.setIcon(f),
                    a.setVisible(!0),
                    a.setAnimation(c ? 4 : null)
                } else
                    d.activateMarker(a, b, !0, e)
            },
            setBuddyMarker: function(a, b) {
                a.currentLocation.buddyMarker && a.currentLocation.buddyMarker.setMap(null),
                a.currentLocation.buddyMarker = b
            },
            updateBuddyMarker: function(a, b, c) {
                a && a.map && (b ? d.addDelayedMarker(a, {
                    position: c,
                    icon: new google.maps.MarkerImage(T1.settings.dealer.markerPath + d.PIN_ICONS_FILE,new google.maps.Size(d.markerSize.width,d.markerSize.height),new google.maps.Point(88,0)),
                    map: a.map
                }, null, 0, function(b) {
                    d.setBuddyMarker(a, b)
                }) : d.setBuddyMarker(a, null))
            },
            clearDealers: function(a, b) {
                b = b || a.container.find(".search-results > ul"),
                b.find("> li:not(.template)").remove(),
                a.currentLocation.dealers = []
            },
            clearMarkers: function(a) {
                for (var b = a.currentLocation.dealersMarkers, c = b.length - 1; c >= 0; c--)
                    b[c] && b[c].setMap(null),
                    b.splice(c, 1)
            },
            buildLegend: function(a, b) {
                var c = a.container.find(".legend")
                  , e = c.find("ul")
                  , f = c.find(".template");
                if (c.find("li:not(.template)").remove(),
                b.length && f.length)
                    for (var g = 0; g < b.length; g++)
                        d.createLegendItem(a, b[g], e, f);
                c.toggle(b.length > 0 && f.length > 0)
            },
            createLegendItem: function(a, b, c, d) {
                c = c || a.container.find(".legend ul"),
                d = d || c.find(".template");
                var e = d.clone().removeClass("template")
                  , f = e.find(".icon-service");
                f.addClass("icon-" + b.service.toLowerCase()),
                e.find(".content1").text(b.label),
                b.icon && (f.addClass("icon-custom"),
                f.css("background-image", "url('" + b.icon + "')")),
                c.append(e)
            },
            clearLegend: function(a) {
                d.buildLegend(a, [])
            },
            onGetDealersFail: function(a) {
                return function(b) {
                    d.setError(a, b),
                    a.tracking.searchResults = "0",
                    a.tracking.currentStep = "displayDealerResultsScreen",
                    d.tracking.trackDisplayDealerResultsScreen(a)
                }
            },
            selectDealer: function(a, c, e) {
                var g = c.siblings(T1.constants.CLASS_ACTIVE.toSelector()).index()
                  , h = a.currentLocation.dealers[c.index() - 1]
                  , i = a.currentLocation.dealersMarkers[c.index() - 1];
                d.unSelectDealer(a),
                d.clearError(a),
                d.setDealerActive(a, c),
                d.loadDealerDetails(a, c, h),
                g > 0 && d.activateMarker(a.currentLocation.dealersMarkers[g - 1], g - 1, !1, a.markersColor),
                d.activateMarker(i, c.index() - 1, !0, a.markersColor),
                a.container.data("dealer-zoom") && d.zoomMap(a, a.container.data("dealer-zoom")),
                a.tracking.dealer = h,
                a.tracking.currentStep = "displayDealerDetail",
                d.tracking.trackViewDealerDetail(a),
                (b(e).is(".btn-select-dealer") && a.isOsbDealerFinder || !a.isOsbDealerFinder) && T1.channels.dealer.publishAsync(f.DEALER_SELECTED, {
                    context: a,
                    dealer: h
                }),
                c.find(".btn-select-dealer").click(function(c) {
                    var d = b(this)
                      , e = d.data("go-to-form-step");
                    c.preventDefault(),
                    e && (T1.channels.dealer.publishAsync(f.DEALER_SELECTED, {
                        context: a,
                        dealer: h
                    }),
                    T1.channels.form.publish(f.NAVIGATION_FORM_VALIDATE_STEP, {
                        context: d.closest(".form-v2-container"),
                        number: e,
                        moveToStep: !0
                    }))
                })
            },
            selectDealerIndex: function(a, b) {
                var c = a.container.find(".search-results > ul > li:eq(" + b + ")");
                if (c.length && (d.selectDealer(a, c, c),
                d.isDirectionEnabled(a))) {
                    var e = a.currentLocation.dealers[b - 1];
                    d.handleDirection(a, e)()
                }
            },
            selectFavoriteDealer: function(a, b, c) {
                if (a.map) {
                    if (d.clearError(a),
                    !d.isSearchResultSelector(a)) {
                        var c = d.loadFavoriteDealer(a, b)
                          , e = new google.maps.LatLngBounds;
                        d.loadDealerDetails(a, c, b),
                        d.addMarker(a, b, -1, null, e, 0, function(b) {
                            a.currentLocation.favoriteMarker = b
                        }),
                        d.fitMap(a, e),
                        d.initBack(a, b),
                        a.container.toggleClass("search-results-enabled search-result-selected favorite-selected", !0)
                    }
                    d.isSearchResultSelector(a) ? d.scrollToDealer(c) : d.scrollTop(a),
                    a.tracking.currentStep = "displayDealerResultsScreen",
                    a.tracking.searchTypeSuffix = "favorite",
                    a.tracking.searchQuery = b.guid,
                    a.tracking.searchResults = "1",
                    a.tracking.searchCategory = "",
                    d.tracking.trackDisplayDealerResultsScreen(a),
                    T1.channels.dealer.publishAsync(f.DEALER_SELECTED, {
                        context: a,
                        dealer: b
                    });
                    var g = c.data("go-to-form-step");
                    g && T1.channels.form.publish(f.NAVIGATION_FORM_VALIDATE_STEP, {
                        context: c.closest(".form-v2-container"),
                        number: g,
                        moveToStep: !0
                    })
                } else
                    d.initMapsApi(function() {
                        d.selectFavoriteDealer(a, b, c)
                    })(a)
            },
            loadFavoriteDealer: function(a, b) {
                var c = a.container.find(".search-results > ul")
                  , e = c.find("> li.template")
                  , f = []
                  , g = d.buildDealerNode(a, e, b, f);
                return c.find("> li:not(.template)").remove(),
                c.append(g.addClass(T1.constants.CLASS_ACTIVE)),
                d.buildLegend(a, f),
                g
            },
            setFavoriteDealerActiveOnMap: function(a, b, c) {
                if (a.map) {
                    var e = new google.maps.LatLngBounds;
                    d.unSelectFavoriteDealer(a),
                    d.addMarker(a, b, -1, null, e, 0, function(b) {
                        a.currentLocation.favoriteMarker = b
                    }),
                    d.fitMap(a, e),
                    c.siblings().removeClass(T1.constants.CLASS_ACTIVE),
                    c.addClass(T1.constants.CLASS_ACTIVE),
                    a.container.toggleClass("favorite-selected", !0)
                }
            },
            unSelectFavoriteDealer: function(a) {
                a.currentLocation.favoriteMarker && (d.isSearchResultSelector(a) ? a.currentLocation.favoriteMarker.setMap(null) : (a.currentLocation.favoriteMarker.setMap(null),
                d.getActiveDealerNode(a).remove(),
                d.clearLegend(a),
                a.currentLocation.position ? d.loadMap(a, a.currentLocation.position) : d.loadCountryMap(a),
                d.resetSearchBoxHeight(a)))
            },
            loadDealerDetails: function(a, b, c) {
                if (!b.find(".dealer-details").length) {
                    var e = a.container.find(".dealer-details.template").clone().removeClass("template");
                    if (e.length) {
                        var f = c.address.region && c.address.region.length ? " (" + c.address.region + ")" : ""
                          , g = c.address.city && c.address.city.length ? " " + c.address.city : "";
                        e.find(".address .content1").text(c.address.address1),
                        e.find(".address .content2").text(c.address.zip + g + f),
                        d.addDealerContactInfo(a, e, c),
                        d.addDealerHours(a, e, c),
                        d.filterDealerServices(a, c),
                        e.find(".btn-direction").on("click", d.handleDirection(a, c)),
                        e.find(".btn-save").on("click", d.save(a, c));
                        var h = e.find(".dealer-ctas .btn");
                        d.initCtas(a, h, c),
                        b.append(e)
                    }
                }
            },
            initCtas: function(a, c, e) {
                c && c.each(function() {
                    var c = b(this)
                      , f = c.attr("href")
                      , g = c.data("services") || []
                      , h = g.length ? b.grep(e.services, function(a, b) {
                        return g.filter(function(b) {
                            return b.toLowerCase() === a.service.toLowerCase()
                        }).length
                    }) : []
                      , i = Object.resolve(c.data("relation"), e, !0);
                    if (g.length === h.length && i) {
                        if (!f || "#" === f)
                            return;
                        f = T1.request.setQueryStringParameter(f, "dealerId", e.uuid),
                        f = T1.request.setQueryStringParameter(f, "localDealerId", e.localDealerID);
                        var j = "/dealerGuid=%5BDEALERGUID%5D";
                        f.indexOf(j) > 0 && (f = f.replace(j, e.osbId ? "/dealerGuid=" + e.osbId : "")),
                        c.attr("href", f),
                        c.on("click", d.tracking.trackDealerCtaClicked(a))
                    } else
                        c.remove()
                })
            },
            unSelectDealer: function(a) {
                var b = d.getActiveDealerNode(a).removeClass(T1.constants.CLASS_ACTIVE);
                b.length && (a.isOsbDealerFinder || b.find(".dealer-details").remove(),
                d.filterDealerServices(a),
                d.activateMarker(a.currentLocation.dealersMarkers[b.index() - 1], b.index() - 1, !1, a.markersColor),
                d.isMobile() ? d.fitMap(a, a.currentLocation.bounds) : d.resetSearchBoxHeight(a))
            },
            setDealerActive: function(a, b) {
                b.siblings().removeClass(T1.constants.CLASS_ACTIVE),
                b.addClass(T1.constants.CLASS_ACTIVE),
                a.container.addClass("search-result-selected"),
                d.isSearchResultSelector(a) ? d.scrollToDealer(b) : d.scrollTop(a)
            },
            formatPhoneNumber: function(a) {
                var b = {
                    text: "",
                    tel: ""
                };
                if (a && a.length)
                    if (T1.settings.phoneCountryCode) {
                        for (var c = 0; c < a.length; c++) {
                            var d = a.charAt(c);
                            "1234567890+".indexOf(d) > -1 && ("0" === d && 0 === b.text.length ? b.text += "(0)" : (b.text += d,
                            b.tel += d))
                        }
                        b.text.length > 0 && "+" !== b.text.charAt(0) && (b.text = T1.settings.phoneCountryCode + b.text,
                        b.tel = T1.settings.phoneCountryCode + b.tel)
                    } else {
                        for (var c = 0; c < a.length; c++) {
                            var d = a.charAt(c);
                            "1234567890+".indexOf(d) > -1 && (b.tel += d)
                        }
                        b.text = a
                    }
                return b
            },
            addDealerRating: function(a, b) {
                if (b.rating && (b.rating.percentage || b.rating.fivestar)) {
                    if (b.rating.percentage && a.find(".review-container .value").css({
                        width: b.rating.percentage + "%"
                    }),
                    b.rating.fivestar) {
                        var c = Math.round(10 * b.rating.fivestar) / 10;
                        c = c.toString().replace(".", ","),
                        a.find(".rating-text").text(c)
                    }
                    b.reviewUrl ? a.find(".review-url").attr("href", b.reviewUrl).attr("target", b.externalDealerUrl ? "_blank" : "_self") : a.find(".review-url").hide()
                } else
                    a.find(".review-container").hide()
            },
            addDealerHours: function(a, c, e) {
                if (a.container.removeClass("hours-enabled"),
                e.openingDays && e.openingDays.length) {
                    for (var f = !0, g = c.find(".dealer-details-infos.template:has(.opening)"), h = g.data("services"), i = 0; i < e.openingDays.length; i++)
                        try {
                            if (e.openingDays[i].hours && e.openingDays[i].hours.length) {
                                var j = e.openingDays[i]
                                  , k = j.originalService
                                  , l = "_" + (e.guid || e.uuid) + "_" + k.replace(/\s/g, "_");
                                if (!h || -1 !== h.indexOf(k)) {
                                    var m = c.find(".dealer-details-infos#" + l).or(g.clone().removeClass("template"));
                                    if (m.length) {
                                        if (m.attr("id") || (m.attr("id", l),
                                        0 === i || f || m.find("> h4").remove(),
                                        m.find("> h5").text(j.service),
                                        c.find(".dealer-details-infos:has(.opening):last()").or(".dealer-details-contact").after(m)),
                                        j.hours.length) {
                                            var n = j.startDay === j.endDay ? j.startDay : j.startDay + "-" + j.endDay;
                                            m.find(".opening").append(b('<li class="item"/>').text(n));
                                            for (var o = "", p = 0; p < j.hours.length; p++)
                                                o += 0 !== p ? " | " : "",
                                                o += j.hours[p].startTime + "-" + j.hours[p].endTime;
                                            b('<li class="item"/>').text(o).appendTo(m.find(".opening"))
                                        }
                                        m.find(".dealer-details-links a").each(function() {
                                            var a = b(this);
                                            a.attr("href", a.attr("href").replace("{{dealerId}}", e.id))
                                        })
                                    }
                                    f = !1
                                }
                            }
                        } catch (q) {
                            console.log(q.message)
                        }
                    d.buildHoursTogglePanel(c, e.guid || e.uuid)
                } else if (e.openingHours) {
                    var m = c.find(".dealer-details-infos.template:has(.opening)").clone().removeClass("template");
                    m.length ? (m.find("> h5").remove(),
                    b('<li class="item"/>').text(e.openingHours).appendTo(m.find(".opening")),
                    c.find(".dealer-details-infos:has(.opening):last()").or(".dealer-details-contact").after(m),
                    d.buildHoursTogglePanel(c, e.guid || e.uuid)) : c.append(d.buildValidHtml(e.openingHours))
                }
            },
            buildHoursTogglePanel: function(a, b) {
                a.find(".toggle.hours").attr("href", "#dealer-toggle-details-" + b),
                a.find(".collapse.hours-details").attr("id", "dealer-toggle-details-" + b),
                a.addClass("hours-enabled")
            },
            filterDealerServices: function(a, b) {
                var c = a.container.find(".legend");
                if (b)
                    if ("true" !== T1.settings.dealer.hideServices && b.services.length) {
                        c.find("li:not(.template)").addClass("hidden");
                        for (var e = 0; e < b.services.length; e++) {
                            var f = b.services[e]
                              , g = c.find("li:has(.icon-" + f.service.toLowerCase() + ")");
                            g.length || d.createLegendItem(a, f),
                            g.removeClass("hidden")
                        }
                    } else
                        c.hide();
                else
                    c.find("li.hidden").removeClass("hidden"),
                    c.toggle(c.find("li").length > 0)
            },
            scrollTop: function(a) {
                setTimeout(function() {
                    a.container.find(d.isMobile() ? ".search-box" : ".scrollable").scrollTop(0)
                }, 0)
            },
            scrollToDealer: function(a) {
                setTimeout(function() {
                    a.closest(d.isMobile() ? ".search-box" : ".scrollable").scrollTo(a)
                }, 0)
            },
            setError: function(a, b, c) {
                console.log("dealerfinder error: " + b),
                (c || a.container).find(".error-message").text(b).closest(".form").addClass(f.CLASS_ERROR_FORM),
                a.container.find(".search-map.loading").length && d.loadCountryMap(a)
            },
            clearError: function(a, b) {
                if (a || b) {
                    (b || a.container).find(".error-message").empty().closest(".form").removeClass(f.CLASS_ERROR_FORM)
                }
            },
            clearSubscriptions: function(a) {
                for (var b = 0; b < a.length; b++)
                    a[b].unsubscribe()
            },
            working: function(a, b) {
                a.isWorking = b
            },
            htmlDecode: function(a) {
                return b("<div/>").html(a).text()
            },
            buildValidHtml: function(a) {
                try {
                    return b("<div/>", {
                        html: a
                    }).html()
                } catch (e) {
                    return d.htmlDecode(a)
                }
            },
            isMobile: function() {
                return "xs" === b.safe("T1.breakpoints.currentBP")()
            },
            isPortrait: function() {
                return window.innerHeight > window.innerWidth
            },
            isOverlayer: function(a) {
                return a.container.closest(".overlayerWrapper").length > 0 || a.container.closest(".material-box").length > 0
            },
            isMaterialBox: function(a) {
                return a.container.closest(".material-box").length > 0
            },
            isTrackingEnabled: function() {
                return "object" == typeof window.t1DataLayer
            },
            isDealerSelected: function(a) {
                return a.container.hasClass("search-result-selected")
            },
            isSearchResultSelector: function(a) {
                return a.container.hasClass("selector")
            },
            isDirectionEnabled: function(a) {
                return a.container.hasClass("direction-enabled")
            },
            isRtl: function() {
                return "rtl" === T1.settings.siteDirection
            },
            handleDirection: function(a, b) {
                return function(c) {
                    c && c.preventDefault();
                    var e = a.container.find(".direction")
                      , f = e.find('.input-search input[type="text"]')
                      , g = b.address.region && b.address.region.length ? " (" + b.address.region + ")" : ""
                      , h = d.getActiveDealerNode(a).index() - 1;
                    e.length && (d.scrollTop(a),
                    d.toggleMarkers(a, !1),
                    a.currentLocation.dealersMarkers.length && d.setColoredDotMarker(a.currentLocation.dealersMarkers[h], h, !0, a.markersColor),
                    e.find("> h2").html(d.htmlDecode(b.name)),
                    e.find(".address .content1").text(b.address.address1),
                    e.find(".address .content2").text(b.address.zip + g),
                    e.find(".coordinates .content1").text((T1.labels.dealer.gpsLatitude || "lat") + ": " + b.address.geo.lat),
                    e.find(".coordinates .content2").text((T1.labels.dealer.gpsLongitude || "lon") + ": " + b.address.geo.lon),
                    d.initDirections(a, b),
                    f.val().length && a.container.find(".direction .btn-search").click(),
                    a.container.addClass("direction-enabled"),
                    d.resetSearchBoxHeight(a),
                    a.tracking.currentStep = "requestDealerDirections",
                    d.tracking.trackRequestDealerDirections(a))
                }
            },
            renderDealerDirections: function(a, b) {
                var c = a.container.find('.direction .input-search input[type="text"]')
                  , e = c.val()
                  , f = c.data("coordinates");
                return e.length || f ? (d.geoCodeAddress(a, {
                    search: e,
                    coordinates: f
                }, function(a, c, e) {
                    var f = a.container.find(".direction .direction-details .details").empty()
                      , g = new google.maps.DirectionsService
                      , h = new google.maps.LatLng(e.lat(),e.lng())
                      , i = new google.maps.LatLng(b.address.geo.lat,b.address.geo.lon);
                    d.clearDirections(a),
                    a.currentLocation.directionsDisplay = new google.maps.DirectionsRenderer({
                        map: a.map,
                        suppressMarkers: !0,
                        preserveViewport: !0
                    }),
                    a.currentLocation.buddyMarker && h.equals(a.currentLocation.buddyMarker.position) || d.updateBuddyMarker(a, !0, h);
                    var j = {
                        origin: h,
                        destination: i,
                        travelMode: google.maps.DirectionsTravelMode.DRIVING,
                        unitSystem: T1.settings.dealer.distanceUnit === d.distanceUnits.km ? google.maps.DirectionsUnitSystem.METRIC : google.maps.DirectionsUnitSystem.IMPERIAL
                    };
                    a.currentLocation.directionsDisplay.setPanel(f[0]),
                    g.route(j, function(b, c) {
                        c === google.maps.DirectionsStatus.OK && (a.currentLocation.directionBounds = new google.maps.LatLngBounds,
                        a.currentLocation.directionBounds.extend(h),
                        a.currentLocation.directionBounds.extend(i),
                        a.currentLocation.directionsDisplay.addListener("directions_changed", function() {
                            d.fitMap(a, a.currentLocation.directionsDisplay.getDirections().routes[0].bounds)
                        }),
                        a.currentLocation.directionsDisplay.setDirections(b)),
                        a.container.addClass("direction-results-enabled"),
                        d.working(a, !1),
                        a.tracking.currentStep = "displayResultRequestDealerDirections",
                        d.tracking.trackDisplayResultRequestDealerDirections(a)
                    })
                }),
                d.resetSearchBoxHeight(a),
                !0) : (d.setError(a, T1.labels.dealer.errorNoValue, a.container.find(".direction.form")),
                !1)
            },
            clearDirections: function(a) {
                a.currentLocation.directionsDisplay && (a.currentLocation.directionsDisplay.setMap(null),
                a.currentLocation.directionsDisplay = null,
                a.currentLocation.directionBounds = null,
                d.updateBuddyMarker(a, !1))
            },
            getActiveDealerNode: function(a) {
                return a.container.find(".search-results > ul > li" + T1.constants.CLASS_ACTIVE.toSelector())
            },
            getSearchType: function(a) {
                return a.find('.search-type input[type="radio"]:checked').val() || "location"
            },
            setSearchType: function(a, b) {
                a.find('.search-type input[type="radio"][value="' + (b || "location") + '"]').prop("checked", !0)
            },
            getSearchableCountry: function() {
                return T1.settings.dealer.alternativeCountry || T1.settings.country.toUpperCase()
            },
            save: function(a, b) {
                return function(c) {
                    c.preventDefault();
                    var e = [];
                    T1.channels.dealer.publishAsync(f.DEALER_SAVE, {
                        search: {
                            query: a.currentLocation.searchQuery.search,
                            options: a.currentLocation.searchQuery.options.set
                        },
                        dealer: b
                    }),
                    e.push(T1.channels.mytoyota.subscribe(f.MY_TOYOTA_SAVED_DEALER, function() {
                        T1.channels.dialog.publishAsync(f.TOAST_CUSTOM, {
                            customText: T1.labels.mytoyota.dealerSaved,
                            customContainer: a.container,
                            timeout: 2e3
                        }),
                        d.clearSubscriptions(e)
                    })),
                    e.push(T1.channels.mytoyota.subscribe(f.MY_TOYOTA_DEALER_ALREADY_SAVED, function() {
                        T1.channels.dialog.publishAsync(f.TOAST_CUSTOM, {
                            customText: T1.labels.mytoyota.dealerAlreadySaved,
                            customContainer: a.container,
                            timeout: 2e3
                        }),
                        d.clearSubscriptions(e)
                    })),
                    e.push(T1.channels.mytoyota.subscribe(f.MY_TOYOTA_SAVE_DEALER_FAILED, function(b, c) {
                        T1.channels.dialog.publishAsync(f.TOAST_CUSTOM, {
                            customText: c.error,
                            customContainer: a.container,
                            timeout: 2e3
                        }),
                        d.clearSubscriptions(e)
                    })),
                    d.tracking.trackClickDealerSave(a, b)
                }
            },
            getMarkersColor: function(a) {
                return a.hasClass("magenta") ? d.markerColors.magenta : a.hasClass("grey") ? d.markerColors.grey : d.markerColors.red
            },
            tracking: {
                currentStep: "displayDealerForm",
                dealerGuid: function(a) {
                    var b = a.tracking && a.tracking.dealer ? a.tracking.dealer : a;
                    return b.guid || b.id || b.uuid || b.localDealerID
                },
                track: function(a) {
                    return 0 === b(a).closest(".testdrive-form-v2").length && 0 === b(a).closest(".direction-enabled").length && 0 === b(a).closest(".trade-in-form-v2-container").length && 0 === b(a).closest('form[name="form-send-to-dealer"]').length
                },
                trackDisplayDealerForm: function(a) {
                    if (a.tracking.skipTrackDisplayDealerForm)
                        a.tracking.skipTrackDisplayDealerForm = !1;
                    else {
                        var b = a.container.parents("form");
                        b.length && "form-send-to-dealer" === b.attr("name") ? T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                            node: b
                        }) : d.tracking.track(a.container) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                            node: a.container,
                            extraData: {
                                event: {
                                    value: "search-form",
                                    workflowname: "dealerfinder",
                                    workflowstep: "1"
                                }
                            }
                        })
                    }
                },
                trackDisplayDealerResultsScreen: function(a) {
                    var b = a.container.parents("form");
                    b.length && "form-send-to-dealer" === b.attr("name") ? T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: b,
                        extraData: {
                            event: {
                                value: "search-results",
                                workflowstep: "2"
                            }
                        }
                    }) : d.tracking.track(a.container) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                eventclass: "searchevent",
                                value: "search-results",
                                workflowname: "dealerfinder",
                                workflowstep: "2",
                                workflowconversion: "1"
                            },
                            search: {
                                type: "dealer-search-" + a.tracking.searchTypeSuffix,
                                query: a.tracking.searchQuery,
                                results: a.tracking.searchResults,
                                category: a.tracking.searchCategory
                            }
                        }
                    })
                },
                trackClickShowHideFilterServices: function(a, b) {
                    d.tracking.track(a) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a,
                        extraData: {
                            event: {
                                value: (b ? "open" : "close") + "-result-filters"
                            }
                        }
                    })
                },
                trackCheckFilterServiceBox: function(a, b) {
                    d.tracking.track(a) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a,
                        extraData: {
                            event: {
                                value: "select-filter-" + b
                            }
                        }
                    })
                },
                trackViewDealerDetail: function(a) {
                    var b = a.container.parents("form");
                    b.length && "form-send-to-dealer" === b.attr("name") ? T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: b,
                        extraData: {
                            event: {
                                value: "view-dealer",
                                workflowstep: "3"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    }) : d.tracking.track(a.container) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                eventclass: "dealerevent",
                                value: "view-dealer",
                                workflowname: "dealerfinder",
                                workflowstep: "3"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    })
                },
                trackFavoriteDealerAction: function(a) {
                    var b = a.container.parents("form");
                    b.length && "form-send-to-dealer" === b.attr("name") ? T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: b,
                        extraData: {
                            event: {
                                value: "view-dealer",
                                workflowstep: "3"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    }) : d.tracking.track(a.tracking.contextNode) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.tracking.contextNode,
                        extraData: {
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    })
                },
                trackDealerInfoClicked: function(a) {
                    return function(c) {
                        var e = b(this);
                        d.tracking.track(e) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                            node: e,
                            extraData: {
                                dealer: {
                                    dealerid: d.tracking.dealerGuid(a)
                                }
                            }
                        })
                    }
                },
                trackDealerCtaClicked: function(a) {
                    return function(c) {
                        var e = b(this);
                        d.tracking.track(e) && T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                            node: e,
                            extraData: {
                                event: {
                                    action: "click_cta"
                                },
                                dealer: {
                                    dealerid: d.tracking.dealerGuid(a)
                                }
                            }
                        })
                    }
                },
                trackClickDealerSave: function(a, b) {
                    T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                eventclass: "dealerevent",
                                value: "save-dealer",
                                workflowname: "save-dealer",
                                workflowstep: "4",
                                workflowconversion: "1"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(b)
                            }
                        }
                    })
                },
                trackRequestDealerDirections: function(a) {
                    T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                eventclass: "dealerevent",
                                value: "direction-start",
                                workflowname: "dealerfinder",
                                workflowstep: "5"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    })
                },
                trackDisplayResultRequestDealerDirections: function(a) {
                    T1.channels.statistics.publishAsync(f.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                eventclass: "dealerevent",
                                value: "direction-results",
                                workflowname: "dealerfinder",
                                workflowstep: "6"
                            },
                            dealer: {
                                dealerid: d.tracking.dealerGuid(a)
                            }
                        }
                    })
                }
            },
            setExcludeLeadManagementSystemParam: function(a, b) {
                return b && (a += a ? "&" : "?",
                a += "excludeWithoutLeadManagementSystem=true"),
                a
            },
            api: {
                geocodeAddress: function(a) {
                    var c = b.Deferred()
                      , e = new google.maps.Geocoder
                      , f = T1.settings.dealer.extraCountries ? {
                        address: a.term || a.search,
                        componentRestrictions: {}
                    } : {
                        address: a.term || a.search,
                        componentRestrictions: {
                            country: d.getSearchableCountry()
                        }
                    };
                    return b.safe("T1.googleServices.places.validatePostCode", !1)(a.term || a.search, !0).done(function(b) {
                        b && (f.componentRestrictions.postalCode = a.term || a.search),
                        f = a.coordinates ? {
                            location: {
                                lat: a.coordinates.lat(),
                                lng: a.coordinates.lng()
                            }
                        } : f,
                        e.geocode(f, d.api.handleGeoCoderResponse(a, c))
                    }),
                    c
                },
                handleGeoCoderResponse: function(a, b) {
                    return function(c, d) {
                        if (d === google.maps.GeocoderStatus.OK || d === google.maps.GeocoderStatus.ZERO_RESULTS)
                            if (d === google.maps.GeocoderStatus.ZERO_RESULTS)
                                b.reject(T1.labels.dealer.errorGeoNotFound, d);
                            else {
                                var e = c[0].geometry.location;
                                if (e) {
                                    var f = {
                                        position: new google.maps.LatLng(e.lat(),e.lng()),
                                        address: c[0].formatted_address,
                                        search: a,
                                        results: c
                                    };
                                    b.resolve(f, d)
                                }
                            }
                        else
                            b.reject(T1.labels.dealer.errorGeoFailed, d)
                    }
                },
                getDealersByLocation: function(a, c) {
                    var e = b.Deferred()
                      , g = T1.settings.mock ? "//t1-preview-" + T1.settings.country + ".herokuapp.com" + f.URL_DEALERS_DRIVE : f.URL_DEALERS_DRIVE;
                    c = c || {},
                    g = T1.utilities.url.concat(g, a.position.lng(), a.position.lat()),
                    g += "?count=" + (c.searchResultCount || T1.settings.dealer.searchResultCount) + "&extraCountries=" + (T1.settings.dealer.extraCountries || "") + (T1.settings.dealer.limitSearchDistance ? "&limitSearchDistance=" + T1.settings.dealer.limitSearchDistance : "") + "&isCurrentLocation=" + (c.isCurrentLocation || !1),
                    g = d.setExcludeLeadManagementSystemParam(g, c.excludeForContext),
                    c.services && c.services.set && c.services.set.length && (g += "&services=" + c.services.set.join("|")),
                    T1.settings.mock && (g = "/api/dealers/13.404953999999975");
                    var h = b.ajax({
                        url: g
                    });
                    return h.done(d.api.onGetDealersDone(e, a)),
                    h.fail(d.api.onGetDealersFail(e)),
                    e
                },
                getDealerByUrl: function(a) {
                    var c = b.Deferred()
                      , e = b.ajax({
                        url: a
                    });
                    return e.done(d.api.onGetDealersDone(c)),
                    e.fail(d.api.onGetDealersFail(c)),
                    c
                },
                getDealersByName: function(a) {
                    var c = b.Deferred()
                      , e = !1;
                    a.options = a.options || {};
                    var g = T1.utilities.url.concat(f.URL_DEALERS_NAME, encodeURIComponent(a.search))
                      , h = function(a, e, f) {
                        e.options.set && e.options.set.length && (a += "&services=" + e.options.set.join("|")),
                        T1.settings.mock && (a = "/api/dealers/name");
                        var g = b.ajax({
                            url: a
                        });
                        g.done(d.api.onGetDealersDone(c, {
                            position: f
                        })),
                        g.fail(d.onGetDealersFail(c))
                    };
                    return g += "?count=" + (a.options.searchResultCount || T1.settings.dealer.searchResultCount) + "&extraCountries=" + (T1.settings.dealer.extraCountries || "") + (T1.settings.dealer.limitSearchDistance ? "&limitSearchDistance=" + T1.settings.dealer.limitSearchDistance : ""),
                    d.retrieveCurrentLocation(function(b) {
                        e = !0,
                        g += "&lon=" + b.coords.longitude + "&lat=" + b.coords.latitude;
                        var b = new google.maps.LatLng(b.coords.latitude,b.coords.longitude);
                        h(g, a, b)
                    }, function() {
                        e = !0,
                        h(g, a)
                    }),
                    T1.utilities.browser.isExplorer && setTimeout(function() {
                        e || h(g, a)
                    }, 5e3),
                    c
                },
                onGetDealersDone: function(a, c) {
                    return function(d) {
                        var e = b.isPlainObject(d) ? d : b.parseJSON(d)
                          , f = e.dealers || [e];
                        f.length ? a.resolve(f, d, c) : a.reject(T1.labels.dealer.errorDealersNotFound)
                    }
                },
                onGetDealersFail: function(a) {
                    return function(b) {
                        a.reject(b.responseText || b.statusText)
                    }
                }
            }
        }
          , d = a
          , f = T1.constants;
        return {
            init: a.init,
            hasLoaded: function() {
                return a.loaded
            },
            geocodeAddress: d.api.geocodeAddress,
            getDealersByLocation: d.api.getDealersByLocation,
            formatDealerDistance: d.formatDealerDistance,
            setExcludeLeadManagementSystemParam: d.setExcludeLeadManagementSystemParam
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.dropdown = function() {
        "use strict";
        var a = {
            currentForm: null,
            dropdownValues: {},
            comboRegionName: null,
            subscriptions: {},
            init: function() {
                var b = a
                  , c = T1.constants;
                b.subscriptions.FORM_LOAD = T1.channels.form.subscribe(c.FORM_LOAD, b.initDropdowns),
                b.subscriptions.INPUT_DROPDOWN_POPULATE = T1.channels.form.subscribe(c.INPUT_DROPDOWN_POPULATE, b.populateDropdown)
            },
            initDropdowns: function(b) {
                var c = a
                  , d = b.find(".dropdown[data-select]");
                c.currentForm = b,
                d.each(c.initDropdown)
            },
            initDropdown: function() {
                var c = a
                  , d = b(this)
                  , e = d.find(".dropdown-menu")
                  , f = e.find("li a")
                  , g = d.attr("data-select");
                d.data("init-touch-only") && !T1.utilities.isTouchCapable || ("dealerregion" !== g && "dealercity" !== g || (e.children("li").remove(),
                c.comboRegionName = g,
                c.getRegions({
                    services: d.data("services")
                })),
                d.on("click", function(a) {
                    a.preventDefault()
                }),
                d.find("input").off("change", c.updateSelectedValue).on("change", c.updateSelectedValue),
                f.off("click", c.handleSelect).on("click", c.handleSelect))
            },
            populateDropdown: function(c) {
                var d = a
                  , e = d.currentForm.find(".dropdown[data-select=" + c.dropdownSelect + "]")
                  , f = e.children(".dropdown-menu")
                  , g = e.find(".selected-item");
                f.empty(),
                g.html(g.attr("placeholder") || "&nbsp;"),
                b.each(c.data, function(a, c) {
                    var e = b('<li><span class="icon icon-ok"></span></li>')
                      , g = b('<a class="text-ellipsis"></a>');
                    "object" == typeof c ? (g.attr("data-value", c.id),
                    d.dropdownValues[c.id] = c,
                    g.text(d.htmlDecode(c.name)),
                    g.off("click").on("click", d.handleSelect)) : (g.attr("data-value", c),
                    g.html(d.htmlDecode(c)),
                    g.off("click").on("click", d.handleSelectRegion)),
                    g.attr("href", "#"),
                    e.prepend(g),
                    f.append(e)
                }),
                f.find("li").length > 5 ? f.addClass("scrolling-list") : 1 === f.find("li").length ? d.selectItem(f.find("a")) : f.parents(".dropdown").find(".dropdown-toggle .selected-item").text(T1.labels.dropdownPleaseSelect),
                e.find(".dropdown-toggle").toggleClass("disabled", c.disabled)
            },
            selectItem: function(c) {
                var d = a
                  , e = c.data("value")
                  , f = c.html()
                  , g = c.parents(".dropdown")
                  , h = g.find(".dropdown-toggle .selected-item");
                if (h.length || (h = g.find(".dropdown-toggle span")),
                e) {
                    var i = g.data("select")
                      , j = g.find("input[name=" + i + "]")
                      , k = d.currentForm.find(".label-contact-data")
                      , l = b("<ul></ul>");
                    if (0 === j.length && (j = b("<input>"),
                    j.attr("type", "hidden"),
                    j.attr("name", g.data("select")),
                    j.change(d.updateSelectedValue),
                    g.append(j)),
                    d.changeDropdownInputValue(e, j, g, g.find(".dropdown-menu"), c),
                    h.html(f),
                    k.length > 0 && "dealer" === g.attr("data-select")) {
                        k.children("ul").remove();
                        var m = d.dropdownValues[e];
                        l.append(b("<li>" + m.name + "</li>")),
                        "" !== m.address.address ? l.append(b('<li id="label-contact-address">' + m.address.address + "</li>")) : l.append(b('<li id="label-contact-address">' + m.address.address1 + "</li>")),
                        l.append(b('<li id="label-contact-zipCity">' + m.address.zip + " " + m.address.city + "</li>")),
                        l.append(b("<li>" + m.phone + "</li>")),
                        k.append(l),
                        k.addClass("active")
                    }
                }
            },
            updateSelectedValue: function(c) {
                if (c && c.target && c.target.defaultValue) {
                    for (var d = c.target.defaultValue, e = d.toLowerCase(), f = b(this), g = f.parents(".dropdown"), h = g.find(".dropdown-toggle .selected-item"), i = g.find(".dropdown-menu"), j = i.find("a"), k = a, l = 0; l < j.length; l++) {
                        var m = b(j[l])
                          , n = m.data("value")
                          , o = m.html();
                        if (n && o && n.toLowerCase() === e || o.toLowerCase() === e)
                            return k.changeDropdownInputValue(n, f, g, i, m),
                            h.html(o),
                            this
                    }
                    return h.html(d),
                    this
                }
            },
            changeDropdownInputValue: function(a, c, d, e, f) {
                var g = b(c)
                  , h = b(d)
                  , i = b(e)
                  , j = b(f)
                  , k = j.data("extra-info") || {};
                g.val(a),
                h.trigger({
                    type: T1.constants.INPUT_DROPDOWN_UPDATED,
                    newInputValue: a,
                    inputIsValid: !0,
                    activeExtraInfo: k
                }),
                i.data("activate-selected") && (i.find(".active").removeClass("active"),
                j.addClass("active"))
            },
            handleSelect: function(c) {
                c.preventDefault(),
                a.selectItem(b(c.target))
            },
            handleSelectRegion: function(c) {
                var d = b(c.target)
                  , e = d.data("value")
                  , f = d.html()
                  , g = d.parents(".dropdown")
                  , h = g.find(".dropdown-toggle .selected-item")
                  , i = a;
                if (c.preventDefault(),
                e) {
                    var j = b("<input>");
                    j.attr("type", "hidden"),
                    j.attr("name", g.data("select")),
                    i.changeDropdownInputValue(e, j, g, g.find(".dropdown-menu"), d),
                    g.find('input[type="hidden"]').remove(),
                    g.append(j),
                    h.html(f)
                }
                a.getDealersByRegion(e, g.data("services"))
            },
            destroy: function() {
                var b = a;
                T1.constants;
                b.subscriptions.FORM_LOAD && b.subscriptions.FORM_LOAD.unsubscribe(),
                b.subscriptions.INPUT_DROPDOWN_POPULATE && b.subscriptions.INPUT_DROPDOWN_POPULATE.unsubscribe()
            },
            getRegions: function(c) {
                c || (c = {});
                var d, e = a, f = T1.constants, g = "dealercity" === e.comboRegionName, h = T1.settings.mock ? "//t1-dev-" + T1.settings.country + ".herokuapp.com" + f.URL_DEALERS_REGIONS : f.URL_DEALERS_REGIONS, i = T1.settings.mock ? "//t1-dev-" + T1.settings.country + ".herokuapp.com" + f.URL_DEALERS_CITIES : f.URL_DEALERS_CITIES, j = c.services ? "?services=" + c.services : "", k = (g ? i : h) + j;
                d = b.ajax({
                    type: "GET",
                    dataType: "JSON",
                    url: k
                }),
                d.done(e.handleRegionsSuccess),
                d.fail(e.handleError)
            },
            getDealersByRegion: function(c, d) {
                d = d ? "?services=" + d : "";
                var e, f = a, g = T1.constants, h = T1.settings.mock ? "//t1-dev-" + T1.settings.country + ".herokuapp.com" + g.URL_DEALERS_LOCAL : g.URL_DEALERS_LOCAL, i = T1.settings.mock ? "//t1-dev-" + T1.settings.country + ".herokuapp.com" + g.URL_DEALERS_REGIONAL : g.URL_DEALERS_REGIONAL, j = "dealercity" === f.comboRegionName ? h : i;
                e = b.ajax({
                    type: "GET",
                    dataType: "JSON",
                    url: j + encodeURIComponent(c) + d
                }),
                e.done(f.handleDealersSuccess),
                e.fail(f.handleError)
            },
            handleRegionsSuccess: function(b) {
                var c = a
                  , d = c.comboRegionName || "dealerregion";
                a.populateDropdown({
                    dropdownSelect: d,
                    data: b
                })
            },
            handleDealersSuccess: function(b) {
                a.populateDropdown({
                    dropdownSelect: "dealer",
                    data: b.dealers
                })
            },
            handleError: function(a, b, c) {
                console.log(a.responseText)
            },
            htmlDecode: function(a) {
                return b("<div/>").html(a).text()
            }
        };
        return {
            init: a.init,
            destroy: a.destroy
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.formInput = function() {
        "use strict";
        var a = {
            datePickerOptions: {},
            subscriptions: {},
            siteDirectionRtl: !1,
            init: function() {
                "rtl" === T1.settings.siteDirection && (c.siteDirectionRtl = !0),
                b("form, .form").filter(":visible").each(function() {
                    c.initInputs(b(this))
                }),
                c.subscriptions.inputs = T1.channels.form.subscribe(d.FORM_LOAD, c.initInputs)
            },
            initOnDemand: function(a) {
                a && a.each(function() {
                    c.initInputs(b(this))
                })
            },
            initInputs: function(a) {
                if (a.size()) {
                    var b = a.find('input[type="checkbox"]')
                      , d = a.find('input[type="radio"]')
                      , e = b.siblings("label").add(d.siblings("label"))
                      , f = a.find(".input-group.date")
                      , g = a.find(".compare-btn")
                      , h = a.find("textarea");
                    b.length && b.off("click", c.handleCheck).on("click", c.handleCheck),
                    d.length && d.off("click", c.handleRadioSelect).on("click", c.handleRadioSelect),
                    e.length && e.off("click", c.handleLabelClick).on("click", c.handleLabelClick),
                    f.length && c.initDateInputs(f),
                    h.length && c.initTextarea(h),
                    c.initFindDealerInputs(a),
                    a.off("tap click", ".checkbox-btn", c.handleCheckboxButton).on("tap click", ".checkbox-btn", c.handleCheckboxButton),
                    g.off("tap click", c.handleButtonSelect).on("tap click", c.handleButtonSelect)
                }
            },
            initDateInputs: function(a) {
                if (a.length)
                    if (b.fn.datepicker.dates[T1.settings.language])
                        for (var e = 0; e < a.length; e++)
                            c.setupDateInput(b(a[e]));
                    else {
                        var f = d.URL_NODE_MODULES + "bootstrap-datepicker/js/locales/bootstrap-datepicker." + T1.settings.language + ".js";
                        b.loadScript(f).always(function() {
                            for (var d = 0; d < a.length; d++)
                                c.setupDateInput(b(a[d]))
                        })
                    }
            },
            initFindDealerInputs: function(a) {
                var e, f = a.data("retrieveDealerFor"), g = [];
                "zip" !== f && "postcode" !== f || (g = a.find('input[name="postcode"]'),
                e = "postcode"),
                g.length && g.each(function() {
                    var a = b(this)
                      , f = a.closest("form")
                      , g = a.data("validation");
                    g = g + " " + d.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER,
                    a.data("validation", g.trim()),
                    a.data(d.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER, !0),
                    a.on("blur", function() {
                        c.handleDealerSearch(e, a.val()).done(function(b) {
                            b.context = {
                                container: f
                            },
                            a.data(d.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER, !0),
                            T1.channels.dealer.publish(d.DEALER_SELECTED, b)
                        }).fail(function() {
                            a.data(d.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER, !1),
                            T1.utilities.isEnvironment.production || window.console.log("initFindDealerInputs has failed to return a dealer")
                        }).always(function() {
                            T1.channels.form.publish(T1.constants.FORM_ELEMENT_VALIDATE, a)
                        })
                    })
                })
            },
            handleDealerSearch: function(a, c) {
                var d, f = b.Deferred();
                switch (T1.settings.mock && (c = "99999"),
                a) {
                case "postcode":
                    d = T1.constants.URL_DEALERS_ZIP + c;
                    break;
                default:
                    d = T1.constants.URL_DEALERS_ZIP + c
                }
                return b.ajax({
                    url: d
                }).done(function(a) {
                    try {
                        "string" == typeof a && (a = JSON.parse(a)),
                        a.dealers && a.dealers.length ? f.resolve({
                            dealer: a.dealers[0]
                        }) : f.reject()
                    } catch (e) {
                        T1.utilities.isEnvironment.production || window.console.log("T1.formInput.handleDealerSearch: dealer data could not be parsed.\n" + e.message),
                        a = {
                            dealer: {}
                        },
                        f.reject()
                    }
                }).fail(function() {
                    f.reject()
                }),
                f.promise()
            },
            repositionBootstrapDatePicker: function(a, d) {
                var e = b(a)
                  , f = b(d)
                  , g = 7
                  , h = e.find(".form-control").outerHeight() + g
                  , i = c.siteDirectionRtl ? "auto" : 0
                  , j = c.siteDirectionRtl ? 0 : "auto"
                  , k = e.find(".datepicker-positioning-container").length ? e.find(".datepicker-positioning-container") : b('<div class="datepicker-positioning-container"></div>');
                k.css({
                    top: h,
                    left: i,
                    right: j
                }),
                k.append(f),
                e.append(k)
            },
            removeDatePickerPositioningContainer: function(a) {
                var c = b(a)
                  , d = c.find(".datepicker-positioning-container");
                d.length && d.remove()
            },
            datePickerShouldReposition: function(a) {
                a = b(a);
                var c = a.data("reposition-datepicker") || !1;
                return c && !0 === c.reposition && a.closest(c.context).length > 0
            },
            setupDateInput: function(a) {
                var d = a.closest(".form-v2")
                  , e = d.length > 0
                  , f = a.data("date-days-of-week-disabled")
                  , g = a.datepicker(c.getDatePickerOptions(e, f))
                  , h = b("#" + a.data("input-time"));
                void 0 !== h && c.linkDateTimeInput(a, h),
                e && c.setupDateInputForFormv2(a, g, h)
            },
            setupDateInputForFormv2: function(a, d, e) {
                var f = c.datePickerShouldReposition(a)
                  , g = a.find("input");
                d.on("show", function() {
                    var d = b(".datepicker");
                    d.addClass("t1-datepicker"),
                    d.find(".datepicker-switch").each(function() {
                        var a = b(this).html().split(" ")
                          , c = "<span>" + a[a.length - 1] + "</span>";
                        a.splice(1, 1, c),
                        b(this).html(a.join(" "))
                    }),
                    f && c.repositionBootstrapDatePicker(a, d)
                }),
                d.on("hide", function() {
                    f && c.removeDatePickerPositioningContainer(a)
                }),
                d.on("show changeMonth changeYear", function() {
                    var a = b(".datepicker").find(".prev:visible");
                    a.removeClass("disabled"),
                    "hidden" === a.css("visibility") && a.addClass("disabled")
                }),
                d.on("changeDate", function(b) {
                    var c = b.date;
                    c.setHours(12),
                    c = c.toISOString().substr(0, 10),
                    g.blur(),
                    T1.channels.form.publish(T1.constants.DATEPICKER_CHANGED, {
                        input: a,
                        isoDate: c
                    })
                }),
                g.on("blur", function() {
                    var a = e.find(".dropdown-toggle");
                    a.length && "" === g.val() ? (a.addClass("disabled"),
                    a.find(".selected-item").text("")) : a.removeClass("disabled")
                })
            },
            linkDateTimeInput: function(a, c) {
                var d = c.find(".dropdown-toggle")
                  , e = a.data("filter-daytimes")
                  , f = c.find(".dropdown-menu li");
                d.addClass("disabled"),
                a.on("changeDate", function(a) {
                    d.removeClass("disabled");
                    var c = a.date.getDay();
                    if (f.show(),
                    void 0 !== e[c]) {
                        for (var g = e[c].split(","), h = 0; h < f.length; h++)
                            b(f[h]).hide();
                        var i = null;
                        g.forEach(function(a) {
                            a = a.split("-");
                            for (var c = parseInt(a[0]), d = parseInt(a[1]), e = 0; e < f.length; e++) {
                                var g = parseInt(b(f[e]).find("a").data("value"));
                                g < c || g > d || (b(f[e]).show(),
                                null === i && (b(f[e]).find("a").trigger("click"),
                                i = !0))
                            }
                        })
                    } else
                        b(f[0]).find("a").trigger("click")
                })
            },
            getDatePickerOptions: function(a, b) {
                var c = {
                    format: T1.settings.culture.calendar.patterns.d,
                    startDate: "+1d",
                    language: T1.settings.language,
                    todayHighlight: !0,
                    autoclose: !!a,
                    orientation: a ? "top auto" : "auto"
                };
                return Array.isArray(b) && (c.daysOfWeekDisabled = b),
                c
            },
            handleCheck: function(a) {
                var c = b(a.target)
                  , d = c.closest(".form, form").find('input[name="' + c.attr("name") + '"]')
                  , e = d.filter(".select-all")
                  , f = "checked";
                if (c.hasClass("select-all"))
                    d.prop(f, e.is(":" + f));
                else {
                    var g = d.filter(":" + f).length;
                    e.is(":" + f) ? e.prop(f, !1) : g === d.length - 1 && e.prop(f, !0)
                }
            },
            handleLabelClick: function(a) {
                var c = "a" === a.target.nodeName.toLowerCase()
                  , d = b(a.target)
                  , e = d.attr("for");
                if (c || a.preventDefault(),
                e) {
                    var f = d.closest("form, .form").find("#" + e)
                      , g = f.attr("type");
                    "checkbox" !== g && "radio" !== g || f.trigger("click")
                }
            },
            handleRadioSelect: function(a) {
                var c = b(a.target);
                c.parents("form, .form").find('input[type="radio"][name="' + c.attr("name") + '"]').removeAttr("checked")
            },
            handleButtonSelect: function(a) {
                var c = b(a.target)
                  , d = c.prop("tagName")
                  , e = c.closest('[data-validation^="select-"]')
                  , f = "A" === d ? c : c.closest(".compare-btn")
                  , g = f.children('input[type="checkbox"]')
                  , h = g.prop("checked")
                  , i = e.attr("data-validation")
                  , j = b("#forms-testdrive-modelrange");
                if (c.hasClass("toast"))
                    return void a.preventDefault();
                if ("A" === d && a.preventDefault(),
                i) {
                    var k = 1 * i.split("-").pop()
                      , l = e.find('input[type="checkbox"]:checked');
                    if (i.indexOf("radio") >= 0 && 1 === k)
                        l.prop("checked", !1).parent().removeClass("btn-functional").addClass("btn-simple");
                    else if (!h && l.length > k - 1)
                        return void (b("#forms-brochure-modelrange .toast").length || T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                            customContainer: f,
                            customText: T1.labels.forms.selectItemsRestriction.replace("[0]", k),
                            timeout: 3e3
                        }))
                }
                if (h ? (f.removeClass("btn-functional"),
                f.addClass("btn-simple"),
                g.prop("checked", !1)) : (f.removeClass("btn-simple"),
                f.addClass("btn-functional"),
                g.prop("checked", !0)),
                j.length > 0) {
                    if (f.hasClass("btn-functional")) {
                        "true" === f.siblings(".title-hybrid").eq(0).attr("data-hashybrid") ? (b("#forms-testdrive-hybrid").css("display", "block"),
                        b("#Hybrid").prop("checked", !0)) : (b("#forms-testdrive-hybrid").css("display", "none"),
                        b("#nosubmodel").prop("checked", !0))
                    }
                    0 === j.find("input:checked").length && (b("#forms-testdrive-hybrid").css("display", "none"),
                    b("#nosubmodel").prop("checked", !0))
                }
            },
            handleCheckboxButton: function(a) {
                a.preventDefault();
                var c = b(this)
                  , d = c.find('input[type="checkbox"]');
                c.is(".disabled") || (d.prop("checked", !d.is(":checked")).change(),
                c.toggleClass(c.attr("data-on-class"), d.is(":checked")),
                c.toggleClass(c.attr("data-off-class"), !d.is(":checked")))
            },
            initTextarea: function(a) {
                if (a.length)
                    for (var d = 0; d < a.length; d++)
                        c.calculateRemainingCharacters(b(a[d]))
            },
            calculateRemainingCharacters: function(a) {
                var b, d = c.shouldCalculateRemainingCharacters(a);
                d && (b = a.data("min-length"),
                a.off("keyup blur", c.handleCalculationRemainingCharacters).on("keyup blur", {
                    minCharacters: b
                }, c.handleCalculationRemainingCharacters))
            },
            handleCalculationRemainingCharacters: function(a) {
                var c = b(this)
                  , d = c.closest(".input-field").find(".remaining-characters-container")
                  , e = d.find(".info-msg span")
                  , f = d.closest(".input-valid")
                  , g = d.closest(".input-invalid")
                  , h = a.data.minCharacters;
                if (c.val().length >= h)
                    d.addClass("min-reached"),
                    g.length && g.removeClass("input-invalid").addClass("input-valid");
                else {
                    var i = h - c.val().length;
                    d.hasClass("min-reached") && d.removeClass("min-reached"),
                    g.length && !d.find(".info-msg").hasClass("warning-msg") && d.find(".info-msg").addClass("warning-msg"),
                    f.length && d.find(".info-msg").removeClass("warning-msg"),
                    e.html(i)
                }
            },
            shouldCalculateRemainingCharacters: function(a) {
                return a.closest(".input-field").find(".remaining-characters-container").length
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initOnDemand: a.initOnDemand,
            initDateInputs: a.initDateInputs
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.forms = function() {
        "use strict";
        var a = {
            currentForm: null,
            formValid: !0,
            hasEvents: !1,
            isFormInstantiated: !1,
            showResults: !1,
            emailMaxLength: 254,
            formUrls: {},
            resultData: {},
            useMicroService: "true" === T1.settings.ssoUseMicroService,
            subscriptions: {},
            CLASS_DYNAMIC: "dynamic",
            init: function() {
                var b = a
                  , c = T1.constants;
                b.initUrls(),
                T1.channels.form.subscribe(c.FORM_ERROR, b.triggerError),
                T1.channels.tab.subscribe(c.TABS_SWITCH, b.initOnDemand)
            },
            initOnDemand: function(c, d) {
                var e, f = a, g = T1.constants, h = b("#forms");
                e = c && "string" == typeof c ? b("#" + c + " form") : h.find(".tab-pane.active form"),
                h.length < 1 || e.is(f.currentForm) || (f.currentForm = e,
                f.injectFormData(f.currentForm),
                f.setEvents(),
                T1.channels.form.publishAsync(g.FORM_LOAD, f.currentForm),
                f.isFormInstantiated = !0)
            },
            injectFormData: function(c) {
                var d = a
                  , f = T1.request.getQueryStringParameters()
                  , g = f.personalCar || f.car;
                if (f && !b.isEmptyObject(f)) {
                    if (f.hasOwnProperty("formData"))
                        try {
                            var h = JSON.parse(decodeURIComponent(f.formData));
                            if (c.is("#" + h.form))
                                for (var i in h)
                                    "form" !== i && h.hasOwnProperty(i) && !c.find('input[name="' + i + '"]').size() && b('<input type="hidden"/>').attr({
                                        name: i,
                                        value: h[i]
                                    }).appendTo(c)
                        } catch (e) {
                            console.warn && console.warn("Inject form data failed! Check if all fields are sent to the backend. \n" + e)
                        }
                    "form-personalized-ebrochure" === c.attr("id") && "string" == typeof g && (c.find(".dynamicallyAdded").remove(),
                    c.append(b('<input type="hidden"/>').attr({
                        name: "carId",
                        value: g
                    }).addClass("dynamicallyAdded")),
                    f.personalCar && c.append(b('<input type="hidden"/>').attr({
                        name: "hasPersonalParams",
                        value: !0
                    }).addClass("dynamicallyAdded")),
                    d.subscriptions[T1.constants.MY_TOYOTA_DEALER_READY] = T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_DEALER_READY, d.injectDealerId),
                    T1.channels.mytoyota.publish(T1.constants.MY_TOYOTA_GET_DEALERS))
                }
            },
            injectDealerId: function(c, d) {
                var e = a
                  , f = b('<input type="hidden"/>');
                e.subscriptions[T1.constants.MY_TOYOTA_DEALER_READY].unsubscribe(),
                c && !b.isEmptyObject(c) && (f.attr({
                    name: "dealerId",
                    value: c[0].id
                }),
                e.currentForm.append(f))
            },
            initUrls: function() {
                var b = a
                  , c = T1.settings.mock ? "//t1-dev-glen.herokuapp.com" : T1.request.getDomainName()
                  , d = T1.settings.mock ? "//t1-dev-proxy.herokuapp.com" : T1.settings.loadSaveService || T1.settings.loadSaveServer;
                b.formUrls = {
                    "form-contact": c + T1.constants.URL_SUBMIT_FORM_CONTACT,
                    "form-contact-dealer": c + T1.constants.URL_SUBMIT_FORM_CONTACT_DEALER,
                    "form-send-pdf": c + T1.constants.URL_SUBMIT_SEND_PDF,
                    "form-brochure": c + T1.constants.URL_SUBMIT_FORM_BROCHURE,
                    "form-my-cars": a.useMicroService ? T1.constants.URL_USER_DATA : d + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SEARCH_CAR,
                    "form-login": c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_LOGIN,
                    "form-login-save-car": c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_LOGIN,
                    "form-save-car": a.useMicroService ? T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR : c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR,
                    "form-register": c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_REGISTER,
                    "form-forgotten-password": c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_PASSWORD,
                    "form-reset-password": c + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_RESET_PASSWORD,
                    "form-testdrive": c + T1.constants.URL_SUBMIT_FORM_TESTDRIVE,
                    "form-chrContact": c + T1.constants.URL_SUBMIT_FORM_CHR_CONTACT
                }
            },
            getFormUrls: function() {
                return a.formUrls
            },
            setEvents: function() {
                var b = a
                  , c = b.currentForm.find(".form-btn")
                  , d = c.children(".btn-submit")
                  , e = c.children(".btn-cancel");
                b.currentForm.hasClass("form-dynamic") && b.setEventsDynamic(),
                b.currentForm.data("submitonenter") && b.currentForm.find("input").off("keydown", b.formKeyPress).on("keydown", b.formKeyPress),
                d.off("click", b.submit).on("click", b.submit),
                e.off("click", b.cancel).on("click", b.cancel),
                b.hasEvents = !0
            },
            formKeyPress: function(b) {
                13 !== b.keyCode && 13 !== b.which || (b.preventDefault(),
                a.submit(b))
            },
            setEventsDynamic: function() {
                var b = a;
                b.currentForm.find(".select-dynamic [data-activate]").off("click", b.switchElementDynamic).on("click", b.switchElementDynamic)
            },
            switchElementDynamic: function(c) {
                var d = a
                  , e = b(c.target)
                  , f = e.attr("data-activate")
                  , g = e.attr("data-extra-info")
                  , h = d.currentForm.find("#" + f)
                  , i = h.siblings(".element-dynamic");
                if (d.toggleCountrySelection(c.target),
                "general" !== c.target.value && (i.removeClass("active"),
                h.addClass("active"),
                g)) {
                    b("#extra-info").attr("value", g)
                }
            },
            toggleCountrySelection: function(c) {
                var d = a
                  , e = d.currentForm.find(".contact-country .dropdown-toggle");
                e.length > 0 && ("radio" === c.type ? "general" === c.value ? (e.removeClass("disabled"),
                d.switchElementDynamic({
                    target: e
                })) : e.addClass("disabled") : "A" === c.tagName && (e.attr("data-activate", b(c).data("activate")),
                e.attr("data-extra-info", b(c).data("extra-info"))))
            },
            validate: function(c) {
                var d = a
                  , e = T1.constants
                  , f = T1.labels
                  , g = c || d.currentForm;
                if (g && g.length > 0) {
                    d.currentForm = g;
                    var h = d.currentForm.find("[data-validation]");
                    return d.setFormValid(),
                    b.each(h, d.validateElement),
                    d.formValid || (d.setError(f.forms.errorInValid),
                    T1.channels.form.publishAsync(e.FORM_VALIDATION_FAILED, {
                        form: d.currentForm,
                        fields: d.currentForm.find("." + e.CLASS_ERROR)
                    })),
                    d.formValid
                }
                return d.currentForm = b("form"),
                d.validate(),
                !1
            },
            validateElement: function() {
                var c = a
                  , d = T1.constants
                  , e = b(this)
                  , f = e.data("validation").split(" ")
                  , g = e[0].value
                  , h = c.currentForm.attr("id");
                if (e.hasClass("input-dynamic")) {
                    if (!e.parents(".element-dynamic").hasClass("active"))
                        return
                }
                for (var i = 0; i < f.length; i++)
                    if (f[i] === d.FORM_VALIDATION_RULE_SELECT)
                        e.siblings('input[type="hidden"]').length < 1 && (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": no selection"));
                    else if (f[i] === d.FORM_VALIDATION_RULE_LENGTH) {
                        var j = e.data("min-length");
                        g.trim().length < j && (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": minimum length not met"))
                    } else if (f[i] === d.FORM_VALIDATION_RULE_NUMBER)
                        g.isNumeric || (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": value not numeric"));
                    else if (f[i] === d.FORM_VALIDATION_RULE_EMAIL)
                        c.validateEmail(g) || (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": not a valid email address"));
                    else if (f[i] === d.FORM_VALIDATION_RULE_PHONE)
                        c.validatePhone(g) || (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": not a valid phone number"));
                    else if (f[i] === d.FORM_VALIDATION_RULE_PARITY)
                        c.validateParity(e) || (c.setElementInvalid(e),
                        console.log(e.attr("name") + ": parity check failed"));
                    else if (f[i] === d.FORM_VALIDATION_RULE_REGEXP) {
                        if (g.length > 0) {
                            var k = e.attr("data-regexp");
                            new RegExp(k,"i").test(g) || (c.setElementInvalid(e),
                            console.log(e.attr("name") + ": did not match its criteria /" + k + "/i"))
                        }
                    } else if ("select-radio-1" === f[i]) {
                        if ("form-testdrive" === h) {
                            var l = c.currentForm.find('#forms-testdrive-modelrange input[type="checkbox"]:checked');
                            l.length < 1 && c.setElementInvalid(e)
                        }
                    } else if ("select-3" === f[i]) {
                        if ("form-brochure" === h) {
                            var m = c.currentForm.find('#forms-brochure-modelrange input[type="checkbox"]:checked');
                            m.length < 1 && c.setElementInvalid(e)
                        }
                    } else
                        f[i] === d.FORM_VALIDATION_RULE_CHECKBOX && (e.is(":checked") || c.setElementInvalid(e))
            },
            validateEmail: function(b) {
                return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b) && b.length <= a.emailMaxLength
            },
            validatePhone: function(a) {
                var b = /^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i;
                return a.length > 2 && b.test(a)
            },
            validateParity: function(b) {
                var c = a.currentForm.find('input[name="' + b.data("parity-target") + '"]');
                return c.size() && c.val() === b.val()
            },
            setElementInvalid: function(b) {
                var c, d = a, e = T1.constants;
                c = b.hasClass("dropdown-toggle") ? b.parent().prev(".form-label") : b.prev().hasClass("form-label") ? b.prev(".form-label") : b.siblings("label"),
                b.hasClass("modelrange") && b.find(".mandatory").addClass(e.CLASS_ERROR),
                b.addClass(e.CLASS_ERROR),
                c.addClass(e.CLASS_ERROR),
                d.formValid = !1
            },
            setFormValid: function() {
                var b = a
                  , c = T1.constants;
                b.formValid = !0,
                b.currentForm.removeClass(c.CLASS_ERROR_FORM),
                b.currentForm.find("." + c.CLASS_ERROR).removeClass(c.CLASS_ERROR)
            },
            submit: function(c) {
                var d = a;
                if (c.preventDefault(),
                d.currentForm = b(c.target).parents("form"),
                d.validate()) {
                    var e = d.currentForm.attr("id");
                    if ("form-testdrive" === e || "form-brochure" === e) {
                        d.showResults = !0;
                        var f = d.currentForm.find('input[name="model"]:checked')
                          , g = b('#forms-testdrive-hybrid input[type="radio"]:checked').val();
                        d.resultData.models = {};
                        for (var h = 0; h < f.length; h++) {
                            var i = b(f[h]).closest(".modelitem");
                            d.resultData.models[h] = i
                        }
                        d.resultData.hybrid = "Nonhybrid" === g || "Hybrid" === g ? b('#forms-testdrive-hybrid input[type="radio"]:checked').siblings("label").eq(0).text() : "",
                        d.resultData.name = d.currentForm.find('input[name="firstname"]').val() + " " + d.currentForm.find('input[name="lastname"]').val(),
                        d.resultData.date = d.currentForm.find('input[name="date"]').val();
                        var j = d.currentForm.find('.dropdown[data-select="time"] .dropdown-toggle .selected-item');
                        d.resultData.time = j.html(),
                        d.resultData.address = "form-testdrive" === e ? b("#label-contact-address").text() + " <br> " + b("#label-contact-zipCity").text() : d.currentForm.find('input[name="street"]').val() + " " + d.currentForm.find('input[name="housenr"]').val() + "<br/>" + d.currentForm.find('input[name="postcode"]').val() + " " + d.currentForm.find('input[name="city"]').val();
                        var k = d.currentForm.find('input[name="dealer"]');
                        k && k.length > 0 && (d.resultData.dealer = k.data("item"))
                    }
                    d.submitAsync(),
                    d.currentForm.data("preserve") || d.resetForm("", e)
                } else
                    d.currentForm.addClass("error-form")
            },
            submitAsync: function() {
                var c, d = a, e = {
                    form: d.currentForm,
                    data: b(d.currentForm).serialize(),
                    url: d.getCurrentFormUrl(),
                    cancel: !1,
                    json: !1
                };
                if (T1.channels.form.publish(T1.constants.BEFORE_FORM_SUBMIT, e),
                e.deferred)
                    e.deferred.done(d.submitSuccess),
                    e.deferred.fail(d.submitError),
                    e.deferred.always(d.setEventsAfter);
                else if (e.cancel)
                    e.error && (d.setError(e.error),
                    T1.channels.form.publishAsync(T1.constants.FORM_VALIDATION_FAILED, {
                        form: d.currentForm,
                        fields: d.currentForm.find("." + T1.constants.CLASS_ERROR)
                    }));
                else {
                    T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                        target: b(d.currentForm.data("loading-target")).or(d.currentForm)
                    });
                    var f = e.json ? {
                        "Content-Type": "application/json",
                        Accept: "application/json"
                    } : {}
                      , g = !/^(\s)*(https?:)?\/\//.test(e.url.toLowerCase()) || e.url.toLowerCase().indexOf(window.location.host.toLowerCase()) > -1;
                    d.useMicroService && T1.mypage && T1.mypage.user && g && (f[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: T1.mypage.user._id,
                        email: T1.mypage.user.email,
                        token: T1.mypage.user.token
                    })),
                    c = b.ajax({
                        type: d.currentForm.attr("method") || "POST",
                        dataType: d.currentForm.data("type") || "json",
                        headers: f,
                        url: e.url,
                        data: e.data
                    }),
                    c.done(d.submitSuccess),
                    c.fail(d.submitError),
                    c.always(d.setEventsAfter)
                }
            },
            getCurrentFormUrl: function() {
                var b = a
                  , c = b.currentForm.attr("id");
                return b.currentForm.attr("data-url") || b.formUrls[c]
            },
            submitSuccess: function(c, d, e) {
                var f = a
                  , g = T1.constants
                  , h = f.currentForm.parents(".tab-pane")
                  , i = b("#" + h.attr("id") + "-result")
                  , j = {
                    form: f.currentForm,
                    status: d,
                    data: c,
                    validated: !0
                };
                if (!c.success && "success" !== d || c.error)
                    f.submitError(e, d, c.error);
                else {
                    if (T1.channels.form.publish(g.VALIDATE_FORM_RETURN, j),
                    j.validated && i.length) {
                        if (c.content) {
                            var k = b(c.content).addClass(f.CLASS_DYNAMIC)
                              , l = k.filter("iframe").attr("src") || "";
                            l && (T1.utilities.isIpad() || T1.utilities.isIphone()) && (T1.utilities.downloadFile(l, !0),
                            k = k.filter(":not(iframe)")),
                            k.appendTo(i.addClass(f.CLASS_DYNAMIC))
                        }
                        if (f.showResults && (i.find(".result-name").html(f.resultData.name),
                        f.resultData.date ? i.find(".result-date").html(f.resultData.date) : i.find(".result-date").parent().remove(),
                        f.resultData.date ? i.find(".result-time").html(f.resultData.time) : i.find(".result-time").parent().remove(),
                        i.find(".result-address").html(f.resultData.address),
                        f.resultData.dealer ? i.find(".result-dealer").html(f.resultData.dealer.phone) : i.find(".result-dealer").parent().remove(),
                        f.resultData.models)) {
                            var m = i.find(".result-car")
                              , n = null;
                            m.empty(),
                            b.each(f.resultData.models, function(a, b) {
                                n = b.clone(),
                                n.find("a.btn").remove(),
                                f.resultData.hybrid && n.append("<DIV>" + f.resultData.hybrid + "</DIV>"),
                                m.append(n)
                            })
                        }
                        i.addClass(g.CLASS_ACTIVE),
                        h.removeClass(g.CLASS_ACTIVE + " " + f.CLASS_DYNAMIC),
                        h.find(".dynamic").remove()
                    }
                    T1.channels.form.publishAsync(g.SUBMIT_FORM_RETURN, j)
                }
            },
            submitError: function(b, c, d) {
                var e = a
                  , f = T1.labels
                  , g = (b.responseJSON ? b.responseJSON.message : null) || d.message || f.forms.errorSubmit || d.data || b.responseText
                  , h = {
                    form: e.currentForm,
                    code: b.status,
                    status: c,
                    message: g,
                    showError: !0
                };
                console.log(c + ": " + g),
                T1.channels.form.publish(T1.constants.SUBMIT_FORM_RETURN, h),
                h.showError && e.setError(g)
            },
            setEventsAfter: function(b, c, d) {
                var e = a
                  , f = T1.constants;
                T1.channels.dialog.publishAsync(f.LOADING_COMPLETE, {
                    target: e.currentForm
                }),
                T1.channels.tab.subscribe(f.TABS_SWITCH, e.resetForm),
                T1.channels.dialog.subscribe(f.PAGEOVERLAYER_CLOSE, e.resetForm)
            },
            setError: function(b) {
                var c = a
                  , d = T1.constants;
                c.formValid = !1,
                c.currentForm.addClass(d.CLASS_ERROR_FORM),
                c.currentForm.find(".error-message").html(b)
            },
            triggerError: function(b) {
                a.setError(b)
            },
            resetForm: function(c) {
                var d = a
                  , e = T1.constants
                  , f = d.currentForm.parents(".tab-pane")
                  , g = f.attr("id")
                  , h = b("#" + g + "-result");
                d.setFormValid(),
                h.removeClass(e.CLASS_ACTIVE + " " + d.CLASS_DYNAMIC),
                h.find(".dynamic").remove(),
                g === c && f.addClass(e.CLASS_ACTIVE)
            },
            cancel: function(a) {
                T1.channels.hash.publishAsync(T1.constants.HASH_REMOVE, ""),
                a.preventDefault()
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.carConfigForm = function() {
        "use strict";
        var a = {
            formSelector: ".car-config-form",
            carsImageSize: {
                width: 300,
                height: 95
            },
            init: function() {
                T1.channels.form.subscribe(d.FORM_LOAD, c.formLoad)
            },
            formLoad: function(a, e) {
                if (e.topic === d.FORM_LOAD && a.is(c.formSelector)) {
                    var f = T1.request.getQueryStringParameters()
                      , g = f.personalCar || f.car
                      , h = !!f.personalCar;
                    "string" == typeof g && c.searchCar(a, b.trim(g), h)
                }
            },
            searchCar: function(a, b, d) {
                if (b) {
                    if (T1.settings.mock)
                        return void c.loadCar(a)({});
                    var e = Object.resolve("T1.loadSave");
                    e && e.get({
                        tyCode: b,
                        type: "short",
                        quotes: d
                    }).done(c.loadCar(a)).fail(c.showError(a))
                }
            },
            loadCar: function(a) {
                return function(e) {
                    var f = a.find(".selected-car").first()
                      , g = {
                        id: e.id
                    };
                    T1.channels.mytoyota.publish(d.MY_TOYOTA_GET_CAR, g);
                    var h = g.out.car || e
                      , i = c.htmlDecode(h.customName || h.car)
                      , j = (new RegExp(e.model,"i").test(i) ? "" : e.model + " ") + i;
                    if (a.closest(".form-v2").length)
                        h.pdfName = j,
                        h.imgPath = c.getCarImagePath(h, {
                            width: 600,
                            height: 400
                        }, "exterior", 3, !0),
                        h.carName = i,
                        b.safe("T1.formV2.loadCarInfo")(a, h);
                    else if ("form-personalized-ebrochure" === a.attr("id")) {
                        var k = a.find('input[name="pdfName"]');
                        k.val(j)
                    } else
                        f.size() && (f.find(".carId").val(h.id),
                        f.find(".obj-desc").attr("data-obj-code", h.id),
                        f.find("img").attr("src", c.getCarImagePath(h, c.carsImageSize, "exterior", 32)),
                        f.find(".hybrid").toggle(h.hybrid || !1),
                        f.find(".title").html(i),
                        h.price && f.find(".price").html(c.htmlDecode(globalize.format(h.price.listWithDiscount, "c"))),
                        f.find(".code i").html(c.htmlDecode(h.code)),
                        f.find(".date").text(h.storeDate).toggle(void 0 !== h.storeDate),
                        f.find(".saved").toggle(h.saved || !1),
                        f.show()),
                        a.find(".prefilled.title").val(i)
                }
            },
            getCarImagePath: function(a, b, c, d, e) {
                var f = a.ccVersion
                  , g = f && -1 !== f.indexOf("HD") && parseInt(f.split(".")[0], 10) > 5 ? "day-" : "";
                if (T1.settings.mock)
                    return "/images/tf01.png";
                if (e)
                    return T1.constants.URL_CCIS_PROXY + "config/" + a.code + "?width=" + b.width + "&height=" + b.height + "&view=" + c + "&angle=" + d;
                var h = T1.settings.modelMap[a.ids.model]
                  , i = "true" === T1.settings.enableCarDbTokens && h ? h.token : null;
                return T1.settings.CCISHost + (i ? "product-token/" + i : "") + "vehicle/" + a.ids.model + "/" + a.ids.car + "/" + g + carAngleOfView + a.ids.colour + ".png?width=" + b.width + "&height=" + b.height
            },
            htmlDecode: function(a) {
                return b("<div/>").html(a).text()
            },
            showError: function(a) {
                return function(d, e, f) {
                    if (a.closest(".form-v2").length)
                        b.safe("T1.formV2.setError")(f || T1.labels.forms.errorSubmit, a);
                    else {
                        var g = a.find(".selected-car");
                        g.find(">div:not(.error)").remove(),
                        g.find(">div.error h3").html(c.htmlDecode(f || T1.labels.forms.errorSubmit)),
                        g.show()
                    }
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.tabs = function() {
        "use strict";
        var a = {
            currentTabs: null,
            currentTabContent: null,
            init: function() {
                var b = a
                  , c = T1.constants;
                T1.channels.tab.subscribe(c.TABS_SWITCH, b.setTabActive),
                T1.channels.dialog.subscribe(c.PAGEOVERLAYER_LOAD, b.initOnDemand),
                T1.channels.dialog.subscribe(c.MATERIALBOX_OPENED, b.initOnDemand),
                b.initOnDemand()
            },
            initOnDemand: function(c) {
                c || (c = {});
                var d = a
                  , e = T1.constants;
                (c.el ? b(c.el).find(".toyota-tabs") : b(".toyota-tabs")).each(d.initTabGroup),
                T1.channels.tab.publishAsync(e.TABS_LOAD)
            },
            initTabGroup: function() {
                var c = a
                  , d = T1.request
                  , e = b(this);
                if (c.currentTabs = e.find(".toyota-tabs-select a[data-tab]:not(.link)"),
                c.currentTabContent = e.find(".toyota-tabs-content"),
                c.setTabEvents(),
                d) {
                    var f = d.getQueryStringParameter("tab");
                    f && f.length > 0 && T1.channels.tab.publishAsync(T1.constants.TABS_SWITCH, f)
                }
            },
            setTabComponentActive: function(c) {
                if (c) {
                    var d = a
                      , e = b(c)
                      , f = e.closest(".toyota-tabs-content")
                      , g = null;
                    f.hasClass("active") || (g = f.parent(),
                    b(".toyota-tabs-content").removeClass("active"),
                    f.addClass("active"),
                    d.currentTabs = g.find(".toyota-tabs-select a[data-tab]:not(.link)"),
                    d.currentTabContent = g.find(".toyota-tabs-content"))
                }
            },
            setTabEvents: function() {
                var c = a;
                c.currentTabs.on(T1.utilities.clickEvent, c.switchTab),
                c.currentTabs.find("*").on(T1.utilities.clickEvent, function(a) {
                    a.preventDefault(),
                    a.stopPropagation(),
                    c.switchTab(b(this).closest("a[data-tab]:not(.link)").data("tab"))
                }),
                c.currentTabContent.find(".pane-close").on(T1.utilities.clickEvent, function(a) {
                    a.preventDefault(),
                    c.resetAll()
                })
            },
            switchTab: function(a) {
                var c;
                "object" == typeof a ? (a.preventDefault(),
                c = b(a.target).data("tab")) : c = a,
                T1.channels.tab.publishAsync(T1.constants.TABS_SWITCH, c)
            },
            setTabActive: function(c) {
                var d = a
                  , e = T1.constants
                  , f = b("#" + c);
                if (f.data("toggle-pane") && f.hasClass(e.CLASS_ACTIVE))
                    d.resetAll();
                else {
                    d.setTabComponentActive(f);
                    var g = d.currentTabs.filter('a[data-tab="' + c + '"]');
                    d.resetAll(),
                    g.addClass(e.CLASS_ACTIVE),
                    f.addClass(e.CLASS_ACTIVE),
                    g.parent("li") && g.parent("li").addClass(e.CLASS_ACTIVE)
                }
            },
            setTabContent: function(b, c) {
                var d = a
                  , e = T1.constants
                  , f = d.currentTabContent.find(".tab-pane.active");
                c.hasClass(e.CLASS_ACTIVE) || c.addClass(e.CLASS_ACTIVE),
                f.replaceWith(c)
            },
            resetItem: function() {
                var a = b(this);
                a.parent("li").removeClass("active"),
                a.removeClass("active")
            },
            resetAll: function() {
                var b = a;
                b.currentTabs.each(b.resetItem),
                b.currentTabContent.find(".tab-pane").each(b.resetItem)
            }
        };
        return {
            init: a.init,
            setTabActive: a.setTabActive,
            setTabContent: a.setTabContent
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.mediaOverlayer = function() {
        "use strict";
        var a = {
            carouselId: "mediaOverlayerCarousel",
            carouselClass: "mediaOverlayerCarousel",
            darkCarouselClass: "dark-carousel-container",
            externalVideoClass: "external-video-control",
            secondaryCarouselId: "mediaOverlayerCarouselSec",
            detachedIframes: [],
            bootstrapSlide: {
                videoControlsConflictClass: "videoControlsConflict",
                onSlide: function(a) {
                    b("#" + a + ":not(.topfeatures-v2-carousel) .item").not(".active").find("img").hide(),
                    c.detachIframe(),
                    T1.channels.media.publish(window.vjs ? d.VIDEO_STOP : d.VIDEO_RESET, {})
                },
                onSlid: function(a, d) {
                    var e = b("#" + a)
                      , f = e.find(".carousel-inner .item.active")
                      , g = e.find(".carousel-control")
                      , h = f.index()
                      , i = c.getActiveSlideType(f)
                      , j = "video" === i
                      , k = e.find(".carouselNav")
                      , l = {
                        index: h,
                        type: i
                    };
                    c.bootstrapSlide.handleSlideExternalVideoControl(f, g, e, l),
                    c.bootstrapSlide.loadSlideContent(f, a),
                    c.bootstrapSlide.handleSlideSocialTools(l, d),
                    c.bootstrapSlide.handleSlideCounter(h, e),
                    j ? c.bootstrapSlide.hideBottomSliderControls(f, k) : k.removeClass(c.bootstrapSlide.videoControlsConflictClass)
                },
                handleSlideExternalVideoControl: function(a, d, e, f) {
                    var g = "xs" === b.safe("T1.breakpoints.currentBP")()
                      , h = "external-video" === f.type;
                    !T1.utilities.isTouchCapable || !h ? d.hasClass(c.externalVideoClass) && d.removeClass(c.externalVideoClass) : (g && d.addClass(c.externalVideoClass),
                    c.bootstrapSlide.attachExternalVideoControlEvents(d, e))
                },
                attachExternalVideoControlEvents: function(a, b) {
                    var c = a.filter(".left")
                      , d = a.filter(".right");
                    c.one("touchstart", function(a) {
                        a.stopPropagation(),
                        b.carousel("prev")
                    }),
                    d.one("touchstart", function(a) {
                        a.stopPropagation(),
                        b.carousel("next")
                    })
                },
                loadSlideContent: function(a, e) {
                    1 === a.find("img").length ? c.loadImage(b("#" + e + " .carousel-inner .item.active img")) : 1 === a.find("iframe").length || a.attr("data-detachedIframe") ? (c.attachIframe(),
                    c.loadIframe(a.find("iframe"))) : a.find("iframe") && (b("#" + e + " .item").not(".active").find("iframe").hide(),
                    T1.channels.media.publishAsync(d.IFRAME_DESTROY))
                },
                handleSlideSocialTools: function(a, b) {
                    b && (b.attr("data-link", location.href.replace(/[^\/]+$/, a.index)),
                    "external-video" == a.type ? b.addClass("youtubeCtrl") : b.removeClass("youtubeCtrl"))
                },
                handleSlideCounter: function(a, b) {
                    var c = b.find(".slide-counter:first")
                      , e = a + 1;
                    c && T1.channels.media.publishAsync(d.SLIDER_UPDATECOUNTER, {
                        slideCounter: c,
                        activeSlideNumber: e
                    })
                },
                hideBottomSliderControls: function(a, d) {
                    var e = "xs" === b.safe("T1.breakpoints.currentBP")()
                      , f = a.find(".posterWrapper").data("video-vtt") || "";
                    e ? f.length ? d.addClass(c.bootstrapSlide.videoControlsConflictClass) : d.removeClass(c.bootstrapSlide.videoControlsConflictClass) : d.addClass(c.bootstrapSlide.videoControlsConflictClass)
                }
            },
            init: function() {
                T1.channels.media.subscribe(d.GALLERY_ITEM_CLICK, c.show),
                T1.channels.media.subscribe(d.IFRAME_DESTROY, c.destroyIframe)
            },
            hide: function() {
                b("body").off("onkeydown", c.captureKeys),
                T1.channels.dialog.publishAsync(d.MATERIALBOX_CLOSE),
                T1.channels.media.publishAsync(d.MEDIAOVERLAYER_HIDE)
            },
            show: function(a) {
                var e = b(a.el)
                  , f = e.closest(".gallery") || b(".gallery")
                  , g = e.closest("section").attr("data-section-title") || a.pageName
                  , h = f.hasClass("topfeatures-v2-gallery") && e.hasClass("topfeatures-v2-item")
                  , i = !!f.find(".swiping-mobile-gallery:first").length
                  , j = b(h ? '<div class="contentcontainer carchapter-topfeatures-v2"></div>' : '<div class="contentcontainer"></div>')
                  , k = e.parent(".topfeatures-v2-item").length && e.parent().hasClass("overlayerNode") ? c.secondaryCarouselId : c.carouselId
                  , l = h ? null : c.createSocialTools(j);
                b("body").on("keydown", c.captureKeys),
                b.safe("T1.statistics.copyAncestorAttributes")(e, j),
                T1.channels.media.publish(d.CAROUSEL_CREATE, {
                    targetNode: j,
                    gallery: f,
                    isPrimaryGallery: h,
                    sectionTitle: g,
                    activeSlide: a.index || 0,
                    id: k,
                    additionalClass: c.carouselClass + " " + c.darkCarouselClass,
                    type: "slide",
                    options: {
                        interval: !1
                    },
                    isDesktopImagesMode: !i,
                    enableSwipe: !0,
                    isTopFeaturesV2: h,
                    isOverlayer: !0
                }),
                T1.channels.dialog.publish(d.MATERIALBOX_OPEN, {
                    html: j,
                    styleClass: "mediaOverlayer",
                    pageName: T1.utilities.isTouchCapable ? a.pageName || (T1.labels ? T1.labels.page : "page") : g,
                    fitImages: !0,
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                    hashAction: "gallery-item-click"
                });
                var m = function() {
                    c.bootstrapSlide.onSlid(k, l);
                    var a = b("#" + k);
                    a.on("slid.bs.carousel", function() {
                        c.bootstrapSlide.onSlid(k, l)
                    }),
                    a.on("slide.bs.carousel", function() {
                        c.bootstrapSlide.onSlide(k)
                    }),
                    n.unsubscribe()
                }
                  , n = T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, m)
            },
            createSocialTools: function(a) {
                if (b(".social-tools").length) {
                    var c = b(".social-tools").find(".share-button.clean").clone(!0)
                      , d = b('<div id="social-tools-gallery" class="bg-img-btn-container"></div>');
                    return c.find(".sprite-share-arrow").attr("class", "sprite-share-arrow-inverted"),
                    c.appendTo(d),
                    d.appendTo(a),
                    b.safe("T1.social.share.init")(c),
                    d
                }
                return null
            },
            captureKeys: function(a) {
                var b = window.event || a;
                if (b)
                    switch (b.keyCode) {
                    case d.KEYCODE_ESC:
                        c.hide()
                    }
            },
            loadImage: function(a) {
                var e = [a, a.parent().next(".item").find("img"), a.parent().prev(".item").find("img")]
                  , f = function() {
                    var a = b(this);
                    T1.channels.dialog.publishAsync(d.MATERIALBOX_RESIZE_IMAGE, {
                        id: c.carouselId
                    }),
                    c.hideLoader(),
                    a.parent().find("video").size() || a.parents(".carchapter-topfeatures-v2").size() ? a.css({
                        display: "block"
                    }) : a.fadeIn("slow").css({
                        display: "block",
                        position: "absolute",
                        top: 0
                    })
                };
                if (a.parents(".carchapter-topfeatures-v2").size()) {
                    var g = a.clone();
                    g.appendTo(a.parent()),
                    a.remove(),
                    g.on("load", f)
                } else if (a.attr("src") && "" !== a.attr("src")) {
                    a.removeAttr("style"),
                    a.attr("src", "");
                    var h = a.clone();
                    h.appendTo(a.parent()),
                    a.remove();
                    var i = h.data("lazy-load");
                    h.attr("src", ""),
                    h.on("load", f),
                    h.attr("src", i)
                } else {
                    for (var j in e) {
                        var k = a
                          , l = k.data("lazy-load");
                        k.attr("src", ""),
                        k.on("load", f),
                        k.attr("src", l)
                    }
                    c.showLoader()
                }
            },
            showLoader: function() {
                if (0 === b(".loaderLayer").length) {
                    b("<div></div>").addClass("loaderLayer").appendTo("#" + c.carouselId).show()
                } else
                    b(".loaderLayer").show()
            },
            hideLoader: function() {
                b(".loaderLayer").hide()
            },
            loadIframe: function(a) {
                var b = a
                  , d = b.attr("data-lazy-load");
                b.attr("sticky") || (d && (b.attr("src", d),
                b.on("load", function() {
                    c.hideLoader(),
                    b.fadeIn("slow")
                })),
                c.showLoader())
            },
            attachIframe: function() {
                var a = b("#" + c.carouselId + " .item.active");
                if ("external-video" == a.attr("data-type") && a.attr("data-detachedIframe")) {
                    var d = parseInt(a.attr("data-detachedIframe"));
                    void 0 !== c.detachedIframes[d] && (c.detachedIframes[d].appendTo(a),
                    c.detachedIframes[d] = void 0,
                    a.removeAttr("data-detachedIframe"))
                }
            },
            detachIframe: function(a) {
                var d = b("#" + c.carouselId + " .item.active");
                if ("external-video" == d.attr("data-type")) {
                    var e = d.find("iframe");
                    e.length > 0 && (e = e.detach(),
                    c.detachedIframes.push(e),
                    d.attr("data-detachedIframe", c.detachedIframes.length - 1))
                }
            },
            destroyIframe: function() {
                var a = b("#" + c.carouselId + " .item").not(".active").find("iframe")
                  , d = a.attr("src");
                a && (a.attr("sticky") || (a.data("lazy-load", d),
                a.attr("src", "")))
            },
            getCarouselActiveItem: function(a) {
                return a.find(".item.active")
            },
            getActiveSlideType: function(a) {
                return a.data("type")
            },
            getItemImgSrc: function(a) {
                return a.find("img").first().attr("src") || a.find("img").first().data("lazy-load")
            },
            getImgSrcOfActiveItem: function(a) {
                a = a || b(null);
                var d = c.getCarouselActiveItem(a)
                  , e = c.getActiveSlideType(d)
                  , f = "";
                return !d.length || "image" !== e && "video" !== e || (f = c.getItemImgSrc(d) || ""),
                f
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            getCarouselActiveItem: a.getCarouselActiveItem,
            getItemImgSrc: a.getItemImgSrc,
            getImgSrcOfActiveItem: a.getImgSrcOfActiveItem
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.pageOverlayer = function() {
        "use strict";
        var b = {
            pageStack: [],
            defaultHtml: "<div></div>",
            className: "overlayerWrapper",
            mainContentId: "pagecontent",
            animationDelay: 10,
            scrollTop: 0,
            disableScrollClass: "no-scroll",
            disableResizeClass: "no-resize",
            disableFitImageClass: "no-fit-image",
            youtubeUrl: "//www.youtube.com/embed/<id>?rel=0&hd=1;autoplay=1;controls=0;modestbranding=1&wmode=opaque&html5=1",
            subscriptionOnResize: null,
            contentOnOverlay: null,
            siteDirectionRtl: !1,
            init: function() {
                var a = b;
                "rtl" === T1.settings.siteDirection && (a.siteDirectionRtl = !0),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_OPEN, a.show),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_CLOSE, a.hide),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_RESIZE_IMAGE, a.fitImage),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_RESIZE, a.resize),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_DESTROY, a.destroy),
                a.contentOnOverlay = $(".content-on-overlay"),
                a.contentOnOverlay.length > 0 && T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_OPEN, {
                    html: a.contentOnOverlay,
                    fitImages: !0,
                    noScroll: !0
                })
            },
            show: function(a) {
                a || (a = {});
                var c = b
                  , d = a.html || c.defaultHtml
                  , f = $(d)
                  , g = a.preserveContent || !1
                  , h = []
                  , i = a.backCaption || (T1.labels ? T1.labels.backTo : "Back to ")
                  , j = a.pageName || $(a.el).closest("section").data("section-title")
                  , k = a.backCaptionStrong || j || (T1.labels ? T1.labels.page : "page")
                  , l = " " + (a.styleClass || "") + (a.inPage ? " inpage" : "")
                  , m = $("<div></div>").addClass(c.className + l)
                  , n = a.inPage || !1
                  , o = a.noScroll ? " " + c.disableScrollClass : ""
                  , p = a.noResize ? " " + c.disableResizeClass : ""
                  , q = a.fitImages ? "" : " " + c.disableFitImageClass
                  , r = a.noFade || n || !1
                  , s = a.noTransitions || !1
                  , t = $("<div></div>").addClass("overlayerContent" + o + p + q);
                a.identifier || (a.identifier = f.attr("id") || (a.url ? a.url.replace(/.*\/|[\?#].*/g, "") : (new Date).getTime()));
                var u = function() {
                    T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_RESIZE, {}),
                    T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_RESIZE_IMAGE, {})
                };
                if (c.subscriptionOnResize || (c.subscriptionOnResize = T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, u)),
                0 === c.pageStack.length && (c.scrollTop = $(document).scrollTop()),
                f.hasClass(c.className))
                    m = f;
                else {
                    if (0 === f.find(".toolbar").length && !n) {
                        c.buildToolbar({
                            backCaption: i,
                            backCaptionStrong: k,
                            preventHashRemove: a.preventHashRemove || !1
                        }).appendTo(m)
                    }
                    var v = T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_LOAD, function(a) {
                        c.toggleOverlayerClasses(n, !0);
                        var b = a.el.find("iframe");
                        b.length && b.each(function() {
                            this.contentWindow.postMessage({
                                htmlClass: "insideOverlayer"
                            }, "*")
                        }),
                        v.unsubscribe()
                    });
                    g && f.each(function() {
                        c.convertToPlaceHolder(h, this)
                    }),
                    a.addWhiteDiv ? t.append($('<div class="white"></div>').append(f)) : t.append(f),
                    m.append(t)
                }
                a.html5id && (a.iframe = !0,
                a.url = "/api/html/page" + location.pathname + "?id=" + a.html5id),
                a.youtubeId && c.addYouTube(f, a),
                a.iframe && c.addIFrame(f, a),
                a.ajax && c.addAjaxContent(f, a),
                a.video && c.addVideo(f, a),
                a.hash && ("string" != typeof a.hash && (a.hash = (new Date).getTime().toString()),
                T1.channels.hash.publish(T1.constants.HASH_ADD, a.hash)),
                m.find("> div").css({
                    display: "none"
                }),
                c.pageStack.push({
                    name: j,
                    el: m,
                    placeHolders: h,
                    noTransitions: s,
                    noFade: r,
                    inPage: n,
                    identifier: a.identifier,
                    hash: a.hashString
                }),
                m.appendTo($("body")),
                a.el = m;
                var w = !1
                  , x = !1
                  , y = !1;
                if (a.iframe && a.sync)
                    if (t.find("iframe").get(0))
                        try {
                            var z = t.find("iframe").get(0).contentWindow
                              , A = function() {
                                a || (a = {}),
                                x = !0,
                                w && !y && (T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_LOAD, a),
                                y = !0)
                            };
                            T1.channels.figure.subscribe(T1.constants.POSTMESSAGE_IFRAME_LOAD, A),
                            $(z).on("load", A)
                        } catch (e) {
                            console.log(e.message),
                            a.sync = !1
                        }
                    else
                        a.sync = !1;
                var B = function() {
                    w = !0,
                    t.scrollTop(0),
                    a.iframe && a.sync && (!x || y) || (T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_LOAD, a),
                    y = !0)
                }
                  , C = function() {
                    var a = T1.utilities.viewport.getCurrentBp();
                    "sm" !== a && "xs" !== a || $("#navigation").toggle(n),
                    $("#" + c.mainContentId).css({
                        display: "none"
                    }),
                    $("." + c.className + ":not(:last)").css({
                        display: "none"
                    }),
                    $("body").removeClass("noscroll"),
                    n && (m.css({
                        position: "static"
                    }),
                    $(window).scrollTop(0)),
                    T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_RESIZE, {
                        el: m
                    }),
                    T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_RESIZE_IMAGE, {
                        el: m
                    }),
                    m.find(".toolbar").fadeIn(T1.constants.ANIMATION_SPEED_FADE),
                    r || s ? (m.find("> div").css({
                        display: "block"
                    }),
                    B()) : m.find(".overlayerContent").fadeIn(T1.constants.ANIMATION_SPEED_FADE, B)
                }
                  , D = c.siteDirectionRtl ? {
                    "margin-right": 0
                } : {
                    "margin-left": 0
                };
                s ? (m.css(D),
                C()) : m.animate(D, T1.constants.ANIMATION_SPEED_SCROLL, C);
                var E = f.find(".mainfocus");
                E.length && T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_MAINFOCUS, E)
            },
            addIFrame: function(a, c) {
                if (!T1.utilities || T1.utilities.whitelist.test(c.url))
                    if ("https:" === window.location.protocol && (c.url = c.url.replace(/^http:/, "")),
                    /youtu(be)?\./.test(c.url)) {
                        var d = T1.utilities.youtube.getYouTubeId(c.url);
                        $.ajax({
                            url: (T1.settings.mock ? "https://t1-new-dev-fr.herokuapp.com" : "") + "/api/verify/youtube/" + d,
                            async: !1
                        }).done(function(d) {
                            d.whitelist ? b.injectIframe(a, c) : b.showToastWhenLoaded(T1.labels.iframeYoutubeRejectMsg || "Youtube channel not supported")
                        }).fail(function(a) {
                            b.showToastWhenLoaded(T1.labels.iframeYoutubeRejectMsg || "Youtube channel not supported")
                        })
                    } else
                        b.injectIframe(a, c);
                else
                    b.showToastWhenLoaded(T1.labels.iframeDomainWhiteListRejectMsg || "Domain not supported")
            },
            injectIframe: function(a, b) {
                var c = $("<iframe></iframe>", {
                    src: b.url || $("#" + b.el).prop("href"),
                    width: "100%",
                    height: "100%",
                    allowfullscreen: "true"
                });
                a.addClass("white"),
                a.append(c)
            },
            showToastWhenLoaded: function(a) {
                var b = T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_LOAD, function() {
                    b.unsubscribe(),
                    T1.channels.dialog.publish(T1.constants.TOAST_CUSTOM, {
                        customContainer: $(".overlayerContent").last(),
                        customText: a,
                        timeout: 5e3
                    })
                })
            },
            addAjaxContent: function(a, b) {
                var c = b.url || $("#" + b.el).prop("href")
                  , d = !b.sync;
                a.addClass("white"),
                $.ajax({
                    url: c,
                    async: d,
                    success: function(c) {
                        var d, e = $("<div>" + c + "</div>"), f = e.find("#pagecontent");
                        f.length ? (d = f.find("> *"),
                        f.hasClass("fleet") && a.addClass("fleet")) : d = e.find("body > *"),
                        b.response = c,
                        a.append(d),
                        T1.channels.figure.publishAsync(T1.constants.FIGURE_LOAD, a),
                        T1.channels.media.publishAsync(T1.constants.CAROUSEL_INITIALIZE_ON_OVERLAY, {
                            target: a
                        }),
                        $(".overlayerContent #navigation").remove()
                    }
                })
            },
            addYouTube: function(a, c) {
                var d = b
                  , e = $("<iframe></iframe>", {
                    src: d.youtubeUrl.replace(/<id>/g, c.youtubeId)
                });
                a.addClass("youtubeWrapper"),
                a.append(e)
            },
            addVideo: function(a, b) {
                b.el && void 0 !== T1.statistics && (b.video.tagging = T1.statistics.getAttributes($(b.el), {
                    ancestor: !0
                })),
                b.video.figure = a,
                T1.channels.media.publish(T1.constants.VIDEO_CREATEPLAYER, b.video)
            },
            buildToolbar: function(a) {
                var b = $('<div onclick=""></div>')
                  , c = $("<a></a>").addClass("close-link").attr({
                    "data-bt-value": window.location.hash,
                    "data-bt-eventclass": "componentevent",
                    "data-bt-category": "component",
                    "data-bt-componentname": "overlayer",
                    "data-bt-action": "click_back"
                })
                  , d = $("<span></span>").addClass("back-text").html(a.backCaption + " ")
                  , e = $("<strong></strong>").html(a.backCaptionStrong);
                b.addClass("toolbar"),
                c.append('<img class="sidebarlogo" src="/images/logo/logo-lvl2.png"></div>'),
                c.append('<div class="btn-back"><div class="btn-graphic"><span class="icon icon-angle-left"></span></div></div>'),
                d.append(e),
                c.append(d),
                b.append(c);
                var f = function(b) {
                    a.preventHashRemove ? T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_CLOSE, {}) : T1.channels.hash.publishAsync(T1.constants.HASH_REMOVE, "")
                };
                return b.on("click", f),
                T1.channels.dialog.publishAsync(T1.constants.STATS_TRACK_CLOSE_OVERLAYER, c),
                b
            },
            hide: function(c) {
                if (c || (c = {}),
                0 !== b.pageStack.length) {
                    var d = b
                      , e = d.pageStack.length - 1
                      , f = d.pageStack[e]
                      , g = f.el.find(".overlayerContent").children()
                      , h = f.noTransitions || !1
                      , i = f.noFade || !1;
                    if (!c.hash || !f.hash || c.hash.hash === f.hash) {
                        c.identifier = f.identifier;
                        var j = function(a) {
                            $(document).scrollTop(d.scrollTop)
                        }
                          , k = function() {
                            0 === e && (d.subscriptionOnResize || (d.subscriptionOnResize.unsubscribe(),
                            d.subscriptionOnResize = null)),
                            d.pageStack.splice(e, 1),
                            f.el.remove(),
                            T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_CLOSED, a._.merge(c, {
                                overlayer: this,
                                content: g
                            }))
                        }
                          , l = function() {
                            if (0 !== e && d.pageStack[e - 1].el.css({
                                display: "block"
                            }),
                            d.resetOriginalPositions(f),
                            0 === e && ($("#" + d.mainContentId).css({
                                display: "block"
                            }),
                            j(),
                            T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_REOPEN_MAINCONTENT)),
                            $("#navigation").show(),
                            T1.channels.navigation.publishAsync(T1.constants.NAVIGATION_RESIZE_BREADCRUMB, {}),
                            h)
                                f.el.css({
                                    display: "none"
                                }),
                                k();
                            else {
                                var a = d.siteDirectionRtl ? {
                                    "margin-right": "100%"
                                } : {
                                    "margin-left": "100%"
                                };
                                f.el.animate(a, T1.constants.ANIMATION_SPEED_SCROLL, k)
                            }
                        }
                          , m = f.el.find("> .toolbar")
                          , n = f.el.find("> .overlayerContent");
                        f.el.css({
                            position: "fixed"
                        }),
                        d.toggleOverlayerClasses(!!d.pageStack[e - 1] && d.pageStack[e - 1].inPage, !!d.pageStack[e - 1]),
                        h || i ? (m.css({
                            display: "block"
                        }),
                        n.css({
                            display: "block"
                        }),
                        l()) : (n.fadeOut(T1.constants.ANIMATION_SPEED_FADE, l),
                        m.fadeOut(T1.constants.ANIMATION_SPEED_FADE))
                    }
                }
            },
            toggleOverlayerClasses: function(a, b) {
                $("body").toggleClass("in-page", a && b).toggleClass("overlayer-open", b)
            },
            fitImage: function(a) {
                var c = b
                  , d = $(".overlayerContent").last();
                if (d.length < 1 && (d = $(".material-box-content").last()),
                !d.hasClass(c.disableFitImageClass) && d.offset && 0 !== d.length) {
                    var e = d.offset()
                      , f = $(window).width();
                    e.right = c.siteDirectionRtl ? f - (e.left + d.outerWidth()) : 0;
                    var g = $(window).height() - e.top
                      , h = c.siteDirectionRtl ? f - e.right : $(window).width() - e.left
                      , i = a.image || d.find(".item.active img");
                    0 === i.length && (i = d.find("#content-on-overlay > img")),
                    0 === i.length && (i = d.find("> .posterWrapper > img"));
                    var j = i.height()
                      , k = i.width()
                      , l = h / g
                      , m = k / j;
                    if (0 !== i.length) {
                        if (i.hasClass("noAspect")) {
                            if (isNaN(m) || m === 1 / 0 || 0 === m)
                                return;
                            i.removeClass("noAspect")
                        }
                        if (0 === i.parent(".zoomContainer").length)
                            if (m > l) {
                                var n = 1.35
                                  , o = l * n
                                  , p = 0
                                  , q = 0
                                  , r = 0
                                  , s = 0;
                                m > o ? (s = h * n,
                                r = s / k * j,
                                p = (s - h) / 2 * -1,
                                q = Math.floor((g - r) / 2)) : (s = "auto",
                                r = g,
                                p = -Math.floor(g * m - h) / 2),
                                c.siteDirectionRtl ? i.css({
                                    height: "auto" == r ? "auto" : Math.ceil(r) + "px",
                                    width: "auto" == s ? "auto" : Math.ceil(s) + "px",
                                    "margin-top": 0 === q ? "0" : q + "px",
                                    "margin-right": p
                                }) : i.css({
                                    height: "auto" == r ? "auto" : Math.ceil(r) + "px",
                                    width: "auto" == s ? "auto" : Math.ceil(s) + "px",
                                    "margin-top": 0 === q ? "0" : q + "px",
                                    "margin-left": p
                                })
                            } else
                                0 === j || 0 === k ? (c.siteDirectionRtl ? i.css({
                                    height: "auto",
                                    width: h,
                                    "margin-top": 0,
                                    "margin-right": 0
                                }) : i.css({
                                    height: "auto",
                                    width: h,
                                    "margin-top": 0,
                                    "margin-left": 0
                                }),
                                i.addClass("noAspect")) : c.siteDirectionRtl ? i.css({
                                    height: "auto",
                                    width: h,
                                    "margin-top": -Math.floor(h / m - g) / 2,
                                    "margin-right": 0
                                }) : i.css({
                                    height: "auto",
                                    width: h,
                                    "margin-top": -Math.floor(h / m - g) / 2,
                                    "margin-left": 0
                                })
                    }
                }
            },
            resize: function(a) {
                a || (a = {});
                var c = b
                  , d = a.el || $(".overlayerWrapper").last()
                  , e = d.find(".overlayerContent");
                if (0 !== e.length && !e.hasClass(c.disableResizeClass)) {
                    var f = $(window)
                      , g = f.width()
                      , h = g >= T1.constants.SCREEN_SMALL ? "desktop" : f.height() > g ? "portrait" : "landscape";
                    d.removeClass("landscape portrait desktop"),
                    d.addClass(h);
                    var i = e[0].offsetLeft
                      , j = c.siteDirectionRtl ? g - (i + e.first().outerWidth()) : 0
                      , k = {
                        left: i,
                        top: e[0].offsetTop,
                        right: j
                    }
                      , l = c.siteDirectionRtl ? g - k.right + "px" : g - k.left + "px"
                      , m = window.innerHeight ? window.innerHeight : $(window).height()
                      , n = m - k.top + "px";
                    e.css({
                        width: l,
                        height: n
                    })
                }
            },
            resetOriginalPositions: function(a) {
                $(a.placeHolders).each(function(a, b) {
                    b.figure.replaceWith(b.target)
                })
            },
            convertToPlaceHolder: function(a, b) {
                var c = {
                    figure: $('<figure data-type="pageoverlayer-placeholder"></figure>'),
                    target: b
                };
                a.push(c),
                $(b).before(c.figure)
            },
            destroy: function() {
                for (var a = b, c = null, d = 0; d < a.pageStack.length; d++)
                    c = a.pageStack[d],
                    a.resetOriginalPositions(c),
                    c.el.remove();
                T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_REOPEN_MAINCONTENT),
                a.pageStack = [],
                $("#" + a.mainContentId).css({
                    display: "block"
                }),
                $(document).scrollTop(a.scrollTop)
            }
        };
        return {
            init: b.init,
            show: b.show,
            hide: b.hide,
            fitImage: b.fitImage,
            fitVideo: b.fitVideo
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.sitemap = function() {
        "use strict";
        var a = {
            init: function() {
                c.initSitemap(b("body")),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function(a) {
                    c.initSitemap(a.container)
                })
            },
            initSitemap: function(a) {
                var b = a.find(".sitemap");
                b.size() && (b.on("show.bs.collapse", function() {
                    c.openSitemap(a)
                }),
                b.on("hide.bs.collapse", function() {
                    c.closeSitemap(a)
                })),
                a.find(".footer-collapsed-links a:not(.scrollTo)").on("click", function(a) {
                    a.preventDefault()
                })
            },
            openSitemap: function(a) {
                a.find(".sitemap").addClass("noanimation"),
                b("html, body").animate({
                    scrollTop: b(".footer").offset().top - ("lg" !== T1.breakpoints.currentBP() ? 0 : 70)
                }, "slow")
            },
            closeSitemap: function(a) {
                a.find(".sitemap").removeClass("noanimation");
                setTimeout(function() {
                    T1.channels.sitemap.publish(d.SITEMAP_COLLAPSED)
                }, 800)
            },
            switchDesktop: function() {
                var a = b("li.sitemaplink");
                a.size() && a.show()
            },
            switchMobile: function() {
                var a = b(".sitemap")
                  , c = b("li.sitemaplink");
                a.size() && a.removeClass("in").addClass("collapse"),
                c.size() && c.hide()
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            switchMobile: a.switchMobile,
            switchDesktop: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.expandItemsButton = function() {
        "use strict";
        var a = {
            labels: {},
            init: function() {
                T1.channels.dialog.subscribe(d.EXPANDITEMSBUTTON_CLICK, c.changeText),
                b(document).on("click", ".btn-toggle:not(.carousel-expander)", function() {
                    T1.channels.dialog.publishAsync(d.EXPANDITEMSBUTTON_CLICK, this)
                })
            },
            changeText: function(a) {
                var c = b(a)
                  , e = b(c.attr("data-parent"))
                  , f = e.find(c.attr("data-itemclass"))
                  , g = e.find(".collapse, .collapsing").last()
                  , h = c.find(".toggle-text")
                  , i = h.length > 0;
                g.off("shown.bs.collapse hidden.bs.collapse").on("shown.bs.collapse hidden.bs.collapse", function(a) {
                    var e = !b(this).hasClass("in");
                    c.toggleClass("collapsed", e),
                    i ? h.html(e ? T1.labels.viewAll + "<span> (" + f.length + ") </span>" : T1.labels.viewLess) : c.html(e ? T1.labels.viewAll + "<span> (" + f.length + ") </span>" : T1.labels.viewLess),
                    T1.channels.global.publishAsync(d.TOGGLER_BUTTON_TEXT_UPDATED, {
                        target: c
                    })
                })
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            changeText: a.changeText
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.pdfWorker = function() {
        "use strict";
        var a = {
            classes: {
                links: "pdf-worker"
            },
            interval: 5e3,
            init: function() {
                b("body").on("click", "." + c.classes.links, function(a) {
                    var d = b(this)
                      , e = d.data("config-id") || c.getId(d.attr("href"));
                    c.process(d, e)
                })
            },
            process: function(a, b) {
                b && (e.preventDefault(),
                T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                    target: c.getLoader(a),
                    transparent: !0
                }),
                c.wait(a, b, 1))
            },
            wait: function(a, b, d) {
                setTimeout(c.request(a, b), d || c.interval)
            },
            request: function(a, e) {
                return function() {
                    b.getJSON(T1.constants.URL_PDF_WORKER_PROCESS + "/" + e, function(b) {
                        switch (b.status) {
                        case "in progress":
                            c.process(a, e);
                            break;
                        case "success":
                            T1.channels.dialog.publishAsync(d.LOADING_COMPLETE, {
                                target: c.getLoader(a)
                            }),
                            a.clone().attr("href", b.pdfUrl)[0].click();
                            break;
                        case "failed":
                            c.handleError(a, b.error.message);
                            break;
                        default:
                            c.handleError(a, b.status)
                        }
                    }).fail(function(b, d, e) {
                        c.handleError(a, e)
                    })
                }
            },
            handleError: function(a, b) {
                T1.channels.dialog.publishAsync(T1.constants.LOADING_MESSAGE, {
                    target: c.getLoader(a),
                    message: b
                }),
                setTimeout(function() {
                    T1.channels.dialog.publishAsync(d.LOADING_COMPLETE, {
                        target: c.getLoader(a)
                    })
                }, c.interval)
            },
            getLoader: function(a) {
                return a.closest("section").or("#pagecontent")
            },
            getId: function(a) {
                if (a) {
                    if (a = a.split("/"),
                    "pdf" === a[a.length - 2])
                        return a[a.length - 1];
                    if ("pdf" === a[a.length - 1])
                        return a[a.length - 2]
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
}),
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.dealerCards = function() {
        var a = {
            container: null,
            map: null,
            markers: [],
            dealerLocation: null,
            currentLocation: null,
            init: function() {
                c.container = b("#dealer-details"),
                c.container.size() && (T1.channels.mytoyota.subscribe(d.MY_TOYOTA_LOGIN_SUCCESS, c.myToyotaLoginSuccess),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, c.breakpointChanged),
                T1.channels.bubble.subscribe(d.BUBBLE_ACTIVATED, c.setFocusOnSearchBubbleInput),
                b.safe("T1.googleServices.maps.loaded")() || (b.safe("T1.googleServices.maps.addListener")("load", function() {
                    c.initMap()
                }),
                b.safe("T1.googleServices.maps.init")()),
                c.container.find(".dealer-contact-details h4").click(function() {
                    var a = b(this).parent().find(">.row")
                      , d = c.container.find(".details-section.open >div >.row");
                    d.is(a) || d.slideToggle(function() {
                        d.parents(".details-section").toggleClass("open")
                    }),
                    a.slideToggle(function() {
                        a.parents(".details-section").toggleClass("open")
                    })
                }),
                c.container.find(".btn-save").toggle(T1.myToyota.isAuthenticated()).click(c.save),
                c.container.find(".input-search input").keypress(c.handleKeyPress),
                c.container.find(".btn-search").click(c.search),
                c.container.find(".btn-back").click(c.showDetails))
            },
            setFocusOnSearchBubbleInput: function() {
                var a = c.container.find(".bubble.active");
                a.length && a.find(".input-search input").focus()
            },
            myToyotaLoginSuccess: function(a) {
                c.container.find(".btn-save").toggle(T1.myToyota.isAuthenticated())
            },
            save: function(a) {
                var e = b.ajax({
                    type: "GET",
                    url: d.URL_DEALERS_PAGE + c.container.data("id")
                });
                e.done(function(a) {
                    T1.channels.dealer.publishAsync(T1.constants.DEALER_SAVE, {
                        dealer: a
                    }),
                    T1.channels.hash.publishAsync(T1.constants.HASH_ADD, "/publish/my_toyota_my_dealers")
                }),
                e.fail(function(a, b, c) {
                    alert(c || T1.labels.forms.errorSubmit)
                }),
                a.preventDefault()
            },
            search: function(a) {
                var d = c.container.find(".input-search input").val();
                0 !== d.length ? (new google.maps.Geocoder).geocode({
                    address: d
                }, function(a, d) {
                    if (d === google.maps.GeocoderStatus.OK)
                        if (a[0]) {
                            c.currentLocation = new google.maps.LatLng(a[0].geometry.location.lat(),a[0].geometry.location.lng()),
                            c.loadDirections();
                            var e = c.container.offset().top - parseInt(c.container.css("padding-top"));
                            b("html, body").animate({
                                scrollTop: e
                            }, 800)
                        } else
                            c.showGeoError(T1.labels.dealer.errorGeoNotFound);
                    else
                        c.showGeoError(T1.labels.dealer.errorGeoFailed)
                }) : c.showGeoError(T1.labels.dealer.errorNoValue),
                a.preventDefault()
            },
            handleKeyPress: function(a) {
                13 === a.keyCode && c.search(a)
            },
            showDetails: function(a) {
                c.reset(),
                c.container.find(".directions").addClass("hidden"),
                c.container.find(".details").removeClass("hidden"),
                c.container.hasClass("small-view") && c.moveMapForSmallView(),
                a.preventDefault()
            },
            loadDealerMap: function(a) {
                if (a.size()) {
                    var d = b.parseJSON(a[0].getAttribute("data-location"));
                    c.dealerLocation = new google.maps.LatLng(d.lat,d.lon),
                    c.map = new google.maps.Map(a[0],{
                        center: c.dealerLocation,
                        zoom: 10,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    }),
                    c.clearMarkers(),
                    c.setMarker(0, c.dealerLocation, c.container.find(".dealer-name").text())
                }
            },
            loadDirections: function() {
                c.initMap();
                var a = new google.maps.DirectionsRenderer({
                    map: c.map,
                    suppressMarkers: !0
                })
                  , b = new google.maps.DirectionsService
                  , d = {
                    origin: c.currentLocation,
                    destination: c.dealerLocation,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING,
                    unitSystem: google.maps.DirectionsUnitSystem.METRIC
                };
                a.setPanel(c.container.find(".directions-content").empty()[0]),
                b.route(d, function(b, d) {
                    d === google.maps.DirectionsStatus.OK && (a.setDirections(b),
                    c.container.find(".details").addClass("hidden"),
                    c.container.find(".directions").removeClass("hidden"),
                    c.container.hasClass("small-view") && c.moveMapForSmallView())
                }),
                c.clearMarkers(),
                c.setMarker(98, c.currentLocation, c.container.find(".input-search input").val()),
                c.setMarker(-1, c.dealerLocation, c.container.find(".dealer-name").text())
            },
            setMarker: function(a, b, d) {
                var e = a < 9 ? "0" + (a + 1) : a + 1;
                c.markers.push(new google.maps.Marker({
                    position: b,
                    icon: T1.settings.dealer.markerPath + "marker" + e + ".png",
                    map: c.map,
                    title: d
                }))
            },
            clearMarkers: function() {
                for (var a = 0; a < c.markers.length; a++)
                    c.markers[a].setMap(null);
                c.markers = []
            },
            initMap: function() {
                c.map || (c.reset(),
                Modernizr.geolocation && c.container.find(".geo-location").css("display", "block").click(function(a) {
                    c.getLocation(),
                    a.preventDefault()
                }))
            },
            reset: function() {
                c.container.find(".input-search input").val(""),
                c.container.find(".bubble-direction").removeClass("active"),
                c.loadDealerMap(c.container.find(".map-dealers"))
            },
            getLocation: function() {
                Modernizr.geolocation && navigator.geolocation.getCurrentPosition(function(a) {
                    c.currentLocation = new google.maps.LatLng(a.coords.latitude,a.coords.longitude),
                    c.setCurrentAddress()
                })
            },
            setCurrentAddress: function() {
                (new google.maps.Geocoder).geocode({
                    latLng: c.currentLocation
                }, function(a, b) {
                    if (b !== google.maps.GeocoderStatus.OK)
                        return void c.showGeoError(T1.labels.dealer.errorGeoFailed);
                    a[1] ? T1.channels.search.publish(d.INPUT_SEARCH_UPDATE, {
                        target: c.container.find(".input-search"),
                        value: a[1].formatted_address
                    }) : c.showGeoError(T1.labels.dealer.errorGeoNotFound)
                })
            },
            showGeoError: function(a) {
                c.container.find(".geo-error").text(a).css({
                    display: "block"
                })
            },
            breakpointChanged: function(a) {
                T1.breakpoints.list[a] <= d.SCREEN_SMALL && !c.container.hasClass("small-view") ? c.moveMapForSmallView() : T1.breakpoints.list[a] > d.SCREEN_SMALL && c.container.hasClass("small-view") && c.moveMapForLargeView()
            },
            moveMapForSmallView: function() {
                c.container.addClass("small-view"),
                c.container.find(".map-dealers").parents(".row:first").insertBefore(".dealer-contact-title:visible, .directions-content:visible")
            },
            moveMapForLargeView: function() {
                c.container.removeClass("small-view"),
                c.container.find(".map-dealers").parents(".row:first").appendTo("#map-col")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.financeRates = function() {
        "use strict";
        var a = {
            blFinanceRates: null,
            cbFinanceRates: null,
            enabled: null,
            subscriptions: {},
            tfsSelector: "[data-tfs-code][data-tfs-set]",
            init: function() {
                a.blFinanceRates = b([]),
                a.cbFinanceRates = b([]),
                T1.channels.finance.subscribe(T1.constants.FINANCE_RATES_INIT, c.initOnDemand),
                c.initOnDemand({
                    root: b("body")
                }),
                c.initState()
            },
            initOnDemand: function(a) {
                var b = a.root.find(".finance-rates").show()
                  , d = b.find('input[type="checkbox"]');
                c.blFinanceRates = c.blFinanceRates.add(b),
                c.cbFinanceRates = c.cbFinanceRates.add(d),
                d.off("change", c.toggleFinanceRates).on("change", c.toggleFinanceRates)
            },
            initState: function() {
                Modernizr.localstorage && (0 === parseInt(localStorage.getItem("financeRates")) ? (c.disableFinanceRates(),
                T1.channels.finance.publish(d.FINANCE_RATES_OFF)) : (c.enableFinanceRates(),
                T1.channels.finance.publish(d.FINANCE_RATES_ON)))
            },
            toggleFinanceRates: function() {
                var a = b(this);
                a.is(":checked") ? (c.enableFinanceRates(),
                T1.channels.finance.publishAsync(d.FINANCE_RATES_ON, {
                    event: "toggledByUser",
                    el: a
                })) : (c.disableFinanceRates(),
                T1.channels.finance.publishAsync(d.FINANCE_RATES_OFF, {
                    event: "toggledByUser",
                    el: a
                }))
            },
            enableFinanceRates: function() {
                localStorage.setItem("financeRates", 1),
                c.cbFinanceRates.size() && (c.cbFinanceRates.prop("checked", !0),
                c.cbFinanceRates.parent("label").addClass("checked")),
                c.subscriptions.onOverlayerLoad = T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.onOverlayerLoad),
                c.enabled = !0,
                b("body").addClass("show-finance-rates"),
                c.requestRates()
            },
            disableFinanceRates: function() {
                localStorage.setItem("financeRates", 0),
                c.cbFinanceRates.size() && (c.cbFinanceRates.prop("checked", !1),
                c.cbFinanceRates.parent("label").removeClass("checked")),
                c.subscriptions.onOverlayerLoad && c.subscriptions.onOverlayerLoad.unsubscribe(),
                c.clearRates(),
                c.enabled = !1,
                b("body").removeClass("show-finance-rates")
            },
            onOverlayerLoad: function(a) {
                c.requestRates(a.container, {
                    configs: c.extractFinanceConfigs(a.response)
                })
            },
            extractFinanceConfigs: function(a) {
                if (a)
                    try {
                        var b = a.match(/(?:T1.data.finance.configs = {)([\s\S]+)(?:};)/);
                        if (b[1])
                            return JSON.parse("{" + b[1] + "}")
                    } catch (e) {}
                return null
            },
            requestRates: function(a, d) {
                if (c.isFinanceEnabled() || c.isInsuranceEnabled()) {
                    var e = (a || b).find(c.tfsSelector);
                    d = b.extend({
                        cached: !1,
                        source: null
                    }, d),
                    e.length && T1.financeService.requestFinanceData({
                        source: d.source,
                        configs: d.configs || T1.data.finance.configs,
                        success: c.applyRates(a),
                        multiple: !0,
                        cached: d.cached
                    })
                }
            },
            isFinanceEnabled: function() {
                return "boolean" != typeof c.financeEnabled && (c.financeEnabled = !!(c.enabled && T1.settings.finance && "true" === T1.settings.finance.showRatesMonthly && T1.data && T1.data.finance && T1.data.finance.configs)),
                c.financeEnabled
            },
            isInsuranceEnabled: function() {
                return "boolean" != typeof c.insuranceEnabled && (c.insuranceEnabled = !!(T1.settings.finance && T1.settings.finance.insurance && "true" === T1.settings.finance.insurance.enabled && T1.data && T1.data.finance && T1.data.finance.configs)),
                c.insuranceEnabled
            },
            applyRates: function(a) {
                return function(e) {
                    if (e = b.isPlainObject(e) ? e : b.parseJSON(e),
                    e.error)
                        return void console.log(e.message);
                    var f = (a || b).find(c.tfsSelector);
                    b(f).each(function() {
                        var a = b(this)
                          , d = a.data("tfs-code");
                        "true" === Object.resolve(a.data("tfs-set"), T1.settings.finance) && (c.isFinanceEnabled() && c.applyFinanceRate(a, e, d),
                        c.isInsuranceEnabled() && c.applyInsuranceRate(a, e, d))
                    }),
                    T1.channels.finance.publish(d.FINANCE_RATES_LOADED)
                }
            },
            applyFinanceRate: function(a, c, d) {
                var e = c[d] && c[d].rate ? c[d].rate : null
                  , f = c[d] && c[d].show ? c[d].show : null;
                e && (e.error ? console.log(e.error.message) : a.find(".tfs-input[data-finance]").each(function() {
                    var a = b(this)
                      , c = decodeURIComponent(a.data("finance"))
                      , d = T1.financeService.formatFinanceString(a.data("tfs-input") || c, e, f)
                      , g = a.data("disclaimer-element")
                      , h = g && b(g) || []
                      , i = h.length && e.quote && e.quote.value;
                    (d || "" !== b.trim(d)) && (a.data("tfs-input", a.data("tfs-input") || c),
                    a.html(d).addClass("finance-rate")),
                    i && h.html(i),
                    h.length && h.toggleClass("hidden", !!i)
                }))
            },
            applyInsuranceRate: function(a, c, d) {
                var e = (c[d] && c[d].rate,
                c[d] && c[d].insurance && c[d].insurance.monthlyTotalInsuranceAmount);
                e && (e.error ? console.log(e.error.message) : a.find(".tfs-input[data-insurance]").each(function() {
                    var a = b(this)
                      , c = decodeURIComponent(a.data("insurance"))
                      , d = T1.financeService.formatInsuranceString(a.data("tfs-input") || c, e);
                    (d || "" !== b.trim(d)) && (a.data("tfs-input", a.data("tfs-input") || c),
                    a.html(d).addClass("finance-rate"))
                }))
            },
            clearRates: function() {
                b(c.tfsSelector).each(function() {
                    var a = b(this);
                    a.find(".tfs-input").each(function() {
                        var a = b(this);
                        a.removeClass("finance-rate"),
                        a.html(a.attr("data-tfs-input") || a.html())
                    }),
                    a.find(".tfs-disclaimer").removeClass("finance-rate").empty()
                })
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            enabled: function() {
                return a.enabled
            },
            requestRates: a.requestRates
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.languageSelector = function() {
        "use strict";
        var a = {
            init: function() {
                c.initLanguageSelector(),
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function(a) {
                    c.initLanguageSelector(a.container)
                })
            },
            initLanguageSelector: function(a) {
                var d = a || b("body")
                  , e = d.find(".language-selector:not(.dialog)");
                if (e.length) {
                    var f = d.find("#dropdown-button-my-toyota")
                      , g = e.parent(".navigation-menu")
                      , h = g.find("#sign-in-btn");
                    f.length && (f.addClass("with-indicators"),
                    g.length && (h.length && g.addClass("with-login"),
                    g.addClass("with-language"))),
                    e.find("label").click(c.switchLanguage)
                }
                d.find(".head-navigation .language-link").on("click", c.onLanguagesDialog)
            },
            switchLanguage: function(a) {
                var c = b(a.target).prev();
                "footer-options-current" !== c.attr("id") && (location.href = c.val())
            },
            track: function(a) {
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    extraData: {
                        event: {
                            eventclass: "navevent",
                            category: "component",
                            componentname: "top_menu",
                            action: "language",
                            value: a
                        }
                    }
                })
            },
            onLanguagesDialog: function(a) {
                a.preventDefault(),
                b('#myLanguage input[type="radio"][data-language="' + T1.settings.language.toUpperCase() + '"]').prop("checked", !0),
                c.languageSelectionActionExecuted = !1,
                T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                    type: "box-alert-okcancel",
                    selector: "#myLanguage",
                    styleClass: "dark small-header left-buttons free-layout",
                    title: b("#myLanguage > h5").text(),
                    target: a.target,
                    buttons: {
                        ok: {
                            styleClass: "btn-dark",
                            function: function() {
                                c.languageSelectionActionExecuted = !0,
                                location.href = this.container.find('.language-selector input[type="radio"]:checked').val(),
                                this.close(),
                                c.track("set_language")
                            }
                        },
                        cancel: {
                            styleClass: "btn-link",
                            function: function() {
                                this.close()
                            }
                        }
                    }
                });
                var d = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function(a) {
                    d.unsubscribe(),
                    c.languageSelectionActionExecuted || c.track("close")
                })
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.glossary = function() {
        "use strict";
        var a = {
            init: function() {
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, c.initOverlayer)
            },
            initOverlayer: function(a) {
                a.container.find("#glossary").size() && b("#glossary .index a").click(function(a) {
                    a.preventDefault();
                    var c = b(this);
                    c.parents(".material-box:first").scrollTo(c.attr("href"))
                })
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.financeService = function() {
        "use strict";
        var a = {
            subscriptions: {},
            history: {},
            IE10VersionNr: 10,
            TYPES: {
                BUDGET: "budgetCalculator",
                FINANCE: "productComparison",
                INSURANCE: "insuranceCalculator"
            },
            settings: T1.settings || {
                finance: {}
            },
            init: function() {
                c.handleConfigPage(),
                c.initBudgetCalculatorCta(),
                c.initFinanceCompareModuleInjection(),
                c.initInsuranceCalculator(),
                c.subscriptions.showBudgetCalculator || (c.subscriptions.showBudgetCalculator = T1.channels.finance.subscribe(T1.constants.BUDGET_CALC_OPEN, c.openBudgetCalculator))
            },
            initDesktop: function() {
                c.subscriptions.postRequestFinance = T1.channels.finance.subscribe(T1.constants.FINANCE_EXTERNAL_POST_REQUEST, c.onPostRequest),
                c.subscriptions.showFinance = T1.channels.finance.subscribe(T1.constants.FINANCE_OPEN, c.openFinance),
                c.subscriptions.postRequestInsurance = T1.channels.finance.subscribe(T1.constants.INSURANCE_EXTERNAL_POST_REQUEST, c.onPostRequest)
            },
            initMobile: function() {
                c.subscriptions.postRequestFinanceMobile = T1.channels.finance.subscribe(T1.constants.FINANCE_EXTERNAL_POST_REQUEST_MOBILE, c.onPostRequest),
                c.subscriptions.postRequestInsuranceMobile = T1.channels.finance.subscribe(T1.constants.INSURANCE_EXTERNAL_POST_REQUEST_MOBILE, c.onPostRequest)
            },
            initBudgetCalculatorCta: function() {
                var a = b(".tfs-budget-calculator");
                c.configureModules(),
                a.off("click", c.openBudgetCalculator).on("click", c.openBudgetCalculator)
            },
            openBudgetCalculator: function(a) {
                a && a.preventDefault && a.preventDefault();
                var d = c.settings.country || "eu"
                  , e = "tfs-budget-calculator"
                  , f = c.settings.finance.urlBudgetCalculator || "//toyota.finance.makolab.com/services/scripts/budget-calculator-toyota-{COUNTRY}.js"
                  , g = c.getConfiguration(c.TYPES.BUDGET);
                f = f.replace("{COUNTRY}", d),
                a && !0 === a.useMaterialbox ? T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                    forceTopBar: !0,
                    title: T1.labels && T1.labels.budgetCalculatorTitle || "Budget calculator",
                    styleClass: "dark",
                    html: '<div id="' + e + '" class="inject" data-url="' + f + '" data-target-id="#' + e + "\" data-configuration='" + JSON.stringify(g) + "'></div>"
                }) : (b("body #" + e).length || b("body").append('<div id="' + e + '"></div>'),
                T1.injection.components.inject({
                    url: f,
                    withPopup: !0,
                    target: "#" + e,
                    configuration: g
                }))
            },
            initInsuranceCalculator: function() {
                var a = b(".btn-insurance-calculator");
                a.length && a.off("click", c.openInsuranceCalculator).on("click", c.openInsuranceCalculator)
            },
            openInsuranceCalculator: function(a) {
                a && a.preventDefault && a.preventDefault();
                var b = "insurance-calc"
                  , d = T1.settings.carconfig.insuranceModuleURL || "//timcalcuat.synectics-solutions.com/scripts/dist/main.js"
                  , e = c.getConfiguration(c.TYPES.INSURANCE);
                T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                    html: '<div id="' + b + '" class="inject section" data-url="' + d + '" data-target-id="#' + b + "\" data-configuration='" + JSON.stringify(e) + "'></div>"
                })
            },
            configureModules: function() {
                var a = window.requirejs || {}
                  , b = T1.settings || {
                    finance: {}
                }
                  , c = a.s && a.s.contexts && a.s.contexts._ && a.s.contexts._.config && a.s.contexts._.config.paths || {}
                  , d = {};
                c.fqs || (d.fqs = b.finance.urlBudgetCalculatorFinanceQuoteService || "//toyota.finance.makolab.com/binaries/scripts/financeQuoteService"),
                c.financeCss || (d.financeCss = b.finance.urlBudgetCalculatorCss || "//toyota.finance.makolab.com/services/scripts/require/css.min"),
                jQuery.isEmptyObject(d) || require.config({
                    paths: d
                })
            },
            getConfiguration: function(a) {
                if (!(T1.settings && T1.settings.country && T1.settings.language && a))
                    return {};
                var b = Object.resolve("T1.data.finance.configs." + c.getConfigType())
                  , d = T1.settings || {
                    finance: {}
                };
                return b || (b = {
                    Language: d.language || "en",
                    Country: d.country || "eu",
                    Brand: "toyota"
                }),
                b.Language = b.Language.toLowerCase(),
                b.Country = b.Country.toLowerCase(),
                b.ElementType = a,
                b
            },
            getConfigType: function() {
                var a = "tfsquickspecs";
                if (T1.settings.mock) {
                    a += "-" + (T1.request.getQueryStringParameter("financeCountry") || "de")
                } else
                    a += "0";
                return a
            },
            initFinanceCompareModuleInjection: function() {
                T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                    elements: b(".grade-explore .finance"),
                    options: {
                        once: !0,
                        callback: c.injectFinanceCompareModule
                    }
                })
            },
            injectFinanceCompareModule: function() {
                var a = "#tfs-finance-compare"
                  , d = c.settings.finance.urlFinanceCompareModule || "//uat-toyota.finance.makolab.com/services/scripts/product-comparison-toyota.js"
                  , e = c.getConfiguration(c.TYPES.FINANCE);
                b(a).length && (c.configureModules(),
                T1.injection.components.inject({
                    url: d,
                    target: a,
                    configuration: e
                }))
            },
            handleConfigPage: function() {
                b(document).on("keydown", function(a) {
                    a.ctrlKey && a.shiftKey && a.which === (T1.settings.finance.configPageKey || 88) && T1.channels.hash.publishAsync(d.HASH_CHANGE, "/publish/finance_config")
                }),
                T1.channels.finance.subscribe(d.FINANCE_CONFIG, function() {
                    T1.channels.dialog.publishAsync(d.MATERIALBOX_OPEN, {
                        url: "/api/script/settings/diagnostics",
                        type: "box-ajax",
                        styleClass: c.ovlClass,
                        size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN
                    });
                    var a = T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function() {
                        c.loadConfig(),
                        a.unsubscribe()
                    })
                })
            },
            loadConfig: function() {
                var a = b(".finance-config")
                  , d = a.find(".finance-data");
                c.applyDataTemplate(d, T1);
                for (var e in c.history) {
                    var f = a.find(".tfs-stack.section.template").clone();
                    c.applyDataTemplate(f, c.history[e]),
                    f.attr("id", "_" + e),
                    d.append(f),
                    d.find(">.template").removeClass("template")
                }
                d.find(".tfs-stack.section >h5").on("click", c.historyPanelClick)
            },
            applyDataTemplate: function(a, d) {
                a.size() && a.find("[data-path]").each(function() {
                    var a = b(this)
                      , e = Object.resolve(a.data("path"), d);
                    a.html(b.isPlainObject(e) ? c.highlightJSON(JSON.stringify(e, null, 3)) : null !== e ? e.toString() : "-")
                })
            },
            highlightJSON: function(a) {
                return a = a.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"),
                a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function(a) {
                    var b = "number";
                    return /^"/.test(a) ? b = /:$/.test(a) ? "key" : "string" : /true|false/.test(a) ? b = "boolean" : /null/.test(a) && (b = "null"),
                    '<span class="' + b + '">' + a + "</span>"
                })
            },
            historyPanelClick: function(a) {
                var c = b(a.currentTarget.parentNode).find(".panel");
                c.is(":animated") || c.slideToggle({
                    duration: 400,
                    complete: function() {
                        b(this).is(":visible") ? c.closest(".tfs-stack").addClass("active") : c.closest(".tfs-stack").removeClass("active")
                    }
                })
            },
            openFinance: function(b) {
                var c = a;
                b.tyCode && "" !== b.tyCode ? c.getFullCarData(b, c.onPostRequest) : T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                    type: "box-iframe",
                    url: T1.settings.finance.urlMyFinanceMiniCC
                })
            },
            getFullCarData: function(a, b) {
                a || (a = {});
                var c = Object.resolve("T1.loadSave");
                a.dataType = a.xml ? "xml/" : "json",
                a.type = a.dataset || "legacy",
                "string" == typeof b && (b = Object.resolve(b)),
                "function" == typeof b && c && c.get(a).always(function(c) {
                    b(c, a)
                })
            },
            onPostRequest: function(a, b) {
                var c = {
                    Country: T1.settings.carconfig ? T1.settings.carconfig.country : T1.settings.country,
                    Brand: T1.settings.carconfig.brand,
                    Language: T1.settings.language
                };
                for (var d in a)
                    "prototype" !== d && (c[d] = a[d]);
                var e = {};
                if (e.target = b.target || (T1.utilities.browser.isSafari ? "_blank" : "_overlayer"),
                e.fields = {
                    configuration: JSON.stringify(c)
                },
                e.preventHashChange = b.preventHashChange || !1,
                b.url)
                    e.action = b.url;
                else
                    switch (b.topic) {
                    case T1.constants.INSURANCE_EXTERNAL_POST_REQUEST:
                        e.action = T1.settings.finance.urlMyInsuranceMiniCC;
                        break;
                    case T1.constants.INSURANCE_EXTERNAL_POST_REQUEST_MOBILE:
                        e.action = T1.settings.finance.urlMyInsuranceMiniCCMobile || T1.settings.finance.urlMyInsuranceMiniCC;
                        break;
                    case T1.constants.FINANCE_EXTERNAL_POST_REQUEST_MOBILE:
                        e.action = T1.settings.finance.urlMyFinanceMiniCCMobile || T1.settings.finance.urlMyFinanceMiniCC;
                        break;
                    default:
                        e.action = T1.settings.finance.urlMyFinanceMiniCC
                    }
                T1.channels.form.publishAsync(T1.constants.FORM_CROSS_DOMAIN_POST, e)
            },
            requestFinanceData: function(a) {
                var d = T1.settings.mock ? "/api" : T1.settings.financeService || T1.settings.loadSaveServer
                  , e = d + "/tfs/car" + (a.multiple ? "s/" : "/") + T1.settings.country
                  , f = JSON.stringify(a.configs)
                  , g = (new Date).getTime()
                  , h = a.cached ? c.searchHistory(a.configs) : null;
                if (h)
                    a.success && a.success(h);
                else if (c.stackHistory(g, a.source, a.configs),
                T1.utilities.ieVersion() < c.IE10VersionNr) {
                    var i = new XDomainRequest;
                    i.onprogress = function() {}
                    ,
                    i.onload = function() {
                        if (i) {
                            var b = JSON.parse(i.responseText);
                            a.success && a.success(b),
                            c.stackHistory(g, a.source, a.configs, b)
                        }
                    }
                    ,
                    i.onerror = function() {
                        console.log("error handling finance information."),
                        c.stackHistory(g, a.source, a.configs, i, !0)
                    }
                    ,
                    i.timeout = 6e4,
                    i.open("POST", e),
                    i.send(f)
                } else {
                    var j = b.ajax({
                        url: e,
                        type: "POST",
                        data: f,
                        contentType: "application/json",
                        crossDomain: !0
                    });
                    j.done(a.success).done(function(b) {
                        c.stackHistory(g, a.source, a.configs, b)
                    }),
                    j.fail(function(b, d, e) {
                        console.log("error handling finance information " + e),
                        c.stackHistory(g, a.source, a.configs, b, !0)
                    })
                }
            },
            stackHistory: function(a, d, e, f, g) {
                c.history[a] = {
                    xdr: T1.utilities.ieVersion() < c.IE10VersionNr,
                    failed: g || !(!f || !f.error) && f.error,
                    source: d || "Unknown",
                    configs: e,
                    response: f,
                    inProgress: !f,
                    start: c.history[a] ? c.history[a].start : new Date,
                    stop: c.history[a] ? new Date : null
                },
                c.history[a].stop && c.applyDataTemplate(b("#_" + a), c.history[a])
            },
            searchHistory: function(a) {
                for (var b = Object.keys(c.history).reverse(), d = 0; d < b.length; d++)
                    if (c.history[b[d]].configs === a && !c.history[b[d]].inProgress && !c.history[b[d]].failed)
                        return c.history[b[d]].response;
                return null
            },
            formatFinanceString: function(a, b, d) {
                return a && b && d ? (a = c.replaceNode(a, "productName", d.name && b.productName && b.productName.formatted ? c.tag({
                    source: b.productName.formatted,
                    className: "finance-product-name"
                }) : null),
                a = c.replaceNode(a, "term", d.term && b.term && b.term.formatted ? c.tag({
                    source: b.term.formatted,
                    className: "finance-trm"
                }) : null),
                a = c.replaceNode(a, "taeg", d.effectiveRate && b.effectiveInterestRate && b.effectiveInterestRate.formatted ? c.tag({
                    source: b.effectiveInterestRate.formatted,
                    className: "finance-taeg"
                }) : null),
                a = c.replaceNode(a, "tan", d.annualRate && b.annualInterestRate && b.annualInterestRate.formatted ? c.tag({
                    source: b.annualInterestRate.formatted,
                    className: "finance-tan"
                }) : null),
                a = c.replaceNode(a, "price", b.monthlyPayment && b.monthlyPayment.formatted ? c.tag({
                    source: b.monthlyPayment.formatted,
                    className: "finance-monthly-price"
                }) : null),
                a = b.quote ? c.formatDisclaimerString(b, a) : c.replaceNode(a, "disclaimer", "")) : ""
            },
            formatInsuranceString: function(a, b) {
                return a && b ? (a = c.replaceNode(a, "price", b.formatted ? c.tag({
                    source: b.formatted,
                    className: "insurance-price"
                }) : null),
                a = c.replaceNode(a, "period", b.label ? c.tag({
                    source: b.label,
                    className: "insurance-period"
                }) : null),
                a = b.quote ? c.formatDisclaimerString(b, a) : c.replaceNode(a, "disclaimer", "")) : ""
            },
            formatDisclaimerString: function(a, d) {
                var e = a && a.productName ? a.productName.formatted : T1.labels.viewDisclaimer
                  , f = c.getDisclaimer(a, !0, e).html();
                d = c.replaceNode(d, "disclaimer-text", f);
                var g = c.extractMask(d, "disclaimer");
                if (g.label) {
                    var h, i, j, k, l = "_" + (new Date).getTime(), m = /^<i((?!<\/i>).)*.<\/i>$/.test(g.label), n = m ? "readMore lonelyIconLink" : "readMore disclaimer-link", o = a && a.productName ? a.productName.formatted : T1.labels.viewDisclaimer;
                    if (g.options.gradesCarouselPopUp) {
                        h = b(c.tag({
                            tag: "div",
                            source: g.label,
                            className: "preventDefault finance-disclaimer action-box-selector"
                        })).attr({
                            "data-action-box-selector": "#" + l
                        }),
                        k = c.getFinanceDisclaimerPopUp(l, c.getDisclaimer(a, !0, o))
                    } else
                        j = b("<div></div>").addClass("disclaimer link-expander"),
                        h = b(c.tag({
                            source: g.label,
                            className: n,
                            tag: g.options.tag || "a"
                        })).attr({
                            "data-tooltip-selector": "#" + l
                        }),
                        k = c.getExpansionContainer(l, c.getDisclaimer(a, !0, o));
                    return h.attr({
                        "data-bt-action": "click_function",
                        "data-bt-value": "view_finance_disclaimer",
                        "data-bt-track": ""
                    }),
                    k.addClass(g.options.expansionClass),
                    i = h[0].outerHTML + k[0].outerHTML,
                    j && (i = j.append(i),
                    i = i[0].outerHTML),
                    d = c.replaceContent(d, "disclaimer", i)
                }
                return d
            },
            replaceContent: function(a, b, c) {
                var d = new RegExp("\\[" + b + "(.*?)](.*?)\\[/" + b + "]","gi");
                return a.replace(d, c)
            },
            replaceNode: function(a, b, d) {
                var e = new RegExp("\\[" + b + "(.*?)](.*?)\\[/" + b + "]","gi");
                return a.replace(e, function(a, b, e, f, g) {
                    return c.replaceValue(e, d)
                })
            },
            replaceValue: function(a, b) {
                return b ? a.replace(/{value}/g, b) : ""
            },
            tag: function(a) {
                return '<{tag} class="{class}">{source}</{tag}>'.replace(/{tag}/g, a.tag || "span").replace(/{source}/g, a.source || "").replace(/{class}/g, a.className || "")
            },
            extractMask: function(a, b) {
                var c = new RegExp("\\[" + b + "(.*?)](.*?)\\[/" + b + "]","gi")
                  , d = c.exec(a);
                return {
                    label: d ? d[2] : null,
                    options: d && d[1] ? JSON.parse(d[1]) : {}
                }
            },
            getExpansionContainer: function(a, c) {
                var d = b('<span id="' + a + '" class="expansion-content tfs"><a class="closelink" href="#">' + T1.labels.close + '<span class="icon icon-remove"></span></a><span class="expansion-arrow"></span><span class="expansion-inner tfs-disclaimer"></span></span>');
                return d.find(".expansion-inner").append(c),
                d
            },
            getFinanceDisclaimerPopUp: function(a, c) {
                var d = b('<div class="hidden"><span id=' + a + "></span></div>");
                return d.find("#" + a).append(c),
                d
            },
            getDisclaimer: function(a, c, d) {
                if (a && a.quote) {
                    var e = b('<span class="finance-disclaimer"/>');
                    if (d && e.append(b("<h4/>").html(d)),
                    c && a.quote.calculations)
                        for (var f = 0; f < a.quote.calculations.length; f++) {
                            var g = b("<span/>").addClass("row").appendTo(e)
                              , h = a.quote.calculations[f];
                            g.append(b("<span/>").addClass("col-xs-6 col-lg-6").html(h.name)),
                            g.append(b("<span/>").addClass("col-xs-6 col-lg-6").html(h.value)),
                            a.quote.calculations[f].format && a.quote.calculations[f].format.b && g.css("font-weight", "bold")
                        }
                    return e.append(b("<p/>").html(a.quote.value)),
                    c || d ? e : a.quote.value
                }
                return null
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initMobile: a.initMobile,
            initDesktop: a.initDesktop,
            requestFinanceData: a.requestFinanceData,
            formatFinanceString: a.formatFinanceString,
            formatInsuranceString: a.formatInsuranceString,
            getDisclaimer: a.getDisclaimer,
            getExpansionContainer: a.getExpansionContainer
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.formCrossDomainPost = function() {
        "use strict";
        var a = {
            subscriptions: {},
            data: null,
            newWindow: null,
            urlPostPage: "/external.scripts/tfs-service.html",
            init: function() {
                T1.channels.form.subscribe(T1.constants.FORM_CROSS_DOMAIN_POST, a.postExternalForm),
                T1.channels.form.subscribe(T1.constants.FORM_CROSS_DOMAIN_PAGE_READY, a.crossDomainWindowReady)
            },
            reset: function() {
                a.data = null,
                a.newWindow = null
            },
            postExternalForm: function(b) {
                var c = a
                  , d = b.target || "_blank";
                c.reset(),
                c.data = b,
                "_overlayer" === d ? (c.subscriptions.openedOverlayer = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, c.sendPageReadyEvent),
                b.preventHashChange ? T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                    type: "box-iframe",
                    url: c.urlPostPage,
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN
                }) : T1.channels.hash.publishAsync(T1.constants.HASH_ADD, "/iframe/" + encodeURIComponent(c.urlPostPage)),
                c.data.target = "_self") : c.submit(b)
            },
            sendPageReadyEvent: function(c) {
                var d = /^(\s)*(https?:)?\/\//i
                  , e = b('.material-box-content iframe[src$="' + a.urlPostPage.replace(d, "") + '"]')
                  , f = a.newWindow || e[0] ? e[0].contentWindow : null;
                a.subscriptions.openedOverlayer.unsubscribe(),
                f ? f.T1.channels.form.publishAsync(T1.constants.FORM_CROSS_DOMAIN_PAGE_READY, a.data) : (console.log(T1.labels.whitelistError || "Failed to load url, please check whitelist."),
                T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                    customContainer: b(".overlayerContent .white"),
                    customText: T1.labels.whitelistError || "Failed to load url, please check whitelist.",
                    timeout: 3e3
                }),
                setTimeout(function() {
                    T1.channels.hash.publish(T1.constants.HASH_REMOVE, "")
                }, 3e3))
            },
            createFormElement: function(a) {
                var c = a.fields
                  , d = a.id || "crossDomainForm"
                  , e = b("#" + d);
                0 === e.length ? (e = b("<form/>").css({
                    display: "none"
                }),
                b("body").append(e)) : e.find("input").remove(),
                e.attr({
                    id: d,
                    name: a.name || "",
                    method: a.method || "post",
                    action: a.action || "",
                    target: a.target || "_blank"
                });
                var f;
                for (var g in c)
                    "prototype" !== g && (f = b("<input/>").attr({
                        type: "hidden",
                        name: g
                    }).val(c[g]),
                    e.append(f));
                return e
            },
            crossDomainWindowReady: function(b) {
                a.submit(b)
            },
            submit: function(b) {
                a.createFormElement(b).submit()
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.figure = function() {
        "use strict";
        var a = {
            isDocumentLoad: !1,
            mode: "mobile",
            init: function() {
                var b = a;
                b.isDocumentLoad = !0,
                b.processFigures(),
                T1.channels.figure.subscribe(T1.constants.FIGURE_LOAD, b.processFigures),
                b.isDocumentLoad = !1
            },
            initOnDemand: function(b) {
                b.filter("[data-type]").each(a.replaceTag),
                T1.channels.eprivacy.publish(T1.constants.EPRIVACY_LOAD_COMPONENT, {
                    defer: !1
                })
            },
            processFigures: function(c) {
                var d;
                c && c.length > 0 || (c = b("body")),
                d = c.find("figure[data-type]"),
                d.each(a.replaceTag),
                T1.channels.eprivacy.publish(T1.constants.EPRIVACY_LOAD_COMPONENT, {
                    defer: !1
                })
            },
            replaceTag: function() {
                var c = a
                  , d = b(this)
                  , e = d.data()
                  , f = e.type.toLowerCase();
                if (!d.data("preventdefaultload") || !c.isDocumentLoad)
                    switch (f) {
                    case "ajax-video":
                        var g = {
                            figure: d
                        };
                        b.getJSON(e.url, function(a) {
                            b.each(a.sources, function(a, b) {
                                var c = b.binary.url;
                                g["src" + b.ext.capitalize()] = c
                            }),
                            g.poster = a.hasOwnProperty("poster") ? a.poster.binary.url : "",
                            g.srcVtt = a.hasOwnProperty("vttLink") ? a.vttLink : "",
                            g.autoplay = a.autoplay,
                            g.autoloop = void 0 !== a.autoloop ? a.autoloop : T1.settings.autoLoop || !1,
                            T1.channels.media.publish(T1.constants.VIDEO_CREATEPLAYER, g)
                        });
                        break;
                    case "eprivacy":
                        T1.channels.eprivacy.publish(T1.constants.EPRIVACY_LOAD_COMPONENT, {
                            figures: d,
                            defer: !0
                        });
                        break;
                    default:
                        var h = e.src || ""
                          , i = h.indexOf("youtube") > -1;
                        if (!i || !e.eprivacy || T1.ePrivacy.validateLevel(e.eprivacy)) {
                            var j = a.initIframe(f, d, e, i);
                            i && e.eprivacy && T1.ePrivacy.validateLevel(e.eprivacy) && T1.ePrivacy.registerComponent(j, d, e.eprivacy)
                        }
                    }
            },
            getMode: function() {
                (window.innerWidth || b(window).innerWidth()) > T1.constants.SCREEN_SMALL ? a.mode = "desktop" : a.mode = "mobile"
            },
            initIframe: function(c, d, e, f) {
                var g = b("<iframe allowfullscreen>")
                  , h = null
                  , i = ""
                  , j = !1;
                return d.attr("data-copy-querystring") && (h = T1.request.getQueryStringParameters(),
                b.isEmptyObject(h) || (i = "?" + b.param(h))),
                a.getMode(),
                b.each(e, function(b, c) {
                    "string" == typeof c && -1 !== c.indexOf("?") && (i = i.replace(/\?/, "&")),
                    -1 !== b.indexOf("lazyload") && (d.closest(".overlayerWrapper").length < 1 ? (b = "data-lazyload-" + b.replace("lazyload", ""),
                    "string" == typeof c && -1 !== c.indexOf("?") && (i = i.replace(/\?/, "&")),
                    c += i,
                    j = !0) : ("desktop" === a.mode && "lazyloadDesktop" === b || "mobile" === a.mode && "lazyloadMobile" === b) && (c += i,
                    b = "src")),
                    ("src" === b && "true" === d.attr("data-copy-querystring") || "srcDesktop" === b && "desktop" === a.mode || "srcMobile" === b && "mobile" === a.mode) && (c += i,
                    b = "src"),
                    g.attr(b, c)
                }),
                j && T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                    elements: g,
                    options: {
                        once: !0
                    }
                }),
                f && a.handleYoutubeFrame(g, e),
                d.replaceWith(g),
                g.parents(".overlayerWrapper").length || g.on("load", function() {
                    this.contentWindow.postMessage({
                        htmlClass: "t1-inpage"
                    }, "*")
                }),
                "responsive-iframe" === c && (g.addClass("iframe-responsive"),
                T1.channels.figure.publishAsync(T1.constants.IFRAME_LOAD, g)),
                g
            },
            handleYoutubeFrame: function(a, c) {
                var d = "true" === T1.settings.videoPlayer.autoPlay && c.autoplay
                  , e = "true" === T1.settings.videoPlayer.autoPause && c.autopause
                  , f = "true" === T1.settings.videoPlayer.autoMute && c.automute;
                if (a.attr("src", T1.utilities.youtube.getEmbedUrl(c.src, {
                    autoplay: "0",
                    controls: c.controls ? "1" : "0",
                    enablejsapi: d || e || f ? "1" : "0"
                })),
                a.one("load", function() {}),
                d || e || f) {
                    var g = function() {
                        T1.channels.scrolling.publishAsync(T1.constants.SCROLL_TRACK_ADD, {
                            elements: a,
                            options: {
                                threshold: -b("#navigation").height(),
                                reactWhenLeavingView: !0,
                                callback: function(b, c) {
                                    f && (T1.utilities.youtube.frame.mute(a[0], !0),
                                    a.one("mouseenter", function() {
                                        T1.utilities.youtube.frame.mute(a[0], !1)
                                    })),
                                    d && c.visible ? T1.utilities.youtube.frame.play(a[0]) : e && !c.visible && T1.utilities.youtube.frame.pause(a[0])
                                }
                            }
                        })
                    };
                    jQuery.contains(document, a) ? g() : a.one("load", g)
                }
            }
        };
        return {
            init: a.init,
            initOnDemand: a.initOnDemand
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.activeCtas = function() {
        "use strict";
        var a = {
            $body: null,
            visitedCarchapterPagesKey: "com.toyota.tme.t1.personalization.activeCtas",
            currentModel: "",
            init: function() {
                T1.channels.dialog.subscribe(b.ACTIVECTA_MODEL_DISABLE, a.disableModel);
                var c = a.storage(null, sessionStorage);
                a.$body = $("body"),
                a.currentModel = a.getCurrentModel();
                var d = a.storage(null, localStorage);
                if (d || (a.cleanupPreviousLsKeys(),
                d = {}),
                !c) {
                    if (c = {},
                    d.lastCarchapter) {
                        var e = d.disabledModels && d.disabledModels[d.lastCarchapter];
                        d.lastCarchapter !== d.previousSessionChapter || e || (d.showPopup = d.lastCarchapter),
                        d.previousSessionChapter = d.lastCarchapter,
                        delete d.lastCarchapter
                    }
                    a.storage(c, sessionStorage),
                    a.storage(d, localStorage)
                }
                a.currentModel && (d.lastCarchapter = a.currentModel,
                delete d.showPopup,
                a.storage(d, localStorage),
                T1.channels.media.subscribe(b.CTA_EVENT, a.handleCtaEvent))
            },
            cleanupPreviousLsKeys: function() {
                localStorage.visitedCarchapterPages && localStorage.removeItem("visitedCarchapterPages"),
                localStorage.modelToShowInPopupCTA && localStorage.removeItem("modelToShowInPopupCTA"),
                localStorage.ctaPopupDisabled && localStorage.removeItem("ctaPopupDisabled")
            },
            getCurrentModel: function() {
                return T1.ctx && T1.ctx.model && a.$body.is(".carchapter, .explore") ? T1.ctx.model : null
            },
            storage: function(b, c) {
                return c || (c = localStorage),
                b ? (c[a.visitedCarchapterPagesKey] = (Object.resolve("T1.utilities.json.stringify") || JSON.stringify)(b),
                b) : (Object.resolve("T1.utilities.json.parse") || JSON.parse)(c[a.visitedCarchapterPagesKey])
            },
            handleCtaEvent: function(b) {
                "ctaevent" === b.eventClass && a.disableModel(a.currentModel)
            },
            disableModel: function(b) {
                var c = b.model || b
                  , d = b.thisSessionOnly || !1
                  , e = a.storage(null, localStorage)
                  , f = a.storage(null, sessionStorage);
                e.showPopup && delete e.showPopup,
                d || (e.disabledModels || (e.disabledModels = {}),
                e.disabledModels[c] = !0,
                a.storage(e, localStorage)),
                f.ctaPopupDisabled = !0,
                a.storage(f, sessionStorage)
            },
            modelToShow: function() {
                var b = a.storage(null, sessionStorage) || {}
                  , c = a.storage(null, localStorage) || {};
                return b.ctaPopupDisabled ? null : c.showPopup
            }
        }
          , b = T1.constants;
        return {
            init: a.init,
            modelToShow: a.modelToShow
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies", "t1-api-gradedata"], function(a, b) {
    var c = a._ || c;
    T1.personalization = function() {
        "use strict";
        var d = {
            version: 1,
            storeCache: null,
            lsKeyPersonalization: T1.constants.NAMESPACE_BASE + ".t1.personalization",
            lsKeySSO: T1.constants.NAMESPACE_BASE + ".user.customerProfile",
            lsKeyMyToyota: "mytoyota",
            lsKeyPurchasedCars: T1.constants.NAMESPACE_BASE + ".user.purchasedCars",
            lsUserDataKey: T1.constants.NAMESPACE_BASE + ".user.marketing",
            lsUserProfile: T1.constants.NAMESPACE_BASE + ".user.customerProfile",
            lsUserToken: T1.constants.NAMESPACE_BASE + ".user.token",
            urlBase: "/api/personalize",
            urlTrack: null,
            homePageFocusType: "main-focus",
            popupType: "popup",
            classInjectedContainers: "personalization-injected",
            dataLoadedKeys: {},
            activeCtaModel: null,
            init: function() {
                if (d.forms.initForms(),
                d.grades.initGradePersonalization(),
                T1.settings.enablePersonalization) {
                    if (d.listen(),
                    d.activeCtaModel = T1 && T1.activeCtas && T1.activeCtas.modelToShow(),
                    !d.sessionStore()) {
                        var a = d.getTrackingData();
                        d.hasChildren(a.tracking) && a.tracking && (a.tracking.visits || (a.tracking.visits = 0),
                        a.tracking.visits++,
                        d.store(a.tracking)),
                        d.sessionStore(a)
                    }
                    localStorage[d.lsUserToken] || d.render($(".personalized"))
                }
            },
            listen: function() {
                var a = "true" === (Object.resolve("settings.ssoUseMicroService", T1) || "").toLowerCase();
                T1.channels.mytoyota.subscribe(a ? T1.constants.MY_TOYOTA_DATA_LOADED : T1.constants.MY_TOYOTA_LOGIN_SUCCESS, d.login),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_SIGNOUT, d.logout),
                d.detectPageType()
            },
            detectPageType: function() {
                var a = $("body")
                  , b = {};
                T1.ctx && T1.ctx.model && a.is(".carchapter, .explore") ? (b.visitedCarchapters = {},
                b.visitedCarchapters[T1.ctx.model.toLowerCase()] = (new Date).getTime(),
                d.store(b),
                d.store({
                    lastCarchapter: {
                        modelid: T1.ctx.model.toLowerCase()
                    }
                })) : T1.ctx && T1.ctx.model && $("#promotions-detail").length > 0 && (b.visitedPromotions = {},
                b.visitedPromotions[T1.ctx.model.toLowerCase()] = (new Date).getTime(),
                d.store(b),
                d.store({
                    lastPromotion: {
                        modelid: T1.ctx.model.toLowerCase()
                    }
                }))
            },
            render: function(a, b, c) {
                if (0 !== a.length) {
                    for (var e = {}, f = {}, g = [], h = !1, i = 0; i < a.length; i++) {
                        var j = a.eq(i)
                          , k = j.data("type")
                          , l = parseInt(j.data("eprivacy"), 10);
                        !k || l && !$.safe("T1.ePrivacy.validateLevel", !1)(l) || (k === d.homePageFocusType ? h = !0 : k === d.popupType ? d.activeCtaModel && g.push(k) : g.push(k),
                        f[k] = j)
                    }
                    h ? (e = d.sessionStore(),
                    e.types = [d.homePageFocusType],
                    d.getHTMLfragments("personalizationPrevSession", e, f, b)) : d.dataLoaded("personalizationPrevSession"),
                    0 !== g.length ? (e = d.getTrackingData(c || {}),
                    e.types = g,
                    d.getHTMLfragments("personalizationCurrentSession", e, f, b)) : d.dataLoaded("personalizationCurrentSession")
                }
            },
            getHTMLfragments: function(a, b, c, e) {
                b.tracking && d.hasChildren(b.tracking) || b.user && b.user.car ? $.ajax({
                    method: "post",
                    url: d.urlBase,
                    contentType: "application/json",
                    data: JSON.stringify(b)
                }).done(d.dataLoaded.bind(d, a, c, e)) : "personalizationCurrentSession" === a && c["welcome-back"] && $("#welcomeback-mobile").removeClass("visible-xs").addClass("hidden-xs")
            },
            dataLoaded: function(a, b, c, e) {
                e && d.processHTMLFragments(b, c, e),
                d.dataLoadedKeys[a] = e || {},
                d.dataLoadedKeys.personalizationPrevSession && d.dataLoadedKeys.personalizationCurrentSession && (T1.utilities.poll.variables("ga", d.track.bind(this, "render", d.dataLoadedKeys), {
                    maxTime: 5e3
                }),
                d.dataLoadedKeys = {})
            },
            track: function(a, b) {
                if ("render" === a) {
                    if (!b)
                        return;
                    var c = {}
                      , d = b.personalizationPrevSession
                      , e = b.personalizationCurrentSession;
                    c.flag = !0,
                    c.components = [],
                    e && e.promotions && e.promotions.sortBy && c.components.push({
                        name: "promotions"
                    }),
                    e && e["welcome-back"] && e["welcome-back"].html && c.components.push({
                        name: "welcomeback"
                    }),
                    e && e.accessories && e.accessories.html && c.components.push({
                        name: "accessories"
                    }),
                    e && e.popup && e.popup.html && c.components.push({
                        name: "active_cta"
                    }),
                    d && d["main-focus"] && d["main-focus"].html && c.components.push({
                        name: "mainfocus"
                    }),
                    c.components.length > 0 && T1.channels.statistics.publish(T1.constants.STATS_TRACK, {
                        extraData: {
                            personalization: c,
                            event: {
                                eventclass: "persevent"
                            }
                        }
                    })
                }
            },
            processHTMLFragments: function(a, b, c) {
                T1.settings.mock && (c = JSON.parse(c));
                var e = "";
                for (var f in c)
                    "prototype" !== f && a[f] && (e = "render" + f.toCamelCase("upper"),
                    d[e] && d[e]({
                        container: a[f],
                        data: c[f],
                        rerender: !!b
                    }))
            },
            renderMainFocus: function(a) {
                if (a.data && a.data.html) {
                    var b = $("<div></div>").html(a.data.html)
                      , c = b.children()
                      , e = c.eq(0)
                      , f = c.eq(1)
                      , g = a.container || $("#mainfocus .carousel-container")
                      , h = d.visits() <= 1;
                    c.addClass(d.classInjectedContainers),
                    "xs" === T1.breakpoints.currentBP() && T1.channels.scrolling.publish(T1.constants.FOCUSIMAGE_MOBILE_LOAD, e.find(".background")),
                    T1.channels.statistics.publish(T1.constants.STATS_SUFFIX_CONTAINER, {
                        node: e,
                        attr: "data-bt-action",
                        suffix: "_pers"
                    }),
                    a.rerender && T1.channels.media.publish(T1.constants.CAROUSEL_INJECTED_RESET, {
                        targetNode: g
                    }),
                    T1.channels.media.publish(T1.constants.CAROUSEL_SLIDE_ADD, {
                        html: e,
                        method: h ? "prepend" : "append",
                        targetNode: g,
                        showInjected: h
                    });
                    var i = $('<div class="personalized visible-xs injected-slide"></div>').append(f);
                    g.append(i)
                }
            },
            renderAccessories: function(a) {
                a.rerender && a.container.find("." + d.classInjectedContainers).remove(),
                a.data && a.data.html && a.container.append(a.data.html);
                var b = a.container.find(".accessories");
                T1.channels.carchapter.publish(f.ACCESSORIES_DESKTOP_REINIT, b),
                T1.channels.media.publishAsync(f.CAROUSEL_CREATERESPONSIVE, {
                    container: b.find(".responsive-carousel")
                }),
                a.container.children().addClass(d.classInjectedContainers);
                var c = $('<div class="' + d.classInjectedContainers + '"></div>').html(a.data.html)
                  , e = $("#accessories-mobile");
                e.addClass("visible-xs").append(c.find(".mobile").children()),
                T1.channels.global.publish(T1.constants.COLLAPSIBLE_PANEL_INIT, e.closest(".collapsible-group"))
            },
            renderPromotions: function(a) {
                if (a.container && (a.rerender && a.container.find("." + d.classInjectedContainers).remove(),
                a.data && a.data.sortBy && (T1.channels.statistics.publish(T1.constants.STATS_SUFFIX_CONTAINER, {
                    node: a.container,
                    attr: "data-bt-action",
                    suffix: "_pers"
                }),
                T1.channels.global.publish(T1.constants.SORT_PROMOTIONS, {
                    model: a.data.sortBy,
                    container: a.container
                })),
                a.data && a.data.html)) {
                    var b = a.container.find(".section-title");
                    b.append(a.data.html),
                    b.find("h2").addClass(d.classInjectedContainers)
                }
            },
            renderPopup: function(a) {
                if (a.data && a.data.html && d.activeCtaModel) {
                    a.container.addClass("personalized-popup-container"),
                    a.container.append(a.data.html),
                    T1.channels.dialog.publish(T1.constants.ACTIVECTA_MODEL_DISABLE, {
                        thisSessionOnly: !0,
                        model: d.activeCtaModel
                    });
                    var b = $("#personalization-ctas-popup");
                    $(".closelink", b).one("click", function() {
                        $(".disable-popup").find("input").is(":checked") && T1.channels.dialog.publish(T1.constants.ACTIVECTA_MODEL_DISABLE, {
                            model: d.activeCtaModel
                        }),
                        a.container.removeClass("personalized-popup-container"),
                        b.fadeOut()
                    })
                } else
                    T1.channels.dialog.publish(T1.constants.ACTIVECTA_MODEL_DISABLE, {
                        thisSessionOnly: !0,
                        model: d.activeCtaModel
                    })
            },
            renderWelcomeBack: function(a) {
                if (a.container && a.data && a.data.html) {
                    a.rerender && a.container.find("." + d.classInjectedContainers).remove();
                    var b = $("<div></div>").html(a.data.html)
                      , c = $("#welcomeback-mobile");
                    a.rerender && c.empty(),
                    c.addClass("visible-xs").append(b.find(".mobile").children()),
                    c.find('[href^="#/publish/carconfig_load"]').closest("li").addClass("hidden-xs");
                    0 === c.find("li:not(.hidden-xs)").length ? c.removeClass("visible-xs").addClass("hidden-xs") : c.removeClass("hidden-xs").addClass("visible-xs"),
                    T1.channels.global.publish(T1.constants.COLLAPSIBLE_PANEL_INIT, c.closest(".collapsible-group")),
                    T1.utilities.injection.append({
                        target: a.container,
                        html: b.find(".desktop").addClass("hidden-xs " + d.classInjectedContainers),
                        forceLazyLoad: !0
                    }),
                    T1.channels.statistics.publish(T1.constants.STATS_SUFFIX_CONTAINER, {
                        node: a.container,
                        attr: "data-bt-action",
                        suffix: "_pers"
                    }),
                    a.container.css({
                        display: "block"
                    })
                }
            },
            visits: function() {
                return d.store().visits || 0
            },
            login: function(a) {
                var b = d.sessionStore()
                  , c = Object.resolve("user.data", a) || {};
                if (c.mytoyota) {
                    var e = d.getTrackingData({
                        myToyotaServer: c.mytoyota,
                        purchasedCars: a.purchasedCars
                    });
                    d.sessionStore(d.updateKeys(e, b, ["user", "tracking.lastSavedDealer", "tracking.lastSavedConfig"]))
                }
                d.render($(".personalized"), !0),
                d.forms.login(a)
            },
            logout: function(a) {
                var b = d.sessionStore();
                d.sessionStore(d.deleteKeys(b, ["user", "tracking.lastSavedDealer", "tracking.lastSavedConfig"])),
                d.render($(".personalized"), !0, {
                    ssoData: {},
                    purchasedCars: {}
                }),
                d.forms.logout(a)
            },
            store: function(a) {
                return a ? d.storeSet(a) : d.storeGet()
            },
            storeGet: function(b) {
                return d.storeCache || (d.storeCache = d.parse(localStorage[d.lsKeyPersonalization], void 0 === b ? {} : b)),
                (!d.storeCache.version || d.storeCache.version < d.version) && (d.storeCache = {
                    version: d.version
                }),
                a._.cloneDeep(d.storeCache)
            },
            storeSet: function(b) {
                return d.storeCache || (d.storeCache = d.storeGet()),
                d.storeCache = a._.merge(d.storeCache, b),
                localStorage[d.lsKeyPersonalization] = JSON.stringify(d.storeCache),
                a._.cloneDeep(d.storeCache)
            },
            parse: function(a, b) {
                if (!a || "" === a)
                    return b || null;
                try {
                    return JSON.parse(a)
                } catch (e) {
                    return console.log("Failed to parse the personalization cache " + e),
                    b || null
                }
            },
            tracking: {
                GET_ALL: void 0,
                getSortedPersonalizationCarData: function(a, b, c) {
                    try {
                        var e = [];
                        return e.push(d.tracking.getLastSavedConfigurations(d.tracking.GET_ALL, c)),
                        e.push(d.tracking.getLastViewedConfigurations(d.tracking.GET_ALL, c)),
                        e.push(d.tracking.getLastViewedPromotions(d.tracking.GET_ALL, c)),
                        e.push(d.tracking.getLastViewedCars(d.tracking.GET_ALL, c)),
                        d.tracking.addSortedCarsToList(e, a, b)
                    } catch (error) {
                        return console.log("An error occurred in tracking.getSortedPersonalizationCarData: " + error),
                        null
                    }
                },
                addSortedCarsToList: function(a, b, c) {
                    if (!a)
                        return !1;
                    var d = 0
                      , e = {};
                    return c && (c = c.toUpperCase()),
                    a.forEach(function(a) {
                        if (a)
                            for (var f = 0; f < a.length && (b && b > 0 || void 0 === b); f++) {
                                var g = a[f]
                                  , h = !1;
                                g.ids && g.ids.model && g.ids.model.toUpperCase() !== c ? e[g.ids.model.toUpperCase()] ? e[g.ids.model.toUpperCase()].object.car || (e[g.ids.model.toUpperCase()].object = g) : (e[g.ids.model.toUpperCase()] = {
                                    position: d++,
                                    object: g
                                },
                                h = !0) : g.value && !e[g.value.toUpperCase()] && g.value.toUpperCase() !== c && (e[g.value.toUpperCase()] = {
                                    position: d++,
                                    object: g
                                },
                                h = !0),
                                h && void 0 !== b && b--
                            }
                    }),
                    e
                },
                getPersonalizationData: function(a) {
                    a || (a = {});
                    var b = d.tracking.getCustomerDetails(a)
                      , c = d.tracking.getLastViewedDealer(a)
                      , e = (d.tracking.getLastViewedCars(1, a),
                    d.tracking.getLastSavedDealer(a))
                      , f = (d.tracking.getLastSavedConfigurations(1, a),
                    d.tracking.getLastPurchasedCars(1, a),
                    {});
                    b && (f.user = {
                        firstName: b.customerProfile,
                        nameName: b.lastName,
                        email: b.email
                    }),
                    c && (f.lastDealer = {
                        uuid: c.uuid
                    }),
                    e && (f.lastSavedDealer = {
                        uuid: e.uuid
                    })
                },
                getLastViewedPromotions: function(a, b) {
                    return b || (b = {}),
                    b.trackingData = b.trackingData || d.store(),
                    b.trackingData && b.trackingData.visitedPromotions ? d.tracking.getLatestElements(b.trackingData.visitedPromotions, a) : []
                },
                getLastViewedCars: function(a, b) {
                    return b || (b = {}),
                    b.trackingData = b.trackingData || d.store(),
                    b.trackingData && b.trackingData.visitedCarchapters ? d.tracking.getLatestElements(b.trackingData.visitedCarchapters, a) : []
                },
                getLastViewedConfigurations: function(a, b) {
                    return b || (b = {}),
                    b.myToyotaLocal = b.myToyotaLocal || d.parse(localStorage[d.lsKeyMyToyota], null),
                    b.myToyotaLocal && b.myToyotaLocal.cars ? d.tracking.getLatestElements(b.myToyotaLocal.cars, a) : []
                },
                getLastSavedConfigurations: function(a, b) {
                    b || (b = {});
                    var c = Object.resolve && Object.resolve("T1.mypage.user.data.mytoyota.cars");
                    return c ? d.tracking.getLatestElements(c, a) : []
                },
                getLastViewedDealer: function(a) {
                    return a || (a = {}),
                    a.myToyotaLocal = a.myToyotaLocal || d.parse(localStorage[d.lsKeyMyToyota], null),
                    a.myToyotaLocal && a.myToyotaLocal.dealers && a.myToyotaLocal.dealers.length ? a.myToyotaLocal.dealers[a.myToyotaLocal.dealers.length - 1] : null
                },
                getLastSavedDealer: function(a) {
                    a || (a = {});
                    var b = Object.resolve && Object.resolve("T1.mypage.user.data.mytoyota.dealers") || [];
                    return b.length ? b[b.length - 1] : null
                },
                getLastPurchasedCars: function(a, b) {
                    return b || (b = {}),
                    b.purchasedCars = b.purchasedCars || d.parse(localStorage[d.lsKeyPurchasedCars], null),
                    d.tracking.getLatestElements(b.purchasedCars, a)
                },
                getLatestElements: function(a, b) {
                    var c = [];
                    return 0 !== b && a ? "object" == typeof a ? (c = d.tracking.sort(a),
                    c.slice(0, b)) : "string" == typeof a ? [a] : void 0 : c
                },
                getCustomerDetails: function(a) {
                    return a || (a = {}),
                    a.customerProfile = a.customerProfile || d.parse(localStorage[d.lsKeySSO], null),
                    a.customerProfile
                },
                sort: function(a) {
                    var b = [];
                    if ("object" == typeof a)
                        if (a instanceof Array)
                            b = a;
                        else
                            for (var c in a)
                                b.push({
                                    storeDateEpoch: a[c],
                                    value: c
                                });
                    return b.sort(function(a, b) {
                        return (a.storeDateEpoch || 0) > (b.storeDateEpoch || 0) ? -1 : 1
                    })
                }
            },
            getTrackingData: function(a) {
                a || (a = {});
                var b = {}
                  , c = d.store()
                  , e = {}
                  , f = a.ssoData || d.parse(localStorage[d.lsKeySSO], null)
                  , g = a.myToyotaLocal || d.parse(localStorage[d.lsKeyMyToyota], null)
                  , h = a.myToyotaServer || T1.mypage && T1.mypage.user && T1.mypage.user.data && T1.mypage.user.data.mytoyota ? T1.mypage.user.data.mytoyota : null
                  , i = a.purchasedCars || d.parse(localStorage[d.lsKeyPurchasedCars], null) || [];
                if (f) {
                    if (f.firstName && (e.firstName = f.firstName),
                    f.lastName && (e.nameName = f.lastName),
                    f.email && (e.email = f.email),
                    i && i.length) {
                        var j = i[i.length - 1];
                        e.car = {
                            registrationDate: j.firstRegistrationDate,
                            model: j.modelCode
                        }
                    }
                    b.user = e
                }
                var k = g ? g.dealers : null
                  , l = h ? h.dealers : null;
                k && k.length > 0 && (c.lastDealer = {
                    uuid: k[k.length - 1].uuid
                }),
                l && l.length > 0 && (c.lastSavedDealer = {
                    uuid: l[l.length - 1].uuid
                });
                var m = g ? g.cars : null
                  , n = h ? h.cars : null;
                return m && m.length > 0 && (c.lastConfig = {
                    modelid: m[m.length - 1].ids.model.toLowerCase(),
                    code: m[m.length - 1].code,
                    car: m[m.length - 1].ids.car,
                    color: m[m.length - 1].ids.colour
                }),
                n && n.length > 0 && (c.lastSavedConfig = {
                    modelid: n[n.length - 1].ids.model.toLowerCase(),
                    code: n[n.length - 1].code,
                    car: n[n.length - 1].ids.car,
                    color: n[n.length - 1].ids.colour
                }),
                d.activeCtaModel && (c.modelToShowInPopupCTA = d.activeCtaModel),
                b.tracking = c,
                b
            },
            hasChildren: function(a) {
                for (var b in a)
                    if ("prototype" !== b)
                        return !0;
                return !1
            },
            sessionStore: function(a) {
                var b = a ? "set" : "get";
                try {
                    if ("set" !== b)
                        return a = sessionStorage.getItem(d.lsKeyPersonalization),
                        a ? JSON.parse(a) : null;
                    sessionStorage.setItem(d.lsKeyPersonalization, JSON.stringify(a))
                } catch (e) {
                    console.log("Failed to " + b + " tracking-data from sessionStorage\n" + e)
                }
            },
            updateKeys: function(a, b, c) {
                for (var e = 0; e < c.length; e++)
                    d.mergeKey(a, b, c[e]);
                return b
            },
            mergeKey: function(a, b, c) {
                var e = d.key("resolve", a, c, null);
                e && d.key("update", b, c, e)
            },
            deleteKeys: function(a, b) {
                for (var c = 0; c < b.length; c++)
                    d.key("remove", a, b[c]);
                return a
            },
            key: function(a, b, c, d) {
                for (var e = "resolve" === a, f = "update" === a, g = "remove" === a, h = !1, i = c.split("."), j = b, k = 0; k < i.length && (h = k === i.length - 1,
                f && !j[i[k]] && (j[i[k]] = {}),
                f && h && (j[i[k]] = d),
                g && h && delete j[i[k]],
                j = j[i[k]],
                !e || j); k++)
                    ;
                return void 0 !== j ? j : d
            },
            forms: {
                lsKeyAutocomplete: "com.toyota.tme.t1.autocomplete",
                isFormPersonalizationAllowed: !1,
                autoCompleteData: {},
                autocompleteCity: T1.settings.autocompleteCity && T1.settings.autocompleteCity.length > 0 ? T1.settings.autocompleteCity : "address-level2",
                useSessionStorage: !("true" === T1.settings.enableFormPersonalizationLocalStorage),
                initForms: function() {
                    var a = T1.constants;
                    T1.channels.eprivacy.subscribe(T1.constants.EPRIVACY_SAVED, d.forms.updateFlagIsFormPersonalizationAllowed),
                    d.forms.updateFlagIsFormPersonalizationAllowed(),
                    T1.channels.form.subscribe(a.BEFORE_FORM_SUBMIT, d.forms.saveFields),
                    T1.channels.dialog.subscribe(a.PAGEOVERLAYER_LOAD, function(a) {
                        d.forms.autoFillForms(a.el)
                    }),
                    d.forms.autoCompleteData = d.forms.getAutoCompleteData(),
                    localStorage[d.lsUserToken] || d.forms.autoFillForms()
                },
                autoFillForms: function(a) {
                    a || (a = $("body")),
                    a.find("form").each(d.forms.setFields)
                },
                updateFlagIsFormPersonalizationAllowed: function() {
                    var a;
                    if ("true" === T1.settings.enableFormPersonalization)
                        if ("true" === T1.settings.enableEprivacy && T1.settings.eprivacy) {
                            var b = T1.settings.eprivacy.featureLevel;
                            a = !(!b || !b["form-personalization"] || "number" != typeof b["form-personalization"].value) && T1.ePrivacy.validateLevel(b["form-personalization"].value)
                        } else
                            a = !0;
                    else
                        a = !1;
                    d.forms.isFormPersonalizationAllowed = a
                },
                saveFields: function(b) {
                    if (d.forms.isFormPersonalizationAllowed) {
                        var c = d.forms.getAutoCompleteData(b.form);
                        d.forms.autoCompleteData = a._.merge(d.forms.autoCompleteData, c),
                        window[d.forms.useSessionStorage ? "sessionStorage" : "localStorage"].setItem(d.forms.lsKeyAutocomplete, T1.utilities.json.stringify(c, {
                            default: ""
                        }))
                    }
                },
                setFields: function(a, b) {
                    if (d.forms.isFormPersonalizationAllowed) {
                        var c = $(b)
                          , e = null
                          , f = null
                          , g = d.forms.autoCompleteData;
                        c.find("input").each(function(a, b) {
                            if (e = $(b),
                            "boolean" == typeof (f = e.attr("autocomplete")) && f || "string" == typeof f && "off" !== f.toLowerCase()) {
                                var c = g[f];
                                c && (e.change ? e.val(c).change() : e.val(c))
                            }
                        }),
                        c.trigger(T1.constants.FORM_VALIDATE_CACHED_VALUES)
                    }
                },
                getAutoCompleteData: function(a) {
                    if (a) {
                        var b = $(a)
                          , c = null
                          , e = null
                          , f = {};
                        return b.find("input").each(function(a, b) {
                            c = $(b),
                            (e = c.attr("autocomplete")) && "string" == typeof e && (f[e] = c.val())
                        }),
                        f
                    }
                    return T1.utilities.json.parse(window[d.forms.useSessionStorage ? "sessionStorage" : "localStorage"].getItem(d.forms.lsKeyAutocomplete) || "{}")
                },
                login: function() {
                    var b, c = T1.utilities.json.parse(localStorage.getItem(d.lsUserProfile)), e = {};
                    if (c) {
                        if (c.firstName && (e["given-name"] = c.firstName),
                        c.lastName && (e["family-name"] = c.lastName),
                        c.title && (e["honorific-prefix"] = c.title),
                        c.countryCode && (e.country = c.countryCode),
                        c.email && (e.email = c.email),
                        c.commPref) {
                            if ($.isArray(c.commPref.emails) && c.commPref.emails.length > 0) {
                                var f = c.commPref.emails;
                                for (b = 0; b < f.length; b++) {
                                    var g = f[b];
                                    g && g.email && (0 === b || g.preferred) && (e.email = g.email)
                                }
                            }
                            if ($.isArray(c.commPref.phones) && c.commPref.phones.length > 0) {
                                var h = c.commPref.phones;
                                for (b = 0; b < h.length; b++) {
                                    var i = h[b];
                                    i && i.phone && (0 === b || i.preferred) && (e.tel = i.phone)
                                }
                            }
                        }
                        if ($.isArray(c.addresses) && c.addresses.length > 0) {
                            var j = c.addresses
                              , k = {};
                            for (b = 0; b < j.length; b++) {
                                var l = j[b];
                                l && (0 === b || l.favourite) && (k = {},
                                l.addressLine1 && (k["street-address"] = l.addressLine1),
                                l.country && (k["country-name"] = l.country),
                                l.city && (k[d.forms.autocompleteCity] = l.city),
                                l.postcode && (k["postal-code"] = l.postcode))
                            }
                            e = a._.merge(e, k)
                        }
                    }
                    d.forms.autoCompleteData = a._.merge(d.forms.autoCompleteData, e),
                    d.forms.autoFillForms()
                },
                logout: function() {
                    d.forms.autoCompleteData = d.forms.getAutoCompleteData(),
                    d.forms.autoFillForms()
                }
            },
            grades: {
                MAX_REMEMBERED_GRADES: 3,
                seoUrls: [],
                initGradePersonalization: function() {
                    if ($("body").hasClass("grade-explore") && T1.ctx && T1.ctx.model && T1.ctx.grade) {
                        d.grades.setSeoUrls();
                        var a = T1.ctx.grade || {}
                          , b = d.grades.getLastGradeOptions()
                          , e = d.grades.getActivePageSeoUrl().promotedCanonical || "";
                        a.model = T1.ctx.model,
                        b = b && b[a.model] || {},
                        window.location.pathname.replace(".json", "") === e.replace(".json", "") || b.gradeId !== a.gradeId || b.bodyTypeId !== a.bodyTypeId ? (a.clickedColour = a.colourId !== a.defaultColourId,
                        a.clickedEngine = a.engineEtw !== a.defaultEngineEtw,
                        a.explicitSelection = a.clickedColour || a.clickedEngine) : c.mergeWith(a, b, function(a, b) {
                            return a || b
                        }),
                        a = d.grades.createGradeObject(a),
                        d.grades.storeGradeExploreVisit(a),
                        b = d.grades.setLastGradeOptions(a),
                        d.grades.updateGradeLinkData(b.colourId),
                        d.grades.listenToGradeExploreEvents()
                    }
                },
                listenToGradeExploreEvents: function() {
                    T1.channels.global.subscribe(T1.constants.COLORPICKER_COLOR_CHANGED, d.grades.onSelectionChange),
                    T1.channels.global.subscribe(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, d.grades.onSelectionChange)
                },
                onSelectionChange: function(a) {
                    if (!a.preview) {
                        var b, c = d.grades.getCurrentGradeConfig();
                        a.colorGuid && (c.clickedColour = !0,
                        c.explicitSelection = !0,
                        c.colourId = a.colorGuid,
                        c.colourCode = a.colorCode),
                        (a.engineEtw || a.carId) && (c.clickedEngine = !0,
                        c.explicitSelection = !0,
                        c.engineEtw = a.engineEtw,
                        c.carId = a.carId,
                        c.engineId = a.engineId,
                        c.transmissionId = a.transmissionId,
                        c.wheeldriveId = a.wheeldriveId),
                        b = d.grades.createGradeObject(c),
                        d.grades.updateGradeDataFromUserAction(b),
                        d.grades.updateGradeLinkData(b.colourId)
                    }
                },
                updateGradeLinkData: function(a) {
                    $(".grade-link").filter(function() {
                        return !!$(this).find("[data-available-colours]").length
                    }).each(function() {
                        var b = $(this)
                          , c = b.find("[data-available-colours]").data("available-colours");
                        a && c.length && (c.find(function(b) {
                            return b === a
                        }) ? b.data("colourId", a) : b.data("colourId", null))
                    })
                },
                storeGradeExploreVisit: function(a) {
                    var b = d.grades.getLastGradeVisits();
                    b = b.filter(function(b) {
                        return !(a.gradeId === b.gradeId && a.bodyTypeId === b.bodyTypeId)
                    }),
                    b.push(a),
                    b = b.slice(-d.grades.MAX_REMEMBERED_GRADES),
                    d.store({
                        lastVisitedGrades: b
                    })
                },
                setLastGradeOptions: function(a) {
                    var b = d.grades.getLastGradeOptions();
                    return b[a.model] = d.grades.createGradeObject(a),
                    d.store({
                        lastGradeOptions: b
                    }),
                    b[a.model]
                },
                updateGradeDataFromUserAction: function(a) {
                    var b = d.grades.getLastGradeOptions();
                    b[a.model] = d.grades.createGradeObject(a);
                    var c = d.grades.getLastGradeVisits();
                    c[c.length - 1] = a,
                    d.store({
                        lastGradeOptions: b,
                        lastVisitedGrades: c
                    }),
                    T1.settings.mock || history.replaceState({}, "Previous Grade Preferences", d.grades.generateGradeUrl(a))
                },
                generateGradeUrl: function(a, c, e, f) {
                    c = c || {};
                    var g = T1.ctx.grade || {};
                    a.gradeId !== g.gradeId && a.gradeId || a.bodyTypeId !== g.bodyTypeId && a.bodyTypeId || (a.colourId === g.defaultColourId && (a.colourId = null,
                    a.clickedColour = !1),
                    a.engineEtw === g.defaultEngineEtw && (a.engineEtw = null,
                    a.clickedEngine = !1),
                    !1 === a.clickedColour && !1 === a.clickedEngine && (a.explicitSelection = !1)),
                    e || (e = d.grades.getActivePageSeoUrl(),
                    e = g.isPromotedGradeBodyType && (a.gradeId && a.gradeId !== g.gradeId || a.bodyTypeId && a.bodyTypeId !== g.bodyTypeId || b.hasFilters() && (a.bodyTypeFilter !== g.defaultBodyTypeFilter || a.wheelBaseFilter !== g.defaultWheelBaseFilter)) ? e.gradeBaseUrl : g.isPromotedGradeBodyType || !a.gradeId || !a.bodyTypeId || a.gradeId === g.defaultGradeId && a.bodyTypeId === g.defaultBodyTypeId ? a.explicitSelection ? e.gradeBaseUrl : e.promotedCanonical : e.gradeBaseUrl);
                    var h = [""];
                    e = decodeURIComponent(e),
                    e = e.replace("[GRADEID]", a.gradeId || g.gradeId),
                    e = e.replace("[BODYTYPEID]", a.bodyTypeId || g.bodyTypeId),
                    a.explicitSelection && a.colourId && h.push("colour=" + a.colourId),
                    a.explicitSelection && a.engineEtw && h.push("etw=" + a.engineEtw),
                    b.hasFilters() && !0 !== c.excludeFilters && (g.isPromotedGradeBodyType && a.bodyTypeFilter === g.defaultBodyTypeFilter && a.wheelBaseFilter === g.defaultWheelBaseFilter || (c.filterPriority && "wheelBaseFilter" === c.filterPriority ? (a.wheelBaseFilter && h.push("wheelbasefilter=" + a.wheelBaseFilter),
                    a.bodyTypeFilter && h.push("bodytypefilter=" + a.bodyTypeFilter)) : (a.bodyTypeFilter && h.push("bodytypefilter=" + a.bodyTypeFilter),
                    a.wheelBaseFilter && h.push("wheelbasefilter=" + a.wheelBaseFilter)))),
                    f && f.forEach(function(a) {
                        h.push(a.key + "=" + a.value)
                    });
                    var i = location.origin + e;
                    return h.length > 1 && (i += h.join("|")),
                    i
                },
                setSeoUrls: function() {
                    $(".secondLevelNavList").find("[data-gradebaseurl],[data-promotedcanonical]").each(function() {
                        var a = {
                            gradeBaseUrl: $(this).data("gradebaseurl"),
                            promotedCanonical: $(this).data("promotedcanonical"),
                            activePage: $(this).parent().hasClass("active")
                        };
                        d.grades.seoUrls.push(a)
                    })
                },
                getActivePageSeoUrl: function() {
                    return c.find(d.grades.seoUrls, "activePage") || {}
                },
                getLastGradeVisits: function() {
                    return d.store().lastVisitedGrades || []
                },
                getLastGradeOptions: function() {
                    return d.store().lastGradeOptions || {}
                },
                getCurrentGradeConfig: function() {
                    var a = d.grades.getLastGradeVisits()
                      , b = null
                      , e = T1.ctx.grade || {};
                    return a.length > 0 && ((b = c.find(a, {
                        gradeId: e.gradeId,
                        bodyTypeId: e.bodyTypeId
                    })) || (b = a[a.length - 1])),
                    b
                },
                createGradeObject: function(a) {
                    var b = {};
                    return a.model && (b.model = a.model),
                    a.gradeId && (b.gradeId = a.gradeId),
                    a.carId && (b.carId = a.carId),
                    a.bodyTypeId && (b.bodyTypeId = a.bodyTypeId),
                    a.colourId && (b.colourId = a.colourId),
                    a.colourCode && (b.colourCode = a.colourCode),
                    a.engineEtw && (b.engineEtw = a.engineEtw),
                    a.engineId && (b.engineId = a.engineId),
                    a.wheeldriveId && (b.wheeldriveId = a.wheeldriveId),
                    a.transmissionId && (b.transmissionId = a.transmissionId),
                    a.bodyTypeFilter && (b.bodyTypeFilter = a.bodyTypeFilter),
                    a.wheelBaseFilter && (b.wheelBaseFilter = a.wheelBaseFilter),
                    b.clickedEngine = !0 === a.clickedEngine,
                    b.clickedColour = !0 === a.clickedColour,
                    b.explicitSelection = !0 === b.clickedEngine || !0 === b.clickedColour,
                    b
                }
            }
        }
          , f = T1.constants;
        return {
            init: d.init,
            tracking: d.tracking,
            getCurrentGradeConfig: d.grades.getCurrentGradeConfig,
            generateGradeUrl: d.grades.generateGradeUrl
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.comparer = function() {
        "use strict";
        var a = {
            ovlClass: "compare-ovl",
            highlightClass: "in-evidence",
            filteredClass: "filtered",
            dynamicFilterClass: "dynamically-filtered",
            loadingClass: "loading",
            errorClass: "error",
            filteredAreaSelectors: [".collapsible-group .collapsible-panel:not(.template) .content >.row >.col-sm-2", ".right.filters.row .col-sm-2"],
            toastPositions: {
                top: {
                    top: "10%"
                },
                bottom: {
                    top: "80%"
                }
            },
            toastTimeout: 3e3,
            labels: {
                selectMinReached: "Select minimum {count} item(s)",
                selectMaxReached: "Select maximum {count} item(s)"
            },
            extend: function(a, f) {
                return f && f.size() && (a = b.extend(!0, {}, c, {
                    container: f
                }, e.protectBase(a.extend), b.extend(!0, {}, d, e.protectBase(a.override)))),
                a
            },
            protectBase: function(a) {
                if (a)
                    for (var b in c)
                        delete a[b];
                return a
            },
            clearSubscriptions: function() {
                for (var a = 0; a < this.subscriptions.length; a++)
                    this.subscriptions[a].unsubscribe();
                this.subscriptions = []
            },
            thread: function(a, c) {
                setTimeout(b.proxy(c, a), 0)
            },
            onOverlayerResize: function(a) {
                this.uniformizeToolsHeight(),
                this.uniformizeDetailsHeight(),
                this.uniformizeHeight(this.compareView.find(".expandable-objects")),
                setTimeout(b.proxy(e.refreshLock, this), 300)
            },
            toast: function(a, b, c) {
                T1.channels.dialog.publishAsync(T1.constants.TOAST_CUSTOM, {
                    customContainer: b,
                    customText: a,
                    timeout: e.toastTimeout,
                    css: c
                })
            },
            toastAndClose: function(a) {
                b.proxy(e.toast, this)(a, this.compareView.parent()),
                setTimeout(function() {
                    T1.channels.hash.publish(f.HASH_REMOVE, "")
                }, e.toastTimeout)
            },
            handleObjectsSelection: function(a) {
                var c = b(a.currentTarget)
                  , d = c.closest(".checkboxes-area");
                if (d.find('.checkbox-btn input[type="checkbox"]:checked').size() > this.selectionScope.max) {
                    var f = c.closest("ul, .col-sm-3").parent()
                      , g = {
                        top: f.position().top + f.height() / 2
                    };
                    b.proxy(e.toast, this)(e.labels.selectMaxReached.replace(/{count}/g, this.selectionScope.max), d, g),
                    c.prop("checked", !c.is(":checked"))
                }
            },
            mirrorSelection: function(a) {
                var c = this.container.add(this.compareView).find(".checkboxes-area").not(a).find(".checkbox-btn");
                a.find('.checkbox-btn input[type="checkbox"]').each(function(a, d) {
                    var f = b(d)
                      , g = c.find('input[type="checkbox"][data-filter-value="' + b(d).data("filter-value") + '"]');
                    b.proxy(e.toggleCheckBoxBtn, this)(g, f.prop("checked"))
                })
            },
            toggleCheckBoxBtn: function(a, b) {
                var c = a.closest(".checkbox-btn");
                a.prop("checked", b),
                c.toggleClass(c.attr("data-on-class"), a.is(":checked")),
                c.toggleClass(c.attr("data-off-class"), !a.is(":checked"))
            },
            validateObjectsSelection: function(a) {
                a && a.preventDefault();
                var c = this.compareView.find(".checkboxes-area")
                  , d = c.find('.checkbox-btn input[type="checkbox"]:checked').size();
                d > this.selectionScope.max ? (b.proxy(e.toast, this)(e.labels.selectMaxReached.replace(/{count}/g, this.selectionScope.max), c),
                a && a.stopImmediatePropagation()) : d < this.selectionScope.min ? (b.proxy(e.toast, this)(e.labels.selectMinReached.replace(/{count}/g, this.selectionScope.min), c),
                a && a.stopImmediatePropagation()) : (b.proxy(e.setObjectsSelection, this)(c),
                b.proxy(e.mirrorSelection, this)(c),
                b.proxy(e.applyFilters, this)())
            },
            compareBtnClick: function(a) {
                a.preventDefault();
                var c = this.getPageCheckboxesArea()
                  , d = c.find('.checkbox-btn input[type="checkbox"]:checked').size()
                  , g = e.toastPositions[b(a.currentTarget).data("toast-position")];
                d > this.selectionScope.max ? b.proxy(e.toast, this)(e.labels.selectMaxReached.replace(/{count}/g, this.selectionScope.max), c, g) : d < this.selectionScope.min ? b.proxy(e.toast, this)(e.labels.selectMinReached.replace(/{count}/g, this.selectionScope.min), c, g) : T1.channels.hash.publishAsync(f.HASH_CHANGE, "/publish/" + b(a.currentTarget).attr("href").replace(/#/g, ""))
            },
            getObjectsMaxHeight: function(a, c) {
                var d = 0;
                return c = b.extend({
                    innerCalculation: !1,
                    excludeSelector: null
                }, c),
                a.each(function() {
                    var a = b(this)
                      , e = c.innerCalculation ? a.innerHeight() : a.height();
                    c.excludeSelector && a.find(c.excludeSelector).each(function() {
                        e -= c.innerCalculation ? b(this).innerHeight() : b(this).height()
                    }),
                    d = e > d ? e : d
                }),
                d
            },
            panelExpand: function(a) {
                a.root.is(this.compareView) && this.uniformizeDetailsHeight(a.panel)
            },
            slideToggleFilterPanel: function(a) {
                var c = this.compareView.find(".btn-objects-filter")
                  , d = this.compareView.find(".expandable-objects");
                (!a || a && c.hasClass("active")) && d.slideToggle({
                    duration: 400,
                    start: b.proxy(function() {
                        b.proxy(e.lock, this)(!c.hasClass("active"))
                    }, this),
                    complete: b.proxy(function() {
                        c.toggleClass("active"),
                        this.uniformizeHeight(d)
                    }, this)
                })
            },
            applyFilters: function() {
                if (this.data) {
                    var a = b.proxy(e.buildFilter, this)()
                      , c = b.proxy(e.getFilteredSelector, this)(a)
                      , d = this.compareView.find(e.filteredAreaSelectors.join())
                      , f = this.compareView.find(c)
                      , g = b.proxy(e.getDynamicFiltersKeys, this)();
                    d.removeClass([g.join(" "), e.filteredClass, e.dynamicFilterClass, "first", "last"].join(" "));
                    var h = b.proxy(e.getDynamicSelection, this)(d, f, a);
                    f.not(h).addClass(e.filteredClass),
                    b.proxy(e.executeCustomFilters, this)(a),
                    b.proxy(e.setFirstLast, this)(),
                    b.proxy(e.highlight, this)(a.highlight),
                    b.proxy(e.initPrintButtons, this)(),
                    this.uniformizeToolsHeight(),
                    this.uniformizeDetailsHeight()
                }
            },
            getDynamicSelection: function(a, c, d) {
                var f = [];
                if (!b.isEmptyObject(this.dynamicFilters)) {
                    var g = b.proxy(e.getIndexedSelection, this)();
                    a.not(c).each(b.proxy(function(a, c) {
                        var h = b(c);
                        for (var i in this.dynamicFilters) {
                            for (var j = !1, k = 0; k < this.dynamicFilters[i].length; k++)
                                j = j || b.proxy(this.dynamicFilters[i][k], h)({
                                    name: i,
                                    filter: d,
                                    data: this.data,
                                    selection: g
                                });
                            j && (h.addClass([i, e.dynamicFilterClass].join(" ")),
                            f.push(c))
                        }
                    }, this))
                }
                return f
            },
            executeCustomFilters: function(a) {
                for (var c in this.customFilters)
                    for (var d in this.customFilters[c]) {
                        var f = this.compareView.find(d);
                        f.removeClass([c, e.filteredClass, e.dynamicFilterClass].join(" "));
                        for (var g = 0; g < this.customFilters[c][d].length; g++) {
                            var h = b.proxy(e.applyCustomFilter, this)(a, c, d, g);
                            f.each(b.proxy(h, this))
                        }
                    }
            },
            applyCustomFilter: function(a, c, d, f) {
                return function(g, h) {
                    var i = b(h);
                    b.proxy(this.customFilters[c][d][f], i)({
                        filter: a,
                        data: this.data
                    }) && i.addClass([c, e.dynamicFilterClass].join(" "))
                }
            },
            setFirstLast: function() {
                var a = this.compareView.find(".collapsible-group .collapsible-panel:not(.template) .content >.row")
                  , c = this.compareView.find(".right.filters.row .col-sm-2").not("." + e.filteredClass);
                b.proxy(e.removeFirstLastClasses, this)(this.compareView.find(e.filteredAreaSelectors.join())),
                b.proxy(e.addFirstLastClasses, this)(c),
                a.each(b.proxy(function(a, c) {
                    b.proxy(e.addFirstLastClasses, this)(b(c).children(".col-sm-2").not("." + e.filteredClass))
                }, this))
            },
            removeFirstLastClasses: function(a) {
                a.removeClass(["first", "last"].join(" "))
            },
            addFirstLastClasses: function(a) {
                a.first().addClass("first"),
                a.filter(":eq(" + (this.selectionScope.max - 1) + ")").addClass("last")
            },
            dropdownFilterChanged: function(a) {
                var c = b(a.target);
                a.preventDefault(),
                b.proxy(this.setFilterItemValue, this)(c),
                e.thread(this, e.applyFilters)
            },
            resetObjectsFilter: function() {
                var a = this.compareView.find('.checkboxes-area .checkbox-btn input[type="checkbox"]');
                a.each(function() {
                    e.toggleCheckBoxBtn(b(this), !1)
                });
                for (var c = 0; c < this.selection.length; c++)
                    e.toggleCheckBoxBtn(a.filter('[data-filter-value="' + this.selection[c] + '"]'), !0)
            },
            getFilteredSelector: function(a) {
                var c = [];
                for (var d in a)
                    "highlight" !== d && c.push(b.proxy(e.getLiteralFilter, this)(d, a[d]));
                return c.join(",")
            },
            getLiteralFilter: function(a, b) {
                if ("highlight" !== a) {
                    var c = ""
                      , d = [];
                    if (b instanceof Array)
                        for (var f = 0; f < b.length; f++)
                            c += "[data-filter-" + a + "][data-filter-" + a + '!="' + b[f] + '"]';
                    else
                        c += "[data-filter-" + a + "][data-filter-" + a + '!="' + b + '"]';
                    for (var g = 0; g < e.filteredAreaSelectors.length; g++)
                        d.push(e.filteredAreaSelectors[g] + c);
                    return d.join(",")
                }
            },
            getData: function() {
                var a = b.ajax({
                    type: "GET",
                    dataType: "JSON",
                    url: this.container.data("url")
                });
                a.done(b.proxy(e.onGetDataDone, this)),
                a.fail(b.proxy(e.onGetDataFail, this))
            },
            onGetDataDone: function(a) {
                b.proxy(e.resetData, this)(a),
                b.proxy(this.onDataLoad, this)(this.data),
                b.proxy(e.applyFilters, this)(),
                b.proxy(this.initOverlayer, this)()
            },
            onGetDataFail: function(a, c, d) {
                this.compareView.addClass(e.errorClass),
                b.proxy(e.toastAndClose, this)(d || c)
            },
            resetData: function(a) {
                this.data = a || null,
                this.compareView.find(".collapsible-group >*:not(.template)").remove()
            },
            lock: function(a) {
                b.proxy(e.refreshLock, this)().slideToggle(a)
            },
            refreshLock: function() {
                var a = this.compareView.find(".lock")
                  , c = this.compareView.height()
                  , d = b(".overlayerContent").prop("scrollHeight") || 0;
                return a.height(c > d ? c : d)
            },
            buildFilter: function() {
                var a = {
                    getUnsafeData: b.proxy(this.getUnsafeData, this)
                };
                return a.get = b.proxy(function(b) {
                    return this.getUnsafeData(a[b])
                }, this),
                this.compareView.find('[data-filter-name][data-filter-value!=""]').each(function() {
                    var c = b(this);
                    (void 0 !== c.prop("checked") && c.prop("checked") || c.hasClass("selected")) && (a[c.data("filter-name")] ? (a[c.data("filter-name")]instanceof Array || (a[c.data("filter-name")] = [a[c.data("filter-name")]]),
                    a[c.data("filter-name")].push(c.data("filter-value"))) : a[c.data("filter-name")] = c.data("filter-value"))
                }),
                a
            },
            resetFilters: function() {
                this.compareView.find("[data-filter-default]").each(function() {
                    var a = b(this);
                    void 0 === a.prop("checked") || a.prop("checked") ? "A" === this.nodeName.toUpperCase() && a.click() : a.prop("checked", !0)
                })
            },
            setObjectsSelection: function(a) {
                var c = {};
                this.selection = [],
                a.find('.checkbox-btn input[type="checkbox"]:checked').each(b.proxy(function(a, d) {
                    d = b(d).data("filter-value"),
                    c[d] || (this.selection.push(d),
                    c[d] = !0)
                }, this))
            },
            getIndexedSelection: function() {
                for (var a = {}, b = 0; b < this.selection.length; b++)
                    a[this.selection[b]] = !0;
                return a
            },
            getDynamicFiltersKeys: function() {
                return b.proxy(e.getObjectKeys, this)(this.dynamicFilters)
            },
            getObjectKeys: function(a) {
                var b = [];
                for (var c in a)
                    b.push(c);
                return b
            },
            removeObject: function(a) {
                var c = b(a.currentTarget);
                if (this.selection.length <= this.selectionScope.min)
                    b.proxy(e.toast, this)(e.labels.selectMinReached.replace(/{count}/g, this.selectionScope.min), c.closest(".filters"));
                else {
                    var d = this.selection.indexOf(c.data("value"));
                    d > -1 && (delete this.selection[d],
                    b.proxy(e.resetObjectsFilter, this)(),
                    b.proxy(e.validateObjectsSelection, this)())
                }
            },
            onHighlightChange: function() {
                var a = b.proxy(e.buildFilter, this)();
                b.proxy(e.highlight, this)(a.highlight)
            },
            resetBrowserCache: function() {
                this.container.find('.objects.checkboxes-area input[type="checkbox"]').each(function() {
                    var a = b(this);
                    a.prop("checked", "checked" === a.attr("checked"))
                })
            },
            highlight: function(a) {
                this.compareView.find(".collapsible-group ." + e.highlightClass).removeClass(e.highlightClass),
                (a || void 0 === a) && this.compareView.find(".collapsible-panel .content >.row:not(." + this.noHighLightClass + ")").each(function() {
                    var a = b(this)
                      , c = null;
                    a.find(">.col-sm-2:not(." + e.filteredClass + ")").each(function() {
                        var d = b(this)
                          , f = d.attr("data-value");
                        if ((c = null === c ? f : c) != f)
                            return a.addClass(e.highlightClass),
                            !1
                    })
                })
            },
            initPrintButtons: function() {
                this.compareView.find(".btn-print").attr("href", b.proxy(this.getPrintUrl, this)())
            }
        }
          , c = {
            noHighLightClass: "not-in-evidence",
            container: null,
            compareView: null,
            subscriptions: [],
            selection: [],
            selectionScope: {
                min: 1,
                max: 3
            },
            dynamicFilters: {},
            customFilters: {},
            noDataValue: "-",
            data: null,
            init: function() {
                b.proxy(e.resetBrowserCache, this)(),
                this.container.on("change", '.checkboxes-area .checkbox-btn input[type="checkbox"]', b.proxy(function(a) {
                    var c = b(a.currentTarget).closest(".checkboxes-area");
                    b.proxy(e.handleObjectsSelection, this)(a),
                    b.proxy(e.setObjectsSelection, this)(c),
                    b.proxy(e.mirrorSelection, this)(c)
                }, this)),
                this.container.find(".compare-btn").on("click", b.proxy(e.compareBtnClick, this)),
                b.proxy(e.setObjectsSelection, this)(this.container.find(".objects.checkboxes-area")),
                T1.channels.global.subscribe(f.ON_WIN_RESIZE, b.proxy(this.onWindowResize, this)),
                T1.channels.dialog.subscribe(f.MATERIALBOX_CLOSED, b.proxy(this.onOverlayerClosed, this)),
                T1.channels.finance.subscribe(f.FINANCE_RATES_OFF, b.proxy(function() {
                    b.proxy(this.uniformizeHeight, this)()
                }, this)),
                T1.channels.finance.subscribe(f.FINANCE_RATES_LOADED, b.proxy(function() {
                    b.proxy(this.uniformizeHeight, this)()
                }, this)),
                this.initLabels(),
                this.initView()
            },
            initLabels: function() {
                e.labels = {
                    selectMinReached: T1.labels.comparator.selectMinReached || e.labels.selectMinReached,
                    selectMaxReached: T1.labels.comparator.selectMaxReached || e.labels.selectMaxReached
                }
            },
            initOverlayer: function() {
                e.thread(this, function() {
                    T1.formInput.initOnDemand(this.compareView.find(".checkboxes-area")),
                    this.compareView.find('.checkboxes-area .checkbox-btn input[type="checkbox"]').on("change", b.proxy(e.handleObjectsSelection, this)),
                    T1.collapsibleGroup.initOnDemand(this.compareView),
                    this.subscriptions.push(T1.channels.global.subscribe(f.COLLAPSIBLE_PANEL_EXPAND, b.proxy(e.panelExpand, this))),
                    this.compareView.find(".btn-validate").on("click", b.proxy(e.validateObjectsSelection, this)),
                    this.compareView.find(".right.filters.row .icon-remove").on("click", b.proxy(e.removeObject, this)),
                    this.compareView.find('.filters input[data-filter-name="highlight"]').on("change", b.proxy(e.onHighlightChange, this)),
                    this.compareView.find('.filters input[data-filter-name!="highlight"]').on("change", b.proxy(e.applyFilters, this)),
                    this.compareView.find('.filters .dropdown [data-filter-name!="highlight"] a').on("click", b.proxy(e.dropdownFilterChanged, this)),
                    this.compareView.find(".btn-objects-filter, .lock, .actions").on("click", b.proxy(function(a) {
                        a.preventDefault(),
                        b.proxy(e.slideToggleFilterPanel, this)(),
                        b.proxy(e.resetObjectsFilter, this)()
                    }, this)),
                    this.compareView.removeClass(e.loadingClass),
                    this.uniformizeToolsHeight(),
                    this.uniformizeDetailsHeight()
                })
            },
            compare: function(a) {
                var c = this.getPageCheckboxesArea()
                  , d = c.find('.checkbox-btn input[type="checkbox"]:checked').size();
                if (!a.selection && d > this.selectionScope.max)
                    T1.channels.hash.publishAsync(f.HASH_REMOVE, ""),
                    b.proxy(e.toast, this)(e.labels.selectMaxReached.replace(/{count}/g, this.selectionScope.max), c);
                else if (!a.selection && d < this.selectionScope.min)
                    T1.channels.hash.publishAsync(f.HASH_REMOVE, ""),
                    b.proxy(e.toast, this)(e.labels.selectMinReached.replace(/{count}/g, this.selectionScope.min), c);
                else {
                    T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                        url: this.container.data("view-url"),
                        type: "box-ajax",
                        size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                        hashAction: !0,
                        styleClass: e.ovlClass
                    });
                    var g = T1.channels.dialog.subscribe(f.MATERIALBOX_OPENED, b.proxy(function(c) {
                        this.compareView = c.container.find(".compare-view"),
                        this.applyUriSelection(a),
                        b.proxy(this.onOverlayerOpen, this)(c),
                        g.unsubscribe()
                    }, this))
                }
            },
            applyUriSelection: function(a) {
                a.selection && (this.selection = encodeURIComponent(a.selection).split(","),
                b.proxy(e.resetObjectsFilter, this)(),
                b.proxy(e.validateObjectsSelection, this)())
            },
            resetView: function() {
                b.proxy(e.resetFilters, this)(),
                b.proxy(e.slideToggleFilterPanel, this)(!0),
                this.expandDetail(0),
                this.compareView.addClass(e.loadingClass),
                this.compareView.removeClass(e.errorClass)
            },
            expandDetail: function(a) {
                this.compareView.find(".collapsible-group >.collapsible-panel:not(.template):eq(" + a + ") >h4").trigger("click", {
                    active: !0
                })
            },
            setFilterItemValue: function(a) {
                a.is('input[type="radio"]') ? a.prop("checked", !0) : (a.closest(".dropdown-menu").find("li a").removeClass("selected"),
                a.closest(".dropdown").find(".dropdown-toggle >span").html(a.html()),
                a.addClass("selected"))
            },
            getObjectsMaxHeight: function(a, b) {
                return e.getObjectsMaxHeight(a, b)
            },
            uniformizeHeight: function(a, c) {
                c = b.extend({
                    innerCalculation: !1,
                    rootFilter: ":visible",
                    childFilter: ":visible",
                    rule: "margin-top",
                    offsetCalculation: !0,
                    adjust: 0
                }, c);
                var d = {
                    innerCalculation: c.innerCalculation,
                    excludeSelector: ".responsive-exclude"
                };
                (a || this.container).find(".responsive-item" + (c.rootFilter || "")).each(b.proxy(function(a, f) {
                    var g = b(f).children(c.childFilter)
                      , h = (g.find(".responsive-anchor").removeAttr("style"),
                    e.getObjectsMaxHeight(g, d) + c.adjust);
                    g.each(function(a, f) {
                        var g = b(f);
                        g.find("*").andSelf().filter(".responsive-anchor").css(c.rule, 0).css(c.rule, c.offsetCalculation ? h - e.getObjectsMaxHeight(g, d) : h)
                    })
                }, this))
            },
            uniformizeToolsHeight: function() {
                this.uniformizeObjectsFilterHeight();
                var a = this.compareView.find(".tools >.left").removeAttr("style")
                  , c = this.compareView.find(".tools >.right").height()
                  , d = 0;
                a.children(":not(.expansion-content)").each(function() {
                    d += b(this).outerHeight(!0)
                }),
                a.css("min-height", c),
                d > c ? a.addClass("auto") : a.removeClass("auto")
            },
            uniformizeDetailsHeight: function(a) {
                this.uniformizeHeight(a || this.compareView.find(".collapsible-group"), {
                    rule: "min-height",
                    offsetCalculation: !1,
                    innerCalculation: !0,
                    adjust: 1
                })
            },
            handleResponsiveImages: function(a) {
                (a.root ? a.root.find(".responsive-item img") : a.images).bind("load error", b.proxy(function(c) {
                    a.handler(b(c.currentTarget).closest(".responsive-item").parent())
                }, this))
            },
            addCategory: function(a, b, c) {
                var d = this.compareView.find(".collapsible-group")
                  , e = d.find(".collapsible-panel.template").clone().removeClass("template")
                  , f = this.compareView.data("opencategory")
                  , g = e.find(">h4")
                  , h = 0 === d.find(".collapsible-panel.active").size()
                  , i = !f || f.toUpperCase() === (b || "").toUpperCase();
                return g.attr({
                    "data-bt-action": "click_tab",
                    "data-bt-value": c || a,
                    "data-bt-track": ""
                }),
                g.find("span").html(a),
                e.find(".panel-section").remove(),
                d.append(e),
                e.toggleClass("active", h && i),
                e
            },
            addSubCategory: function(a, b) {
                var c = this.compareView.find(".collapsible-group .collapsible-panel.template .panel-section").clone();
                return b ? c.find(">h5").html(b) : c.find(">h5").remove(),
                c.find(".content >.row").remove(),
                a.append(c),
                c
            },
            addItem: function(a, b) {
                var c = this.compareView.find(".collapsible-group .collapsible-panel.template .content >.row").clone();
                if (a.hasClass("panel-section") || (a = this.addSubCategory(a)),
                c.addClass(b.className),
                c.find(">.col-sm-6").prepend(b.content),
                c.find(">.col-sm-2").remove(),
                b.more) {
                    var d = "item-" + (new Date).getTime();
                    c.find(">.col-sm-6 .readMore").attr("data-tooltip-selector", "#" + d),
                    c.find(".expansion-content").attr("id", d),
                    c.find(".expansion-inner").html(b.more)
                } else
                    c.find(".col-sm-6 .readMore, .expansion-content").remove();
                return a.find(".content").append(c),
                c
            },
            addItemObjectValue: function(a, c) {
                var d = this.compareView.find(".collapsible-group .collapsible-panel.template .content >.row >.col-sm-2").clone();
                if (c.displayValue ? d.html(c.displayValue) : "boolean" === b.type(c.value) ? d.find(c.value ? ".icon-minus" : ".icon-radio-checked").remove() : d.html(c.value),
                c.extra && d.append(c.extra),
                d.addClass(c.className),
                c.attr && d.attr(c.attr),
                c.filters)
                    for (var e = 0; e < c.filters.length; e++)
                        d.attr("data-filter-" + c.filters[e].name, this.getSafeString(c.filters[e].value));
                return d.attr("data-value", this.getSafeString(c.value)),
                a.append(d),
                d
            },
            getSafeString: function(a) {
                return encodeURIComponent(a)
            },
            getUnsafeData: function(a) {
                var b = decodeURIComponent(a);
                return a instanceof Array ? b.split(",") : b
            },
            addDynamicFilter: function(a, b) {
                this.dynamicFilters[a] = this.dynamicFilters[a] || [],
                this.dynamicFilters[a].push(b)
            },
            addCustomFilter: function(a, b, c) {
                this.customFilters[a] = this.customFilters[a] || {},
                this.customFilters[a][b] = this.customFilters[a][b] || [],
                this.customFilters[a][b].push(c)
            },
            getExpansionContainer: function(a, c, d) {
                var e = this.compareView.find(".expansion-content.template." + a).clone().attr("id", c).removeClass("template");
                return d && e.append(b("<div/>").addClass("expansion-arrow")),
                e
            },
            getPricesContainer: function(a, c) {
                var d = a.list ? b("<span/>").addClass("old price").html(globalize.format(a.list, "c")) : null
                  , e = d ? b('<span class="icon icon-tag"></span>') : null;
                return b("<span/>").addClass(d ? "promo price" : "price").html(globalize.format(a[c || "listWithDiscount"], "c")).append(e).add(d)
            },
            getFilterValue: function(a) {
                var c = null;
                return this.compareView && this.compareView.find('[data-filter-name="' + a + '"]').each(function() {
                    var a = b(this);
                    if (void 0 !== a.prop("checked") && a.prop("checked") || a.hasClass("selected"))
                        return c = a.data("filter-value"),
                        !1
                }),
                c
            },
            onOverlayerOpen: function(a) {
                this.compareView.size() && (this.selection.length < this.selectionScope.min ? (this.compareView.addClass(e.errorClass),
                b.proxy(e.toastAndClose, this)(e.labels.selectMinReached.replace(/{count}/g, this.selectionScope.min))) : this.selection.length > this.selectionScope.max ? (this.compareView.addClass(e.errorClass),
                b.proxy(e.toastAndClose, this)(e.labels.selectMaxReached.replace(/{count}/g, this.selectionScope.max))) : (b.proxy(e.mirrorSelection, this)(this.getPageCheckboxesArea()),
                this.subscriptions.push(T1.channels.global.subscribe(f.ON_WIN_RESIZE, b.proxy(e.onOverlayerResize, this))),
                this.data ? b.proxy(e.onGetDataDone, this)(this.data) : b.proxy(e.getData, this)()))
            },
            onOverlayerClosed: function(a) {
                this.compareView && a.content.is(this.compareView) && (b.proxy(e.clearSubscriptions, this)(),
                this.uniformizeHeight(this.container))
            },
            getBase: function(a) {
                return b.proxy(Object.resolve(a, d), this)
            },
            updateBodyType: function() {
                var a = this.getFilterValue("body-type");
                if (!this.bodyTypeInSelection(a))
                    for (var b = 0; b < this.data.bodyTypes.length; b++)
                        if (this.data.bodyTypes[b].code !== a && this.bodyTypeInSelection(this.data.bodyTypes[b].code)) {
                            var c = this.compareView.find('[data-filter-name="body-type"][data-filter-value="' + this.data.bodyTypes[b].code + '"]');
                            this.setFilterItemValue(c);
                            break
                        }
            },
            bodyTypeInSelection: function(a) {
                for (var b = 0; b < this.selection.length; b++)
                    if (this.hasBodyType(this.getUnsafeData(this.selection[b]), a))
                        return !0;
                return !1
            }
        }
          , d = {
            initView: function() {
                this.uniformizeHeight(this.container),
                this.handleResponsiveImages({
                    root: this.container.find(".objects"),
                    handler: this.uniformizeHeight
                }),
                T1.channels.carconfig.subscribe(this.getCompareEvent(), b.proxy(this.compare, this))
            },
            onDataLoad: function(a) {},
            getCompareEvent: function() {},
            onWindowResize: function(a) {
                this.uniformizeHeight(this.container)
            },
            getPageCheckboxesArea: function() {
                return this.container.find(".objects.checkboxes-area")
            },
            uniformizeObjectsFilterHeight: function() {
                this.uniformizeHeight(this.compareView.find(".tools"))
            },
            getPrintUrl: function() {},
            hasBodyType: function(a, b) {
                return !0
            }
        }
          , e = a
          , f = T1.constants;
        return {
            extend: a.extend
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.packsComparer = function() {
        "use strict";
        var a = T1.comparer.extend({
            override: {
                initView: function() {
                    T1.channels.media.subscribe(T1.constants.CAROUSEL_SLIDE, $.proxy(this.onCarouselSlide, this)),
                    T1.channels.media.subscribe(T1.constants.CAROUSEL_CREATED, $.proxy(this.onCarouselCreated, this)),
                    T1.channels.carconfig.subscribe(this.getCompareEvent(), $.proxy(this.compare, this))
                },
                onWindowResize: function(a, b) {},
                onDataLoad: function(a) {
                    this.indexData();
                    for (var b = 0; b < a.categories.length; b++) {
                        var c = this.addCategory(a.categories[b].name, a.categories[b].id);
                        this.loadCategoryEquipment(c, a.categories[b].equipment);
                        for (var d = 0; d < a.categories[b].categories.length; d++) {
                            var e = this.addSubCategory(c, a.categories[b].categories[d].name);
                            this.loadCategoryEquipment(e, a.categories[b].categories[d].equipment)
                        }
                    }
                },
                getPageCheckboxesArea: function() {
                    return this.container.find(".objects.checkboxes-area >.carousel-wrapper")
                },
                getCompareEvent: function() {
                    return T1.constants.COMPARE_PACKS
                }
            },
            extend: {
                onCarouselCreated: function(a) {
                    a.is(this.container.find(".carousel.slide")) && (this.uniformizeHeight(a),
                    this.handleResponsiveImages({
                        root: this.container.find(".objects"),
                        handler: this.uniformizeHeight
                    }),
                    this.container.find(".carousel-inner").addClass("checkboxes-area"))
                },
                onCarouselSlide: function(a) {
                    a.carousel.is(this.container.find(".carousel.slide")) && this.uniformizeHeight(a.carousel.find(".item.active"))
                },
                indexData: function() {
                    if (this.data) {
                        for (var a = {
                            items: {},
                            packs: {}
                        }, b = 0; b < this.data.packs.length; b++) {
                            var c = this.data.packs[b];
                            if (c.index = {
                                items: {}
                            },
                            a.packs[c.code] || (a.packs[c.code] = c),
                            c.items)
                                for (var d = 0; d < c.items.length; d++) {
                                    var e = c.items[d];
                                    c.index.items[e.code] = e,
                                    a.items[e.code] || (a.items[e.code] = {
                                        packs: {}
                                    }),
                                    a.items[e.code].packs[c.code] || (a.items[e.code].packs[c.code] = c)
                                }
                        }
                        this.data.index = a
                    }
                },
                loadCategoryEquipment: function(a, b) {
                    if (b)
                        for (var c = 0; c < b.length; c++) {
                            var d = b[c]
                              , e = this.addItem(a, {
                                content: d.name,
                                more: d.description
                            });
                            for (var f in this.data.index.packs) {
                                var g = this.data.index.packs[f].index.items
                                  , h = g[d.code]
                                  , i = h && h.price && h.price.listWithDiscount ? h.price : null
                                  , j = !!h && (i ? i.listWithDiscount : h.standard)
                                  , k = h && i ? this.getPricesContainer(i) : null;
                                this.addItemObjectValue(e, {
                                    filters: [{
                                        name: "pack",
                                        value: f
                                    }],
                                    value: j,
                                    displayValue: k
                                })
                            }
                        }
                }
            }
        }, $("#packsComparer"));
        return {
            initDesktop: $.proxy(a.init, a)
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.packs = function() {
        "use strict";
        var a = {
            initMobile: function() {
                var a = b("section#packsoverview .packitem");
                a.length && a.find("ul li:first a, .pack-item-link").swipe({
                    threshold: 5,
                    tap: c.handleClick
                })
            },
            handleClick: function(a, c) {
                (window.innerWidth || b(window).innerWidth()) <= d.SCREEN_SMALL && (a.preventDefault(),
                T1.channels.hash.publishAsync(d.HASH_ADD, "ajax/" + encodeURIComponent(b(a.currentTarget).attr("href"))))
            }
        }
          , c = a
          , d = T1.constants;
        return {
            initMobile: c.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.modelsComparer = function() {
        "use strict";
        var a = T1.comparer.extend({
            override: {
                onDataLoad: function(a) {
                    this.indexData(),
                    this.addDynamicFilters(),
                    this.addCustomFilters(),
                    this.loadPricesCategory(),
                    this.updateBodyType();
                    for (var b = 0; b < a.equipment.length; b++) {
                        var c = this.addCategory(a.equipment[b].name, a.equipment[b].code, a.equipment[b].code);
                        this.loadCategoryEquipment(c, a.equipment[b].items)
                    }
                },
                getCompareEvent: function() {
                    return T1.constants.COMPARE_MODELS
                },
                getPrintUrl: function() {
                    return this.container.data("print-url") + this.getFilterValue("body-type") + "/" + this.selection.join("|")
                },
                hasBodyType: function(a, b) {
                    var c = this.data.index.grades[a];
                    return !(!c || !c.bodyTypes[b] || $.isEmptyObject(c.bodyTypes[b].fuelType))
                }
            },
            extend: {
                indexData: function() {
                    if (this.data) {
                        for (var a = {
                            equipment: {},
                            grades: {}
                        }, b = 0; b < this.data.equipment.length; b++) {
                            var c = this.data.equipment[b];
                            if (c.items)
                                for (var d = 0; d < c.items.length; d++) {
                                    var e = c.items[d];
                                    a.equipment[e.code] = {}
                                }
                        }
                        for (var f = 0; f < this.data.subModels.length; f++)
                            for (var g = this.data.subModels[f], h = 0; h < g.grades.length; h++) {
                                var i = g.grades[h];
                                a.grades[i.code] = a.grades[i.code] || {
                                    bodyTypes: {}
                                };
                                for (var j in i.bodyType) {
                                    var k = i.bodyType[j];
                                    a.grades[i.code].bodyTypes[j] = {
                                        fuelType: k.fuelType
                                    };
                                    for (var l in k.equipment)
                                        a.equipment[l] = a.equipment[l] || {},
                                        a.equipment[l][i.code] = a.equipment[l][i.code] || {},
                                        a.equipment[l][i.code][j] = {
                                            exceptions: k.equipment[l].cars
                                        }
                                }
                            }
                        this.data.index = a
                    }
                },
                loadPricesCategory: function() {
                    if (this.data && "true" !== T1.settings.hidePrices) {
                        for (var a = this.addCategory(T1.labels.comparator.prices, "PRC", "PRC"), c = {}, d = {}, e = this.compareView.hasClass("hide-prices"), f = this.compareView.find(".tfs-formats.modelcompare"), g = f.data("price-attribute") || "listWithDiscount", h = 0; h < this.data.engines.length; h++) {
                            var i = this.data.engines[h]
                              , j = i.images && (i.images.IMG_PNG_285x260 || i.images["IMG_TECH-GUIDE_91x91"]) ? T1.settings.cardbImageHost + (i.images.IMG_PNG_285x260 || i.images["IMG_TECH-GUIDE_91x91"]) : "/images/" + b.MISSING_IMAGE
                              , k = $("<div/>").addClass("col-sm-2").add($("<div/>").addClass("col-sm-10"))
                              , l = c[i.fuelCode] || this.addSubCategory(a, i.fuelName);
                            k.filter(".col-sm-10").html(i.name).addClass(i.isHybrid ? "hybrid" : null),
                            k.filter(".col-sm-2").append($("<img/>").attr("src", j).addClass("img-responsive")),
                            this.handleResponsiveImages({
                                images: k.find("img"),
                                handler: $.proxy(this.uniformizeDetailsHeight, this)
                            });
                            var m = this.addItem(l, {
                                content: k,
                                className: this.noHighLightClass
                            });
                            c[i.fuelCode] = l;
                            for (var n = 0; n < this.data.subModels.length; n++)
                                for (var o = this.data.subModels[n], p = 0; p < o.grades.length; p++)
                                    for (var q = o.grades[p], r = 0; r < this.data.bodyTypes.length; r++) {
                                        var s = this.data.bodyTypes[r]
                                          , t = q.bodyType[s.code] ? q.bodyType[s.code].fuelType[i.fuelCode] : null
                                          , u = t && t.engine[i.code]
                                          , v = u ? t.engine[i.code].minPrice : {}
                                          , w = v.config ? v.config : null
                                          , x = w ? (new Date).getTime() : null
                                          , y = null;
                                        if (u) {
                                            var z = f.data("position")
                                              , A = f.size() ? f.clone() : null
                                              , B = e ? null : this.getPricesContainer(v, g);
                                            y = "before-price" === z ? [A, B] : [B, A]
                                        }
                                        this.addItemObjectValue(m, {
                                            filters: [{
                                                name: "grade",
                                                value: q.code
                                            }, {
                                                name: "body-type",
                                                value: s.code
                                            }],
                                            attr: {
                                                "data-tfs-code": x,
                                                "data-tfs-set": "showFinanceEquipmentCompareOverlayer"
                                            },
                                            value: v[g] || !1,
                                            displayValue: y
                                        }),
                                        x && (d[x] = w)
                                    }
                        }
                        var C = T1.channels.finance.subscribe(b.FINANCE_RATES_LOADED, $.proxy(function() {
                            this.uniformizeDetailsHeight(this.compareView.find(".collapsible-panel.active")),
                            C.unsubscribe()
                        }, this));
                        T1.financeRates.requestRates(this.compareView, {
                            configs: d,
                            source: "Models comparer view"
                        })
                    }
                },
                loadCategoryEquipment: function(a, b) {
                    if (b) {
                        a = this.addSubCategory(a);
                        for (var c = 0; c < b.length; c++)
                            for (var d = b[c], e = this.addItem(a, {
                                content: d.name
                            }), f = this.data.index.equipment[d.code], g = 0; g < this.data.subModels.length; g++)
                                for (var h = this.data.subModels[g], i = 0; i < h.grades.length; i++)
                                    for (var j = h.grades[i], k = 0; k < this.data.bodyTypes.length; k++) {
                                        var l = this.data.bodyTypes[k]
                                          , m = f[j.code] && f[j.code][l.code] ? f[j.code][l.code] : null
                                          , n = m && m.exceptions ? this.getExceptionBlock(m.exceptions) : null
                                          , o = j.bodyType[l.code] && j.bodyType[l.code].equipment && j.bodyType[l.code].equipment[d.code] ? j.bodyType[l.code].equipment[d.code].equipped : this.noDataValue
                                          , p = this.addItemObjectValue(e, {
                                            filters: [{
                                                name: "grade",
                                                value: j.code
                                            }, {
                                                name: "body-type",
                                                value: l.code
                                            }],
                                            value: o,
                                            displayValue: this.getRadioDisplayValue(o),
                                            extra: n
                                        });
                                        n && p.find(">.icon-minus, >.icon-radio-checked, >.icon-radio-uncheck").prependTo(n)
                                    }
                    }
                },
                getExceptionBlock: function(a) {
                    for (var b = "item-" + (new Date).getTime(), c = this.getExpansionContainer("exceptions", b, !0), d = c.find(".expansion-inner"), e = $("<span/>").text("?").addClass("readMore exceptions").attr("data-tooltip-selector", "#" + b), f = 0; f < a.length; f++) {
                        var g = $('<div class="row"/>');
                        g.append($('<div class="col-sm-10"/>').html(a[f].name)),
                        g.append($('<div class="col-sm-2"/>')),
                        g.find(".col-sm-2").append(this.getRadioDisplayValue(a[f].equipped)),
                        d.append(g)
                    }
                    return e.append(c)
                },
                getRadioDisplayValue: function(a) {
                    switch (a) {
                    case "s":
                        return '<span class="icon icon-radio-checked"></span>';
                    case "o":
                        return '<span class="icon icon-radio-uncheck"></span>';
                    default:
                        return '<span class="icon icon-minus"></span>'
                    }
                },
                addDynamicFilters: function() {
                    this.addDynamicFilter("fade-out", function(a) {
                        var b = a.data.index.grades[a.filter.getUnsafeData(this.data("filter-grade"))]
                          , c = !(!b || !b.bodyTypes[a.filter.get("body-type")]) && $.isEmptyObject(b.bodyTypes[a.filter.get("body-type")].fuelType);
                        return this.find("a").attr("disabled", c),
                        c
                    })
                },
                addCustomFilters: function() {
                    this.addCustomFilter("fade-out", ".expandable-objects .col-sm-3", function(a) {
                        return !(!this.data("filter-body-type") || -1 !== this.data("filter-body-type").indexOf(a.filter["body-type"]))
                    })
                }
            }
        }, $("#modelsComparer"))
          , b = T1.constants;
        return {
            initDesktop: $.proxy(a.init, a)
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.enginesComparer = function() {
        "use strict";
        var a = T1.comparer.extend({
            override: {
                initView: function() {
                    this.getBase("initView")(),
                    this.uniformizeSpecsHeight()
                },
                onDataLoad: function(a) {
                    this.indexData(),
                    this.addDynamicFilters(),
                    this.addCustomFilters(),
                    this.loadPricesCategory(),
                    this.updateBodyType();
                    for (var b in this.data.index.details)
                        if (this.data.index.details[b].full) {
                            var c = this.addCategory(b, this.data.index.details[b].id);
                            this.loadCategoryDetails(c, this.data.index.details[b].items)
                        }
                },
                uniformizeObjectsFilterHeight: function() {
                    this.uniformizeHeight(this.compareView.find(".tools"), {
                        rule: "margin-bottom"
                    })
                },
                getCompareEvent: function() {
                    return T1.constants.COMPARE_ENGINES
                },
                onWindowResize: function(a, b) {
                    this.getBase("onWindowResize")(),
                    this.uniformizeSpecsHeight()
                },
                getPrintUrl: function() {
                    return this.container.data("print-url") + this.getFilterValue("body-type") + "/" + this.selection.join("|")
                },
                hasBodyType: function(a, b) {
                    var c = this.data.index.bodyTypes[b];
                    return !(!c || !c.engines[a])
                }
            },
            extend: {
                uniformizeSpecsHeight: function() {
                    var a = this.container.find(".objects .specs");
                    a.css("min-height", 0).css("min-height", this.getObjectsMaxHeight(a))
                },
                indexData: function() {
                    for (var a = {
                        bodyTypes: {},
                        engines: {},
                        details: {}
                    }, b = 0; b < this.data.bodyTypes.length; b++) {
                        var c = this.data.bodyTypes[b];
                        a.bodyTypes[c.code] = {
                            engines: {},
                            grades: {}
                        };
                        for (var d = 0; d < this.data.subModels.length; d++)
                            for (var e = this.data.subModels[d], f = 0; f < e.grades.length; f++) {
                                var g = e.grades[f];
                                g.bodyTypes.index = {};
                                for (var h = 0; h < g.bodyTypes.length; h++) {
                                    var i = g.bodyTypes[h];
                                    i.engines.index = {},
                                    i.code === c.code && (a.bodyTypes[c.code].grades[g.code] = g);
                                    for (var j = 0; j < i.engines.length; j++) {
                                        var k = i.engines[j];
                                        i.engines.index[k.code] = k
                                    }
                                    g.bodyTypes.index[i.code] = i
                                }
                            }
                    }
                    for (var l = 0; l < this.data.engines.length; l++) {
                        var m = this.data.engines[l];
                        for (var n in m.bodyTypes)
                            for (var o in m.bodyTypes[n]) {
                                var p = m.bodyTypes[n][o];
                                a.details[o] = a.details[o] || {
                                    items: {},
                                    full: !1,
                                    id: p.id
                                };
                                for (var q = 0; q < p.items.length; q++) {
                                    var r = p.items[q];
                                    a.details[o].items[r.id] = a.details[o].items[r.id] || {
                                        engines: {},
                                        name: r.name,
                                        full: r.full
                                    },
                                    a.details[o].items[r.id].engines[m.code] = a.details[o].items[r.id].engines[m.code] || {},
                                    a.details[o].items[r.id].engines[m.code][n] = p.items[q],
                                    a.details[o].items[r.id].full = a.details[o].items[r.id].full || r.full,
                                    a.details[o].full = a.details[o].full || a.details[o].items[r.id].full,
                                    r.value !== this.noDataValue && (a.bodyTypes[n].engines[m.code] = m)
                                }
                            }
                        a.engines[m.code] = m
                    }
                    this.data.index = a
                },
                loadPricesCategory: function() {
                    if (this.data && "true" !== T1.settings.hidePrices)
                        for (var a = this.addSubCategory(this.addCategory(T1.labels.comparator.prices)), b = "None" === this.data.ccVersion ? -1 : parseInt(this.data.ccVersion.split(".")[0], 10), c = -1 !== this.data.ccVersion.indexOf("HD") && b > 5, d = 0; d < this.data.subModels.length; d++)
                            for (var e = this.data.subModels[d], f = 0; f < e.grades.length; f++) {
                                var g = e.grades[f]
                                  , h = T1.settings.modelMap[this.data.code]
                                  , i = "true" === T1.settings.enableCarDbTokens && h ? h.token : null
                                  , j = T1.settings.CCISHost + (i ? "product-token/" + i : "") + "vehicle/" + this.data.code + "/" + g.car + "/width/100/height/50/" + (c ? T1.constants.HD_IMAGE_DAY : "") + T1.constants.DEFAULT_EXTERIOR_VIEW
                                  , k = g.images && g.images[0] && g.images[0].fileName ? g.images[0].fileName : "/images/" + T1.constants.MISSING_IMAGE
                                  , l = $("<div/>").addClass("col-sm-2").add($("<div/>").addClass("col-sm-10"));
                                l.filter(".col-sm-10").html(g.name).addClass(e.isHybrid ? "hybrid" : null),
                                l.filter(".col-sm-2").append($("<img/>").attr("src", -1 === b ? k : j).addClass("img-responsive")),
                                this.handleResponsiveImages({
                                    images: l.find("img"),
                                    handler: $.proxy(this.uniformizeDetailsHeight, this)
                                });
                                for (var m = this.addItem(a, {
                                    content: l,
                                    className: this.noHighLightClass
                                }), n = 0; n < this.data.engines.length; n++)
                                    for (var o = this.data.engines[n], p = 0; p < this.data.bodyTypes.length; p++)
                                        for (var q = this.data.bodyTypes[p], r = 0; r < this.data.fuelTypes.length; r++) {
                                            var s = this.data.fuelTypes[r]
                                              , t = this.data.index.bodyTypes[q.code].grades
                                              , u = t[g.code] && o.fuel === s.code && t[g.code].bodyTypes.index[q.code] && t[g.code].bodyTypes.index[q.code].engines.index[o.code]
                                              , v = u ? t[g.code].bodyTypes.index[q.code].engines.index[o.code].price : null;
                                            this.addItemObjectValue(m, {
                                                filters: [{
                                                    name: "engine",
                                                    value: o.code
                                                }, {
                                                    name: "body-type",
                                                    value: q.code
                                                }, {
                                                    name: "fuel-type",
                                                    value: s.code
                                                }],
                                                value: !(!v || !v.listWithDiscount) && v.listWithDiscount,
                                                displayValue: !!u && this.getPricesContainer(v)
                                            })
                                        }
                            }
                },
                loadCategoryDetails: function(a, b) {
                    if (b) {
                        a = this.addSubCategory(a);
                        for (var c in b)
                            if (b[c].full)
                                for (var d = b[c], e = this.addItem(a, {
                                    content: d.name
                                }), f = 0; f < this.data.engines.length; f++)
                                    for (var g = this.data.engines[f], h = 0; h < this.data.bodyTypes.length; h++) {
                                        var i = this.data.bodyTypes[h]
                                          , j = d.engines[g.code] && d.engines[g.code][i.code] && d.engines[g.code][i.code].value !== this.noDataValue
                                          , k = j ? d.engines[g.code][i.code].grades : null
                                          , l = !!j && d.engines[g.code][i.code].value
                                          , m = this.addItemObjectValue(e, {
                                            filters: [{
                                                name: "engine",
                                                value: g.code
                                            }, {
                                                name: "body-type",
                                                value: i.code
                                            }],
                                            value: l,
                                            extra: k ? this.getExceptionBlock(k, l) : null
                                        });
                                        k && m.html(m.find(">span"))
                                    }
                    }
                },
                getExceptionBlock: function(a, b) {
                    for (var c = "item-" + (new Date).getTime(), d = this.getExpansionContainer("exceptions", c, !0), e = d.find(".expansion-inner"), f = $("<span/>").text(b || "?").addClass("readMore exceptions").attr("data-tooltip-selector", "#" + c), g = 0; g < a.length; g++) {
                        var h = $('<div class="row"/>');
                        h.append($('<div class="col-sm-9"/>').html(a[g].name)),
                        h.append($('<div class="col-sm-3"/>').html(a[g].value)),
                        e.append(h)
                    }
                    return f.append(d)
                },
                addDynamicFilters: function() {
                    this.addDynamicFilter("all-fuel", function(a) {
                        if (!a.filter["fuel-type"]) {
                            var b = a.data.index.engines[a.filter.getUnsafeData(this.data("filter-engine"))];
                            return !(!this.data("filter-fuel-type") || a.selection[this.data("filter-engine")] && b && a.filter.getUnsafeData(this.data("filter-fuel-type")) == b.fuel)
                        }
                        return !1
                    }),
                    this.addDynamicFilter("fade-out", function(a) {
                        if (a.filter["fuel-type"]) {
                            var b = a.data.index.engines[a.filter.getUnsafeData(this.data("filter-engine"))];
                            return !b || b.fuel != a.filter.get("fuel-type")
                        }
                        return !1
                    }),
                    this.addDynamicFilter("fade-out", function(a) {
                        return !this.hasClass("all-fuel") && !a.data.index.bodyTypes[a.filter.get("body-type")].engines[a.filter.getUnsafeData(this.data("filter-engine"))]
                    })
                },
                addCustomFilters: function() {
                    this.addCustomFilter("fade-out", ".expandable-objects .col-sm-3", function(a) {
                        return !(!a.filter["fuel-type"] || a.filter["fuel-type"] == this.data("filter-fuel-type")) || !(!this.data("filter-body-type") || -1 !== this.data("filter-body-type").indexOf(a.filter["body-type"]))
                    })
                }
            }
        }, $("#enginesComparer"));
        T1.constants;
        return {
            initDesktop: $.proxy(a.init, a)
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function() {
    T1.rtl = function() {
        "use strict";
        var a = {
            init: function() {
                "rtl" === T1.settings.siteDirection && b.alignCtaSections()
            },
            swapElements: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = $(a[b]);
                    c.find("i").length && c.find("i").each(function() {
                        $(this).parent().prepend($(this).clone()),
                        $(this).remove()
                    })
                }
            },
            swapIcons: function() {
                b.swapElements($(".readMore")),
                b.swapElements($(".promo-headlines")),
                b.swapElements($(".promo-highlighting")),
                b.swapElements($(".promotions .darker h3")),
                b.swapElements($(".tablesorter-header-inner"))
            },
            alignCtaSections: function() {
                $(".cta-parallax").each(function() {
                    $(this).hasClass("left-aligned") ? $(this).toggleClass("left-aligned right-aligned") : $(this).toggleClass("right-aligned left-aligned")
                })
            }
        }
          , b = a;
        T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.priceTable = function() {
        "use strict";
        var a = {
            classes: {
                priceTable: "price-table",
                stackTable: "stack-table",
                fixedColumn: "fixed-column",
                tableResponsive: "table-responsive",
                priceSection: "price-section"
            },
            subscriptions: [],
            init: function() {
                c.checkState();
                var a = T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, function(b) {
                    T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, function(a) {
                        c.checkState()
                    }),
                    a.unsubscribe()
                });
                T1.channels.dialog.subscribe(d.MATERIALBOX_OPENED, function(a) {
                    c.checkState(a.container)
                }),
                T1.channels.dialog.subscribe(d.MATERIALBOX_CLOSED, function(a) {
                    c.reset(b(".overlayerWrapper"))
                }),
                T1.channels.global.subscribe(d.COLLAPSIBLE_PANEL_EXPAND, function(a) {
                    c.reset(a.panel)
                }),
                T1.channels.finance.subscribe(d.FINANCE_RATES_LOADED, function(a) {
                    c.reset(b("body"))
                })
            },
            initMobile: function() {
                b("." + c.classes.priceSection + " .dropdown-menu a").on("click", c.dropdownSortChanged)
            },
            initSection: function(a) {
                if (!a.find("." + c.classes.fixedColumn).length) {
                    var e = a.find("." + c.classes.priceTable + ":not(." + c.classes.stackTable + ")");
                    c.renderFixedColumn(e).bind("sortEnd", function() {
                        T1.breakpoints.list[T1.breakpoints.currentBP()] <= d.SCREEN_XTRASMALL && c.renderFixedColumn(e)
                    });
                    var f = function() {
                        T1.breakpoints.list[T1.breakpoints.currentBP()] <= d.SCREEN_XTRASMALL && c.renderFixedColumn(e)
                    };
                    b(".overlayerWrapper").length ? c.subscriptions.push(T1.channels.dialog.subscribe(d.PAGEOVERLAYER_RESIZE, f)) : c.subscriptions.push(T1.channels.global.subscribe(d.ON_WIN_RESIZE, f))
                }
            },
            dropdownSortChanged: function(a) {
                var d = b(a.target)
                  , e = d.closest("." + c.classes.priceSection).find("." + c.classes.priceTable);
                a.preventDefault(),
                c.setSortItemValue(d),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: d
                }),
                e.trigger("sorton", [[[d.data("sort-column"), d.data("sort-type")]]])
            },
            setSortItemValue: function(a) {
                a.closest(".dropdown-menu").find("li a").removeClass("selected"),
                a.closest(".dropdown").find(".dropdown-toggle >span:not(.icon)").html(a.html()),
                a.addClass("selected")
            },
            renderFixedColumn: function(a) {
                if (a.is(":visible")) {
                    c.clearFixedColumn(a);
                    var d = a.closest("." + c.classes.priceSection)
                      , e = b("<div/>").addClass(c.classes.tableResponsive).addClass("fixed-content").appendTo(d)
                      , f = a.clone().addClass(c.classes.fixedColumn).appendTo(e);
                    f.find("th:not(:first-child),td:not(:first-child), caption").remove(),
                    a.find("th:first-child, td:first-child").css({
                        width: f.width(),
                        "min-width": f.width(),
                        "max-width": f.width(),
                        visibility: "hidden"
                    }),
                    f.find("tr").each(function(c, d) {
                        b(this).height(a.find("tr:eq(" + c + ")").height())
                    }),
                    f.find(".tablesorter-header-inner:first()").click(function() {
                        a.trigger("sorton", [[[0, "n"]]]),
                        c.renderFixedColumn(a)
                    })
                }
                return a
            },
            reset: function(a) {
                T1.breakpoints.list[T1.breakpoints.currentBP()] <= d.SCREEN_XTRASMALL && a.find("." + c.classes.priceTable + ":not(." + c.classes.stackTable + ")").each(function() {
                    var a = b(this)
                      , d = a.closest("." + c.classes.priceSection);
                    c.renderFixedColumn(a),
                    c.clearToast(d),
                    c.toast(d)
                })
            },
            checkState: function(a) {
                T1.breakpoints.list[T1.breakpoints.currentBP()] > d.SCREEN_XTRASMALL ? (c.clearFixedColumn(b("." + c.classes.priceSection + " ." + c.classes.priceTable + ":not(." + c.classes.stackTable + ")")),
                c.clearTokens(),
                c.clearToasts()) : setTimeout(function() {
                    b((a || b).find("." + c.classes.priceSection + ":not(:has(." + c.classes.stackTable + "))")).each(function() {
                        var a = b(this);
                        c.initSection(a),
                        c.toast(a)
                    })
                }, 0)
            },
            toast: function(a) {
                T1.channels.dialog.publish(T1.constants.TOAST_CUSTOM, {
                    customContainer: a,
                    css: {
                        top: a.height() > 240 ? 120 : a.height() / 2 - 30
                    }
                })
            },
            clearFixedColumn: function(a) {
                a.each(function() {
                    var a = b(this);
                    a.closest("." + c.classes.priceSection).find("." + c.classes.fixedColumn).closest("." + c.classes.tableResponsive).remove(),
                    a.find("th:first-child, td:first-child").removeAttr("style")
                })
            },
            clearTokens: function() {
                for (var a = 0; a < c.subscriptions.length; a++)
                    c.subscriptions[a].unsubscribe();
                c.subscriptions = []
            },
            clearToasts: function() {
                var a = b("." + c.classes.priceSection + " >.toast");
                a.length && a.remove()
            },
            clearToast: function(a) {
                a.find(" >.toast").remove()
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initMobile: a.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.include = function() {
        "use strict";
        var a = {
            init: function() {
                for (var a = [], d = [], e = 0; e < c.externals.length; e++)
                    a.push(b.loadScript(c.externals[e].src)),
                    d.push(c.externals[e].done);
                b.when(a).done(d)
            }
        }
          , c = {
            init: a.init,
            externals: T1.include && T1.include.externals || []
        };
        return c
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.shoppingCart = function() {
        "use strict";
        var a = {
            pathB2cAggregator: T1.settings.cpB2cAggrHost || "//cpb2csa.toyota-europe.com/",
            pathCartService: T1.settings.cpCartItems || "api/users/{uuid}/cart",
            userDataKey: T1.constants.NAMESPACE_BASE + ".user.shoppingCart",
            shoppingClass: ".shopping-cart",
            showCart: "show-cart",
            $shoppingCart: null,
            init: function() {
                a.$shoppingCart = b(a.shoppingClass),
                T1.channels.cp.subscribe(T1.constants.E_STORE_CART_UPDATE, a.update),
                T1.channels.mytoyota.subscribe(T1.constants.MY_TOYOTA_LOGIN_SUCCESS, a.initCart),
                T1.channels.sso && T1.channels.sso.config && T1.channels.sso.subscribe(T1.channels.sso.config.events.logoutOk, a.clearCart)
            },
            initCart: function(c) {
                var d = localStorage[a.userDataKey];
                if (d && "undefined" != d)
                    try {
                        return a.update(JSON.parse(d)),
                        void T1.channels.navigation.publishAsync(T1.constants.NAVIGATION_RESIZE_BREADCRUMB, {})
                    } catch (e) {
                        console.log("Failed updating shoppingCart " + d + "\n" + e)
                    }
                if (c && c.ssoData && (c = c.ssoData) && c.uuid && c.token) {
                    var f = {};
                    f["X-TME-TOKEN"] = c.token,
                    f["X-TME-LC"] = T1.settings.language + "-" + T1.settings.country;
                    var g = "//" + a.pathB2cAggregator.replace(/(^(\s)*(https?:)?\/\/)|\/(\s)*/gi, "") + "/" + a.pathCartService.replace(/^(\s)*\//, "");
                    b.ajax({
                        url: g.replace("{uuid}", c.uuid),
                        cache: !1,
                        type: "GET",
                        headers: f
                    }).done(function(b) {
                        if (b)
                            try {
                                var c = "string" == typeof b ? JSON.parse(b) : b;
                                if (!c || !c.cartItemModels || c.cartItemModels.length <= 0)
                                    return;
                                b = {
                                    count: c.cartItemModels.length
                                },
                                a.update(b)
                            } catch (e) {
                                console.log("Failed parsing data " + b + "\n" + e)
                            }
                    })
                }
            },
            update: function(c) {
                if (c) {
                    try {
                        localStorage.setItem(a.userDataKey, JSON.stringify(c))
                    } catch (e) {}
                    c.count > 0 ? (a.$shoppingCart.hasClass(a.showCart) || a.$shoppingCart.addClass(a.showCart),
                    b("#cart-quantity").html(c.count)) : a.$shoppingCart.removeClass(a.showCart)
                }
            },
            clearCart: function() {
                a.$shoppingCart.removeClass(a.showCart),
                localStorage.removeItem(a.userDataKey)
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.racingComponent = function() {
        var b = {
            racingComponent: a.$("#racing"),
            init: function() {
                b.racingComponent.length > 0 && b.getRacingData()
            },
            getRacingData: function() {
                var a = b.racingComponent.data("url") || "/external/data/sys/data/external/racing";
                $.ajax({
                    url: a
                }).done(b.processRacingTable).fail(b.hideComponent)
            },
            processRacingTable: function(a) {
                var c = "string" == typeof a ? a : a.content
                  , d = b.racingComponent.find(".racing-table");
                if (!c || a.info)
                    return b.hideComponent(a);
                var e = b.transform(c);
                if (!e)
                    return b.hideComponent({
                        info: "no table was present in the scraped data"
                    });
                d.append(e),
                T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                    target: d
                })
            },
            transform: function(a) {
                var b = $("<div></div>").html(a)
                  , c = b.find("table");
                return c.length > 0 ? c.removeClass("tableizer-table").addClass("table") : null
            },
            hideComponent: function(a) {
                a || (a = {}),
                console.warn("Racing component will be hidden: " + (a.info || a.responseText || "")),
                b.racingComponent.css({
                    display: "none"
                })
            }
        };
        return {
            init: b.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.breadcrumb = function() {
        "use strict";
        var a = {
            breadCrumbs: {
                "menu-breadcrumb-xs": null,
                "menu-breadcrumb": null
            },
            initBreadCrumb: function() {
                c.setBreadcrumbWidth(),
                c.centerArrow()
            },
            init: function() {
                T1.channels.navigation.subscribe(d.NAVIGATION_UPDATE_BREADCRUMB, c.update),
                T1.channels.global.subscribe(d.ON_BREAKPOINT_CHANGE, c.setBreadcrumbsVisibleItems),
                T1.channels.global.subscribe(d.ON_WIN_RESIZE, c.setBreadcrumbWidth),
                T1.channels.navigation.subscribe(d.NAVIGATION_RESIZE_BREADCRUMB, c.setBreadcrumbWidth)
            },
            initDesktop: function() {
                c.getBreadCrumbObject().find("li").size() && c.initBreadCrumb()
            },
            setBreadcrumbsVisibleItems: function() {
                if ("xs" !== b.safe("T1.breakpoints.currentBP")()) {
                    var a = c.getBreadCrumbObject({
                        desktop: !0
                    })
                      , d = a.find("li").css("display", "")
                      , e = a.innerWidth()
                      , f = 1
                      , g = 0;
                    b("#pagecontent, .overlayerWrapper.inpage .overlayerContent").css("margin-top", "");
                    for (var h = d.length - 1; h >= 0; h--) {
                        var i = b(d[h])
                          , j = i.outerWidth(!0);
                        g += j,
                        g > e && (g = j,
                        f++),
                        f > 2 && i.hide()
                    }
                    T1.utilities.isIOS() && c.redrawArrow(d.filter(".active"))
                }
            },
            redrawArrow: function(a) {
                a.removeClass("active"),
                setTimeout(function() {
                    a.find(".sprite-menu-dark-arrow").css({
                        opacity: 1
                    }),
                    a.addClass("active")
                }, 0)
            },
            centerArrow: function() {
                var a = c.getBreadCrumbObject().find(".active .sprite-menu-dark-arrow");
                if (a.size()) {
                    var d = "rtl" === T1.settings.siteDirection ? {
                        "margin-right": a.parent().width() / 2 - a.width() / 2 + "px"
                    } : {
                        "margin-left": a.parent().width() / 2 - a.width() / 2 + "px"
                    };
                    a.css(d),
                    b.support.transition.end ? a.one(b.support.transition.end, function() {
                        a.css({
                            opacity: 1
                        })
                    }) : a.css({
                        opacity: 1
                    })
                }
            },
            update: function(a) {
                if (a && 0 !== a.length) {
                    var b = {
                        desktop: "",
                        mobile: ""
                    };
                    b.desktop += "</li>",
                    b.mobile = '<li><a href="' + (a.length < 2 ? "/" : a[a.length - 2].href),
                    b.mobile += '" itemprop="url"><span class="icon icon-chevron-left"></span>',
                    b.mobile += "<span>" + (T1.labels.goTo || "[Go to] ") + (a.length < 2 ? T1.labels.homepage || "[homepage]" : a[a.length - 2].name) + "</span></a></li>",
                    c.updateMobileInstance(b.mobile)
                }
            },
            updateDesktopInstance: function(a) {
                c.createBreadCrumb({
                    desktop: !0
                }).html(a),
                c.initBreadCrumb()
            },
            updateMobileInstance: function(a) {
                c.createBreadCrumb({
                    mobile: !0
                }).html(a)
            },
            createBreadCrumb: function(a) {
                a || (a = {});
                var d = c.getBreadCrumbObject(a);
                if (!d.find("li").size()) {
                    if (!d.size()) {
                        var e = "menu-breadcrumb" + (a.desktop ? "" : "-xs")
                          , f = b('<ol id="' + e + '"></ol>');
                        b(a.desktop ? ".navbar-inner" : ".navbar").append(b('<div class="breadcrumb ' + (a.desktop ? "hidden-xs" : "visible-xs") + '"></div>').append(f)),
                        d = c.breadCrumbs[e] = f
                    }
                    a.desktop && c.initBreadCrumb()
                }
                return d
            },
            getBreadCrumbObject: function(a) {
                a = a || {};
                var d = !a.mobile && (a.dekstop || "xs" !== b.safe("T1.breakpoints.currentBP")())
                  , e = "menu-breadcrumb" + (d ? "" : "-xs");
                return c.breadCrumbs[e] = c.breadCrumbs[e] || b("#" + e),
                c.breadCrumbs[e]
            },
            setBreadcrumbWidth: function() {
                if ("xs" !== b.safe("T1.breakpoints.currentBP")()) {
                    var a = b("#dropdown-button-car").parent()
                      , d = b("#dropdown-button-my-toyota").parent()
                      , e = b("#dropdown-button-my-profile").parent()
                      , f = b("#shopping-cart").parent()
                      , g = b("#logo-small").parent()
                      , h = b(".navbar-inner")
                      , i = h.width() - a.outerWidth() - d.outerWidth() - e.outerWidth() - f.outerWidth() - g.outerWidth() - 4
                      , j = c.getBreadCrumbObject({
                        desktop: !0
                    }).parent();
                    j.outerWidth(i),
                    c.setActiveBreadcrumbItemMaxWidth(j)
                }
            },
            setActiveBreadcrumbItemMaxWidth: function(a) {
                var c = a.find("#menu-breadcrumb");
                if (c.length) {
                    var d = c.children(":not(.active)")
                      , e = c.find("li.active")
                      , f = 0
                      , g = 0;
                    d.length && e.length && (d.each(function() {
                        f += b(this).outerWidth(!0)
                    }),
                    g = c.innerWidth() - f,
                    g -= parseInt(e.css("margin-right")),
                    g--),
                    g ? e.css("max-width", g + "px") : e.css("max-width", "initial")
                }
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            initDesktop: a.initDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.dropDownList = function() {
        "use strict";
        var a = {
            filterPaneButtonSelector: "filter-pane-button",
            init: function() {
                var c = b(".search-filter-options");
                T1.channels.form.subscribe(T1.constants.DROPDOWN_OPEN, function(b) {
                    if (!b || !b.id)
                        throw new Error("DROPDOWN_OPEN with no id");
                    a.openDropDownWithId(b.id)
                }),
                T1.channels.form.subscribe(T1.constants.DROPDOWN_CLOSE, function(b) {
                    if (!b || !b.id)
                        throw new Error("DROPDOWN_CLOSE with no id");
                    a.closeDropDownWithId(b.id)
                }),
                c.length && T1.channels.global.subscribe(T1.constants.ON_DOC_CLICK, a.onDOCClick),
                b(document).on("click", "." + a.filterPaneButtonSelector, function(c) {
                    c.preventDefault();
                    var d = b(this).closest(".dropdown-container");
                    d.find(".expanded").length > 0 ? a.closeDropDown(d) : a.openDropDown(d)
                })
            },
            getComponents: function(a) {
                return {
                    filterOptions: b(".search-filter-options", a),
                    content: b(".search-filter-options-inner", a),
                    iconArr: b(".icon", a)
                }
            },
            trackDropDown: function(a, b) {
                "true" === a.attr("data-track") && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a,
                    extraData: {
                        event: {
                            value: b
                        }
                    }
                })
            },
            openDropDown: function(b) {
                var c = a.getComponents(b);
                c.content && !c.content.is(":visible") && (b.parent().find(".dropdown").addClass("expanded"),
                c.filterOptions.addClass("expanded"),
                c.iconArr.removeClass("icon-chevron-down").addClass("icon-chevron-up"),
                c.content.slideDown(400),
                a.trackDropDown(b, "open"))
            },
            closeDropDown: function(b) {
                var c = a.getComponents(b);
                c.content && c.content.is(":visible") && (c.iconArr.removeClass("icon-chevron-up").addClass("icon-chevron-down"),
                c.filterOptions.removeClass("expanded"),
                b.parent().find(".dropdown").removeClass("expanded"),
                c.content.slideUp(400),
                a.trackDropDown(b, "close"))
            },
            openDropDownWithId: function(c) {
                var d = b("#" + c);
                d.length > 0 && a.openDropDown(d)
            },
            closeDropDownWithId: function(c) {
                var d = b("#" + c);
                d.length > 0 && a.closeDropDown(d)
            },
            onDOCClick: function(c) {
                0 === b(c.target).closest(".dropdown-container").find(".search-filter-options").length && b(".search-filter-options.expanded").each(function(c) {
                    var d = b(this)
                      , e = d.closest(".dropdown-container");
                    a.closeDropDown(e)
                })
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.topicFilter = function() {
        "use strict";
        var a = {
            $filterFor: {},
            totalTopicsFiltering: {},
            $activeFilters: {},
            init: function() {
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPEN, a.initialize),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSE, a.initialize),
                a.initialize()
            },
            initialize: function() {
                var c = b("[data-filter-for]");
                c.size() && (a.$filterFor = {},
                a.totalTopicsFiltering = {},
                a.$activeFilters = {},
                b(".btn-update", c).off("click", a.triggerDropdownClose).on("click", a.triggerDropdownClose),
                b("input[type='checkbox']", c).off("change", a.onCheckboxChange).on("change", a.onCheckboxChange),
                c.each(function() {
                    var c = b(this)
                      , d = c.attr("data-filter-for");
                    a.$filterFor[d] = c,
                    a.$activeFilters[d] = b(".topic-active-filters", c)
                }))
            },
            triggerDropdownClose: function() {
                T1.channels.form.publishAsync(T1.constants.DROPDOWN_CLOSE, {
                    id: b(this).closest(".dropdown-container").attr("id")
                })
            },
            onCheckboxChange: function(c) {
                var d = b(this)
                  , e = d.attr("id")
                  , f = e.split("-");
                f && f.length > 0 && (f = f[0]),
                d.is(":checked") ? a.addFilter(f, e, d.val()) : a.removeFilter(f, e, d.val())
            },
            addFilter: function(c, d, e) {
                b("[data-topics|='" + c + "']").each(function() {
                    var c = b(this)
                      , e = c.attr("id");
                    if (!e || "" === e.trim())
                        throw new Error("Article id not defined for " + c.html());
                    if (c.attr("data-topics").indexOf(d) < 0)
                        return void (a.totalTopicsFiltering[e] || c.hide());
                    a.totalTopicsFiltering[e] ? a.totalTopicsFiltering[e] && (a.totalTopicsFiltering[e] = a.totalTopicsFiltering[e] + 1) : a.totalTopicsFiltering[e] = 1,
                    c.show()
                }),
                a.addTopicToActiveFilters(c, d, e)
            },
            removeFilter: function(c, d, e) {
                var f = b("[data-topics|='" + c + "']");
                f.each(function() {
                    var c = b(this)
                      , e = c.attr("id");
                    if (!e || "" === e.trim())
                        throw new Error("Article id not defined for " + c.html());
                    c.attr("data-topics").indexOf(d) >= 0 && a.totalTopicsFiltering[e] && (1 === a.totalTopicsFiltering[e] ? (delete a.totalTopicsFiltering[e],
                    c.hide()) : a.totalTopicsFiltering[e] = a.totalTopicsFiltering[e] - 1)
                }),
                a.removeTopicFromActiveFilters(c, e),
                f.find(":visible").length <= 0 && f.show()
            },
            addTopicToActiveFilters: function(c, d, e) {
                var f = b("<span/>").attr("data-filter-keyword", e).addClass("search-result-selected-filter").text(e).appendTo(a.$activeFilters[c])
                  , g = function(a) {
                    b("#" + d).off("click", g).click()
                };
                b("<i/>").addClass("icon icon-remove search-result-remove-filter").appendTo(f).on("click", g);
                a.toggleActiveFiltersList(c)
            },
            removeTopicFromActiveFilters: function(c, d) {
                b("[data-filter-keyword='" + d + "']", a.$activeFilters[c]).remove(),
                a.toggleActiveFiltersList(c)
            },
            toggleActiveFiltersList: function(b) {
                var c = a.$activeFilters[b]
                  , d = c.find(".filter-prefix");
                d.length > 0 && (1 === c.children().length ? d.hide() : d.show())
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.redirect = function() {
        "use strict";
        var a = {
            init: function() {
                T1.channels.global.subscribe(T1.constants.GENERAL_REDIRECT, a.redirect),
                T1.channels.global.subscribe(T1.constants.GENERAL_RELOAD, a.reload)
            },
            redirect: function(a) {
                a || (a = {});
                var b = a.window || window
                  , c = a.url;
                c && (b.location.href = c)
            },
            reload: function(a) {
                a || (a = {}),
                (a.window || window).location.reload()
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.customerPortal = function() {
        "use strict";
        var a = {
            files: null,
            cpOrBaseUrl: T1.settings.cpOrBaseUrl,
            maincontent: null,
            cpObj: null,
            cpInjected: null,
            pathB2cAggregator: T1.settings.cpB2cAggrHost || "//cpb2csa.toyota-europe.com/",
            pathVehiclesService: T1.settings.cpVehicleItems || "/api/users/{uuid}/vehicles",
            btPageObj: {
                page: {
                    contentgroup: "E_CustomerPortal",
                    sectionlv1: "customerportal",
                    category: "page",
                    name: "my-toyota",
                    country: T1.settings.country
                }
            },
            init: function() {
                var c = a;
                c.maincontent = b("#pagecontent"),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_SHOW, c.show),
                T1.channels.cp.subscribe(T1.constants.MY_TOYOTA_USERPROFILE, c.userProfile),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_PAYPAL_OPEN, c.paypal.openwindow),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_PAYPAL_CALLBACK, c.paypal.callback),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_CSS_SET, c.cssSet),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_PROFILE, c.openOnlineRetailProfilePage),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_DASHBOARD_OPEN, c.goToCPDashboard),
                /\?(.*)token=/.test(window.location.href) && c.paypal.callback(),
                /\/tme[\/\s]*$/.test(window.location.href) && (window.location.hash = "/my-toyota/"),
                c.hasMyToyotaMobileLinks() ? b(".my-toyota.dropdown").first().removeClass("hidden-xs") : b(".my-toyota.dropdown").addClass("hidden-xs"),
                T1.settings.cpBaseUrl && T1.settings.iframeDomainWhiteList && T1.settings.iframeDomainWhiteList.length && T1.settings.iframeDomainWhiteList.push(T1.settings.cpBaseUrl),
                c.overrideMyProfileLink()
            },
            overrideMyProfileLink: function() {
                var a = b("#dropdown-menu-my-profile").find('[href="#/publish/my_toyota_userprofile"]');
                a.length && a.attr({
                    href: "#/my-toyota/profile"
                })
            },
            initTagging: function() {
                window.t1DataLayer = a.btPageObj
            },
            show: function(c) {
                var d = a;
                T1.channels.statistics.publish(T1.constants.STATS_BASE_UPDATE, {
                    baseObj: a.btPageObj
                }),
                d.getFileLocations(d.loadCpWithInjection);
                var e = b("#dropdown-menu-my-toyota");
                e && e.parent().hasClass("open") && e.trigger("click"),
                "collapse" !== b("#navigation .dropdown").attr("data-bt-state") && T1.channels.navigation.publish(T1.constants.NAVIGATION_PRIMARY_COLLAPSE, {
                    target: "#dropdown-button-car"
                })
            },
            openOnlineRetailProfilePage: function(b) {
                var c = a.cpOrBaseUrl.replace(/\/?\s*$/, "") + "/scripts/core.js";
                T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                    hashAction: "customer_portal_profile",
                    styleClass: "free-layout or-fullwidth-material-box",
                    html: '<div id="app"/>',
                    globalClose: !1
                }),
                require([c], function(a) {
                    a.renderProfile(b)
                })
            },
            getFileLocations: function(c) {
                if (a.files)
                    return c();
                var d = a
                  , e = (T1.settings.cpBaseUrl || "//s3-eu-west-1.amazonaws.com/mytoyota-b2c-ui-no-iframe-dev").replace(/^(http:)|\/$/, "") + "/";
                d.files = {},
                T1.settings && T1.settings.cpInjection && "string" == typeof T1.settings.cpInjection && "" !== T1.settings.cpInjection ? (/\.js(\s)*$/i.test(T1.settings.cpInjection) ? d.files.scripts = [T1.settings.cpInjection.replace(/\.js(\s)*$/i, "")] : "true" !== T1.settings.cpInjection.toLowerCase() && (d.files.scripts = ["scripts/" + T1.settings.cpInjection + ".main.amd"]),
                d.fileLocationsTransformer(e, c)) : b.ajax({
                    url: e + "version.json"
                }).done(function(a) {
                    a.main && (d.files.scripts = "string" == typeof a.main ? a.main.split(",") : a.main,
                    a.styles && (d.files.styles = "string" == typeof a.styles ? a.styles.split(",") : a.styles)),
                    d.fileLocationsTransformer(e, c)
                })
            },
            fileLocationsTransformer: function(b, c) {
                var d = a;
                d.files.scripts || (d.files.scripts = ["scripts/main"]);
                for (var e in d.files.scripts)
                    d.files.scripts[e] = d.files.scripts[e].replace(/^\/(?!\/)|\.js$/gi, ""),
                    /^(http(s)?:)?\/\//.test(d.files.scripts[e]) || (d.files.scripts[e] = b + d.files.scripts[e]);
                d.files.styles || (d.files.styles = [d.files.scripts[0].replace("/scripts/", "/styles/").replace(/(.amd)?(.js)?$/i, "")]);
                for (var f in d.files.styles)
                    d.files.styles[e] = d.files.styles[e].replace(/^\/(?!\/)|\.css$/gi, ""),
                    /^(http(s)?:)?\/\//.test(d.files.styles[e]) || (d.files.styles[e] = b + d.files.styles[e]),
                    d.files.styles[f] = "css!" + d.files.styles[f];
                c && c()
            },
            loadCpWithInjection: function(c) {
                var d = a;
                d.cpInjected = b("#cp"),
                d.cpInjected.length <= 0 && d.maincontent.prepend('<div id="cp" class="injected-code"></div>'),
                b("#inlineIframe").remove(),
                requirejs.config({
                    paths: {
                        customerPortal: T1.request.getQueryStringParameter("cp") || d.files.scripts
                    },
                    map: {
                        "*": {
                            css: (T1.settings.S3BaseUrl || "").replace(/\/$/, "") + "/external.scripts/requireCss.min.js"
                        }
                    }
                }),
                requirejs(["lodash", "postal", "customerPortal"].concat(d.files.styles), function(a, b, c) {
                    b.publishAsync({
                        channel: "com.toyota.tme.cp",
                        topic: T1.constants.CUSTOMER_PORTAL_LOADED,
                        data: c
                    })
                })
            },
            createObj: function(a) {
                var c = a.id || "cpObj"
                  , d = a.styleClass || "loadCP"
                  , e = a.url;
                return b("<iframe></iframe>").attr({
                    id: c,
                    width: "100%",
                    height: "100%",
                    class: d,
                    src: e
                })
            },
            hasMyToyotaMobileLinks: function() {
                for (var a = b("#myToyota > a"), c = "", d = 0; d < a.length; d++)
                    if ((c = a[d].className) && -1 == c.indexOf("hidden-xs"))
                        return !0;
                return !1
            },
            goToCPDashboard: function(a) {
                window.location.replace(T1.constants.URL_CUSTOMER_PORTAL_DASHBOARD + "#" + (a || ""))
            },
            hasMyToyotaLangSelector: function() {
                return b("#dropdown-menu-my-toyota #myLanguage").length > 0
            },
            userProfile: function() {
                T1.channels.dialog.publishAsync(T1.constants.PAGEOVERLAYER_OPEN, {
                    iframe: !0,
                    url: a.path + "#profile"
                })
            },
            hide: function() {
                var b = a;
                b.cpObj.css({
                    display: "none"
                }),
                b.maincontent.css({
                    display: "block"
                })
            },
            paypal: {
                _win: null,
                openwindow: function(b) {
                    b || (b = {}),
                    b.url && (!b.target || "_new" !== b.target && "_blank" !== b.target ? (a.paypal._win = window,
                    a.paypal._win.location.href = b.url) : a.paypal._win = window.open(b.url))
                },
                callback: function() {
                    localStorage.setItem(T1.constants.CUSTOMER_PORTAL_LS_PAYPAL, JSON.stringify(T1.request.getQueryStringParameters()))
                }
            },
            cssSet: function(b) {
                if (b.length)
                    for (var c = 0; c < b.length; c++)
                        a.cssSetRule(b[c]);
                else
                    a.cssSetRule(b)
            },
            cssSetRule: function(a) {
                a || (a = {});
                try {
                    a.selector && a.css && b(a.selector).css(a.css)
                } catch (e) {
                    console.log("Error while setting CSS rule" + e)
                }
            }
        };
        return {
            init: a.init,
            getFiles: a.getFileLocations
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.iframeInline = function() {
        var a = {
            maincontent: null,
            init: function() {
                a.maincontent = b("#pagecontent"),
                T1.channels.mytoyota.subscribe(T1.constants.IFRAME_INLINE_SHOW, a.show)
            },
            show: function(c) {
                var d = c.url;
                T1.utilities && T1.utilities.whitelist && T1.utilities.whitelist.test(d) && (b(".injected-code").children().remove(),
                a.iframe = b("#inlineIframe"),
                a.iframe.length > 0 ? a.iframe.attr("src", d) : (a.maincontent.addClass("cp-visible"),
                a.iframe = a.create({
                    url: d
                })),
                a.maincontent.prepend(a.iframe));
                var e = b("#dropdown-menu-my-toyota");
                e && e.parent().hasClass("open") && e.trigger("click"),
                "collapse" !== b("#navigation .dropdown").attr("data-bt-state") && T1.channels.navigation.publish(T1.constants.NAVIGATION_PRIMARY_COLLAPSE, {
                    target: "#dropdown-button-car"
                })
            },
            create: function(a) {
                var c = a.id || "inlineIframe"
                  , d = a.styleClass || "loadCP"
                  , e = a.url;
                return b("<iframe></iframe>").attr({
                    id: c,
                    width: "100%",
                    height: "100%",
                    class: d,
                    src: e
                })
            }
        };
        return {
            init: a.init,
            show: a.show
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.scrollprompt = function() {
        "use strict";
        var a = {
            mainfocus: null,
            megamenu: null,
            mainfocusPrompt: {
                element: null,
                height: null,
                width: null,
                spacing: 20
            },
            megamenuPrompt: {
                element: null,
                height: null,
                width: null,
                spacing: 20
            },
            init: function() {
                var c = a;
                if (c.mainfocus = b("#mainfocus"),
                T1.ctx && c.mainfocus.length) {
                    !1 === (c.mainfocus.find(".carousel").length > 0 && c.mainfocus.find(".carousel-3d").length < 1) && (c.mainfocusPrompt.element = c.mainfocus.find(".scrollprompt"),
                    c.mainfocusPrompt.height = c.mainfocusPrompt.element.outerHeight(),
                    c.mainfocusPrompt.width = c.mainfocusPrompt.element.outerWidth(),
                    T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, c.handleWindowResize),
                    T1.channels.global.subscribe(T1.constants.GLOBAL_SCROLL, c.handleWindowScroll),
                    T1.utilities.isTouchCapable && c.mainfocus.on("touchstart touchend", c.handleWindowScroll),
                    c.mainfocusPrompt.element.on("click touchstart touchend", function(a) {
                        c.onPromptClick(a, c.mainfocusPrompt)
                    }),
                    c.positionMainfocusPrompt())
                }
                return T1.channels.navigation.subscribe(T1.constants.NAVIGATION_PRIMARY_EXPAND, c.handleMegamenuOpen),
                c.megamenu = b("#dropdown-menu-car"),
                c.megamenuPrompt.element = c.megamenu.find(".scrollprompt"),
                c.megamenuPrompt.height = c.megamenuPrompt.element.outerHeight(),
                c.megamenuPrompt.width = c.megamenuPrompt.element.outerWidth(),
                c.megamenuPrompt.element.on("click touchstart touchend", function(a) {
                    c.onPromptClick(a, c.megamenuPrompt)
                }),
                null
            },
            positionMainfocusPrompt: function() {
                var c = a
                  , d = null
                  , e = c.mainfocus.find(".hero-unit").height() || c.mainfocus.height()
                  , f = b(window).scrollTop()
                  , g = window.innerHeight || document.documentElement.clientHeight;
                (c.mainfocusPrompt.element.hide(),
                d = e + c.mainfocus.offset().top > g ? g - (c.mainfocusPrompt.height + c.mainfocusPrompt.spacing) - f : e + c.mainfocus.offset().top - (c.mainfocusPrompt.height + c.mainfocusPrompt.spacing) - f,
                !0 == !("true" !== T1.settings.enableEprivacy || !T1.settings.eprivacy)) && (!1 == !!T1.utilities.cookies.getCookie(T1.constants.EPRIVACY_COOKIE_NAME) && (d -= 37));
                e && c.mainfocusPrompt.element.css("top", d + "px"),
                "xs" !== T1.breakpoints.currentBP() && c.mainfocusPrompt.element.show()
            },
            handleWindowScroll: function(b) {
                if (!0 !== b.initialScroll) {
                    var c = a;
                    T1.channels.global.unsubscribe(T1.constants.ON_WIN_RESIZE, c.handleWindowResize),
                    T1.channels.global.unsubscribe(T1.constants.GLOBAL_SCROLL, c.handleWindowScroll),
                    T1.utilities.isTouchCapable && c.mainfocus.off("touchstart touchend", c.handleWindowScroll),
                    c.hidePrompt(c.mainfocusPrompt.element)
                }
            },
            handleWindowResize: function() {
                var b = a;
                b.mainfocusPrompt.element.is(":visible") && b.positionMainfocusPrompt(),
                b.megamenuPrompt.element.is(":visible") && b.positionMegamenuPrompt()
            },
            handleMegamenuOpen: function(c) {
                var d = a;
                0 === b("#dropdown-menu-car").scrollTop() && (d.megamenuPrompt.element.removeClass("fadeout"),
                b.when(d.positionMegamenuPrompt(1e3).done(function() {
                    T1.utilities.isTouchCapable && d.megamenu.on("touchstart touchend", d.handleMegaMenuScroll),
                    d.megamenu.on("scroll", d.handleMegaMenuScroll)
                })))
            },
            positionMegamenuPrompt: function(c) {
                c = void 0 === c ? 0 : c;
                var d = b.Deferred()
                  , e = a
                  , f = window.innerHeight || document.documentElement.clientHeight
                  , g = e.megamenu.scrollTop();
                e.megamenuPrompt.element.hide();
                setTimeout(function() {
                    if ("xs" === T1.breakpoints.currentBP())
                        return "";
                    if (!0 == e.megamenu.find(".maincontainer").outerHeight() > e.megamenu.height()) {
                        e.megamenuPrompt.element.show();
                        var a = f - e.megamenu.offset().top - e.megamenuPrompt.height - e.megamenuPrompt.spacing + g;
                        !0 == !("true" !== T1.settings.enableEprivacy || !T1.settings.eprivacy) && !1 == !!T1.utilities.cookies.getCookie(T1.constants.EPRIVACY_COOKIE_NAME) && (a -= 37),
                        e.megamenuPrompt.element.css("top", a),
                        e.megamenuPrompt.element.show(),
                        d.resolve()
                    }
                }, c);
                return d.promise()
            },
            handleMegaMenuScroll: function(b) {
                var c = a;
                c.megamenu.off("scroll", c.handleMegaMenuScroll),
                T1.utilities.isTouchCapable && c.megamenu.off("touchstart touchend", c.handleMegaMenuScroll),
                c.hidePrompt(c.megamenuPrompt.element)
            },
            hidePrompt: function(a) {
                if (!a.hasClass("fadeout")) {
                    a.addClass("fadeout");
                    setTimeout(function() {
                        a.hide()
                    }, 1e3)
                }
            },
            onPromptClick: function(c, d) {
                var e = a
                  , f = d.element[0];
                if (c.preventDefault(),
                c.stopPropagation(),
                d === e.megamenuPrompt)
                    b("#dropdown-menu-car").animate({
                        scrollTop: b("#dropdown-menu-car").outerHeight()
                    }, 1e3);
                else if (d === e.mainfocusPrompt) {
                    var g = b("#navigation").length ? b("#navigation").outerHeight() : 0
                      , h = 0;
                    if (f.hasAttribute("data-scrollto")) {
                        var i = f.getAttribute("data-scrollto")
                          , j = b(f)
                          , k = T1.statistics.getAttributes(j)
                          , l = b("#nav-secondary-level").length ? b("#nav-secondary-level").outerHeight() : 0;
                        l -= parseInt(b(i).css("padding-top")),
                        l < 0 && (l = 0),
                        b.isEmptyObject(k) || T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: j
                        }),
                        h = b(i).offset().top - g - l
                    } else
                        h = b("#mainfocus .hero-unit").outerHeight() - g;
                    b(window).animate({
                        scrollTop: h
                    }, 1e3)
                }
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.brochures = function() {
        "use strict";
        var a = {
            brochureComponent: null,
            init: function() {
                var a = b(".brochure-icon .dropdown");
                a.length && a.on("hide.bs.dropdown", function(a) {
                    b(this).closest(".brochure-link.active").removeClass("active")
                })
            },
            initDesktop: function() {
                c.brochureComponent = b(".brochure-component"),
                c.brochureComponent.size() && c.bindBrochureClick(b(".brochure-link", c.brochureComponent))
            },
            initMobile: function() {
                if (c.brochureComponent = b(".brochures-inpage-mobile .brochure-component"),
                c.brochureComponent.length) {
                    var a, d = (b('<div class="brochures container"></div>'),
                    b(".brochures-inpage-mobile"));
                    c.bindBrochureClick(b(".brochure-link", c.brochureComponent)),
                    b(".mobile-brochure-dropdown a").on("click", function(a) {
                        a.preventDefault();
                        var d = b(this).closest(".dropdown");
                        if (d.length) {
                            d.filter(".open").removeClass("open");
                            var e = b(this).text();
                            d.find(".dropdown-toggle .selected-item").text(e)
                        }
                        var f = b(this).data("item-index")
                          , g = b(this).data("section-index")
                          , h = c.brochureComponent.filter("[data-section-index=" + g + "]")
                          , i = h.removeClass("active").filter("[data-item-index=" + f + "]");
                        i.addClass("active"),
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: i,
                            extraData: {
                                event: {
                                    action: "click_function",
                                    value: "select_via_mobile"
                                }
                            }
                        })
                    }),
                    a = d.find("> .container").first().width(),
                    d.find(".brochure-icon .dropdown-menu").attr("style", "min-width: " + a + "px!important;")
                }
            },
            bindBrochureClick: function(a) {
                a.on(T1.utilities.clickEvent, c.onBrochureClick).find(".dropdown-menu").on(T1.utilities.clickEvent, c.onDropdownMenuClick)
            },
            onBrochureClick: function(a) {
                b(a.target);
                c.isOverlayer(b(a.target)) || (a.preventDefault(),
                a.stopPropagation(),
                c.toggleClick(b(this)))
            },
            onDropdownMenuClick: function(a) {
                var d = b(a.target);
                c.isOverlayer(b(a.target)) || (a.stopPropagation(),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: d
                }))
            },
            isOverlayer: function(a) {
                var c = b.safe("T1.specialLink.selectors") || "";
                return a.add(a.parent()).is(c)
            },
            toggleClick: function(a) {
                a.closest(".brochures").find(".brochure-link.active").not(a).removeClass("active").find(".dropdown.open").removeClass("open"),
                a.toggleClass("active");
                var b = a.find(".dropdown");
                b.toggleClass("open"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a,
                    extraData: {
                        event: {
                            action: "click_function",
                            value: "dropdown_" + (b.hasClass("open") ? "opened" : "closed")
                        }
                    }
                })
            }
        }
          , c = a;
        return {
            init: a.init,
            initDesktop: a.initDesktop,
            initMobile: a.initMobile
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.slideCounter = function() {
        "use strict";
        var a = {
            init: function() {
                T1.channels.media.subscribe(c.SLIDER_ADDCOUNTER, b.initCounter),
                T1.channels.media.subscribe(c.SLIDER_UPDATECOUNTER, b.updateCounterToCurrentSlide)
            },
            initCounter: function(a) {
                var b = a.slideCounter
                  , c = a.initialIndex
                  , d = a.numberOfSlides
                  , e = c + 1
                  , f = b.find(".current-index:first")
                  , g = f[0]
                  , h = g.nextSibling;
                h && h.remove(),
                f.html(e),
                b.find(".counter-bg").append("/" + d)
            },
            updateCounterToCurrentSlide: function(a) {
                var b = a.slideCounter
                  , c = a.activeSlideNumber;
                b.find(".current-index:first").html(c)
            }
        }
          , b = a
          , c = T1.constants;
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.expandableFade = function() {
        "use strict";
        var a = {
            classes: {
                expandableFade: "expandable-fade",
                faded: "faded"
            },
            navSecondaryOnPage: !1,
            navPrimaryOnPage: !1,
            tfsDependentSectionsSelector: [".price-section > .expandable-fade"],
            initDesktop: function() {
                a.setFadingCollapsibleSections(),
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, a.setFadingCollapsibleSections),
                T1.channels.finance.subscribe(d.FINANCE_RATES_LOADED, a.resetTfsDependentSections),
                T1.channels.global.subscribe(T1.constants.TABLE_SORTED, a.onTableSorted)
            },
            onTableSorted: function(a) {
                var b, d = a.$table, e = d.closest("." + c.classes.expandableFade);
                e.length && (b = c.getFadableSectionMaxHeight(e),
                e.css("max-height", b + "px"))
            },
            switchMobile: function() {
                c.clearFadableSections()
            },
            resetTfsDependentSections: function() {
                for (var a = 0; a < c.tfsDependentSectionsSelector.length; a++) {
                    var d = b(c.tfsDependentSectionsSelector[a]);
                    b.each(d, function(a, b) {
                        c.setFadingCollapsibleSectionMaxHeightAndBtn(b)
                    })
                }
            },
            getFadableSectionMaxHeight: function(a) {
                var b = 0
                  , c = 1;
                if (a.hasClass("table-responsive"))
                    for (var d, e = a.find("tr"), f = a.data("rows-to-show"), g = f + 1, h = 0; h < g; h++)
                        d = e.eq(h),
                        b = d ? b + d.outerHeight() : b;
                return b + c
            },
            setFadingCollapsibleSections: function() {
                var a, e = b("." + c.classes.expandableFade);
                if (e.length) {
                    if (a = Object.resolve("T1.breakpoints.list")[b.safe("T1.breakpoints.currentBP")()] <= d.SCREEN_XTRASMALL,
                    c.navPrimaryOnPage = b("#navigation").length > 0,
                    c.navSecondaryOnPage = b("#nav-secondary-level").length > 0,
                    a)
                        return c.clearFadableSections(),
                        null;
                    b.each(e, function(a, b) {
                        c.setFadingCollapsibleSectionMaxHeightAndBtn(b)
                    })
                }
            },
            setFadingCollapsibleSectionMaxHeightAndBtn: function(a) {
                var d = b(a)
                  , e = d.next(".expand-fade-btn")
                  , f = c.getFadableSectionMaxHeight(d)
                  , g = {
                    $fadableSection: d,
                    maxHeight: f
                };
                d.css("max-height", f + "px"),
                e.off("click", c.viewFullFadedSectionClick).on("click", null, g, c.viewFullFadedSectionClick)
            },
            viewFullFadedSectionClick: function(a) {
                var d = a.data.$fadableSection
                  , e = a.data.maxHeight
                  , f = d.hasClass(c.classes.faded)
                  , g = Math.round(d.offset().top)
                  , h = d.closest("section").find("header.section-title")
                  , i = h.length ? Math.round(h.offset().top) : 0
                  , j = i || g;
                f ? d.removeClass(c.classes.faded).css("max-height", "initial") : d.addClass(c.classes.faded).css("max-height", e + "px"),
                "lg" === T1.breakpoints.currentBP() && (c.navPrimaryOnPage && (j -= b("#navigation").height()),
                c.navSecondaryOnPage && (j -= b("#nav-secondary-level").height())),
                b(window).scrollTo(j)
            },
            clearFadableSections: function() {
                var a = b("." + c.classes.expandableFade + "." + c.classes.faded);
                a.length && a.css("max-height", "initial")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            initDesktop: a.initDesktop,
            switchMobile: a.switchMobile
        }
    }()
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
window.T1 = window.T1 || {},
T1.util = T1.util || {},
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c;
    T1.util.a2d = function() {
        function a() {
            _classCallCheck(this, a),
            instance || (instance = T1.util.a2d)
        }
        return _createClass(a, null, [{
            key: "getValidOpeningDaysForOperation",
            value: function(a, b) {
                var d = [];
                return c.forEach(a, function(a) {
                    T1.util.a2d.isOpeningDayValid(a) && T1.util.a2d.isOpeningDayForOperation(a, b) && d.push(a)
                }),
                d
            }
        }, {
            key: "isOpeningDayForOperation",
            value: function(a, b) {
                return !(!a || !a.originalService || "string" != typeof a.originalService) && a.originalService.toLowerCase().trim() === b.toLowerCase().trim()
            }
        }, {
            key: "isOpeningDayValid",
            value: function(a) {
                if (!a || !a.validFrom || !a.validTo)
                    return !1;
                var b = new Date
                  , c = a.validFrom.split("/")
                  , d = a.validTo.split("/")
                  , e = new Date(c[2],c[1] - 1,c[0]);
                return b < new Date(d[2],d[1] - 1,d[0]) && b >= e
            }
        }, {
            key: "openingHourToTimeNr",
            value: function(a) {
                return a.replace(":", "")
            }
        }, {
            key: "dayToIndex",
            value: function(a) {
                if (!a)
                    return null;
                switch (a.toUpperCase()) {
                case "SUN":
                    return 0;
                case "MON":
                    return 1;
                case "TUE":
                    return 2;
                case "WED":
                    return 3;
                case "THU":
                    return 4;
                case "FRI":
                    return 5;
                case "SAT":
                    return 6;
                default:
                    return null
                }
            }
        }, {
            key: "getDaysDisabledFrom",
            value: function(a) {
                for (var b = [], c = 0; c < 7; c++)
                    a[c] || b.push(c);
                return b
            }
        }, {
            key: "generateOpeningTimesStr",
            value: function(a, b, c) {
                if (!a || !a.hours)
                    return "";
                var d = "";
                return a.hours.forEach(function(a) {
                    var e = T1.util.a2d.openingHourToTimeNr(a.startTime)
                      , f = T1.util.a2d.openingHourToTimeNr(a.endTime);
                    if (null === b || null === c || null === e || null === f)
                        return !0;
                    "" !== d && (d += ","),
                    d += e + "-" + f
                }),
                d
            }
        }, {
            key: "setFilterDayTimesForOpeningDay",
            value: function(a, b) {
                if (a && a.startDayCode && a.endDayCode) {
                    var c = T1.util.a2d.dayToIndex(a.startDayCode)
                      , d = T1.util.a2d.dayToIndex(a.endDayCode);
                    if (!Array.isArray(a.hours) || null === c || null === d)
                        return !0;
                    for (var e = T1.util.a2d.generateOpeningTimesStr(a, c, d), f = c; f <= d; f++)
                        b[f] = e
                }
            }
        }]),
        a
    }(),
    T1.util.a2d.operations = {
        testdrive: "Test Drive",
        showroom: "Showroom"
    }
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c;
    T1.formV2 = function() {
        "use strict";
        function a(a) {
            function c() {
                if (p = o.find(".form-v2-nav-dot"),
                p.length <= 1)
                    return void o.hide();
                d()
            }
            function d() {
                p.length && p.click(function(c) {
                    if (b(this).is(".accessible")) {
                        var d = b(c.currentTarget).data("step") || 1;
                        T1.channels.form.publish(g.NAVIGATION_FORM_UPDATE, {
                            context: m,
                            stepContainer: a.find(".step-" + d),
                            number: d
                        })
                    }
                })
            }
            function e() {
                n.find(".change-selection").click(function(c) {
                    c.preventDefault();
                    var d = b(this).data("step") || 0
                      , e = b(this).data("disable-next-steps") || !1;
                    0 !== d && T1.channels.form.publish(g.NAVIGATION_FORM_UPDATE, {
                        context: m,
                        stepContainer: a.find(".step-" + d),
                        number: d,
                        disableNextSteps: e
                    })
                })
            }
            function h() {
                n.find(".btn-next-step, .btn-previous-step").click(function(a) {
                    a.preventDefault();
                    var c = b(this).data("step") || 0;
                    0 === c || b(this).hasClass("disabled") || T1.channels.form.publish(g.NAVIGATION_FORM_VALIDATE_STEP, {
                        context: m,
                        number: c,
                        moveToStep: !0
                    })
                })
            }
            function i(a) {
                if (l(a.context)) {
                    var c = b(o).find(".dot-" + a.number)
                      , d = a.disableNextSteps || !1;
                    if (c.length) {
                        if (c.hasClass("accessible")) {
                            j(c),
                            p.removeClass("active");
                            var e = c.nextAll(".form-v2-nav-dot.activated")
                              , h = c.prevAll(".form-v2-nav-dot:not(.activated)")
                              , i = c.nextAll(".form-v2-nav-dot.accessible")
                              , k = e.length;
                            if (e.length) {
                                b(e[k]).removeClass("activated"),
                                k--;
                                var q = setInterval(function() {
                                    k < 0 ? (clearInterval(q),
                                    c.removeClass("activated")) : b(e[k]).removeClass("activated"),
                                    k--
                                }, g.ANIMATION_SPEED_FORMV2)
                            } else
                                c.removeClass("activated");
                            if (h.length) {
                                var r = h.length - 1;
                                b(h[r]).addClass("activated"),
                                r--;
                                var s = setInterval(function() {
                                    r < 0 ? clearInterval(s) : b(h[r]).addClass("activated"),
                                    r--
                                }, g.ANIMATION_SPEED_FORMV2)
                            }
                            d && i.removeClass("accessible"),
                            c.addClass("active"),
                            n.find(".step").removeClass("active"),
                            n.find(".step-" + a.number).addClass("active"),
                            !0 !== a.doNotScrollTop && f.scrollToTopOfForm(m)
                        }
                    } else
                        n.find(".step").removeClass("active"),
                        n.find(".step-" + a.number).addClass("active"),
                        !0 !== a.doNotScrollTop && f.scrollToTopOfForm(m)
                }
            }
            function j(a) {
                var b = a.closest(".form-navigation").find(".form-v2-nav-dot-active-step")
                  , c = a.find(".form-v2-nav-dot-step").html();
                b.length && b.html(c)
            }
            function k(c) {
                if (l(c.context)) {
                    b(o).find(".dot-" + c.number).addClass("accessible"),
                    c.moveToStep && T1.channels.form.publish(g.NAVIGATION_FORM_UPDATE, {
                        context: m,
                        stepContainer: a.find(".step-" + c.number),
                        number: c.number
                    })
                }
            }
            function l(a) {
                return a.closest(".form-v2-container").get(0) === m.get(0)
            }
            var m = a.closest(".form-v2-container")
              , n = a.find(".form-v2")
              , o = a.find(".form-navigation:first")
              , p = null;
            T1.channels.form.subscribe(g.NAVIGATION_FORM_UPDATE, i),
            T1.channels.form.subscribe(g.NAVIGATION_FORM_VALIDATE_STEP, k),
            o.length && n.length && c(),
            e(),
            h()
        }
        var d = {
            formNavigation: [],
            useMicroService: "true" === T1.settings.ssoUseMicroService,
            formV2Exists: !1,
            inputContainerClass: "input-container",
            validInputClass: "input-valid",
            invalidInputClass: "input-invalid",
            formV2Selector: ".form-v2",
            dynamicDownloadSelector: "dynamic-download",
            dynamicOnlineSelector: "dynamic-online",
            formV2ContainerSelector: ".form-v2-container",
            formCompletedClass: "completed",
            submitting: !1,
            emailMaxLength: 254,
            extraDataDealerInfoPropertyName: "dealer",
            dataDownloadUrlPropertyName: "download-url",
            extraDataDownloadSizePropertyName: "download-size",
            activeDownloadResultSelector: "active-download-result",
            activeEmaildResultSelector: "active-email-result",
            activePostResultSelector: "active-post-result",
            dropdownTypeAhead: [],
            subscriptions: {},
            formUrls: {},
            shouldFetchDealerData: !0,
            init: function() {
                f.initUrls(),
                f.initOnDemand(),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, f.onMaterialBoxOpened),
                T1.channels.dialog.subscribe(T1.constants.OVERLAY_DROP_OPENED, f.onMaterialBoxOpened),
                T1.channels.dialog.subscribe(T1.constants.CONFIRM_SUBSCRIPTION, f.confirmationMessages.newsletter),
                T1.channels.dialog.subscribe(T1.constants.CONFIRM_SUBSCRIPTION_REJECT, f.confirmationMessages.alreadySubscribed),
                T1.channels.dialog.subscribe(T1.constants.CONFIRM_MSG, f.confirmationMessages.any),
                T1.channels.form.subscribe(T1.constants.DATEPICKER_CHANGED, f.onDatePickerChanged),
                T1.channels.form.subscribe(T1.constants.FORM_ELEMENT_VALIDATE, f.validateElement)
            },
            initUrls: function() {
                var a = T1.settings.mock ? "//t1-dev-glen.herokuapp.com" : T1.request.getDomainName()
                  , b = T1.settings.mock ? "//t1-dev-proxy.herokuapp.com" : T1.settings.loadSaveService || T1.settings.loadSaveServer;
                f.formUrls = {
                    "form-contact": a + T1.constants.URL_SUBMIT_FORM_CONTACT,
                    "form-contact-dealer": a + T1.constants.URL_SUBMIT_FORM_CONTACT_DEALER,
                    "form-send-pdf": a + T1.constants.URL_SUBMIT_SEND_PDF,
                    "form-brochure": a + T1.constants.URL_SUBMIT_FORM_BROCHURE,
                    "form-my-cars": d.useMicroService ? T1.constants.URL_USER_DATA : b + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SEARCH_CAR,
                    "form-login": a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_LOGIN,
                    "form-login-save-car": a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_LOGIN,
                    "form-save-car": d.useMicroService ? T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR : a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_SAVE_CAR,
                    "form-register": a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_REGISTER,
                    "form-forgotten-password": a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_PASSWORD,
                    "form-reset-password": a + T1.constants.URL_SUBMIT_FORM_MY_TOYOTA_RESET_PASSWORD,
                    "form-testdrive": a + T1.constants.URL_SUBMIT_FORM_TESTDRIVE,
                    "form-chrContact": a + T1.constants.URL_SUBMIT_FORM_CHR_CONTACT
                }
            },
            getFormUrls: function() {
                return d.formUrls
            },
            confirmationMessages: {
                newsletter: function(a) {
                    a || (a = {}),
                    a.title = T1.labels.confirmSubscriptionTitle || "Newsletter subscription",
                    a.description = T1.labels.confirmSubscriptionDescription || "You have been subscribed to our newsletter",
                    f.confirmationMessages._show(a)
                },
                alreadySubscribed: function(a) {
                    a || (a = {}),
                    a.title = T1.labels.doubleSubscriptionTitle || "Newsletter subscription",
                    a.description = T1.labels.doubleSubscriptionDescription || "You have already subscribed to this newsletter",
                    f.confirmationMessages._show(a)
                },
                any: function(a) {
                    a || (a = {}),
                    a.title = a.title && Object.resolve && Object.resolve("T1.labels." + a.title) || "",
                    a.description = a.title && Object.resolve && Object.resolve("T1.labels." + a.description) || "",
                    f.confirmationMessages._show(a)
                },
                _show: function(a) {
                    var c = b('<div class="maincontent"><section><div class="container"><div class="row"><div class="col-xs-12"><h1 class="text-left">' + a.title + '</h1><span class="intro">' + a.description + "</span></div></div></div></section></div>");
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        html: c
                    })
                }
            },
            initOnDemand: function(a) {
                var c = b(a).or("body")
                  , d = c.find(f.formV2Selector);
                d && d.length > 0 ? (f.attachEventsToFormElements(d),
                f.throwFormLoadedEvent(d),
                f.testdriveForm.init(c),
                f.brochureForm.init(c),
                f.personalBrochureForm.init(c),
                f.contactForm.init(c),
                f.sendConfigurationForm.init(c),
                f.tradeInForm.init(c),
                f.collectConsentForm.init(c),
                f.vehicleIdentifierForm.init(c),
                f.initializeDealerListener(d),
                T1.channels.google.subscribe(g.GOOGLE_RECAPTCHA_VALID, f.validCaptchaHandler),
                T1.channels.google.subscribe(g.GOOGLE_RECAPTCHA_EXPIRED, f.validCaptchaHandler),
                d.on(T1.constants.FORM_VALIDATE_CACHED_VALUES, f.validateCachedValues),
                f.validateCachedValues(d),
                f.addPersonalizationDataToForm(d)) : c.find(f.tradeInForm.selector).length && f.tradeInForm.init(c)
            },
            loadCarInfo: function(a, b) {
                a.closest("." + f.personalBrochureForm.selector).length ? f.personalBrochureForm.injectFormData(a, b.pdfName, b.imgPath) : a.closest("." + f.sendConfigurationForm.selector).length && f.sendConfigurationForm.injectFormData(a, b)
            },
            injectQueryStringData: function(a) {
                var c = d
                  , e = T1.request.getQueryStringParameters()
                  , f = e.personalCar || e.car;
                if ("string" == typeof f)
                    a.find(".dynamicallyAdded").remove(),
                    a.append(b('<input type="hidden"/>').attr({
                        name: "carId",
                        value: f
                    }).addClass("dynamicallyAdded")),
                    e.personalCar && a.append(b('<input type="hidden"/>').attr({
                        name: "hasPersonalParams",
                        value: !0
                    }).addClass("dynamicallyAdded"));
                else {
                    var g = "The car ID of the form hasn't been sent to the page"
                      , h = T1.labels.carconfig ? T1.labels.carconfig.noCarIdMessage || g : g;
                    c.setError([{
                        message: h
                    }], a)
                }
            },
            htmlDecode: function(a) {
                return b("<div/>").html(a).text()
            },
            initializeDealerListener: function(a) {
                var b = T1.request.getQueryStringParameter("dealerId");
                b && (f.shouldFetchDealerData ? f.getDealerDetails(b).done(function(b) {
                    if (b.total) {
                        var c = {};
                        b.dealers && Array.isArray(b.dealers) ? c.dealer = b.dealers.length && b.dealers[0] || {} : c.dealer = "string" == typeof b ? JSON.parse(b) : b,
                        f.addDealerDetailsToForm(c, a)
                    }
                }) : f.addDataToForm(a.find("form"), f.extraDataDealerInfoPropertyName, b)),
                T1.channels.dealer.subscribe(g.DEALER_SELECTED, function(b) {
                    f.addDealerDetailsToForm(b, a)
                })
            },
            getDealerDetails: function(a) {
                var c = /\/$/
                  , d = g.URL_DEALERS;
                c.test(d) || (d += "/"),
                d += a;
                var e = b.ajax({
                    url: d
                });
                return e.fail(function(b, c, e) {
                    console.log("Could not retrieve details for dealer with id " + a + " from " + d)
                }),
                e
            },
            addPersonalizationDataToForm: function(a) {
                var b = a.find('input[name="localStoragePersonalization"]')
                  , c = a.find('input[name="sessionStoragePersonalization"]');
                b.length && b.val(localStorage.getItem("com.toyota.tme.t1.personalization")),
                c.length && c.val(sessionStorage.getItem("com.toyota.tme.t1.personalization"))
            },
            validateCachedValues: function(a) {
                a = b(a.currentTarget || a);
                var c = a.find("form");
                c && c.length && b.each(c, function() {
                    var a = b(this)
                      , c = a.find("input,textarea")
                      , d = {
                        isCacheCheck: !0
                    };
                    b.each(c, function() {
                        b.proxy(f.validateElement, b(this))(null, d)
                    })
                })
            },
            onMaterialBoxOpened: function(a) {
                f.initOnDemand(a.container)
            },
            attachEventsToFormElements: function(b) {
                var c = b.find("." + f.inputContainerClass + " input:not([type=checkbox]), ." + f.inputContainerClass + " textarea")
                  , d = b.find("." + f.inputContainerClass + " input[type=checkbox]")
                  , e = b.find(".select-dynamic [data-activate]")
                  , h = b.find(".add-message-toggle")
                  , i = b.find(".dropdown")
                  , j = {
                    isCacheCheck: !1
                };
                c.off("blur", f.validateElement).on("blur", null, j, f.validateElement),
                d.off("change", f.checkboxChange).on("change", null, j, f.checkboxChange),
                b.find(".btn-submit").off("click", f.submit).on("click", f.submit),
                b.find(".btn-form-reset").off("click", f.resetForm).on("click", f.resetForm),
                e.length && e.off("click", f.switchElementDynamic).on("click", f.switchElementDynamic),
                h.length && h.off("click", f.showMessageBox).on("click", f.showMessageBox),
                i.length && i.off(g.INPUT_DROPDOWN_UPDATED, f.validateElement).on(g.INPUT_DROPDOWN_UPDATED, f.validateElement),
                b.each(function() {
                    var b = f.getFormParent(this);
                    f.formNavigation.push(new a(b))
                })
            },
            checkboxChange: function(a, c) {
                var d = b(this)
                  , e = d.data("mandatory-toggle-target");
                !(!e || !e.length) && f.mandatoryCheckboxTogglerChange(d, e),
                b.proxy(f.validateElement, this)(a, c)
            },
            mandatoryCheckboxTogglerChange: function(a, c) {
                var d = a.closest(".form")
                  , e = a.is(":checked")
                  , g = d.find('input[name="' + c + '"]')
                  , h = a.closest(".dynamic-email").find(".input-valid").length;
                g.each(function() {
                    var a = b(this);
                    a.data("mandatory-can-toggle") && (f.mandatoryStateChangeHandler(a, e),
                    1 !== h || e || b.proxy(f.validateElement, this)(null, null))
                })
            },
            mandatoryStateChangeHandler: function(a, b) {
                var c = a.data("mandatory-true-count")
                  , d = a.closest(".input-container").find(".form-label, label");
                c || (a.data("mandatory-true-count", 0),
                c = a.data("mandatory-true-count")),
                b ? (c += 1,
                a.data("mandatory-input", b),
                a.is(":checked") || a.data("input-is-valid", !1),
                1 === c && d.append('<span class="prepanded red"> * </span>')) : (c = c > 0 ? c - 1 : 0) < 1 && (a.data("mandatory-input", b),
                d.find(".prepanded").remove(),
                f.setInputValidation(a, !0, null)),
                a.data("mandatory-true-count", c)
            },
            getFormParent: function(a) {
                return b(a).closest(".form-v2-container")
            },
            throwFormLoadedEvent: function(a) {
                a.each(function() {
                    var a = b(this).find("form");
                    a.length && T1.channels.form.publishAsync(g.FORM_LOAD, a)
                })
            },
            addDealerDetailsToForm: function(a, c) {
                var d = b(a.context && a.context.container || c)
                  , e = d.closest(f.formV2ContainerSelector)
                  , g = {}
                  , h = null;
                e.length && a.dealer && (g = {
                    context: e,
                    dealer: a.dealer
                },
                a.dealer.name && e.find(".selected-dealer").html(a.dealer.name),
                a.dealer.address && a.dealer.address.region && e.find(".selected-dealer-region").html(a.dealer.address.region),
                a.dealer.address && a.dealer.address.zip && e.find(".selected-dealer-zip").html(a.dealer.address.zip),
                e.find(".validate-dealer-finder").each(function() {
                    var a = b(this);
                    a.removeClass("disabled"),
                    a.addClass(a.data("activeclass"))
                }),
                h = d.is("form") && d || e.find("form"),
                h.length && (a.dealer.uuid && f.addDataToForm(h, f.extraDataDealerInfoPropertyName, a.dealer.uuid),
                a.dealer.localDealerID && f.addDataToForm(h, "localDealerId", a.dealer.localDealerID)),
                f.updatePageData(g))
            },
            switchElementDynamic: function() {
                var a = b(this)
                  , c = a.data("activate")
                  , d = a.data("deactivate")
                  , e = a.closest(".form")
                  , h = e.find("." + c)
                  , i = e.find("." + d)
                  , j = h.siblings(".element-dynamic.active")
                  , k = a.is("[type=checkbox]")
                  , l = k && a.is(":checked");
                k ? h.toggleClass("active", l) : (i.removeClass("active"),
                j.removeClass("active"),
                h.addClass("active"),
                e.hasClass("brochure-form-v2") && h.hasClass("dynamic-post") && T1.channels.statistics.publishAsync(g.STATS_TRACK, {
                    node: e,
                    extraData: {
                        event: {
                            value: "contact-details",
                            workflowstep: "3",
                            modelname: f.brochureForm.selected.model
                        },
                        model: {
                            modelid: f.brochureForm.selected.modelCode,
                            modelname: f.brochureForm.selected.model
                        }
                    }
                })),
                f.updateSubmitButtonStatus(this)
            },
            showMessageBox: function(a) {
                a.preventDefault();
                var c = b(this).closest(".add-message-container");
                c.length && (c.children("div:not(.hidden)").addClass("hidden"),
                c.children("div." + f.inputContainerClass).removeClass("hidden"))
            },
            multipleEmailsValidation: function(a) {
                for (var b = a.replace(/\s/g, "").split(/,|;/), c = 0; c < b.length; c++)
                    if (!f.validateEmail(b[c]))
                        return !1;
                return !0
            },
            elementValidationResult: function(a, b) {
                if (b[0]) {
                    var c = T1.constants
                      , d = b[0].value
                      , e = {
                        valid: !0
                    }
                      , g = T1.labels && T1.labels.forms || {};
                    f.isInputDynamicActive(b) || (e.ignore = !0);
                    for (var h = 0; h < a.length; h++) {
                        switch (a[h]) {
                        case c.FORM_VALIDATION_RULE_LENGTH:
                            d = d.trim(),
                            e.valid = d.length >= b.data("min-length"),
                            e.errorMsg = g.invalidMinimumLength || "minimum length not met",
                            e.valid && b.data("max-length") && (e.valid = d.length <= b.data("max-length"),
                            e.errorMsg = g.invalidMaximumLength || "maximum length exceeded");
                            break;
                        case c.FORM_VALIDATION_RULE_EMAIL:
                            e.valid = f.validateEmail(d),
                            e.errorMsg = g.invalidEmail || "not a valid email address";
                            break;
                        case c.FORM_VALIDATION_RULE_MULTI_EMAIL:
                            e.valid = f.multipleEmailsValidation(d),
                            e.errorMsg = g.invalidMultipleEmails || "emails not valid";
                            break;
                        case c.FORM_VALIDATION_RULE_PHONE:
                            e.valid = f.validatePhone(d),
                            e.errorMsg = g.invalidPhoneNumber || "not a valid phone number";
                            break;
                        case c.FORM_VALIDATION_RULE_SELECT:
                            e.valid = d.length > 0,
                            e.errorMsg = g.invalidSelection || "nothing selected";
                            break;
                        case c.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER:
                            e.valid = !0 === b.data(c.FORM_VALIDATION_RULE_POSTCODE_HAS_DEALER),
                            e.errorMsg = Object.resolve("T1.labels.dealer.errorDealersNotFound") || "No dealer could be found for this postcode";
                            break;
                        case c.FORM_VALIDATION_RULE_REGEXP:
                            e.valid = new RegExp(b.data("regexp"),"i").test(d),
                            e.errorMsg = b.data("regexp-warning") || g.invalidFormat || "invalid format";
                            var i = b.data("protection-regexp") && /((\/)\1|(www))?([^\wΆΈ-ώ\u00C0-\u024F\u0400-\u05FF\u10A0-\u10FF\u2D00-\u2D25\'\-\s\.]|\.(?=[a-zA-Z]{2,3}))/gim;
                            e.valid && i && (e.valid = !i.test(d),
                            e.errorMsg = b.data("regexp-warning") || g.invalidFormat || "invalid format")
                        }
                        if (!e.valid)
                            return e
                    }
                    return e
                }
            },
            elementShouldBeCachedCheck: function(a) {
                return a = b(a),
                a.is('input[type="text"]') || a.is('input[type="tel"]') || a.is('input[type="email"]') || a.is("textarea")
            },
            validateElement: function(a, c) {
                var d = b(this || a);
                d.hasClass("dropdown-toggle") && (d = d.closest(".dropdown"));
                var e = !!c && (c.isCacheCheck || !1)
                  , h = d.filter("input, textarea").or(d.find("input, textarea"))
                  , i = h.closest("." + f.inputContainerClass)
                  , j = h.is("[type=checkbox]")
                  , k = j && h.is(":checked")
                  , l = i.data("empty-warning")
                  , m = h.val()
                  , n = !(!m || !m.length || j && !k)
                  , o = h.data("validation") || d.data("validation")
                  , p = o ? o.split(" ") : []
                  , q = f.elementValidationResult(p, h)
                  , r = !!e && f.elementShouldBeCachedCheck(h);
                if (!e || r) {
                    if (n) {
                        var s = i.find("[data-validation]").length > 0 || h.is("[data-validation]");
                        q.valid || !s ? f.setInputValidation(h, !0, null) : q.ignore || (f.setInputValidation(h, !1, q.errorMsg),
                        f.setFormValidationStatus(h, !1))
                    } else {
                        var t = !0 === h.data("mandatory-input");
                        e || !t || q.ignore ? i.removeClass(f.invalidInputClass + " " + f.validInputClass) : (f.setInputValidation(h, !1, l),
                        f.setFormValidationStatus(h, !1))
                    }
                    f.updateSubmitButtonStatus(this || a),
                    T1.channels.form.publish(g.FORM_ELEMENT_VALIDATED, this || a)
                }
            },
            setInputValidation: function(a, b, c) {
                var d, e = a.closest("." + f.inputContainerClass), g = e.length > 0;
                a.data("input-is-valid", b),
                g && (e.toggleClass(f.invalidInputClass, !b),
                e.toggleClass(f.validInputClass, b),
                b || (d = e.find(".input-warning").or(a.closest("form, .form").find(".error-message")),
                c && d.length > 0 && d.html(c)))
            },
            setFormValidationStatus: function(a, b) {
                var c = a.is("form, .form") ? a : a.closest("form, .form");
                c.toggleClass(g.CLASS_ERROR_FORM, !b),
                c.data("form-valid", b)
            },
            getUnvalidatedInputs: function(a) {
                var c = a.find("[data-mandatory-input]");
                return c = c.filter(function(a) {
                    var c = b(this);
                    return !(!0 !== c.data("mandatory-input") || !0 === c.data("input-is-valid") || !f.isInputDynamicActive(c))
                })
            },
            validCaptchaHandler: function(a) {
                var c = b(a.target);
                f.updateSubmitButtonStatus(c)
            },
            handleCaptchaValidation: function(a) {
                var c = a.data("captcha-form-parent")
                  , d = c ? a.closest(c) : a.closest("form");
                return b.safe("T1.googleServices.reCaptcha.checkCaptchaValidity")(d)
            },
            updateSubmitButtonStatus: function(a) {
                f.updateButtonStatus(a, ".btn-submit", !1)
            },
            updateButtonStatus: function(a, c, d) {
                c = c || ".btn-submit";
                var e = b(a).closest(d ? ".step" : "form")
                  , g = f.getUnvalidatedInputs(e);
                e.find(c + '[data-disable = "true"]').each(function(a) {
                    var c, d, e = b(this), h = e.data("captcha-dependent");
                    h && (c = f.handleCaptchaValidation(e)),
                    d = g.length > 0 || !!h && !c,
                    e.toggleClass("disabled", d),
                    e.toggleClass("btn-action-primary", !d)
                })
            },
            submit: function(a) {
                var c, d, e = b(this), g = {
                    isDownload: e.is(".btn-download"),
                    isPost: e.is(".btn-post"),
                    isEmail: e.is(".btn-email")
                };
                a.preventDefault(),
                f.currentForm = b(a.target).parents("form"),
                f.submitting || (c = f.validate(),
                c ? (d = f.getAllFormData(f.currentForm),
                (g.isDownload || g.isPost || g.isEmail) && (d.activateResultContent = !0),
                f.updatePageData(d),
                f.submitting = !0,
                f.submitAsync(g),
                f.scrollToTopOfForm(f.currentForm.closest(".form-v2-container"))) : (f.setError([{
                    message: T1.labels.forms.errorInValid
                }], f.currentForm),
                f.submitting = !1))
            },
            resetForm: function(a) {
                var c = b(a.target)
                  , d = c.parents(f.formV2ContainerSelector)
                  , e = c.parents(f.formV2Selector);
                d.hasClass(f.formCompletedClass) && (d.removeClass(f.formCompletedClass),
                e.find(".form").trigger("reset"),
                f.validate(),
                e.find(".input-container").removeClass("input-valid input-invalid"))
            },
            getThankYouPageContainer: function(a) {
                var b = a.data("form-container-selector");
                return b ? a.closest("." + b) : a
            },
            isInputDynamicActive: function(a) {
                if (a.hasClass("input-dynamic"))
                    for (var c = a.parents(".element-dynamic"), d = c.length, e = 0; e < d; e++)
                        if (!1 === b(c[e]).hasClass("active"))
                            return !1;
                return !0
            },
            getAllFormData: function(a) {
                var c = {}
                  , d = a.find('input[name="time"], input[name="time-select"]:checked').val()
                  , e = function() {
                    var a = b(this);
                    return f.isInputDynamicActive(a)
                }
                  , g = a.find('input[name="firstname"]').filter(e).first()
                  , h = a.find('input[name="lastname"]').filter(e).first();
                return c.context = f.getThankYouPageContainer(a),
                c.user = {
                    firstname: g.val(),
                    lastname: h.val()
                },
                c.datetime = {
                    date: a.find('input[name="date"]').val(),
                    time: d
                },
                c.model = {
                    name: f.testdriveForm.selected.model || "",
                    image: a.find("img.dropdown-selection-img").attr("src") || ""
                },
                c
            },
            updatePageData: function(a) {
                var c, d, e = a.context instanceof jQuery ? a.context : [], g = a.container || e.find(".form-v2-result") || [], h = g.find(".offer .amount .value");
                if (g.length) {
                    if (c = g.find(".selected-datetime"),
                    d = c.closest(".label-contact-section"),
                    e.length && e.hasClass(f.brochureForm.selector))
                        g = g.find("." + f.brochureForm.dynamicSelectType + "-result");
                    else if (a.context && a.context.hasClass(f.personalBrochureForm.selector) && a.activateResultContent)
                        for (var i = b(g.context).attr("class").match(/btn-\S+/g), j = 0; j < i.length; j++) {
                            var k = g.find("." + i[j].substr(4) + "-result");
                            if (k.length) {
                                g = k;
                                break
                            }
                        }
                    if (a.user) {
                        var l = a.user;
                        if (l.firstname) {
                            var m = g.find(".result-header .intro")
                              , n = m.html();
                            n && m.html(n.replace("{{name}}", l.firstname)),
                            g.find(".user-name").text(l.firstname)
                        }
                    }
                    if ("object" == typeof a.dealer && f.updateDealerPageData(g, a.dealer),
                    a.amount) {
                        var o = T1.settings.culture.numberFormat.currency.pattern[1].replace("n", Math.floor(a.amount)).replace("$", T1.settings.culture.numberFormat.currency.symbol);
                        h.html(o).data("amount", a.amount)
                    }
                    if ("object" == typeof a.model && f.updateSelectedModelPageData(g, a.model),
                    a.thankYouBgImg && g.find(".thank-you-bg-img").css("background-image", "url(" + a.thankYouBgImg + ")"),
                    a.thankYouBgImgTitle && g.find(".thank-you-bg-img .thank-you-bg-title").html(a.thankYouBgImgTitle),
                    a && a.validUntil) {
                        var p = "N/A"
                          , q = g.find(".offer .validity-date .value");
                        a.validUntil instanceof Date ? p = globalize.format(a.validUntil, "d'/'MM'/'yyyy") : "string" == typeof a.validUntil && (p = a.validUntil),
                        q.html(p)
                    }
                    if ("object" == typeof a.vehicle && f.updateVehiclePageData(g, a.vehicle),
                    a && a.datetime && a.datetime.date) {
                        var p = f.getFormattedDateTime(a.datetime);
                        d.show(),
                        p && c.html(p)
                    } else
                        d.hide();
                    if (a.downloadLink) {
                        g.filter(".download-result").find(".result-header .intro a[download]").attr("href", a.downloadLink)
                    }
                    if (a.activateResultContent && (g.siblings().removeClass("active"),
                    g.addClass("active")),
                    a.configData) {
                        var r, s = a.configData;
                        s.name && g.find(".config-name").html(s.name),
                        s.code && g.find(".config-code").html(s.code).parent().removeClass("hidden"),
                        s.date && (r = g.find(".config-date"),
                        r.html(s.date).parent().removeClass("hidden")),
                        s.price && g.find(".config-price").html(s.price).parent().removeClass("hidden")
                    }
                }
            },
            updateDealerPageData: function(a, c) {
                if (c.name && a.find(".selected-dealer-name").html(c.name),
                c.address) {
                    var d = c.address;
                    if (d.address1 && a.find(".selected-dealer-address-1").html(d.address1),
                    d.zip || d.city) {
                        var e = d.zip + " " + d.city;
                        a.find(".selected-dealer-address-2").html(e)
                    }
                    if (d.geo && d.geo.lat && d.geo.lon) {
                        var f = b.safe("T1.googleServices.maps.getStaticMapUrl")(d.geo.lat, d.geo.lon, 13, "600x375");
                        a.find(".selected-dealer-location").attr("src", f)
                    }
                }
                if (c.phone ? a.find("a.selected-dealer-phone").attr("href", "tel:" + c.phone.replace(/\D/g, "")).html(c.phone) : a.find(".dealer-details-infos .phone").hide(),
                c.fax1 ? a.find(".selected-dealer-fax").html(c.fax1) : a.find(".dealer-details-infos .fax").hide(),
                c.eMail ? a.find("a.selected-dealer-mail").attr("href", "mailto:" + c.eMail).html(c.eMail) : a.find(".dealer-details-infos .mail").hide(),
                c.url) {
                    var g = c.url
                      , h = /^(http|\/{1,2})/
                      , i = h.test(g) ? g : "http://" + g;
                    a.find(".selected-dealer-link").attr("href", i).html(c.url)
                } else
                    a.find(".dealer-details-infos .link").hide()
            },
            updateVehiclePageData: function(a, b) {
                var d = b.name || c.get(b, "manufacturer.name", "N/A") + " " + c.get(b, "model.name")
                  , e = c.get(b, "fuel.name", "") + " " + c.get(b, "engine.name", "") + " " + c.get(b, "transmission.name", "") + " " + c.get(b, "wheeldrive.name", "")
                  , f = c.get(b, "fuel.name")
                  , g = c.get(b, "mileage")
                  , h = c.get(b, "year.name");
                f && (f += "&nbsp;/&nbsp;"),
                g && (g += c.get(T1, "settings.dealer.distanceUnit") + "&nbsp;/&nbsp;"),
                h && (h += "&nbsp;/&nbsp;"),
                a.find(".make-model").html(d),
                a.find(".detail-1").html(e.trim()),
                a.find(".detail-2").html(c.get(b, "year.name")),
                a.find(".vehicle .fuel-type").html(f),
                a.find(".vehicle .mileage").html(g),
                a.find(".vehicle .year").html(h),
                a.find(".vehicle .transmission").html(c.get(b, "transmission.name"))
            },
            updateSelectedModelPageData: function(a, c) {
                if (c.name) {
                    a.find("header h1, .cta h3, .cta a span").each(function(a) {
                        var d = b(this);
                        d.html(d.html().replace("{{model}}", c.name))
                    }),
                    a.find(".selected-model-name").html(c.name).parent().removeClass("hidden")
                }
                if (a.find(".new-car-details .hybrid-tag").toggleClass("hidden", !0 !== c.hybridPreferred),
                c.engine && a.find(".selected-model-engine").html(c.engine).parent().removeClass("hidden"),
                c.colour && a.find(".selected-model-colour").html(c.colour).parent().removeClass("hidden"),
                c.image && a.find(".selected-model-image").attr("src", c.image),
                c.additionalPromotion) {
                    a.find(".no-promo-hidden").removeClass("no-promo-hidden"),
                    a.find(".additional-promotion").html(T1.settings.culture.numberFormat.currency.pattern[1].replace("n", c.additionalPromotion).replace("$", T1.settings.culture.numberFormat.currency.symbol));
                    var d = parseInt($amountNode.data("amount"), 10)
                      , e = d + c.additionalPromotion;
                    d && a.find(".calculated-price").html(T1.settings.culture.numberFormat.currency.pattern[1].replace("n", e).replace("$", T1.settings.culture.numberFormat.currency.symbol))
                }
            },
            getFormattedDateTime: function(a) {
                var b = a.date && decodeURI(a.date) || "";
                return b.length && a.time && (b += ", ",
                4 === a.time.length ? b += a.time.substr(0, 2) + ":" + a.time.substr(2, 2) : a.time.length && (b += a.time)),
                b
            },
            validate: function(a) {
                var c, d = a || f.currentForm;
                if (d && d.length > 0) {
                    f.currentForm = d;
                    var e = f.currentForm.find("input,textarea")
                      , h = {
                        isCacheCheck: !1
                    };
                    return f.setFormValidationStatus(f.currentForm, !0),
                    b.each(e, function() {
                        b.proxy(f.validateElement, b(this))(null, h)
                    }),
                    c = f.currentForm.data("form-valid"),
                    c || T1.channels.form.publishAsync(g.FORM_VALIDATION_FAILED, {
                        form: f.currentForm,
                        fields: f.currentForm.find("." + f.invalidInputClass + " > input, ." + f.invalidInputClass + " > textarea")
                    }),
                    c
                }
                return !1
            },
            validateEmail: function(a) {
                return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a) && a.length <= d.emailMaxLength
            },
            validatePhone: function(a) {
                var b = /^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i;
                return a.length > 2 && b.test(a)
            },
            getCurrentFormUrl: function() {
                var a = f.currentForm.attr("id");
                return f.currentForm.attr("data-url") || f.getFormUrls()[a]
            },
            serializeFormsData: function(a) {
                var c = b(a)
                  , d = c.data("extra-data")
                  , e = c.find(":input").filter(function(a) {
                    var c = b(this);
                    return f.isInputDynamicActive(c) && c.val().length
                });
                return d && !b.isEmptyObject(d) ? b.param(d) + "&" + e.serialize() : e.serialize()
            },
            onDatePickerChanged: function(a) {
                var b = a && a.input || null
                  , c = a && a.isoDate || null;
                if (b && c) {
                    var d = b.parents("form");
                    f.addDataToForm(d, "isoDate", c)
                }
            },
            onGooglePlacesSelect: function(a) {
                a.field.parents("form").length && a.term && a.term.length && b.safe("T1.dealerFinder.geocodeAddress", b.Deferred())(a).done(f.onGeocodeAddressDone).fail(function(b) {
                    f.setInputValidation(a.field, !1, b)
                })
            },
            onGeocodeAddressDone: function(a) {
                b.safe("T1.dealerFinder.getDealersByLocation", b.Deferred())(a).done(f.onGetDealersByLocationDone).fail(function(a) {
                    f.setInputValidation(data.field, !1, a)
                })
            },
            onGetDealersByLocationDone: function(a, c, d) {
                var c = (b(d.search.field.data("populate-list")).find("ul").empty(),
                {
                    dropdownSelect: "dealers",
                    data: [],
                    disabled: !1
                });
                b.each(a, function(d, e) {
                    var f = a[d]
                      , g = b.safe("T1.dealerFinder.formatDealerDistance")(f);
                    c.data.push({
                        id: f.uuid,
                        name: f.name + (g ? " - " + g : "")
                    })
                }),
                T1.channels.form.publish(T1.constants.INPUT_DROPDOWN_POPULATE, c)
            },
            submitAsync: function(a, c) {
                var d, e = f.currentForm, g = {
                    data: a.isGet ? {} : f.serializeFormsData(e),
                    url: a.isGet ? c && c.url : f.getCurrentFormUrl(),
                    json: !1
                }, h = {
                    form: e,
                    ignoreCaptcha: a && a.isDownload || !f.tradeInForm.reCaptchaNeeded || !1
                };
                if (f.getRecaptchaStatus(h).isValid) {
                    f.setEventsBefore(e);
                    var i = g.json ? {
                        "Content-Type": "application/json",
                        Accept: "application/json"
                    } : {}
                      , j = !/^(\s)*(https?:)?\/\//.test(g.url.toLowerCase()) || g.url.toLowerCase().indexOf(window.location.host.toLowerCase()) > -1;
                    c && c.headers && b.extend(i, c.headers),
                    f.useMicroService && T1.mypage && T1.mypage.user && j && (i[T1.constants.SSO_USER_HEADER] = JSON.stringify({
                        id: T1.mypage.user._id,
                        email: T1.mypage.user.email,
                        token: T1.mypage.user.token
                    }));
                    var k = /^(http|\/\/)/g.test(g.url).length > 0
                      , l = T1 && T1.settings && T1.settings.mock && !k ? "GET" : f.currentForm.attr("method") || "POST";
                    a.isGet = "GET" === l,
                    d = b.ajax({
                        type: l,
                        dataType: (a.isGet ? "" : f.currentForm.data("type")) || "json",
                        headers: i,
                        url: g.url,
                        data: g.data,
                        contentType: "application/x-www-form-urlencoded; charset=UTF-8"
                    }),
                    d.done(c && c.doneCallback || f.submitSuccess),
                    d.fail(c && c.failCallback || f.submitError),
                    d.always([function() {
                        f.setEventsAfter(e)
                    }
                    , c && c.alwaysCallback])
                } else
                    f.submitting = !1
            },
            getRecaptchaStatus: function(a) {
                if (T1 && T1.settings && T1.settings.mock)
                    return {
                        isValid: !0
                    };
                if (!a || !a.form || !a.form.length)
                    return {
                        isValid: !1
                    };
                var b = {
                    form: a.form,
                    ignoreCaptcha: a.ignoreCaptcha || !1,
                    cancel: !1
                };
                return T1.channels.form.publish(T1.constants.BEFORE_FORM_SUBMIT, b),
                {
                    isValid: !b.cancel
                }
            },
            submitSuccess: function(a, c, d) {
                var e = f.currentForm.closest(f.formV2ContainerSelector)
                  , h = f.currentForm.closest(f.formV2Selector)
                  , i = h.find(".form-v2-result")
                  , j = {
                    form: f.currentForm,
                    status: c,
                    data: a,
                    validated: !0
                }
                  , k = {};
                if (e = e.add(f.currentForm.parents(f.formV2ContainerSelector)),
                !a.success || a.error || a.errors)
                    f.submitError(d, c, a.error ? [{
                        message: a.error
                    }] : a.errors);
                else {
                    if (h.find(".submit-error").remove(),
                    a.content) {
                        var l = b(a.content)
                          , m = l.filter("iframe").attr("src") || "";
                        m && (T1.utilities.isIpad() || T1.utilities.isIphone()) && (T1.utilities.downloadFile(m, !0),
                        l = l.filter(":not(iframe)")),
                        l.appendTo(i),
                        i.find("a[download]").attr("href", m)
                    }
                    if (a.thankYouPageData) {
                        k = {};
                        for (var n in a.thankYouPageData)
                            k = {
                                context: h
                            },
                            k[n] = a.thankYouPageData[n],
                            f.updatePageData(k)
                    }
                    i.find(".result-header .subtitle").removeClass("subtitle").addClass("intro"),
                    b.safe("T1.lazyLoad.onDemand")(i),
                    e.addClass(f.formCompletedClass),
                    h.closest(".trade-in-form-v2-container").length && f.tradeInForm.submitSuccess(a, h),
                    T1.channels.form.publishAsync(g.SUBMIT_FORM_RETURN, j)
                }
            },
            submitError: function(a, b, c) {
                c = c || [],
                c.length || c.push({
                    message: (a.responseJSON ? a.responseJSON.message : null) || T1.labels.forms.errorSubmit || error.data || a.responseText
                });
                var d = "";
                d = Array.isArray(c) ? c.map(function(a) {
                    return a.message
                }).join(" ") : c;
                var e = {
                    form: f.currentForm,
                    code: a.status,
                    status: b,
                    message: d,
                    errors: c,
                    showError: !0
                };
                console.log(b + ": " + d),
                T1.channels.form.publish(T1.constants.SUBMIT_FORM_RETURN, e),
                e.showError && f.setError(c, f.currentForm)
            },
            setError: function(a, c) {
                var d = b(c)
                  , e = d.closest(f.formV2Selector);
                if (e.find(".submit-error").remove(),
                Array.isArray(a))
                    for (var g = 0; g < a.length; g++)
                        e.prepend('<div class="container submit-error">' + a[g].message + "</div>");
                else
                    e.prepend('<div class="container submit-error">' + a + "</div>");
                f.scrollToTopOfForm(e)
            },
            setEventsBefore: function(a) {
                T1.channels.dialog.publishAsync(g.LOADING_START, {
                    target: b(a.data("loading-target") || a)
                })
            },
            setEventsAfter: function(a) {
                T1.channels.dialog.publishAsync(g.LOADING_COMPLETE, {
                    target: b(a.data("loading-target") || a)
                }),
                f.submitting = !1
            },
            addDataToForm: function(a, b, c) {
                var d = a.closest("form")
                  , e = d.data("extra-data");
                e && (e[b] = c,
                d.data("extra-data", e))
            },
            scrollToTopOfForm: function(a) {
                var c = a.closest(".material-box").length > 0
                  , d = c ? 0 : b("#navigation").height()
                  , e = c ? ".material-box-content, .material-box-content .form-v2" : "html, body"
                  , f = c ? 0 : a.offset().top - d;
                b(e).animate({
                    scrollTop: f
                }, g.ANIMATION_SPEED_FORMV2)
            },
            activateNextSubStep: function(a) {
                b(a).addClass("valid-sub-step")
            },
            deActivateNextSubStep: function(a) {
                b(a).removeClass("valid-sub-step")
            },
            onDOCClick: function(a) {
                if (0 === b(a.target).closest(".open-typeahead").length)
                    for (var c = 0; c < f.dropdownTypeAhead.length; c++)
                        f.dropdownTypeAhead[c].closeDropdownMenu()
            },
            initModelSelectDropdownInput: function(a, b) {
                var c = a.find(".t1-typeahead-dropdown")
                  , d = c.find("input").val();
                if (c.length) {
                    if (d.length > 0) {
                        var e = c.find(".dropdown-menu a[data-value='" + d.toLowerCase() + "']").data("extra-info")
                          , h = {
                            inputIsValid: !0,
                            activeExtraInfo: e,
                            newInputValue: d
                        };
                        b.bind(c[0])(h)
                    }
                    T1.utilities.isTouchCapable || (f.subscriptions.onDocClick || (f.subscriptions.onDocClick = T1.channels.global.subscribe(g.ON_DOC_CLICK, f.onDOCClick)),
                    f.dropdownTypeAhead.push(c.t1DropdownTypeAhead()))
                }
                c.off(g.INPUT_DROPDOWN_UPDATED, b).on(g.INPUT_DROPDOWN_UPDATED, b)
            },
            changeDownloadButtonSize: function(a, c) {
                b(a).find("." + f.dynamicDownloadSelector + " .btn > span").html(c)
            },
            testdriveForm: {
                dropdownSelectionImgSelector: "dropdown-selection-img",
                selector: "testdrive-form-v2",
                engineRadioButtonSelector: "engine-radio-container",
                subStepSelector: "sub-step",
                selected: {
                    model: "",
                    modelImageUrl: "",
                    engine: ""
                },
                selectedDealer: null,
                $dateInput: null,
                init: function(a) {
                    var c = b(a).or("body");
                    c.find("." + f.testdriveForm.selector).length && f.testdriveForm.initTestDriveForm(c);
                    var e = b('[data-input-time="time1"]:first');
                    e && e.length && (f.testdriveForm.$dateInput = b(e[0])),
                    T1.channels.dealer.subscribe(T1.constants.DEALER_SELECTED, d.testdriveForm.initA2DTimesForTestDrive)
                },
                initA2DTimesForTestDrive: function(a) {
                    if (!(a && a.context && a.context.container && a.context.container.length && a.context.container.closest(".testdrive-form-v2").length))
                        return !1;
                    d.testdriveForm.initA2DTimesForOperation(T1.util.a2d.operations.testdrive, a)
                },
                initA2DTimesForOperation: function(a, d) {
                    if (!f.testdriveForm.$dateInput || !f.testdriveForm.$dateInput.length)
                        return !1;
                    var e = !1;
                    if (d && d.dealer && d.dealer.openingDays) {
                        var g = {}
                          , h = T1.util.a2d.getValidOpeningDaysForOperation(d.dealer.openingDays, a);
                        if (c.forEach(h, function(a) {
                            T1.util.a2d.setFilterDayTimesForOpeningDay(a, g)
                        }),
                        b.isEmptyObject(g))
                            e = !0;
                        else {
                            var i = T1.util.a2d.getDaysDisabledFrom(g);
                            f.testdriveForm.setDateAndTimePicker(g, i)
                        }
                    } else
                        e = !0;
                    if (e)
                        if (f.testdriveForm.$dateInput.attr("data-filter-daytimes") && f.testdriveForm.$dateInput.attr("data-date-days-of-week-disabled"))
                            try {
                                f.testdriveForm.setDateAndTimePicker(JSON.parse(f.testdriveForm.$dateInput.attr("data-filter-daytimes")), JSON.parse(f.testdriveForm.$dateInput.attr("data-date-days-of-week-disabled")))
                            } catch (j) {
                                console.log("Error in A2D form set date and time picker JSON parse.")
                            }
                        else
                            f.testdriveForm.setDateAndTimePicker();
                    else
                        e && f.testdriveForm.setDateAndTimePicker()
                },
                setDateAndTimePicker: function(a, b) {
                    a = a || "",
                    b = b || "",
                    f.testdriveForm.$dateInput && (a && f.testdriveForm.$dateInput.data("filter-daytimes", a),
                    b && (f.testdriveForm.$dateInput.data("date-days-of-week-disabled", b),
                    f.testdriveForm.$dateInput.datepicker("destroy")),
                    f.testdriveForm.$dateInput.unbind("changeDate"),
                    T1.formInput.initDateInputs([f.testdriveForm.$dateInput]))
                },
                initTestDriveForm: function(a) {
                    a = a || b("body");
                    var c = a.find("." + f.testdriveForm.selector);
                    f.initModelSelectDropdownInput(c, f.testdriveForm.onModelSelectInputUpdate),
                    f.testdriveForm.initEngineSelectRadioButtons(c),
                    c.find(".testdrive-form-v2-modelengine").off("click", f.testdriveForm.hideModelIntroText).on("click", f.testdriveForm.hideModelIntroText)
                },
                hideModelIntroText: function() {
                    var a = b(this).parents("." + f.testdriveForm.selector);
                    a.find(".model-introduction").addClass("hidden"),
                    a.find(".testdrive-form-v2-modelengine").off("click", f.testdriveForm.hideModelIntroText)
                },
                initEngineSelectRadioButtons: function(a) {
                    a.find("." + f.testdriveForm.engineRadioButtonSelector).off("click", f.testdriveForm.checkEngineRadioButton).on("click", f.testdriveForm.checkEngineRadioButton)
                },
                checkEngineRadioButton: function(a) {
                    var c = b(a.domElement || this)
                      , d = c.find("input[type='radio']");
                    d.prop("checked", !0),
                    f.testdriveForm.selected.engine = d.val(),
                    f.testdriveForm.selected.engineText = d.siblings(".hvr-underline-from-left")[0].innerText,
                    f.testdriveForm.updateSelectedModelEngine(c.parents("." + f.testdriveForm.selector))
                },
                onModelSelectInputUpdate: function(a) {
                    var c = b(this)
                      , d = c.parents("." + f.testdriveForm.selector)
                      , e = d.find("." + f.testdriveForm.dropdownSelectionImgSelector)
                      , h = c.closest(".step").find(".btn-next-step")
                      , i = c.closest(".sub-step");
                    if (a.inputIsValid) {
                        var j = "string" == typeof a.activeExtraInfo ? JSON.parse(a.activeExtraInfo) : a.activeExtraInfo;
                        f.testdriveForm.selected.model = a.newInputValue,
                        f.testdriveForm.selected.modelCode = j.code,
                        f.testdriveForm.selected.modelImageUrl = j["img-link"],
                        e.attr("src", j["img-link"]),
                        c.find(".dropdown-toggle .selected-item").html(f.testdriveForm.selected.model),
                        f.testdriveForm.updateFuelTypes(j),
                        f.activateNextSubStep(i),
                        f.testdriveForm.updateSelectedModelEngine(d),
                        T1.channels.form.publishAsync(g.FORM_MODEL_SELECTED, {
                            context: d,
                            code: f.testdriveForm.selected.modelCode,
                            name: f.testdriveForm.selected.model,
                            engine: f.testdriveForm.selected.engine
                        }),
                        h.removeClass("hidden")
                    } else {
                        var k = c.find("input").attr("placeholder");
                        c.find(".dropdown-toggle .selected-item").html(k),
                        f.deActivateNextSubStep(i),
                        h.addClass("hidden")
                    }
                },
                updateSelectedModelEngine: function(a) {
                    var b = f.testdriveForm.selected.model + ", " + f.testdriveForm.selected.engineText;
                    a.find(".selected-model-engine").html(b)
                },
                updateFuelTypes: function(a) {
                    var c = b(".fueltypes")
                      , d = 0;
                    if (c.length) {
                        var e = function(b) {
                            if ("any" === b ? 1 !== d : a[b]) {
                                if (0 === d) {
                                    var e = {
                                        domElement: c.find("." + b + " .engine-radio-container")
                                    };
                                    f.testdriveForm.checkEngineRadioButton(e)
                                } else
                                    c.find("." + b + " input").prop("checked", !1);
                                d++,
                                c.find("." + b).addClass("available")
                            } else
                                c.find("." + b).removeClass("available")
                        };
                        e("hybrid"),
                        e("petrol"),
                        e("diesel"),
                        e("any")
                    }
                }
            },
            brochureForm: {
                dropdownSelectionImgSelector: "dropdown-selection-img",
                selector: "brochure-form-v2",
                brochureTypeAheadDropdownSelector: "t1-typeahead-dropdown",
                subStepSelector: "sub-step",
                dropdownTypeAhead: [],
                dynamicSelectType: null,
                selected: {
                    model: "",
                    modelImageUrl: "",
                    engine: ""
                },
                init: function(a) {
                    var c = b(a).or("body");
                    c.find("." + f.brochureForm.selector).length && f.brochureForm.initBrochureForm(c)
                },
                initBrochureForm: function(a) {
                    a = a || b("body");
                    var c = a.find("." + f.brochureForm.selector)
                      , d = c.find(".download-type .radio-container input:checked");
                    f.initModelSelectDropdownInput(c, f.brochureForm.onModelSelectInputUpdate),
                    f.brochureForm.setDynamicSelect.bind(d)(),
                    f.brochureForm.updateDownloadTypeChoice(c),
                    T1.channels.global.subscribe(g.ON_BREAKPOINT_CHANGE, function(a) {
                        "xs" !== a && "sm" !== a || f.brochureForm.updateDownloadTypeChoice(c)
                    }),
                    c.find(".btn-download").off("click", f.brochureForm.handleDownloadClick).on("click", f.brochureForm.handleDownloadClick),
                    c.find(".btn-online").off("click", f.brochureForm.handleOnlineBtnClick).on("click", f.brochureForm.handleOnlineBtnClick),
                    c.find(".select-dynamic [data-activate]").off("click", f.brochureForm.setDynamicSelect).on("click", f.brochureForm.setDynamicSelect)
                },
                setDynamicSelect: function() {
                    var a = b(this);
                    f.brochureForm.dynamicSelectType = a.val(),
                    console.log("Brochure form dynamic select set to: " + f.brochureForm.dynamicSelectType)
                },
                updateDownloadTypeChoice: function(a) {
                    if (a && a.length) {
                        var c, d = a.find(".download-type .radio-container"), e = d.filter(":visible"), g = e.find("input:checked");
                        if (e.each(function(a, d) {
                            c = b(d).hasClass("clearboth"),
                            c && b(d).removeClass("clearboth"),
                            a % 2 == 0 && b(d).addClass("clearboth")
                        }),
                        d.length && e.length && !g.length && (d.find("input").removeAttr("checked"),
                        e.length)) {
                            var h = b(e[0]).find("input");
                            h.prop("checked", !0),
                            f.switchElementDynamic.bind(h)(),
                            f.brochureForm.setDynamicSelect.bind(h)()
                        }
                    }
                },
                handleDownloadClick: function(a) {
                    var c = b(this)
                      , d = c.closest("form")
                      , e = {
                        context: d,
                        activateResultContent: !0,
                        downloadLink: c.attr("href")
                    }
                      , g = d.closest(f.formV2ContainerSelector)
                      , h = d.find(".form-v2-result")
                      , i = b('<iframe class="hidden" src=' + e.downloadLink + "></iframe>");
                    a.preventDefault(),
                    f.updatePageData(e),
                    T1.utilities.isIpad() || T1.utilities.isIphone() ? T1.utilities.downloadFile(e.downloadLink, !0) : i.appendTo(h),
                    g.addClass(f.formCompletedClass),
                    f.scrollToTopOfForm(g),
                    b.safe("T1.lazyLoad.onDemand")(h),
                    f.brochureForm.trackFormSubmit(d, "download")
                },
                handleOnlineBtnClick: function(a) {
                    var c = b(this)
                      , d = c.closest("form");
                    f.brochureForm.trackFormSubmit(d, "form-submit")
                },
                trackFormSubmit: function(a, b) {
                    T1.channels.statistics.publishAsync(g.STATS_TRACK, {
                        node: a,
                        extraData: {
                            event: {
                                value: b,
                                workflowstep: "4",
                                workflowconversion: "1",
                                modelname: f.brochureForm.selected.model
                            },
                            model: {
                                modelid: f.brochureForm.selected.modelCode,
                                modelname: f.brochureForm.selected.model
                            }
                        }
                    })
                },
                updateOnlineButton: function(a, b) {
                    var c = a.find(".btn-online");
                    b.length ? c.attr("href", b).removeClass("disabled").html(c.data("enabled-text")) : c.addClass("disabled").html(c.data("disabled-text"))
                },
                onModelSelectInputUpdate: function(a) {
                    var c = b(this)
                      , d = c.parents("." + f.brochureForm.selector)
                      , e = d.find("." + f.brochureForm.dropdownSelectionImgSelector)
                      , h = c.closest(".sub-step");
                    if (a.inputIsValid) {
                        var i = "string" == typeof a.activeExtraInfo ? JSON.parse(a.activeExtraInfo) : a.activeExtraInfo;
                        f.brochureForm.selected.model = a.newInputValue,
                        f.brochureForm.selected.modelCode = i.code,
                        f.brochureForm.selected.modelImageUrl = i["img-link"],
                        f.brochureForm.updateOnlineButton(d, i["online-url"]),
                        e.attr("src", i["img-link"]),
                        c.find(".dropdown-toggle .selected-item").html(f.brochureForm.selected.model);
                        var j = i[f.dataDownloadUrlPropertyName]
                          , k = {
                            context: d,
                            downloadLink: j
                        };
                        d.find(".btn-download").attr("href", j),
                        f.updatePageData(k),
                        d.find("." + f.dynamicDownloadSelector + " .btn").attr("data-bt-modelname", f.brochureForm.selected.model),
                        d.find("." + f.dynamicOnlineSelector + " .btn").attr("data-bt-modelname", f.brochureForm.selected.model),
                        f.changeDownloadButtonSize(d, i[f.extraDataDownloadSizePropertyName]),
                        f.activateNextSubStep(h),
                        f.brochureForm.updateDownloadTypeChoice(d),
                        T1.channels.form.publishAsync(g.FORM_MODEL_SELECTED, {
                            context: d,
                            code: f.brochureForm.selected.modelCode,
                            name: f.brochureForm.selected.model
                        }),
                        T1.channels.statistics.publishAsync(g.STATS_TRACK, {
                            node: d,
                            extraData: {
                                event: {
                                    value: "select-method",
                                    workflowstep: "2",
                                    modelname: f.brochureForm.selected.model
                                },
                                model: {
                                    modelid: f.brochureForm.selected.modelCode,
                                    modelname: f.brochureForm.selected.model
                                }
                            }
                        })
                    } else {
                        var l = c.find("input").attr("placeholder");
                        c.find(".dropdown-toggle .selected-item").html(l)
                    }
                }
            },
            personalBrochureForm: {
                selector: "personal-brochure-form-v2",
                bgRadioButtonSelector: "brochure-bg-radio-container",
                ebrochureSelectionBg: "ebrochure-model-bg",
                init: function(a) {
                    var c = b(a).or("body");
                    c.find("." + f.personalBrochureForm.selector).length && f.personalBrochureForm.initPersonalBrochureForm(c)
                },
                initPersonalBrochureForm: function(a) {
                    a = a || b("body");
                    var c = a.find("." + f.personalBrochureForm.selector)
                      , d = c.find("input[name=pdfName]");
                    f.personalBrochureForm.initBgSelectRadioButtons(c),
                    d.off("change", f.personalBrochureForm.updateBrochureTitle).on("change", f.personalBrochureForm.updateBrochureTitle),
                    f.injectQueryStringData(c)
                },
                updateBrochureTitle: function(a) {
                    var c = b(this)
                      , d = c.val();
                    if (!!d && d.length > 0) {
                        var e = c.closest("form")
                          , g = ".form-v2-content ." + f.personalBrochureForm.ebrochureSelectionBg + " .brochure-title"
                          , h = e.find(g)
                          , i = {
                            context: e,
                            thankYouBgImgTitle: d
                        };
                        h.html(d),
                        f.updatePageData(i)
                    }
                },
                initBgSelectRadioButtons: function(a) {
                    a.find("." + f.personalBrochureForm.bgRadioButtonSelector).off("click", f.personalBrochureForm.checkBackgroundButton).on("click", f.personalBrochureForm.checkBackgroundButton)
                },
                checkBackgroundButton: function(a) {
                    var c = b(a.domElement || this)
                      , d = c.find("input[type=radio]").data("extra-info")
                      , e = c.parents("." + f.personalBrochureForm.selector)
                      , g = c.find("input[type='radio']")
                      , h = e.find(".form-v2-content ." + f.personalBrochureForm.ebrochureSelectionBg)
                      , i = {
                        context: e,
                        thankYouBgImg: d["img-link"]
                    };
                    g.prop("checked", !0),
                    h.css("background-image", "url(" + d["img-link"] + ")"),
                    f.updatePageData(i)
                },
                injectFormData: function(a, c, d) {
                    var e = a.find('input[name="pdfName"]');
                    e.val(c),
                    a.find(".ebrochure-selection-img").one("load", function() {
                        b(this).closest(".ebrochure-selection-img-container").hide().removeClass("loading").show()
                    }).attr("src", d),
                    e.blur().change()
                }
            },
            contactForm: {
                contactFormExists: !1,
                contactFormV2Selector: "contact-form-v2",
                contactFormV2ResultSelector: "form-v2-result",
                dynamicSlidingNavTabsContentSelector: "dynamic-sliding-nav-tabs-content",
                subscriptions: {},
                init: function(a) {
                    var c = b(a).or("body")
                      , d = c.find(".contact-form-v2");
                    if (d && d.length > 0) {
                        var e = d.find("." + f.contactForm.dynamicSlidingNavTabsContentSelector + " .dropdown");
                        f.contactForm.subscriptions.tabDataToForm = T1.channels.tab.subscribe(T1.constants.SLIDING_NAV_TABS_SWITCH, f.contactForm.handleContactSlidingNavChange),
                        f.contactForm.subscriptions.googlePlacesSelect = T1.channels.google.subscribe(T1.constants.GOOGLE_PLACES_SELECT, f.onGooglePlacesSelect),
                        e.length && e.off(g.INPUT_DROPDOWN_UPDATED, f.contactForm.handleDropdownContactDetailsChange).on(g.INPUT_DROPDOWN_UPDATED, f.contactForm.handleDropdownContactDetailsChange)
                    }
                },
                handleContactSlidingNavChange: function(a) {
                    var c = b(a.context)
                      , d = c.closest(".contact-sliding-nav-tabs");
                    if (d.length > 0) {
                        var e, g, h = c.closest("form"), i = c.is("li") ? c : c.closest("li"), j = d.data("dynamic-content"), k = i.data("is-dynamic-target");
                        j && k ? f.contactForm.showDynamicContactSlidingNavContent(h, !0) : (e = i.data("target-email"),
                        g = i.data("target-name"),
                        f.addDataToForm(h, "extraInfo", e),
                        f.addDataToForm(h, "target", g),
                        j && f.contactForm.showDynamicContactSlidingNavContent(h, !1))
                    }
                },
                showDynamicContactSlidingNavContent: function(a, b) {
                    var c = a.find("." + f.contactForm.dynamicSlidingNavTabsContentSelector);
                    b ? c.addClass("active") : c.removeClass("active")
                },
                handleDropdownContactDetailsChange: function(a) {
                    var c = b(this);
                    if (0 !== c.closest(".dynamic-sliding-nav-tabs-content").length) {
                        var d = c.find("input")
                          , e = d.val()
                          , g = c.find("li a[data-value]").filter(function(a) {
                            return b(this).data("value") === e.toLowerCase()
                        }).first()
                          , h = c.closest("form")
                          , i = g.data()
                          , j = i.targetEmail
                          , k = i.targetName;
                        f.addDataToForm(h, "extraInfo", j),
                        f.addDataToForm(h, "target", k),
                        f.contactForm.updateDropdownDynamicTabPaneContent(d, h, i)
                    }
                },
                updateDropdownDynamicTabPaneContent: function(a, c, d) {
                    var e = a.data("activate")
                      , f = c.find("." + e)
                      , g = d.targetEmail
                      , h = d.targetPhone
                      , i = d.targetPhoneHours
                      , j = d.targetAddress
                      , k = d.targetChatLink
                      , l = d.targetChatName
                      , m = d.targetChatHours;
                    f.each(function(a) {
                        var c = b(this);
                        switch (c.data("label-type")) {
                        case "email":
                            g && g.length ? (c.addClass("active"),
                            c.find("a").text(g).attr("href", "mailto:" + g)) : c.removeClass("active");
                            break;
                        case "phone":
                            if (h && (h.length || "number" == typeof h)) {
                                var d = c.find(".phone-hours")
                                  , e = i && i.length ? i : "";
                                c.addClass("active"),
                                c.find("a").attr("href", "tel:" + h).html(h),
                                d.html(e)
                            } else
                                c.removeClass("active");
                            break;
                        case "address":
                            j && j.length ? (c.addClass("active"),
                            c.find(".contact-address").html(j)) : c.removeClass("active");
                            break;
                        case "chat":
                            if (k && k.length) {
                                c.addClass("active");
                                var f = c.find(".chat-link a")
                                  , n = c.find(".chat-hours")
                                  , o = l && l.length ? l : "chat"
                                  , p = m && m.length ? m : "";
                                f.attr("href", k).html(o),
                                n.html(p)
                            } else
                                c.removeClass("active");
                            break;
                        default:
                            c.removeClass("active")
                        }
                    })
                }
            },
            sendConfigurationForm: {
                selector: "send-configuration-form-v2",
                inputConfigTitleName: "config-name",
                init: function(a) {
                    var c = b(a).or("body")
                      , d = c.find("." + f.sendConfigurationForm.selector);
                    d.length && (f.injectQueryStringData(d),
                    d.find("input[name=" + f.sendConfigurationForm.inputConfigTitleName + "]").off("change", f.sendConfigurationForm.updateConfigTitle).on("change", f.sendConfigurationForm.updateConfigTitle))
                },
                updateConfigTitle: function(a) {
                    var c = b(this)
                      , d = c.val();
                    !!d && d.length > 0 && c.closest("form").find(".form-v2-content").find(".label-contact-data").find(".config-name").html(d)
                },
                getCarDataForPageUpdate: function(a, b) {
                    var c = {
                        container: b,
                        configData: {
                            code: a.code || "N/A",
                            name: a.carName
                        },
                        model: {
                            image: a.imgPath
                        }
                    };
                    if (a.price) {
                        var d = f.htmlDecode(globalize.format(a.price.listWithDiscount, "c"));
                        c.configData.price = d
                    }
                    return a.model && (c.model.name = a.model),
                    a.code && (c.configData.code = f.htmlDecode(a.code)),
                    a.storeDate && (c.configData.date = a.storeDate),
                    a.engine && (c.model.engine = a.engine),
                    a.colour && (c.model.colour = a.colour),
                    c
                },
                injectFormData: function(a, c) {
                    var d, e = a.find(".form-v2-content"), g = e.find("input[name=" + f.sendConfigurationForm.inputConfigTitleName + "]"), h = e.find(".label-contact-data");
                    g.val(c.pdfName),
                    e.find(".sendConfig-model-img").one("load", function() {
                        b(this).closest(".sendConfig-model-img-container").hide().removeClass("loading").show()
                    }).attr("src", c.imgPath),
                    d = f.sendConfigurationForm.getCarDataForPageUpdate(c, a),
                    f.updatePageData(d),
                    h.removeClass("loading"),
                    g.blur().change()
                }
            },
            vehicleIdentifierForm: {
                selector: ".vehicle-identifier-form",
                lastIdentifierEntered: null,
                ERROR_TYPES: {
                    INVALID_IDENTIFIER: 1,
                    IDENTIFIER_NOT_FOUND: 2,
                    INVALID_RECAPTCHA: 3,
                    MISC: 4
                },
                CONTEXT_TYPE: {
                    RECALL: 1,
                    DNA: 2
                },
                elements: null,
                init: function(a) {
                    f.vehicleIdentifierForm.elements = b(b(a).length ? a : f.vehicleIdentifierForm.selector),
                    f.vehicleIdentifierForm.elements.length && f.vehicleIdentifierForm.initEvents()
                },
                initEvents: function() {
                    f.vehicleIdentifierForm.elements.find(".btn-check-registration").off("click", f.vehicleIdentifierForm.retrieveVehicleDetails).on("click", f.vehicleIdentifierForm.retrieveVehicleDetails),
                    f.vehicleIdentifierForm.elements.find(".vehicle-identifier input").off("keydown", f.vehicleIdentifierForm.handleKeyPress).on("keydown", f.vehicleIdentifierForm.handleKeyPress),
                    f.vehicleIdentifierForm.elements.find(".btn-print").off("click", f.vehicleIdentifierForm.printResult).on("click", f.vehicleIdentifierForm.printResult)
                },
                printResult: function(a) {
                    a && a.preventDefault && a.preventDefault(),
                    window.print()
                },
                setPinNumberFromInput: function(a) {
                    var b = a.find(".vehicle-identifier input");
                    f.vehicleIdentifierForm.lastIdentifierEntered = b.length ? b.val().toUpperCase() : ""
                },
                handleKeyPress: function(a) {
                    var c = b(this).parents(f.vehicleIdentifierForm.selector);
                    f.updateButtonStatus(c, ".btn-check-registration"),
                    a.which === g.KEYCODE_ENTER ? (a.preventDefault(),
                    f.vehicleIdentifierForm.retrieveVehicleDetails(null, c)) : (f.vehicleIdentifierForm.resetErrors(c),
                    c.find(".details-list").fadeOut())
                },
                retrieveVehicleDetails: function(a, c) {
                    if (c = c && c.is(f.vehicleIdentifierForm.selector) || b(this).parents(f.vehicleIdentifierForm.selector),
                    c && c.length || (c = b("body").find(f.vehicleIdentifierForm.selector)),
                    a && a.preventDefault && a.preventDefault(),
                    f.currentForm = c,
                    f.vehicleIdentifierForm.resetErrors(c),
                    f.validate(c)) {
                        var d = f.vehicleIdentifierForm.getVehicleDetailsSubmissionParams(c);
                        f.submitting = !0,
                        f.submitAsync({
                            isGet: !0
                        }, d),
                        f.submitting || f.vehicleIdentifierForm.displayErrorMessage(c, f.vehicleIdentifierForm.ERROR_TYPES.INVALID_RECAPTCHA)
                    }
                },
                getContextType: function(a) {
                    return a.is(".recall-checker-form-v2") ? f.vehicleIdentifierForm.CONTEXT_TYPE.RECALL : a.is(".d-dna-form-v2") ? f.vehicleIdentifierForm.CONTEXT_TYPE.DNA : 0
                },
                getVehicleDetailsSubmissionParams: function(a) {
                    return f.vehicleIdentifierForm.setIdentifierFromInput(a),
                    {
                        url: T1.constants["URL_" + (f.vehicleIdentifierForm.getContextType(a) === f.vehicleIdentifierForm.CONTEXT_TYPE.RECALL ? "RECALL" : "DNA") + "_STATUS"] + f.vehicleIdentifierForm.lastIdentifierEntered,
                        doneCallback: function(b, c, d) {
                            if ("string" == typeof b)
                                try {
                                    b = JSON.parse(b)
                                } catch (e) {
                                    T1.utilities.isEnvironment.production || console.log("Parsing error in getVehicleDetailsSubmissionParams: " + e.message)
                                }
                            f.vehicleIdentifierForm.vehicleDetailsDataReceived(a, b)
                        },
                        failCallback: function(b, c, d) {
                            f.vehicleIdentifierForm.displayErrorMessage(a, f.vehicleIdentifierForm.ERROR_TYPES.MISC)
                        },
                        alwaysCallback: function() {
                            window.grecaptcha && window.grecaptcha.reset()
                        }
                    }
                },
                setIdentifierFromInput: function(a) {
                    var b = a.find(".vehicle-identifier input");
                    f.vehicleIdentifierForm.lastIdentifierEntered = b.length ? b.val().toUpperCase() : ""
                },
                vehicleDetailsDataReceived: function(a, b) {
                    var c = a.find(".details-list")
                      , d = a.find(".vehicle-identifier")
                      , e = !1
                      , g = (f.vehicleIdentifierForm.getContextType(a) === f.vehicleIdentifierForm.CONTEXT_TYPE.RECALL ? b.recallData : b.dnaData) || {};
                    g.cwsError = b.cwsError || null,
                    b.success || b.cwsError ? (f.vehicleIdentifierForm.updateFormVehicleDetails(a, g),
                    e = !0,
                    f.vehicleIdentifierForm.moveToNextStep(d)) : g.found ? f.vehicleIdentifierForm.displayErrorMessage(a, f.vehicleIdentifierForm.ERROR_TYPES.MISC) : f.vehicleIdentifierForm.displayErrorMessage(a, f.vehicleIdentifierForm.ERROR_TYPES.IDENTIFIER_NOT_FOUND),
                    e ? c.fadeIn() : c.fadeOut()
                },
                moveToNextStep: function(a) {
                    a && a.length && 0 !== a.parents(".step").length && a.find(".btn-next-step").trigger("click")
                },
                displayErrorMessage: function(a, b) {
                    if (a && b) {
                        var c = "";
                        switch (b) {
                        case f.vehicleIdentifierForm.ERROR_TYPES.IDENTIFIER_NOT_FOUND:
                            c = ".err-not-found";
                            break;
                        case f.vehicleIdentifierForm.ERROR_TYPES.INVALID_RECAPTCHA:
                            c = ".err-invalid-recaptcha";
                            break;
                        default:
                            c = ".err-misc"
                        }
                        a.find(".err-container").css("display", "block"),
                        a.find(c).addClass("active")
                    }
                },
                updateFormVehicleDetails: function(a, c) {
                    var c = c || {}
                      , d = a.find(".details-list")
                      , e = c.productionDate
                      , g = e ? new Date(e).getFullYear() : "N/A"
                      , h = c.details;
                    d.find(".vin").text(c.vin || f.vehicleIdentifierForm.lastIdentifierEntered),
                    d.find(".year").text(g),
                    d.find(".model").text(c.modelName || "N/A"),
                    d.find(".engine").text(c.engine || "N/A"),
                    d.find(".transmission").text(c.transmission || "N/A"),
                    f.vehicleIdentifierForm.updateRecallStatus(a, c);
                    var i = a.find(".message.recall.details").empty();
                    if (h && i.length) {
                        for (var j = b("<ul/>").addClass("recall-details"), k = 0; k < h.length; k++) {
                            var l = b("<li/>").text(h[k]);
                            j.append(l)
                        }
                        i.append(j)
                    }
                    d.find(".stolen").toggleClass("hidden", !c.stolen),
                    d.find(".not-stolen").toggleClass("hidden", c.stolen)
                },
                updateRecallStatus: function(a, b) {
                    var c = a.find(".recall-status .message")
                      , d = ".no-recall";
                    c.length && (c.removeClass("active"),
                    b.cwsError ? d = ".error" : b.recallsActive && (d = ".recall"),
                    c.filter(d).addClass("active"))
                },
                resetErrors: function(a) {
                    if (a && a.length || (a = b("body").find(f.vehicleIdentifierForm.selector)),
                    a.length) {
                        var c = a.find(".err-container");
                        c.css("display", ""),
                        c.find(".err").removeClass("active")
                    }
                }
            },
            tradeInForm: {
                selector: ".trade-in-form-v2-container",
                quoteFormSelector: "#get-quote",
                appraisalFormSelector: "#book-appraisal",
                localFormSelector: "#trade-in-local",
                elements: null,
                reCaptchaNeeded: !0,
                subscriptions: {},
                selectedModelCode: null,
                init: function(a) {
                    f.tradeInForm.elements = a && b(a).length ? b(a).find(f.tradeInForm.selector) : b(f.tradeInForm.selector),
                    f.tradeInForm.elements.length && (f.tradeInForm.initEvents(),
                    f.tradeInForm.setUserData())
                },
                initEvents: function() {
                    var a = f.tradeInForm.subscriptions
                      , b = f.tradeInForm.quoteFormSelector + ", " + f.tradeInForm.appraisalFormSelector;
                    f.tradeInForm.elements.find(".model-selector").off("click", f.tradeInForm.handleModelSelect).on("click", f.tradeInForm.handleModelSelect),
                    f.tradeInForm.elements.find("input[name=hybrid-preferred]").change(f.tradeInForm.handleHybridPreferredChange),
                    f.tradeInForm.elements.find(b).find(".btn-previous-form").off("click", f.tradeInForm.handlePreviousFormClick).on("click", f.tradeInForm.handlePreviousFormClick),
                    a.elementValidated || (a.elementValidated = T1.channels.form.subscribe(g.FORM_ELEMENT_VALIDATED, f.tradeInForm.handleElementValidated)),
                    a.onNavigate || (a.onNavigate = T1.channels.dialog.subscribe(g.FORM_TRADE_IN_NAVIGATION_CHANGE, f.tradeInForm.onNavigate))
                },
                onNavigate: function(a) {
                    if ("number" == typeof a.step) {
                        var c = 2;
                        a.type = String(a.type).toLowerCase(),
                        a.subtype = String(a.subtype).toLowerCase(),
                        1 === a.step || a.step === c && "valuation" === a.type ? f.tradeInForm.updateSectionVisibility({
                            injection: !0
                        }) : a.step !== c || "tme" !== a.type && "local" !== a.type ? a.step === 3 && f.tradeInForm.updateSectionVisibility({
                            hideNavigation: !0
                        }) : f.tradeInForm.handleNextFormClick(a),
                        f.scrollToTopOfForm(b(f.tradeInForm.selector))
                    }
                },
                submitSuccess: function(a, b) {
                    var d = a.quoteDetails || null;
                    if (d && b && b.length && f.tradeInForm.selectedModelCode) {
                        var e = {
                            context: b,
                            model: {
                                additionalPromotion: c.get(d, "detail[0].value.min", null)
                            },
                            amount: c.get(d, "detail[0].totalWithout.min", d.min || 0),
                            validUntil: d.expires && new Date(d.expires)
                        };
                        f.updatePageData(e),
                        f.tradeInForm.updateQuoteFlow(!(!a.quoteDetails || !a.quoteDetails.id))
                    }
                    T1.channels.dialog.publish(g.FORM_TRADE_IN_NAVIGATION_CHANGE, {
                        step: 3
                    })
                },
                setUserData: function() {
                    var a = Object.resolve("T1.channels.sso.config.config.contract.publishedEvents.loginOK.keyMap.token")
                      , b = a ? localStorage.getItem(a) : null
                      , c = f.tradeInForm.elements.find(".g-recaptcha");
                    T1 && T1.settings && T1.settings.mock && (b = localStorage.getItem("com.toyota.tme.user.token")),
                    b ? (f.addDataToForm(f.tradeInForm.elements.find("#book-appraisal form"), "userToken", b),
                    c.hide(),
                    f.tradeInForm.reCaptchaNeeded = !1) : (c.parents(".step").find(".btn-submit").data("captcha-dependent", !0),
                    c.show(),
                    f.tradeInForm.reCaptchaNeeded = !0)
                },
                handleElementValidated: function(a) {
                    !!b(a).parents(".trade-in-form-v2").length && f.updateButtonStatus(a, ".btn-next-step", !0)
                },
                handleModelSelect: function(a) {
                    var c = b(this)
                      , d = c.closest("form")
                      , e = c.closest(".step")
                      , h = d.find(".model-selector");
                    a && a.preventDefault && a.preventDefault(),
                    c.is(".active") || (f.tradeInForm.selectedModelCode = c.find("input").data("code"),
                    h.removeClass("active").find("input").prop("checked", !1),
                    c.addClass("active").find("input").prop("checked", !0),
                    T1.channels.form.publishAsync(g.FORM_MODEL_SELECTED, {
                        context: c,
                        code: c.find("input").data("code"),
                        name: c.find(".check strong").text()
                    }),
                    d.find(".modelrange").data("input-is-valid", !0),
                    f.updateButtonStatus(this, e.find(".btn-next-step").length ? ".btn-next-step" : ".btn-submit", !0),
                    f.tradeInForm.updateModelInfoOnThankYouPage(d, c))
                },
                handleHybridPreferredChange: function(a) {
                    a && a.preventDefault && a.preventDefault();
                    var c = b(this)
                      , d = c.val();
                    f.updatePageData({
                        context: c.closest("form"),
                        model: {
                            hybridPreferred: !0 === d || "true" === d
                        }
                    })
                },
                handlePreviousFormClick: function() {
                    postal.publish({
                        channel: g.CHANNEL_DIALOG,
                        topic: g.FORM_TRADE_IN_NAVIGATION_CHANGE,
                        data: {
                            step: 2,
                            type: "valuation"
                        }
                    })
                },
                handleNextFormClick: function(a) {
                    if (f.tradeInForm.updateSectionVisibility({
                        quote: "tme" === a.type && "quote" === a.subtype,
                        appraisal: "tme" === a.type && "appraisal" === a.subtype,
                        local: "local" === a.type
                    }),
                    "tme" === a.type && a.subtype) {
                        var c = "quote" === a.subtype ? f.tradeInForm.quoteFormSelector : f.tradeInForm.appraisalFormSelector
                          , d = f.tradeInForm.elements.find(c)
                          , e = d.find("form");
                        if (!e.length)
                            return;
                        T1.channels.form.publish(g.NAVIGATION_FORM_UPDATE, {
                            context: d,
                            number: 1,
                            stepContainer: d.find(".step-1"),
                            doNotScrollTop: !0
                        });
                        for (var h in a)
                            a.hasOwnProperty(h) && f.addDataToForm(e, h, a[h]);
                        "quote" === a.subtype && f.tradeInForm.updateQuoteFlow(!!a.quoteId),
                        f.updatePageData(b.extend(a, {
                            context: d
                        }))
                    }
                },
                updateQuoteFlow: function(a) {
                    var b = f.tradeInForm.elements.find(f.tradeInForm.quoteFormSelector);
                    b.length && (b.find(".no-quote-flow").toggleClass("hidden", a),
                    b.find(".quote-flow").toggleClass("hidden", !a))
                },
                updateSectionVisibility: function(a) {
                    var c = b(f.tradeInForm.selector)
                      , d = c.find(f.tradeInForm.appraisalFormSelector)
                      , e = c.find(f.tradeInForm.quoteFormSelector)
                      , g = c.find(f.tradeInForm.localFormSelector)
                      , h = c.find(".or-tradein")
                      , i = c.find("#form-v2-injection");
                    a.hideNavigation ? h.find(">.row").hide() : (i.toggleClass("part2", !a.injection),
                    d.toggleClass("hidden", !a.appraisal),
                    e.toggleClass("hidden", !a.quote),
                    g.toggleClass("hidden", !a.local)),
                    a.injection ? T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: c,
                        extraData: {
                            event: {
                                action: "workflow",
                                value: "welcome-screen",
                                workflowname: "tradein-calculator",
                                workflowstep: "1"
                            }
                        }
                    }) : a.appraisal ? T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: d.find(".trade-in-form-v2")
                    }) : a.quote && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: e.find(".trade-in-form-v2")
                    })
                },
                updateModelInfoOnThankYouPage: function(a, b) {
                    var c = b.data("extra-info")
                      , d = {
                        context: a,
                        model: {
                            name: b.find(".check strong").text(),
                            image: c && c["img-link"] || "/images/1x1.gif"
                        }
                    };
                    f.updatePageData(d)
                }
            },
            collectConsentForm: {
                selector: "collect-consent-form-v2",
                dealerId: "",
                init: function(a) {
                    var c = b(a).or("body")
                      , d = c.find("." + f.collectConsentForm.selector);
                    d.length > 0 && (f.shouldFetchDealerData = !1,
                    T1.channels.dealer.subscribe(g.DEALER_SELECTED, function(a) {
                        f.collectConsentForm.setDealerId(d, a.dealer.uuid)
                    }),
                    d.find(".btn-next-step").off("click").on("click", f.collectConsentForm.loadFormWithQueryParameter))
                },
                setDealerId: function(a, b) {
                    f.collectConsentForm.dealerId = b
                },
                loadFormWithQueryParameter: function() {
                    window.location = window.location.href + (window.location.search ? "&" : "?") + "dealerId=" + f.collectConsentForm.dealerId
                }
            }
        }
          , f = d
          , g = T1.constants;
        return {
            init: d.init,
            addDataToForm: d.addDataToForm,
            loadCarInfo: d.loadCarInfo,
            setError: d.setError,
            validate: d.validate,
            Navigation: a
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.slidingNavTabs = function() {
        "use strict";
        var a = {
            isMobileMode: !1,
            slidingNavTabSelector: "sliding-nav-tabs",
            mobileDropdownOpenerSelector: "mobile-dropdown-opener",
            mobileOnDocClickSubscription: null,
            init: function() {
                c.initOnDemand(),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, c.onMaterialBoxOpened)
            },
            initOnDemand: function(a) {
                var d = b(a).or("body")
                  , e = d.find("." + c.slidingNavTabSelector) || null;
                e && e.length > 0 && c.attachEventsToSlidingNavElements(e)
            },
            onMaterialBoxOpened: function(a) {
                c.initOnDemand(a.container),
                c.isMobileMode && c.initMobileDropdown(a.container)
            },
            attachEventsToSlidingNavElements: function(a) {
                a.find(" > li > .tab-handler").off("click", c.handleSlidingNavClick).on("click", c.handleSlidingNavClick)
            },
            handleMobileListState: function(a) {
                var b = a.$navTabs || a.data.$navTabs;
                b.hasClass("open") ? b.removeClass("open") : b.addClass("open")
            },
            handleSlidingNavClick: function(a) {
                a.preventDefault();
                var d = b(this)
                  , e = d.data("nav-class")
                  , f = d.closest("." + c.slidingNavTabSelector);
                if (f.removeClass(function(a, b) {
                    return (b.match(/\bactive-\S+/g) || []).join(" ")
                }),
                f.addClass(e),
                T1.channels.tab.publishAsync(T1.constants.SLIDING_NAV_TABS_SWITCH, {
                    context: d
                }),
                c.isMobileMode) {
                    var g = d.find(".svg-container:first").clone()
                      , h = d.find(".hvr-underline-from-left:first").clone();
                    c.replaceCurrentActivePane(g, h, f),
                    c.handleMobileListState({
                        $navTabs: f
                    })
                }
            },
            replaceCurrentActivePane: function(a, b, c) {
                var d = c.find(".mobile-dropdown");
                d.find(".svg-container:first").remove(),
                d.find(".hvr-underline-from-left:first").remove(),
                d.prepend(b).prepend(a)
            },
            switchMobile: function() {
                c.isMobileMode = !0,
                c.initMobileDropdown()
            },
            initMobileDropdown: function(a) {
                var e = b(a).or("body")
                  , f = e.find("." + c.slidingNavTabSelector) || null;
                f.length && (b.each(f, function() {
                    var a = b(this);
                    a.find("." + c.mobileDropdownOpenerSelector).off(T1.utilities.clickEvent, c.handleMobileListState).on(T1.utilities.clickEvent, null, {
                        $navTabs: a
                    }, c.handleMobileListState)
                }),
                c.mobileOnDocClickSubscription || (c.mobileOnDocClickSubscription = T1.channels.global.subscribe(d.ON_DOC_CLICK, c.onDOCClick)))
            },
            switchDesktop: function() {
                c.isMobileMode = !1,
                c.mobileOnDocClickSubscription && (c.mobileOnDocClickSubscription.unsubscribe(),
                c.mobileOnDocClickSubscription = null)
            },
            onDOCClick: function(a) {
                0 === b(a.target).closest(".nav-tabs").length && b("body").find(".nav-tabs.open").removeClass("open")
            }
        }
          , c = a
          , d = T1.constants;
        return {
            init: a.init,
            switchMobile: a.switchMobile,
            switchDesktop: a.switchDesktop
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.eBoutique = function() {
        var a = {
            eBoutiqueLinks: null,
            lsKeyToken: "com.toyota.tme.user.token",
            init: function() {
                var c = T1 && T1.settings && T1.settings.appUrls && (T1.settings.appUrls.eBoutique || T1.settings.appUrls.eboutique);
                if (c && "" !== c.replace(/\s/g, "")) {
                    for (var d = b("#myToyota a, .dropdown-menu-car a"), e = 0; e < d.length; e++)
                        (decodeURIComponent(d[e].href).indexOf(c) > -1 || d[e].href.indexOf(c) > -1) && b(d[e]).on("click", a.setRedis);
                    T1.channels.cp.subscribe(T1.constants.EBOUTIQUE_OPEN, a.setRedis)
                }
            },
            setRedis: function(c) {
                c && "function" == typeof c.preventDefault && c.preventDefault();
                var d = c.url || b(this).attr("href")
                  , e = localStorage[a.lsKeyToken];
                d && (e ? b.ajax({
                    url: (Object.resolve("T1.settings.ssoServiceUrl") || "//ssoms.toyota-europe.com").replace(/\/(\s)*$/, "") + "/tokenHash",
                    method: "POST",
                    contentType: "application/json",
                    data: JSON.stringify({
                        token: e
                    })
                }).always(a.redirect.bind(this, d)) : a.redirect(d))
            },
            redirect: function(b, c) {
                var d = c && c.tokenHash;
                window.location.href = d ? a.addRedisHashToUrl(b, d) : b
            },
            addRedisHashToUrl: function(a, b) {
                var c = a.indexOf("/iframe/") > -1
                  , d = c ? decodeURIComponent(a.replace(/.*\/iframe\//, "")) : a;
                return d += (d.indexOf("?") > 0 ? "&" : "?") + "u=" + b,
                c ? "#/iframe/" + encodeURIComponent(d) : d
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.healthCheck = function() {
        "use strict";
        var a = T1.settings.carconfig && T1.settings.carconfig.gateway.replace(/\/\s*$/, "") || ""
          , c = "/api/show-versions-info"
          , d = {
            reSpecialCharacters: /[^0-9a-zA-Z]+/g,
            dfrCache: {},
            healthCheckVersions: [{
                application: "t1-server",
                url: c
            }, {
                application: "t1-client",
                url: c,
                resolve: "services.t1-client.version",
                resolveError: "services.t1-client.err"
            }, {
                application: "t1-finance",
                url: c,
                resolve: "services.t1-finance.version",
                resolveError: "services.t1-finance.err"
            }, {
                application: "t1-services",
                url: c,
                resolve: "services.t1-services.version",
                resolveError: "services.t1-services.err"
            }, {
                application: "t1-images",
                url: c,
                resolve: "services.t1-images.version",
                resolveError: "services.t1-images.err"
            }, {
                application: "ccsave",
                url: c,
                resolve: "services.ccsave.version",
                resolveError: "services.ccsave.err"
            }, {
                application: "cocadap",
                url: c,
                resolve: "services.cocadap.version",
                resolveError: "services.cocadap.err"
            }, {
                application: "texus version",
                url: a + "/version",
                resolve: "service.version"
            }, {
                application: "texus health check",
                url: a + "/healthCheck",
                resolve: "%RAW%",
                dataType: "text"
            }],
            init: function() {
                T1.channels.global.subscribe(f.HEALTH_CHECK, e.openHealthCheck),
                e.listenToCtrlAltVKeystroke()
            },
            listenToCtrlAltVKeystroke: function() {
                b(document).on("keydown", function(a) {
                    a.ctrlKey && a.altKey && 86 === a.keyCode && T1.channels.hash.publish(f.HASH_ADD, "publish/health_check")
                })
            },
            openHealthCheck: function() {
                var a = b("<div></div>").addClass("loading container");
                T1.channels.dialog.publishAsync(f.MATERIALBOX_OPEN, {
                    html: a,
                    styleClass: "health-check",
                    size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN
                }),
                e.getAllHealthVersions().done(e.renderDialogContent.bind(this, a))
            },
            getAllHealthVersions: function() {
                var a = b.Deferred()
                  , c = []
                  , d = window.t1InjectedApps || []
                  , f = e.healthCheckVersions.concat(d);
                for (var g in f)
                    c.push(e.getAppHealth(f[g]));
                return b.when.apply(this, c).done(function() {
                    a.resolve(f.sort(e.sortAtoZ))
                }),
                a
            },
            sortAtoZ: function(a, b) {
                return a.application < b.application ? -1 : 1
            },
            getAppHealth: function(a) {
                var c = b.Deferred();
                return !a.version && a.url ? e.getHealthContentFromUrl(a.url, a.dataType).always(function(b, d) {
                    try {
                        "error" === d ? a.error = d : "%RAW%" === a.resolve ? a.version = b : (a.version = Object.resolve(a.resolve || "version", b),
                        a.error = Object.resolve(a.resolveError || "error", b)),
                        c.resolve(a)
                    } catch (e) {
                        c.resolve(a)
                    }
                }) : c.resolve(a),
                c
            },
            getHealthContentFromUrl: function(a, c) {
                var d = a && a.replace(e.reSpecialCharacters, "");
                return e.dfrCache[d] ? e.dfrCache[d] : e.dfrCache[d] = b.ajax({
                    url: a,
                    dataType: c || "json"
                })
            },
            renderDialogContent: function(a, c) {
                var d = b("<header></header>").append(b("<h1></h1>").text("Health Check"))
                  , f = b("<div></div>").addClass("services")
                  , g = b("<div></div>").addClass("service error").append(b("<h4></h4>").text(T1.labels.healthCheckUnavailableServices || "Toyota Website Unavailable Services"))
                  , h = b("<div></div>").addClass("service").append(b("<h4></h4>").text(T1.labels.healthCheckServices || "Toyota Website Services"))
                  , i = !1;
                a.append(d),
                a.append(f);
                for (var j in c) {
                    var k = c[j].error;
                    e.renderRow(k ? g : h, c[j]),
                    k && (i = !0)
                }
                f.append(i ? g : null, h),
                a.removeClass("loading")
            },
            renderRow: function(a, c) {
                var d = b("<div></div>").addClass("row");
                d.append(b("<div></div>").addClass("col-xs-6 title").text(c.application)),
                d.append(b("<div></div>").addClass("col-xs-6 value").text(c.error || c.version)),
                a.append(d)
            }
        }
          , e = d
          , f = T1.constants;
        return {
            init: d.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.wifiBox = function() {
        var b = {
            requireKeys: null,
            mainContainerId: "cme-main",
            mainCustomerPortalId: "cp",
            init: function() {
                T1.channels.wifibox.subscribe(T1.constants.WIFIBOX_RENDER, b.render),
                T1.channels.cp.subscribe(T1.constants.CUSTOMER_PORTAL_SHOW, b.hide)
            },
            render: function(a) {
                a && "object" == typeof a || (a = {}),
                b.getRequireKeys(a).done(function(c) {
                    b.injectMainContainer(a),
                    require(c, function(a) {
                        console.dir(a)
                    })
                }),
                b.show()
            },
            injectMainContainer: function(c) {
                a.$("#" + b.mainContainerId).length || a.$("#pagecontent").prepend(a.$("<div></div>").attr({
                    id: b.mainContainerId
                }))
            },
            show: function() {
                a.$("#" + b.mainContainerId).css({
                    display: "block"
                }),
                a.$("#" + b.mainCustomerPortalId).css({
                    display: "none"
                })
            },
            hide: function() {
                a.$("#" + b.mainContainerId).css({
                    display: "none"
                }),
                a.$("#" + b.mainCustomerPortalId).css({
                    display: "block"
                })
            },
            getRequireKeys: function(c) {
                return c.dfrRequireKeys = a.$.Deferred(),
                c.baseUrl = (T1.settings.cmeBaseUrl || "//connect-me-b2c-ui-dev.s3-eu-west-1.amazonaws.com/main-content").replace(/\/\s*$/, ""),
                b.requireKeys ? c.dfrRequireKeys.resolve(b.requireKeys) : a.$.ajax({
                    url: c.baseUrl + "/version.json"
                }).done(function(a) {
                    c.baseUrl = c.baseUrl.replace(/\/main-content\/?\s*$/i, ""),
                    a && (requirejs.config({
                        paths: {
                            cme: c.baseUrl + "/" + a.main.replace(/\.js\s*$/, "")
                        }
                    }),
                    b.requireKeys = ["cme", "css!" + c.baseUrl + "/" + a.styles.toyota],
                    c.dfrRequireKeys.resolve(b.requireKeys))
                }),
                c.dfrRequireKeys
            }
        };
        return {
            init: b.init,
            render: function(a) {
                T1.channels.wifibox.publish(T1.constants.WIFIBOX_RENDER, a)
            }
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.onlineCheckout = function() {
        var a = {
            init: function() {
                T1.channels.carconfig.subscribe(T1.constants.BUY_CAR, a.redirectToOnlineCheckoutApp)
            },
            getOnlineCheckoutUrl: function(b) {
                return (Object.resolve && Object.resolve("T1.settings.urlOrCheckoutUrl") || "/apps/onlinecheckout").trim() + "?" + a.serializeQueryStringParams(b)
            },
            getCurrentUrl: function() {
                return location.pathname
            },
            serializeQueryStringParams: function(a) {
                var b = ""
                  , c = "";
                for (var d in a)
                    void 0 !== (c = a[d]) && null !== c && (c.indexOf("/") > -1 && (c = encodeURIComponent(c)),
                    b += "&" + d + "=" + c);
                return b.replace(/^&/, "")
            },
            redirectToOnlineCheckoutApp: function(b) {
                "object" != typeof b && (b = {});
                var c = Object.resolve && Object.resolve("T1.ctx.config.Personal.Parameters.FinanceQuoteID")
                  , d = T1.request && T1.request.getQueryStringParameter("financeOption") || Object.resolve("T1.ctx.config.Personal.Parameters.FinanceOption")
                  , e = !c && "cash" !== d;
                b.orBuildUrl = b.orBuildUrl || a.getCurrentUrl(),
                b.tyCode = b.tyCode || Object.resolve && Object.resolve("T1.ctx.config.ConfigurationCode"),
                b.personalCode = b.personalCode || Object.resolve && Object.resolve("T1.ctx.config.Personal.Code"),
                b.financeOption = b.financeOption || d,
                b.finance = b.finance || (e ? "default" : null);
                a.getOnlineCheckoutUrl(b);
                T1.channels.global.publish(T1.constants.GENERAL_REDIRECT, {
                    url: a.getOnlineCheckoutUrl(b)
                })
            }
        };
        return {
            init: a.init
        }
    }()
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
window.T1 = window.T1 || {},
T1.util = T1.util || {},
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.util.SortingUtil = function() {
        function a() {
            _classCallCheck(this, a)
        }
        return _createClass(a, null, [{
            key: "sortHTMLElements",
            value: function(a, c) {
                for (var d = [], e = 0; e < a.length; e++) {
                    var f = b(a[e]);
                    void 0 !== f.data(c) && 0 !== f.data(c).length || (d.push(f[0]),
                    a.splice(e, 1))
                }
                return a.sort(function(a, d) {
                    var e = b(a).attr("data-" + c)
                      , f = Number.parseFloat(e)
                      , g = b(d).attr("data-" + c)
                      , h = Number.parseFloat(g);
                    return e = isNaN(f) ? e : f,
                    g = isNaN(h) ? g : h,
                    e === g ? 0 : (void 0 === e ? "undefined" : _typeof(e)) === (void 0 === g ? "undefined" : _typeof(g)) ? e < g ? -1 : 1 : (void 0 === e ? "undefined" : _typeof(e)) < (void 0 === g ? "undefined" : _typeof(g)) ? -1 : 1
                }),
                a.concat(d)
            }
        }]),
        a
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    "use strict";
    var b = T1.util && T1.util.SortingUtil;
    T1.modelRange = function() {
        var a = {
            container: null,
            criteria: {
                DEFAULT: {
                    href: "#default",
                    value: "index"
                },
                PRICE: {
                    href: "#price",
                    value: "price"
                },
                TIME: {
                    href: "#time",
                    value: "time"
                },
                FUEL: {
                    href: "#fuel",
                    value: "fuel-consumption"
                }
            },
            CLASS_ACTIVE: "active",
            init: function() {
                a.container = $(".menu-item-level-1:first-child .car-range"),
                a.container && a.initSort()
            },
            initSort: function() {
                $(".side-sort a").off("click", a.handleSortClick).on("click", a.handleSortClick)
            },
            handleSortClick: function(c) {
                c.preventDefault();
                var d = $(c.target)
                  , e = d.parent()
                  , f = a.getCriterium(d.attr("href"))
                  , g = a.container.find(".block").toArray()
                  , h = [];
                if (!e.hasClass(a.CLASS_ACTIVE)) {
                    h = b.sortHTMLElements(g, a.criteria.DEFAULT.value),
                    h = f ? b.sortHTMLElements(h, f) : h,
                    a.container.html("");
                    for (var i = 0; i < h.length; i++)
                        a.container.append(h[i]);
                    a.resetSortTriggers(),
                    e.addClass(a.CLASS_ACTIVE)
                }
            },
            getCriterium: function(b) {
                for (var c in a.criteria)
                    if (a.criteria.hasOwnProperty(c) && a.criteria[c].href === b)
                        return a.criteria[c].value
            },
            resetSortTriggers: function() {
                $(".side-sort li").removeClass(a.CLASS_ACTIVE)
            }
        };
        return {
            init: a.init
        }
    }()
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    var b = a.$ || b;
    T1.grmnSupra = function() {
        var a = {
            channel: "com.toyota.tme.grmn",
            openSupraWaitingListTopic: "grmn.supra.waitinglist.open",
            supraWaitingListButtonClass: "open-supra-waitinglist",
            urlDefaultWaitingList: "/forms-v2/forms.json?type=newsletter&campaign=supra_2018-waitinglist",
            init: function() {
                a.subscribeSupraWaitingListEvent(),
                a.subscribeSupraWaitingListButton()
            },
            subscribeSupraWaitingListEvent: function() {
                postal.subscribe({
                    channel: a.channel,
                    topic: a.openSupraWaitingListTopic,
                    callback: a.redirectToSupraGrmnWaitingList
                })
            },
            subscribeSupraWaitingListButton: function() {
                b("." + a.supraWaitingListButtonClass).click(function(b) {
                    b.preventDefault(),
                    postal.publish({
                        channel: a.channel,
                        topic: a.openSupraWaitingListTopic
                    })
                })
            },
            redirectToSupraGrmnWaitingList: function(b) {
                var c = Object.resolve("T1.settings.urlSupraWaitingList") || a.urlDefaultWaitingList;
                window.location.href = c
            }
        };
        return {
            init: a.init,
            redirectToWaitingList: a.redirectToSupraGrmnWaitingList
        }
    }()
});
var T1 = T1 || {};
T1.include = T1.include || {};
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.defineInit("t1-api-gradedata", ["T1-site-dependencies"], function(a) {
    "use strict";
    var b = a._
      , c = a.$
      , d = function() {
        function a() {
            var b = this;
            _classCallCheck(this, a),
            a.instance || (a.instance = this),
            this.gradeData = {
                cars: {},
                colours: {},
                filters: !1
            };
            var d = c.safe("T1.utilities.isEnvironment.production") || !0;
            if (T1.ctx = T1.ctx || {},
            T1.ctx.model) {
                T1.ctx.grade = T1.ctx.grade || {};
                var e = "/api/data/grades/" + T1.ctx.model;
                T1.ctx.grade.hasFilters && (e += "/true"),
                c.ajax({
                    url: e,
                    dataType: "JSON"
                }).done(function(a) {
                    b.gradeData = a
                }).fail(function(a, b, c) {
                    d || console.error("Could not load Grades data: ", c)
                })
            } else
                d || console.error("Could not load Grades data: Missing model in T1.ctx");
            return a.instance
        }
        return _createClass(a, [{
            key: "gradeComboExists",
            value: function(a) {
                var b = a.bodyTypeFilter
                  , c = void 0 === b ? "default" : b
                  , d = a.wheelBaseFilter
                  , e = void 0 === d ? "default" : d
                  , f = a.carId
                  , g = a.colourId
                  , h = !1;
                try {
                    var i = this.gradeData;
                    i.filters && (i = i.bodyTypes[c].wheelBases[e]),
                    h = !!i.cars[f].colours[g]
                } catch (error) {
                    return !1
                }
                return h
            }
        }, {
            key: "getGradeUndefinedProperty",
            value: function(a) {
                var b = a.bodyTypeFilter
                  , c = a.wheelBaseFilter
                  , d = a.carId
                  , e = a.colourId
                  , f = this.gradeData;
                if (f.filters) {
                    if (!(f = f.bodyTypes[b]))
                        return "bodyTypeFilter";
                    if (!(f = f.wheelBases[c]))
                        return "wheelBaseFilter"
                }
                return (f = f.cars[d]) ? (f = f.colours[e],
                f ? null : "colourId") : "carId"
            }
        }, {
            key: "findMatch",
            value: function(a, c) {
                var d = a.gradeId
                  , e = a.bodyTypeId
                  , f = a.bodyTypeFilter
                  , g = void 0 === f ? "default" : f
                  , h = a.wheelBaseFilter
                  , i = void 0 === h ? "default" : h
                  , j = a.carId
                  , k = a.engineEtw
                  , l = a.colourId
                  , m = this.gradeData
                  , n = function(a) {
                    if (a[j])
                        return a[j];
                    var c = void 0
                      , f = void 0
                      , g = void 0;
                    return b.forEach(a, function(a) {
                        if (a.engineEtw === k) {
                            if (a.gradeId === d) {
                                if (a.colours[l])
                                    return c = a,
                                    !1;
                                f = a
                            }
                            c || a.bodyTypeId !== e || (a.colours[l] ? c = a : f || (f = a)),
                            c || g && g.colours[l] || (g = a)
                        }
                    }),
                    c || f || g
                };
                if (m.filters) {
                    if (!m.bodyTypes[g])
                        return;
                    var o = void 0;
                    return m.bodyTypes[g].wheelBases[i] ? o = n(m.bodyTypes[g].wheelBases[i].cars) : "wheelBaseFilter" === c ? b.forEach(m.bodyTypes, function(a) {
                        return a.wheelBases[i] && (o = n(a.wheelBases[i].cars)),
                        !o
                    }) : b.forEach(m.bodyTypes[g].wheelBases, function(a) {
                        return !(o = n(a.cars))
                    }),
                    o
                }
            }
        }, {
            key: "getExistingGrade",
            value: function(a) {
                var b = a.wheelBaseFilter
                  , c = void 0 === b ? "default" : b
                  , d = a.bodyTypeFilter
                  , e = void 0 === d ? "default" : d
                  , f = void 0;
                try {
                    this.gradeData.bodyTypes[e] && this.gradeData.bodyTypes[e].wheelBases[c] && (f = Object.keys(this.gradeData.bodyTypes[e].wheelBases[c].cars)[0])
                } catch (e) {
                    return null
                }
                return f
            }
        }, {
            key: "getTotalPrice",
            value: function(a) {
                var b = a.carId
                  , c = a.colourId
                  , d = a.wheelBaseFilter
                  , e = void 0 === d ? "default" : d
                  , f = a.bodyTypeFilter
                  , g = void 0 === f ? "default" : f;
                return this.getDataValue({
                    carId: b,
                    colourId: c,
                    wheelBaseFilter: e,
                    bodyTypeFilter: g
                }, "totalPrice")
            }
        }, {
            key: "getTfsCode",
            value: function(a) {
                var b = a.carId
                  , c = a.colourId
                  , d = a.wheelBaseFilter
                  , e = void 0 === d ? "default" : d
                  , f = a.bodyTypeFilter
                  , g = void 0 === f ? "default" : f;
                return this.getDataValue({
                    carId: b,
                    colourId: c,
                    wheelBaseFilter: e,
                    bodyTypeFilter: g
                }, "tfsCode")
            }
        }, {
            key: "getDataValue",
            value: function(a, b) {
                var c = a.carId
                  , d = a.colourId
                  , e = a.wheelBaseFilter
                  , f = void 0 === e ? "default" : e
                  , g = a.bodyTypeFilter
                  , h = void 0 === g ? "default" : g
                  , i = void 0;
                try {
                    i = this.gradeData.filters ? this.gradeData.bodyTypes[h].wheelBases[f].cars[c].colours[d][b] : this.gradeData.cars[c].colours[d][b]
                } catch (error) {
                    i = null
                }
                return i
            }
        }, {
            key: "hasFilters",
            value: function() {
                return !0 === this.gradeData.filters
            }
        }, {
            key: "getAllGradeData",
            value: function() {
                return this.gradeData
            }
        }]),
        a
    }();
    return a.$("body").hasClass("grade-explore") ? new d : {}
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
define("t1-component-navigationSecondary", ["t1-component-abstract"], function(a) {
    "use strict";
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, null));
            if (d.constructor === b)
                throw new T1.error.ClassTypeError("Cannot instantiate Abstract Class NavigationSecondary");
            return a = $(a),
            d.$container = d.container,
            d.initializedMd = !1,
            d.isMoreSelected = !1,
            d.hiddenOverflowClass = c.hiddenOverflowClass,
            d.visibleOverflowClass = "overflow-vis",
            d.id = d.$container.attr("id"),
            d.$navList = d.$container.find("." + c.navListClass),
            d.$navListItems = d.$navList.find("li"),
            d.$li = d.$container.find("li"),
            d.$secondLevelLinks = d.$li.find("a"),
            d.$dropdown = d.$li.filter(".dropdown"),
            d.$dropdownCollapser = d.$dropdown.find("> a"),
            d.$submenuItem = d.$dropdown.find(".sub-menu"),
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                this.attachNavigationEventHandlers()
            }
        }, {
            key: "attachNavigationEventHandlers",
            value: function() {
                var a = this;
                this.$navListItems.on("click", function(b) {
                    return a.handleNavListItemClick(b)
                })
            }
        }, {
            key: "handleNavListItemClick",
            value: function(a) {
                var b = $(a.currentTarget);
                b.hasClass("dropdown") || (this.$navListItems.removeClass("active"),
                b.addClass("active"),
                b.parent(".dropdown").length || (this.isMoreSelected = !1))
            }
        }, {
            key: "toggleShowMore",
            value: function() {
                this.isMoreSelected = !this.isMoreSelected,
                this.$dropdown.toggleClass("open")
            }
        }, {
            key: "handleDropdownVisibility",
            value: function() {
                0 === this.getSubmenuItems().length ? this.$dropdown.removeClass("populated") : this.$dropdown.addClass("populated")
            }
        }, {
            key: "getSumOfAllTabsWidth",
            value: function() {
                for (var a = this.$container.find("li:not(.dropdown)"), b = 0, c = 0; c < a.length; c++)
                    b += a[c].clientWidth;
                return b
            }
        }, {
            key: "getSubmenuItems",
            value: function() {
                return this.$submenuItem.find("> li")
            }
        }, {
            key: "setNavOverflowVisible",
            value: function() {
                this.$container.removeClass(this.hiddenOverflowClass).addClass(this.visibleOverflowClass)
            }
        }, {
            key: "setNavOverflowHidden",
            value: function() {
                this.$container.removeClass(this.visibleOverflowClass).addClass(this.hiddenOverflowClass)
            }
        }]),
        b
    }(a)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
define("t1-component-navigationSecondarySingleTabsMenu", ["t1-component-navigationSecondary"], function(a) {
    "use strict";
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b),
            a = $(a);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, c));
            return d.moreOptionSecondIteration = !1,
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getMaximumItemsThatCanFitInNav",
            value: function(a) {
                var b = this.getCurrentListOutOfDropdown()
                  , c = 0
                  , d = 0
                  , e = this.$dropdown.length === d ? d : this.$dropdown.width()
                  , f = void 0
                  , g = 0;
                for (f = g; f < b.length && !((c += b[f].clientWidth) + e > a); f++)
                    ;
                return f
            }
        }, {
            key: "getNavSidePostion",
            value: function() {
                var a = 0;
                return "rtl" === T1.settings.siteDirection ? this.$navList.offset() && this.$navList.offset().left ? $(window).width() - this.$navList.width() - this.$navList.offset().left : a : this.$navList.offset() && this.$navList.offset().left ? this.$navList.offset().left : a
            }
        }, {
            key: "getCurrentListOutOfDropdown",
            value: function() {
                return this.$navList.find("> li:not(.dropdown)")
            }
        }, {
            key: "updateDropdown",
            value: function() {
                var a = this.$container
                  , b = this.$navList
                  , c = this.getNavSidePostion()
                  , d = b.width() - c
                  , e = this.getMaximumItemsThatCanFitInNav(d)
                  , f = this.getCurrentListOutOfDropdown()
                  , g = f.length > e;
                if (this.$dropdown.length < 1)
                    return !1;
                this.setNavOverflowHidden(),
                a.is(":visible") && g ? (this.populateDropdown(e),
                this.handleDropdownVisibility()) : (this.setNavOverflowVisible(),
                this.unpopulateDropdown()),
                this.handleDropdownVisibility()
            }
        }, {
            key: "unpopulateDropdown",
            value: function() {
                if (!1 === this.moreOptionSecondIteration) {
                    var a = this.getSubmenuItems();
                    this.moreOptionSecondIteration = !0,
                    a.appendTo(this.$navList),
                    this.$dropdown.insertAfter(this.$container.find("li:last")),
                    this.updateDropdown()
                } else
                    this.moreOptionSecondIteration = !1
            }
        }, {
            key: "populateDropdown",
            value: function(a) {
                var b = this.getCurrentListOutOfDropdown()
                  , c = b.slice(a, b.length);
                c.length && c.prependTo(this.$submenuItem),
                this.setNavOverflowVisible(),
                this.moreOptionSecondIteration = !1
            }
        }]),
        b
    }(a)
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , _get = function a(b, c, d) {
    null === b && (b = Function.prototype);
    var e = Object.getOwnPropertyDescriptor(b, c);
    if (void 0 === e) {
        var f = Object.getPrototypeOf(b);
        return null === f ? void 0 : a(f, c, d)
    }
    if ("value"in e)
        return e.value;
    var g = e.get;
    if (void 0 !== g)
        return g.call(d)
};
define("t1-component-navigationSecondaryDoubleTabsMenu", ["t1-component-navigationSecondary", "T1-site-dependencies"], function(a, b) {
    "use strict";
    var c = b.$ || c;
    return function(a) {
        function b(a, d) {
            _classCallCheck(this, b),
            a = c(a);
            var e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, d));
            return e.$secondMenu = c("." + d.secondMenuClass),
            e.$gradeExploreNavigation = c("#" + d.gradeExploreNavigation),
            e.$menuHeader = e.$container.find(".menu-header"),
            e.$toggleCollapser = e.$container.find(".toggle-collapser"),
            e.initializedMdClass = "initialize-md",
            e.isFixed = !1,
            e.toggleMenuOpened = !1,
            e.onWinResizeCheckOverlapAsync = null,
            e.moreOptionSecondIteration = !1,
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                _get(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), "create", this).call(this),
                this.checkMenuOverlap(),
                this.attachNavigationEventHandlers()
            }
        }, {
            key: "attachNavigationEventHandlers",
            value: function() {
                var a = this;
                _get(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), "attachNavigationEventHandlers", this).call(this),
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, function(b) {
                    return a.onWinResize(b)
                })
            }
        }, {
            key: "onWinResize",
            value: function() {
                var a = this;
                clearTimeout(this.onWinResizeCheckOverlapAsync),
                this.onWinResizeCheckOverlapAsync = setTimeout(function() {
                    return a.checkMenuOverlap()
                }, 300)
            }
        }, {
            key: "checkMenuOverlap",
            value: function() {
                var a = c.safe("T1.breakpoints.currentBP")() || ""
                  , b = c.safe("T1.breakpoints.list")[a] > T1.constants.SCREEN_SMALL;
                if (this.unpopulateDropdown(),
                b) {
                    this.navigationsAreOverlapping() && this.populateDropdown(),
                    this.initializedMd || this.setInitializedMd()
                } else
                    this.setNavOverflowVisible()
            }
        }, {
            key: "setInitializedMd",
            value: function() {
                this.initializedMd = !0,
                this.$secondMenu.addClass(this.initializedMdClass)
            }
        }, {
            key: "trackCollapseExpandLink",
            value: function(a, b) {
                a.attr("data-bt-state", b ? "" : "collapse"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a
                })
            }
        }, {
            key: "toggleMenuOpenState",
            value: function(a) {
                var b = this.$toggleCollapser
                  , d = c(b.data("target"))
                  , e = function() {
                    b.toggleClass("expanded", a),
                    d.toggleClass("expanded", a)
                };
                this.trackCollapseExpandLink(b, a),
                a ? (d.css("display", "block"),
                setTimeout(e, 0)) : (e(),
                setTimeout(function() {
                    var a = d.attr("style");
                    "undefined" !== (void 0 === a ? "undefined" : _typeof(a)) && !1 !== a && d.css("display", "none")
                }, 600)),
                this.toggleMenuOpened = a
            }
        }, {
            key: "switchMd",
            value: function() {
                if (!this.toggleMenuOpened) {
                    var a = this.$toggleCollapser;
                    c(a.data("target")).removeAttr("style")
                }
            }
        }, {
            key: "navigationsAreOverlapping",
            value: function() {
                var a = this.getNavigationContainerWidth()
                  , b = this.$gradeExploreNavigation ? this.$menuHeader.width() : 0;
                return a < this.getSumOfAllTabsWidth() + b
            }
        }, {
            key: "getNavigationContainerWidth",
            value: function() {
                var a = "rtl" === T1.settings.siteDirection ? parseInt(this.$navList.css("right")) : parseInt(this.$navList.css("left"))
                  , b = "rtl" === T1.settings.siteDirection ? parseInt(this.$secondMenu.css("left")) : parseInt(this.$secondMenu.css("right"));
                return this.$gradeExploreNavigation && (a = "rtl" === T1.settings.siteDirection ? parseInt(this.$menuHeader.css("right")) : parseInt(this.$menuHeader.css("left")),
                b = "rtl" === T1.settings.siteDirection ? parseInt(this.$navList.css("left")) : parseInt(this.$navList.css("right"))),
                this.$container.outerWidth() - a - b
            }
        }, {
            key: "toggleFixedClass",
            value: function(a) {
                this.$container.toggleClass("fixed", a),
                this.isFixed = a
            }
        }, {
            key: "getCurrentListOutOfDropdown",
            value: function() {
                return this.$gradeExploreNavigation ? this.$navList.find("li:not(.dropdown)") : this.$secondMenu.find("li:not(.dropdown)")
            }
        }, {
            key: "getMaximumItemsThatCanFitInNav",
            value: function() {
                var a = this.getCurrentListOutOfDropdown()
                  , b = 0
                  , c = 0
                  , d = this.$dropdown.length === c ? c : this.$dropdown.width()
                  , e = this.$gradeExploreNavigation ? this.$menuHeader.width() : 0
                  , f = this.getNavigationContainerWidth() - e
                  , g = void 0
                  , h = 0;
                for (g = h; g < a.length && !((b += a[g].clientWidth) + d > f); g++)
                    ;
                return g
            }
        }, {
            key: "populateDropdown",
            value: function() {
                var a = this.getCurrentListOutOfDropdown()
                  , b = void 0
                  , c = void 0;
                this.$menuHeader.length > 0 ? (b = this.getMaximumItemsThatCanFitInNav(),
                c = a.slice(b, a.length),
                c.prependTo(this.$submenuItem)) : a.prependTo(this.$submenuItem),
                this.handleDropdownVisibility(),
                this.setNavOverflowVisible(),
                this.moreOptionSecondIteration = !1
            }
        }, {
            key: "unpopulateDropdown",
            value: function() {
                var a = this.getSubmenuItems();
                this.$gradeExploreNavigation ? (a.appendTo(this.$navList),
                !1 === this.moreOptionSecondIteration ? (this.moreOptionSecondIteration = !0,
                this.$dropdown.insertAfter(this.$container.find("li:last"))) : this.moreOptionSecondIteration = !1) : a.appendTo(this.$secondMenu),
                this.handleDropdownVisibility(),
                this.setNavOverflowHidden()
            }
        }]),
        b
    }(a)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-abstract", ["T1-site-dependencies"], function(a) {
    "use strict";
    var b = a.$ || $;
    return function() {
        function a(b, c, d) {
            if (_classCallCheck(this, a),
            this.constructor === a)
                throw new T1.error.ClassTypeError("Cannot instantiate Abstract Class");
            c && this.setContent(c),
            this.container = b,
            this.options = d || {}
        }
        return _createClass(a, [{
            key: "setContent",
            value: function(a) {
                this.content = b(a)
            }
        }, {
            key: "setOptions",
            value: function(a) {
                a && $.extend(!0, this.options, a)
            }
        }, {
            key: "style",
            value: function() {
                try {
                    return this.container.css.apply(this.container, arguments)
                } catch (e) {
                    this.logError(e)
                }
            }
        }, {
            key: "offset",
            value: function() {
                return {
                    top: this.container.offset().top,
                    left: this.container.offset().left
                }
            }
        }, {
            key: "render",
            value: function(a) {
                if (a && a.length && this.setContent(a),
                this.content)
                    return this.container.append(this.content)
            }
        }, {
            key: "logError",
            value: function(a) {
                console.error ? console.dir(a) : console.log(a.message)
            }
        }]),
        a
    }()
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-materialBox", ["t1-component-abstract", "T1-site-dependencies"], function(a, b) {
    "use strict";
    var c = b.$ || c
      , d = ".btn-close .icon-remove, .btn-close-alt .icon-remove"
      , e = 650
      , f = "ready";
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = b.createPanel(c.wrapper, c.size || "", c.hideContent)
              , e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, d));
            return e.id = (new Date).getTime(),
            e.active = !1,
            e.setContent(a),
            e.setOptions(c),
            e.cancelFunction,
            c.buttons && e.attachButtonFunctionality(c.buttons),
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "toggle",
            value: function(a) {
                var b = this
                  , d = T1.util.Constants
                  , g = c("html")
                  , h = c("body")
                  , i = this.container.parents(".material-box-panels")
                  , j = this;
                if (j.active = a,
                a) {
                    j.onOpen && j.onOpen(),
                    j.scrollTop = h.scrollTop(),
                    j.isBodyScrollDisabledAlready = g.hasClass(T1.constants.CLASS_NOSCROLL),
                    g.scrollTop() > j.scrollTop && (j.scrollTop = g.scrollTop()),
                    T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                        state: !0
                    }),
                    "xs" === T1.breakpoints.currentBP() && j.container.find(".g-recaptcha").length || j.isBodyScrollDisabledAlready || g.css("top", -j.scrollTop),
                    c.safe("T1.utilities.isIOS")() && j.container.find(".material-box-content iframe").length > 0 && j.container.find(".material-box-content").addClass("ios-iframe-scroll");
                    var k = i.find(".mainfocus");
                    k.length && T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_MAINFOCUS, k),
                    j.container.removeClass(d.CLASS_HIDDEN).addClass(d.CLASS_ACTIVE),
                    i.hasClass(d.CLASS_ACTIVE) || i.addClass(d.CLASS_ACTIVE),
                    i.onTransitionEnd(function(a) {
                        return b.onOpenTransitionEnd(a)
                    }, {
                        one: !0
                    }),
                    g.addClass("overflow-vertical-hidden"),
                    setTimeout(function() {
                        if (j.container.hasClass(T1.constants.CLASS_HIDE_CONTENT)) {
                            var a = j.container.find(".material-box-content:last");
                            j.fitImage(a),
                            j.container.removeClass(T1.constants.CLASS_HIDE_CONTENT)
                        }
                        T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPENED, j),
                        T1.channels.figure.publishAsync(T1.constants.FIGURE_LOAD, j.container)
                    }, e),
                    T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_RESIZE_IMAGE, function(a) {
                        j.container.find("#" + a.id).length > 0 && j.fitImage({})
                    })
                } else
                    j.onClose && j.onClose(),
                    j.container.onTransitionEnd(function(a) {
                        return b.onCloseTransitionEnd(a)
                    }, {
                        one: !0
                    }),
                    j.container.removeClass([f, d.CLASS_ACTIVE].join(" ")),
                    i.find(".material-box." + d.CLASS_ACTIVE).length < 1 && j.container.parents(".material-box-panels").removeClass("active"),
                    g.removeClass("overflow-vertical-hidden"),
                    T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                        state: !1
                    }),
                    j.isBodyScrollDisabledAlready || (g.css("top", 0),
                    window.scroll(0, j.scrollTop)),
                    setTimeout(function() {
                        "function" == typeof j.onClosed && j.onClosed(),
                        T1.channels.dialog.publish(T1.constants.MATERIALBOX_CLOSED, j),
                        j.container.remove()
                    }, e);
                return j
            }
        }, {
            key: "onOpenTransitionEnd",
            value: function(a) {
                this.container.addClass(f)
            }
        }, {
            key: "onCloseTransitionEnd",
            value: function(a) {
                this.container.addClass(T1.util.Constants.CLASS_HIDDEN)
            }
        }, {
            key: "setOptions",
            value: function(a) {
                void 0 !== a.globalclose && (this.globalClose = a.globalclose),
                void 0 !== a.globalClose && (this.globalClose = a.globalClose),
                this.container.addClass(a.styleClass || a.styleclass),
                a.styleClassContent && this.container.find(".material-box-content").addClass(a.styleClassContent),
                this.type = a.type || null,
                this.hashAction = a.hashAction || null,
                this.url = a.url || null,
                this.closeButtonOverride = a.closeButtonOverwrite || null,
                this.size = a.size || "",
                this.response = a.response,
                this.ignoreCloseFromEsc = a.ignoreCloseFromEsc || null,
                this.identifier = a.identifier || this.content.attr("id") || (a.url ? a.url.replace(/.*\/|[\?#].*/g, "") : (new Date).getTime()),
                this.hashAction ? this.hash = Object.resolve("T1.hash.getLastHash")() : a.hash && (this.hash = a.hash),
                a.height && this.container.find(".material-box-content").css("height", a.height + 5 + "px"),
                a.width && this.container.find(".material-box-content").css("width", a.width + 1 + "px"),
                this.triggerElement = a.triggerElement instanceof jQuery ? a.triggerElement : [],
                "function" == typeof a.onClose && (this.onClose = a.onClose),
                "function" == typeof a.onClosed && (this.onClosed = a.onClosed),
                "function" == typeof a.onOpen && (this.onOpen = a.onOpen)
            }
        }, {
            key: "attachButtonFunctionality",
            value: function(a) {
                var b = this;
                c.each(a, function(a, c) {
                    var d = c.function || c.fn || c.callback || b.close;
                    "function" == typeof d && ("cancel" === a && (b.cancelFunction = d,
                    d = function() {
                        this.close(!1, !0)
                    }
                    ),
                    b.content.find("#" + c.id).on("click", d.bind(b)))
                })
            }
        }, {
            key: "enforceGlobalClose",
            value: function() {
                return !("boolean" == typeof this.globalClose && !1 === this.globalClose || this.content.is(d) || this.content.find(d).length > 0)
            }
        }, {
            key: "show",
            value: function() {
                return this.render(),
                this.toggle(!0)
            }
        }, {
            key: "close",
            value: function(a, b) {
                if (!a || !this.ignoreCloseFromEsc)
                    return "function" == typeof this.cancelFunction && (a || b) ? (this.cancelFunction(),
                    this.cancelFunction = null) : (this.hash && T1.channels.hash.publish(T1.constants.HASH_REMOVE, this.hash),
                    "function" == typeof this.closeButtonOverride ? this.closeButtonOverride() : this.toggle(!1),
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_REMOVE, this.id)),
                    this
            }
        }, {
            key: "render",
            value: function() {
                var a = this.container.find(".material-box-content");
                return this.hideNonGlobalCloseButtons(),
                a.empty().append(this.content),
                this.addGlobalCloseButton(a),
                this
            }
        }, {
            key: "hideNonGlobalCloseButtons",
            value: function() {
                this.globalClose && this.content.find(d).addClass(T1.util.Constants.CLASS_HIDDEN)
            }
        }, {
            key: "addGlobalCloseButton",
            value: function(a) {
                var b = c('<a href="#" class="btn btn-close visible-box"><span class="icon-material-close icon icon-remove visible-xs"></span><span class="icon-material-close icon icon-cross hidden-xs"></span></a>');
                a.length && (this.globalClose || this.enforceGlobalClose()) && a.prepend(b)
            }
        }, {
            key: "fitImage",
            value: function(a) {
                var b = this
                  , d = b.container.find(".material-box-content");
                if (d.offset && d.length) {
                    var e = d.offset()
                      , f = c(window).height() - e.top
                      , g = c(window).width()
                      , h = a.image || d.find(".item.active img");
                    if (0 === h.length && (h = d.find("#content-on-overlay > img")),
                    0 === h.length && (h = d.find(".posterWrapper > img")),
                    0 !== h.length) {
                        var i = h.height()
                          , j = h.width()
                          , k = g / f
                          , l = j / i;
                        if (h.hasClass("noAspect")) {
                            if (isNaN(l) || l === 1 / 0 || 0 === l)
                                return;
                            h.removeClass("noAspect")
                        }
                        if (0 === h.parent(".zoomContainer").length)
                            if (l > k) {
                                var m = 1.35
                                  , n = k * m
                                  , o = 0
                                  , p = 0
                                  , q = 0
                                  , r = 0;
                                l > n ? (r = g * m,
                                q = r / j * i,
                                o = (r - g) / 2 * -1,
                                p = Math.floor((f - q) / 2)) : (r = "auto",
                                q = f,
                                o = -Math.floor(f * l - g) / 2),
                                h.css({
                                    height: "auto" == q ? "auto" : Math.ceil(q) + "px",
                                    width: "auto" == r ? "auto" : Math.ceil(r) + "px",
                                    "margin-top": 0 === p ? "0" : p + "px",
                                    "margin-left": o
                                })
                            } else
                                0 == i || 0 == j ? (h.css({
                                    height: "auto",
                                    width: g,
                                    "margin-top": 0,
                                    "margin-right": 0
                                }),
                                h.addClass("noAspect")) : h.css({
                                    height: "auto",
                                    width: g,
                                    "margin-top": -Math.floor(g / l - f) / 2,
                                    "margin-left": 0
                                })
                    }
                }
            }
        }], [{
            key: "createPanel",
            value: function(a, d, e) {
                var f = c("<div></div>").addClass("material-box-content")
                  , g = c("<div></div>").addClass("material-box " + d).append(f);
                return e && g.addClass(T1.constants.CLASS_HIDE_CONTENT),
                a && a.length || (a = b.createWrapper()),
                a.append(g),
                g
            }
        }, {
            key: "createWrapper",
            value: function() {
                var a = c(".material-box-panels")
                  , b = !!c(".t1").length;
                if (!a.length)
                    if (b) {
                        var d = c('<div class="t1"><div class="material-box-panels"></div></div>');
                        a = d.find(".material-box-panels"),
                        c("body").append(d)
                    } else
                        a = c('<div class="material-box-panels"></div>'),
                        c("body").append(a);
                return T1.utilities.browser.isExplorer && !T1.utilities.browser.isEdge && a.addClass("ie"),
                a
            }
        }]),
        b
    }(a)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-video-player", ["T1-site-dependencies", "video.js"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = (T1 && T1.utilities,
    ["mp4", "webm", "ogv", "flv"])
      , e = T1 && T1.constants || {};
    return function() {
        function a(b) {
            _classCallCheck(this, a),
            this.$container = b || {},
            this.videoInstance = null,
            this.options = {},
            this.sourcesMobile = [],
            this.sourcesDesktop = [],
            this.create()
        }
        return _createClass(a, [{
            key: "create",
            value: function() {
                this.$container.length && (this.setOptions(),
                this.setSources(),
                this.createVideoJsInstance(),
                this.createVideoTag(),
                this.setEvents())
            }
        }, {
            key: "createVideoJsInstance",
            value: function() {
                if (this.options.shouldBeVideoJs) {
                    var a = this.$container.length && this.$container[0];
                    this.videoInstance = b(a, {
                        mute: this.options.mute,
                        loop: this.options.auto.loop,
                        controls: this.options.controls
                    })
                }
            }
        }, {
            key: "createVideoTag",
            value: function() {
                if (!this.options.shouldBeVideoJs && !this.$container.is("video")) {
                    var a = c("<video>").attr({
                        mute: this.options.mute,
                        loop: this.options.auto.loop,
                        controls: this.options.controls
                    });
                    this.addSourcesTo(a)
                }
            }
        }, {
            key: "addSourcesTo",
            value: function(a) {
                var b = this.getSources();
                if (a instanceof jQuery)
                    for (var d = 0; d < b.length; d++) {
                        var e = c("<source>").attr({
                            src: b[d].src,
                            type: b[d].type
                        });
                        a.append(e)
                    }
                else
                    a.src(b)
            }
        }, {
            key: "setOptions",
            value: function() {
                if (!this.$container.length)
                    return {};
                var a = this.$container.data();
                this.options = {
                    shouldBeVideoJs: a.shouldBeVideoJs || a.shouldbevideojs || !1,
                    controls: a.controls ? "controls" : "",
                    preload: a.preload ? "preload" : "none",
                    mute: a.mute ? "mute" : "",
                    poster: {
                        mobile: a.posterMobile || a.postermobile || "/images/1x1.gif",
                        desktop: a.posterDesktop || a.posterdesktop || "images/1x1.gif"
                    },
                    auto: {
                        play: a.autoPlay || a.autoplay || !1,
                        mute: a.autoMute || a.automute || !1,
                        pause: a.autoPause || a.autopause || !1,
                        loop: a.autoLoop || a.autoloop ? "loop" : ""
                    },
                    sources: this.getSources()
                }
            }
        }, {
            key: "setSources",
            value: function() {
                if (!this.$container.length)
                    return {};
                var a = this.$container.data();
                this.sourcesDesktop = [],
                this.sourcesMobile = [];
                for (var b = 0; b < d.length; b++) {
                    var c = d[b]
                      , e = a["src" + c + "Desktop"]
                      , f = a["src" + c + "Mobile"];
                    e && this.sourcesDesktop.push({
                        type: "video/" + c,
                        src: e
                    }),
                    f && this.sourcesMobile.push({
                        type: "video/" + c,
                        src: f
                    })
                }
            }
        }, {
            key: "getSources",
            value: function() {
                return a.isMobile ? this.sourcesMobile.length ? this.sourcesMobile : this.sourcesDesktop : this.sourcesDesktop.length ? this.sourcesDesktop : this.sourcesMobile
            }
        }, {
            key: "setEvents",
            value: function() {
                T1 && T1.channels && T1.channels.global && T1.channels.global.subscribe(e.ON_BREAKPOINT_CHANGE, this.switchBreakpoint)
            }
        }, {
            key: "switchBreakpoint",
            value: function(a) {}
        }], [{
            key: "isMobile",
            get: function() {
                return T1 && T1.breakpoints && T1.breakpoints.currentBP() || "xs"
            }
        }]),
        a
    }()
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-video", ["T1-site-dependencies", "t1-component-abstract", "video.js", "videojs-markers", "slick"], function(a, b, c, d, e) {
    "use strict";
    var f = a.$ || $
      , g = (T1 && T1.settings && T1.settings.mock,
    {
        videoCloseButton: ".btn-close-video",
        chaptersCloseButton: ".btn-close-chapters",
        videoJs: ".video-js",
        chaptersViewButton: ".btn-chapters",
        chapterSelector: ".chapter-selector",
        chapters: ".chapters",
        marker: ".vjs-marker",
        markerTooltip: ".vjs-tip"
    })
      , h = "click";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.options = {},
            c.currentChapter = 1,
            c.videoJsInstance = null,
            c.$chapters = c.container.find(g.chapters),
            c.markersInitialized = !1,
            c.slickCarouselInitialized = !1,
            c.videoIsPlaying = !1,
            c.scrollSubscription = null,
            c.bodyScrollPosition = 0,
            c.videoWasMuted = !1,
            c.init(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "init",
            value: function() {
                if (this.container && this.container.length) {
                    var a = this.container.find("video")
                      , b = a.length && a[0];
                    b && (this.setOptions(),
                    this.videoJsInstance = c(b, {
                        controls: this.options.controls
                    }),
                    this.addMarkers(),
                    this.addFlexSeparator(),
                    this.markers.length && (this.addChaptersButton(),
                    this.addNextChapterButton()),
                    this.setupVideoJsEvents(),
                    this.setupMiscEvents(),
                    this.breakpointHasNoSlickCarousel() && this.setupPlayChapterButton())
                }
            }
        }, {
            key: "setOptions",
            value: function() {
                this.options.controls = this.container.data("controls") || !0,
                this.options.markers = this.container.data("markers"),
                this.options.markers && Array.isArray(this.options.markers) || (this.options.markers = [])
            }
        }, {
            key: "addFlexSeparator",
            value: function() {
                var a = f("<div></div>").addClass("t1-flex-separator");
                this.container.find(".vjs-control-bar .vjs-audio-button").before(a)
            }
        }, {
            key: "getVideoJsButton",
            value: function(a) {
                var b = f("<button></button>");
                return b.addClass(("vjs-control " + a.replace(".", "")).trim()),
                b
            }
        }, {
            key: "addChaptersButton",
            value: function() {
                var a = this
                  , b = this.getVideoJsButton(g.chaptersViewButton);
                b.html('<span class="vjs-control-text">Contents</span>');
                var c = this.container.find(".vjs-control-bar .vjs-fullscreen-control")
                  , d = function(b) {
                    "Fullscreen" === f(b.target).attr("title") && T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                action: "click_function",
                                value: "full-screen"
                            }
                        }
                    })
                };
                c.off(h, d).on(h, d),
                c.before(b)
            }
        }, {
            key: "addNextChapterButton",
            value: function() {
                var a = this
                  , b = this.getVideoJsButton("btn-next-chapter");
                this.container.find(".vjs-control-bar .vjs-play-control").after(b);
                var c = function(b) {
                    b.preventDefault && b.preventDefault(),
                    a.breakpointHasMarkers() && a.videoJsInstance.markers.next()
                };
                b.off(h, c).on(h, c)
            }
        }, {
            key: "setupVideoJsEvents",
            value: function() {
                var a = this;
                if (this.videoJsInstance) {
                    var b = this.container.find(g.videoJs);
                    this.videoJsInstance.on("timeupdate", function() {
                        a.updateMarkerStyling(),
                        a.updateProgressBar()
                    }),
                    this.videoJsInstance.on("play", function() {
                        a.shouldVideoCloseButtonBeVisible(!0),
                        a.addMarkerHoverEvent(),
                        a.videoIsPlaying = !0,
                        a.trackVideoAction("play_video")
                    }),
                    this.videoJsInstance.on("pause", function() {
                        a.videoIsPlaying = !1
                    }),
                    this.videoJsInstance.on("ended", function() {
                        a.trackVideoAction("video_completed"),
                        b.hasClass("fixed") && a.showNormalVideo(b)
                    });
                    var c = function() {
                        b.hasClass("fixed") ? (f(document).scrollTo(b.parent(), T1.constants.ANIMATION_SPEED_CSS),
                        a.videoJsInstance.paused() && a.videoJsInstance.play()) : f("html").hasClass("touch") && (a.videoJsInstance.paused() ? a.videoJsInstance.play() : a.videoJsInstance.pause())
                    };
                    T1.utilities.browser.isExplorer || T1.utilities.browser.isEdge ? this.container.find("video").on("click", function(a) {
                        c()
                    }) : this.container.find("video").swipe({
                        tap: function(a, b) {
                            c()
                        },
                        threshold: 25
                    }),
                    this.setupCloseVideoButton(),
                    this.markers.length && (this.setupCloseChaptersViewButton(),
                    this.setupActivateChaptersViewButton())
                }
            }
        }, {
            key: "setupCloseVideoButton",
            value: function() {
                var a = this
                  , b = this.container.find(g.videoCloseButton)
                  , c = function(b) {
                    var c = a.container.find(g.videoJs);
                    b.preventDefault && b.preventDefault(),
                    a.videoJsInstance.isFullscreen() && a.videoJsInstance.exitFullscreen(),
                    a.videoJsInstance.pause(),
                    a.videoJsInstance.hasStarted(!1),
                    a.shouldVideoCloseButtonBeVisible(!1),
                    a.hideMarkers(),
                    a.hideMarkersTooltips(),
                    a.showNormalVideo(c)
                };
                b.insertBefore(this.container.find(".vjs-control-bar")).off(h, c).on(h, c)
            }
        }, {
            key: "setupCloseChaptersViewButton",
            value: function() {
                var a = this
                  , b = function(b, c) {
                    b.preventDefault && b.preventDefault();
                    var d = a.getActiveChapterImageElement();
                    a.shouldVideoCloseButtonBeVisible(!1),
                    a.transitionVideoState(!0, d),
                    a.removeFixedPosition(c)
                };
                this.container.find(g.chaptersCloseButton).off(h, b).on(h, b)
            }
        }, {
            key: "removeFixedPosition",
            value: function(a) {
                if (this.breakpointHasNoSlickCarousel() || a) {
                    var b = f("html");
                    T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                        state: !1
                    }),
                    this.bodyScrollPosition && (b.css("margin-top", ""),
                    f(window).scrollTo(this.bodyScrollPosition),
                    this.bodyScrollPosition = 0)
                }
            }
        }, {
            key: "addFixedPosition",
            value: function() {
                if (this.breakpointHasNoSlickCarousel()) {
                    var a = f("html");
                    this.bodyScrollPosition = f(window).scrollTop(),
                    T1.channels.scrolling.publish(T1.constants.DISABLE_BODY_SCROLL, {
                        state: !0
                    }),
                    a.css("margin-top", -1 * this.bodyScrollPosition + "px")
                }
            }
        }, {
            key: "setupActivateChaptersViewButton",
            value: function() {
                var a = this
                  , b = function(b) {
                    b.preventDefault && b.preventDefault();
                    var c = a.getActiveChapterImageElement();
                    a.$chapters.addClass("visible"),
                    a.videoJsInstance.pause(),
                    a.videoJsInstance.hasStarted(!1),
                    a.shouldVideoCloseButtonBeVisible(!1),
                    a.transitionVideoState(!1, c),
                    a.addFixedPosition(),
                    T1.breakpoints.currentMode() === T1.constants.BREAKPOINTS_MODE.DESKTOP && T1.channels.scrolling.publish(T1.constants.SCROLL_TO, {
                        jumpTo: a.container.find(".video-wrapper")
                    }),
                    T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: a.container,
                        extraData: {
                            event: {
                                action: "click_function",
                                value: "view-features"
                            }
                        }
                    })
                };
                this.container.find(g.chaptersViewButton).off(h, b).on(h, b)
            }
        }, {
            key: "setupPlayChapterButton",
            value: function() {
                var a = this
                  , b = function(b, c) {
                    var d = f(c).closest(".image-container")
                      , e = d.data("chapter") - 1
                      , g = a.markers[a.markers.length >= e ? e : 0]
                      , h = g.time;
                    a.transitionVideoState(!0, d),
                    a.videoJsInstance.currentTime(h),
                    a.videoJsInstance.play(),
                    a.shouldVideoCloseButtonBeVisible(!0),
                    a.removeFixedPosition()
                };
                this.container.find(g.chapterSelector).swipe({
                    tap: b,
                    excludedElements: ".noSwipe",
                    preventDefaultEvents: !1,
                    threshold: 25
                })
            }
        }, {
            key: "setupFullscreenChangeSubscription",
            value: function() {
                var a = this
                  , b = this.container.find(g.videoJs);
                this.videoJsInstance.on("fullscreenchange", function() {
                    a.videoJsInstance && a.videoJsInstance.isFullscreen() ? a.showNormalVideo(b, a.videoWasMuted) : a.videoJsInstance.isFullscreen() || setTimeout(function() {
                        var c = T1.utilities.viewport.isElementInViewport(b.parent());
                        a.videoJsInstance.hasStarted() || a.showNormalVideo(b),
                        c || a.showFixedVideo(b)
                    }, 100)
                })
            }
        }, {
            key: "setupScrollSubscription",
            value: function() {
                var a = this
                  , b = this.container.find(g.videoJs)
                  , c = !1
                  , d = !1
                  , e = T1.utilities.viewport.isElementInViewport(b.parent());
                this.scrollSubscription = T1.channels.global.subscribe(T1.constants.GLOBAL_SCROLL, function() {
                    if (e = T1.utilities.viewport.isElementInViewport(b.parent()),
                    !a.videoIsPlaying && !c && !e)
                        return void a.showNormalVideo(b, a.videoWasMuted);
                    T1 && T1.breakpoints && "xs" === T1.breakpoints.currentBP() ? !e && d && a.videoIsPlaying ? (c = !0,
                    d = !1,
                    a.videoJsInstance.pause()) : !d && e && c && (c = !1,
                    d = !0,
                    a.videoJsInstance.play()) : !e && d ? (a.videoWasMuted = a.videoJsInstance.muted(),
                    a.videoJsInstance && !a.videoJsInstance.isFullscreen() && a.showFixedVideo(b),
                    d = !1) : !d && e && (a.showNormalVideo(b, a.videoWasMuted),
                    d = !0)
                }),
                this.scrollSubscription.throttle(500)
            }
        }, {
            key: "showNormalVideo",
            value: function(a) {
                this.animateFixedVideo({
                    videoElement: a,
                    shouldBecomeFixed: !1
                }),
                this.videoWasMuted || this.videoJsInstance.muted(!1)
            }
        }, {
            key: "showFixedVideo",
            value: function(a) {
                a.hasClass("vjs-paused") || (this.videoWasMuted = this.videoJsInstance.muted(),
                this.videoJsInstance.muted(!0),
                this.animateFixedVideo({
                    videoElement: a,
                    shouldBecomeFixed: !0
                }))
            }
        }, {
            key: "animateFixedVideo",
            value: function() {
                var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                  , b = a.videoElement || this.container.find(g.videoJs)
                  , c = !0 === a.shouldBecomeFixed;
                b.css("opacity", 0),
                setTimeout(function() {
                    b.toggleClass("fixed", c),
                    setTimeout(function() {
                        b.css("opacity", 1)
                    }, 0)
                }, T1.constants.ANIMATION_SPEED_CSS)
            }
        }, {
            key: "setupBreakpointSwitchSubscription",
            value: function() {
                var a = this
                  , b = void 0
                  , c = function(c) {
                    ("sm" === b && "md" === c || "md" === b && "sm" === c) && a.container.find(g.chaptersCloseButton).trigger("click", [!0]),
                    a.breakpointHasNoSlickCarousel(c) ? a.slickCarouselIsSliding = !1 : a.slickCarouselInitialized || a.initSlickCarousel(),
                    b = c
                };
                c(T1.breakpoints.currentBP()),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, c)
            }
        }, {
            key: "getActiveChapterImageElement",
            value: function() {
                var a = (this.currentChapter,
                ".image-container[data-chapter=" + this.currentChapter + "], .slick-slide[data-slick-index=' + slickIndex + '] .image-container");
                return this.$chapters.find(a)
            }
        }, {
            key: "setupMiscEvents",
            value: function() {
                this.setupScrollSubscription(),
                this.setupFullscreenChangeSubscription(),
                this.setupBreakpointSwitchSubscription()
            }
        }, {
            key: "initMarkers",
            value: function() {
                if (this.videoJsMarkersExist() && !this.markersInitialized) {
                    var a = this;
                    this.videoJsInstance.markers({
                        markerStyle: {
                            width: "12px",
                            height: "12px",
                            "background-color": "rgb(30, 30, 30)",
                            border: "2px solid rgba(255, 255, 255, 0.4)",
                            "border-radius": "6px"
                        },
                        markers: this.markers,
                        onMarkerReached: function(b) {
                            var c = b && b.key || "0";
                            a.updateMarkerBorderColor(c)
                        },
                        markerTip: {
                            text: function(a) {
                                return a.text
                            }
                        }
                    }),
                    this.markersInitialized = !0
                }
            }
        }, {
            key: "addMarkerHoverEvent",
            value: function() {
                if (this.markersInitialized && !this.markersEventInitialized) {
                    var a = this
                      , b = this.container.find(g.marker);
                    Modernizr.touch ? this.addMarkerTouchEvent(a, b) : (b.off("mouseenter mouseleave"),
                    b.hover(function() {
                        a.onMarkerHoverIn(f(this))
                    }, function() {
                        a.onMarkerHoverOut(f(this))
                    })),
                    this.markersEventInitialized = !0
                }
            }
        }, {
            key: "addMarkerTouchEvent",
            value: function(a, b) {
                var c = this;
                b.on("touchstart", function(c) {
                    var d = f(c.currentTarget);
                    d.is(T1.constants.CLASS_ACTIVE.toSelector()) ? a.onMarkerHoverOut(d) : (a.onMarkerHoverOut(b.not(d)),
                    a.onMarkerHoverIn(d))
                }),
                this.container.find(".vjs-load-progress, .vjs-play-progress").on("click", function() {
                    return c.onMarkerHoverOut(b)
                }),
                this.container.find(".vjs-control-bar").on("click", function() {
                    return c.onMarkerHoverOut(b)
                }).onTransitionEnd(function(d) {
                    return c.onControlBarTransitionEnd(d, a, b)
                }, {
                    propertyName: "opacity"
                })
            }
        }, {
            key: "hideMarkers",
            value: function() {
                this.container.find(g.marker).removeClass(T1.constants.CLASS_ACTIVE)
            }
        }, {
            key: "hideMarkersTooltips",
            value: function() {
                this.container.find(g.markerTooltip).removeClass(T1.constants.CLASS_ACTIVE)
            }
        }, {
            key: "onControlBarTransitionEnd",
            value: function(a, b, c) {
                var d = f(a.currentTarget);
                parseInt(d.css("opacity")) || b.onMarkerHoverOut(c)
            }
        }, {
            key: "onMarkerHoverIn",
            value: function(a) {
                var b = this.getMarkerImage(a)
                  , c = b ? "url('" + b + "')" : "rgb(30, 30, 30)";
                this.setMarkerBackground(a, c),
                a.add(this.container.find(g.markerTooltip)).addClass(T1.constants.CLASS_ACTIVE)
            }
        }, {
            key: "getMarkerImage",
            value: function(a) {
                for (var b = a.data("marker-key"), c = this.markers, d = 0; d < c.length; d++)
                    if (c[d].key === b)
                        return c[d].image || null
            }
        }, {
            key: "onMarkerHoverOut",
            value: function(a) {
                var b = this;
                a.each(function() {
                    var a = f(this);
                    setTimeout(function() {
                        a.is(T1.constants.CLASS_ACTIVE.toSelector()) || b.setMarkerBackground(a, "")
                    }, T1.constants.ANIMATION_SPEED_CSS),
                    a.add(b.container.find(g.markerTooltip)).removeClass(T1.constants.CLASS_ACTIVE)
                }),
                this.hideMarkersTooltips()
            }
        }, {
            key: "setMarkerBackground",
            value: function(a, b) {
                a.css({
                    background: b || "rgb(30, 30, 30)",
                    "background-size": b ? "cover" : ""
                })
            }
        }, {
            key: "addMarkers",
            value: function() {
                this.videoJsMarkersExist() && (this.markersInitialized || this.initMarkers(),
                this.updateMarkers(),
                this.updateMarkerStyling())
            }
        }, {
            key: "updateMarkers",
            value: function() {
                this.markersInitialized && !this.breakpointHasNoMarkers() && (this.removeMarkers(),
                this.videoJsInstance.markers.add(this.markers))
            }
        }, {
            key: "removeMarkers",
            value: function() {
                this.markersInitialized && this.videoJsInstance.markers.removeAll()
            }
        }, {
            key: "updateMarkerStyling",
            value: function() {
                if (!this.breakpointHasNoMarkers() && this.videoJsMarkersExist()) {
                    var a = this.videoJsInstance.bufferedEnd()
                      , b = this.videoJsInstance.currentTime()
                      , c = this.videoJsMarkersExist() && this.markersInitialized && this.videoJsInstance.markers.getMarkers() || [];
                    this.currentChapter = 0;
                    for (var d = 0; d < c.length; d++)
                        this.updateMarkerBorderColor(c[d], b, a);
                    this.currentChapter || (this.currentChapter = 1)
                }
            }
        }, {
            key: "updateMarkerBorderColor",
            value: function(a, b, c) {
                var d = "rgba(255, 255, 255, 0.4)"
                  , e = this.getMarkerElement(a.key);
                f.isNumeric(b) && a.time <= b ? (this.currentChapter++,
                d = "red") : a.time <= c && (d = "white"),
                e.css("borderColor", d)
            }
        }, {
            key: "getMarkerElement",
            value: function(a) {
                return this.container.find(g.marker + "[data-marker-key=" + a + "]")
            }
        }, {
            key: "updateProgressBar",
            value: function() {
                var a = parseInt(100 * this.videoJsInstance.bufferedPercent()) + "%";
                this.container.find(".vjs-load-progress").css("width", a)
            }
        }, {
            key: "transitionVideoState",
            value: function(a, b) {
                if (this.container && this.container.length && b.length) {
                    var c = this
                      , d = c.container.find(g.videoJs)
                      , e = a ? b : d
                      , f = a ? d : b;
                    this.transitionChapterState(!a),
                    d.removeClass("inactive"),
                    c.setTransitionPoint(e),
                    setTimeout(function() {
                        d.addClass("transitioning"),
                        setTimeout(function() {
                            c.setTransitionPoint(f),
                            setTimeout(function() {
                                c.resetTransitionFor(d),
                                a || d.addClass("inactive")
                            }, T1.constants.ANIMATION_SPEED_CSS)
                        }, 0)
                    }, 0)
                }
            }
        }, {
            key: "transitionChapterState",
            value: function(a) {
                this.breakpointHasSlickCarousel() ? this.$chapters.removeClass("position-fixed") : this.$chapters.toggleClass("position-fixed", a),
                this.$chapters.toggleClass("visible", a)
            }
        }, {
            key: "resetTransitionFor",
            value: function(a) {
                a.removeClass("transitioning"),
                a.css("transform", "")
            }
        }, {
            key: "setTransitionPoint",
            value: function(a) {
                var b = this.container.find(g.videoJs)
                  , c = a.offset()
                  , d = b.offset()
                  , e = a.width()
                  , f = b.width()
                  , h = Math.round(e / f * 100) / 100
                  , i = a.height()
                  , j = b.height()
                  , k = Math.round(i / j * 100) / 100
                  , l = c.left + e / 2
                  , m = c.top + i / 2
                  , n = d.left + f / 2
                  , o = d.top + j / 2
                  , p = Math.round(l - n)
                  , q = Math.round(m - o)
                  , r = "translate(" + p + "px, " + q + "px)"
                  , s = "scale(" + h + ", " + k + ")";
                b.css("transform", r + " " + s)
            }
        }, {
            key: "shouldVideoCloseButtonBeVisible",
            value: function(a) {
                this.container.find(g.videoCloseButton).toggleClass("hidden", !a)
            }
        }, {
            key: "initSlickCarousel",
            value: function() {
                var a = this;
                if (this.container && this.container.length && !this.slickCarouselInitialized) {
                    var b = this.container.find(".chapter-carousel").slick({
                        rtl: "rtl" === T1.settings.siteDirection,
                        slidesToShow: 3,
                        slidesToScroll: 1,
                        infinite: !1,
                        arrows: !1,
                        responsive: [{
                            breakpoint: T1.constants.SCREEN_LARGE,
                            settings: {
                                slidesToShow: 2
                            }
                        }, {
                            breakpoint: T1.constants.SCREEN_MEDIUM,
                            settings: "unslick"
                        }]
                    });
                    b.off("destroy").on("destroy", function() {
                        a.setupPlayChapterButton(),
                        a.slickCarouselInitialized = !1
                    }),
                    b.off("afterChange").on("afterChange", function() {
                        a.setupPlayChapterButton()
                    }),
                    this.setupPlayChapterButton(),
                    this.slickCarouselInitialized = !0
                }
            }
        }, {
            key: "videoJsMarkersExist",
            value: function() {
                if (this.videoJsInstance && this.videoJsInstance.markers) {
                    var a = _typeof(this.videoJsInstance.markers);
                    return "function" === a || "object" === a
                }
                return !1
            }
        }, {
            key: "breakpointHasNoSlickCarousel",
            value: function(a) {
                return "xs" === (a = a || T1.breakpoints.currentBP()) || "sm" === a
            }
        }, {
            key: "breakpointHasSlickCarousel",
            value: function() {
                return !this.breakpointHasNoSlickCarousel()
            }
        }, {
            key: "breakpointHasNoMarkers",
            value: function(a) {
                return "xs" === (a = a || T1.breakpoints.currentBP())
            }
        }, {
            key: "breakpointHasMarkers",
            value: function() {
                return !this.breakpointHasNoMarkers()
            }
        }, {
            key: "trackVideoAction",
            value: function(a) {
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: this.videoJsInstance.el_,
                    extraData: {
                        event: {
                            eventclass: "assetevent",
                            action: a
                        }
                    }
                })
            }
        }, {
            key: "markers",
            get: function() {
                try {
                    return Array.isArray(this.options.markers) ? this.options.markers : []
                } catch (e) {
                    return []
                }
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-dataComparison", ["T1-site-dependencies", "t1-controller-doughnutChart", "t1-controller-waveBallChart"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c(".data-comparison").each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            a.find(".chart-type-btn").on("click", function(b) {
                c(this).is(".active") ? (b.preventDefault(),
                b.stopPropagation()) : a.find(".chart-type-btn").toggleClass("active")
            }),
            a.find(".panel").on("shown.bs.collapse", function(a) {
                var b = c(this);
                c.each(b.find(".data-comparison-chart"), function() {
                    T1.channels[b.data("collapse-channel")].publish(T1.constants[b.data("collapse-event")], {
                        element: c(this)
                    })
                })
            })
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-waveBallChart", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = a.$ || $;
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return d.create(c),
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function(a) {
                this.container && this.container.length && (this.init(a),
                this.container.data("WaveBallChart", this))
            }
        }, {
            key: "init",
            value: function(a) {
                this.config || (this.partialConfig = a,
                this.config = this.buildConfig(this.partialConfig),
                this.canvas = document.createElement("canvas"),
                this.canvas.width = this.config.cvs_config.width,
                this.canvas.height = this.config.cvs_config.height,
                this.container.html(c(this.canvas)),
                this.render(25))
            }
        }, {
            key: "buildConfig",
            value: function(a) {
                var b = this.container.width()
                  , d = {
                    cvs_config: {
                        width: b,
                        height: this.container.height()
                    },
                    wave_config: {
                        sX: 0,
                        sY: b / 2,
                        waveWidth: .015,
                        waveHeight: 5,
                        axisLength: b,
                        speed: .09,
                        xOffset: 0
                    },
                    circle_config: {
                        r: b / 2,
                        cR: b / 2 - 5,
                        fillColor: "#fff"
                    },
                    fillSpeed: 1,
                    isLoading: !1,
                    textMasks: ["%progress% %"],
                    textStyles: {
                        default: [{
                            font: '21px "Open Sans",Arial,Helvetica,sans-serif',
                            textAlign: "center"
                        }]
                    },
                    nowRange: 0,
                    targetRange: 0,
                    maxRange: 100,
                    lineWidth: 2,
                    data_range: [60, 80, 100],
                    textColorRange: ["#fe5022", "#fff", "#fff"],
                    circle_line_color: ["#fe3702", "#ffa200", "#4ed752"],
                    main_backcolor_range: [["#fe5e21", "#f98957"], ["#ffb30c", "#f7d35a"], ["#2ed351", "#8ced6c"]],
                    backcolor_range: [["#f76b3b", "#f14f17"], ["#f4d672", "#ffb50d"], ["#43ea83", "#12ce55"]]
                };
                return c.extend(!0, d, a)
            }
        }, {
            key: "drawSin",
            value: function(a, b, c, d) {
                var e = document.createElement("canvas")
                  , f = e.getContext("2d");
                e.width = this.config.cvs_config.width,
                e.height = this.config.cvs_config.height,
                f.save();
                var g = [];
                f.beginPath(),
                f.arc(this.config.circle_config.r, this.config.circle_config.r, this.config.circle_config.cR - 5, 0, 2 * Math.PI),
                f.clip(),
                f.closePath(),
                f.beginPath();
                for (var h = this.config.wave_config.sX, i = this.config.wave_config.waveWidth, j = this.config.wave_config.waveHeight, k = this.config.wave_config.axisLength, l = this.config.cvs_config.width, m = this.config.cvs_config.height, n = h; n < h + k; n += 20 / k) {
                    var o = -Math.sin((h + n) * i + a)
                      , p = m * (1 - this.config.nowRange / this.config.maxRange);
                    g.push([n, p + o * j]),
                    f.lineTo(n, p + o * j)
                }
                f.lineTo(k, m),
                f.lineTo(h, m),
                f.lineTo(g[0][0], g[0][1]);
                var q = b;
                if (b !== c && (q = f.createLinearGradient(0, m, l, g[g.length - 1][1]),
                q.addColorStop(0, b),
                q.addColorStop(1, c)),
                f.fillStyle = q,
                f.fill(),
                f.restore(),
                !this.config.isLoading && d) {
                    f.save();
                    var r = .2 * this.config.circle_config.cR
                      , s = $.safe("T1.breakpoints.currentBP")()
                      , t = this.config.textStyles[s] || this.config.textStyles.default;
                    f.fillStyle = this.config.textColorRange[this.getIndex()];
                    for (var u = 0; u < this.config.textMasks.length; ++u) {
                        if (t && t[u])
                            for (var v in t[u])
                                f[v] = t[u][v];
                        f.fillText(this.config.textMasks[u].replace(/%progress%/g, ~~this.config.nowRange), this.config.circle_config.r, this.config.circle_config.r + r * u)
                    }
                    f.restore()
                }
                return e
            }
        }, {
            key: "drawCircle",
            value: function() {
                var a = document.createElement("canvas")
                  , b = a.getContext("2d");
                return a.width = this.config.cvs_config.width,
                a.height = this.config.cvs_config.height,
                b.lineWidth = this.config.lineWidth,
                b.beginPath(),
                b.strokeStyle = this.config.circle_line_color[this.getIndex()],
                b.arc(this.config.circle_config.r, this.config.circle_config.r, this.config.circle_config.cR, 0, 2 * Math.PI),
                b.fillStyle = this.config.circle_config.fillColor,
                b.fill(),
                b.stroke(),
                a
            }
        }, {
            key: "getIndex",
            value: function() {
                for (var a = 0; a < this.config.data_range.length; a++)
                    if (this.config.nowRange < this.config.data_range[a])
                        return a;
                return this.config.data_range.length - 1
            }
        }, {
            key: "updateRange",
            value: function(a) {
                this.container.data("waterBall") && (this.config.targetRange = 0,
                this.config.nowRange = 0,
                this.config.isLoading = !1,
                setTimeout(function() {
                    this.config.targetRange = a
                }, 0))
            }
        }, {
            key: "render",
            value: function(a) {
                setTimeout(c.proxy(function() {
                    if (!this.paused) {
                        var b = this.canvas.getContext("2d")
                          , c = {
                            cvs1: this.drawCircle()
                        };
                        if (this.config.nowRange <= this.config.targetRange) {
                            var d = this.config.targetRange - this.config.nowRange > this.config.fillSpeed ? this.config.fillSpeed : this.config.targetRange - this.config.nowRange;
                            this.config.nowRange += d
                        }
                        if (this.config.nowRange > this.config.targetRange) {
                            var d = 1;
                            this.config.nowRange -= d
                        }
                        var e = this.getIndex();
                        c.cvs2 = this.drawSin(this.config.wave_config.xOffset + 40, this.config.backcolor_range[e][0], this.config.backcolor_range[e][1], !1),
                        c.cvs3 = this.drawSin(this.config.wave_config.xOffset - 40, this.config.main_backcolor_range[e][0], this.config.main_backcolor_range[e][1], !0),
                        b.beginPath(),
                        b.drawImage(c.cvs1, 0, 0),
                        b.drawImage(c.cvs2, 0, 0),
                        b.drawImage(c.cvs3, 0, 0),
                        b.stroke(),
                        delete c.cvs1,
                        delete c.cvs2,
                        delete c.cvs3,
                        this.config.wave_config.xOffset += this.config.wave_config.speed
                    }
                    requestAnimationFrame(this.render.bind(this, a))
                }, this), 1e3 / a)
            }
        }, {
            key: "pause",
            value: function(a) {
                this.paused = a
            }
        }, {
            key: "resize",
            value: function() {
                this.pause(!0),
                this.canvas.width = this.container.width(),
                this.canvas.height = this.container.height(),
                this.config = this.buildConfig(this.partialConfig),
                this.pause(!1)
            }
        }, {
            key: "switchMobile",
            value: function() {
                this.resize()
            }
        }, {
            key: "switchDesktop",
            value: function() {
                this.resize()
            }
        }]),
        b
    }(b)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.defineInit("t1-controller-waveBallChart", ["T1-site-dependencies", "t1-component-waveBallChart", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    a.$ || $;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".waveBallChart:visible"));
                T1.channels.carchapter.subscribe(T1.constants.WAVEBALLCHART_INIT, d.buildInstance.bind(d)),
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "initInstance",
            value: function(a) {
                T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                    elements: a,
                    options: {
                        once: !0,
                        event: T1.constants.WAVEBALLCHART_INIT
                    }
                })
            }
        }, {
            key: "buildInstance",
            value: function(a) {
                if (!a.element.data("WaveBallChart")) {
                    var c = {
                        fillColor: a.element.data("fillcolor"),
                        textColorRange: a.element.data("textcolorrange") || [],
                        mainBackColor: a.element.data("mainbackcolor"),
                        backColor: a.element.data("backcolor"),
                        textMasks: a.element.data("textmasks") || [],
                        textStyles: a.element.data("textstyles") || []
                    }
                      , d = new b(a.element,{
                        wave_config: {
                            waveWidth: a.element.data("wavewidth"),
                            waveHeight: a.element.data("waveheight"),
                            speed: .02
                        },
                        circle_config: {
                            fillColor: c.fillColor
                        },
                        lineWidth: 10,
                        data_range: a.element.data("datarange"),
                        targetRange: a.element.data("targetrange"),
                        maxRange: a.element.data("maxrange"),
                        fillSpeed: 5,
                        textMasks: c.textMasks,
                        textStyles: c.textStyles,
                        textColorRange: c.textColorRange,
                        circle_line_color: ["#FFFFFF", "#FFFFFF", "#FFFFFF"],
                        main_backcolor_range: [[c.mainBackColor, c.mainBackColor], [c.mainBackColor, c.mainBackColor], [c.mainBackColor, c.mainBackColor]],
                        backcolor_range: [[c.backColor, c.backColor], [c.backColor, c.backColor], [c.backColor, c.backColor]]
                    });
                    T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                        elements: a.element,
                        options: {
                            reactWhenLeavingView: !0,
                            callback: function(a, b) {
                                d.pause(!b.visible)
                            }
                        }
                    }),
                    this.instances.push(d)
                }
            }
        }]),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-doughnutChart", ["T1-site-dependencies", "t1-component-abstract", "chart-bundle"], function(a, b) {
    "use strict";
    var c = a.$ || $;
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return d.create(c),
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function(a) {
                this.container && this.container.length && (this.partialConfig = a,
                this.init(a),
                this.container.data("DoughnutChart", this))
            }
        }, {
            key: "init",
            value: function(a) {
                var b = this.buildDataSets(a)
                  , c = this.buildOptions(a);
                this.charts = [],
                this.transform(),
                this.charts.push(new Chart(this.container.find("canvas:eq(0)"),{
                    type: "doughnut",
                    data: b.foreground,
                    options: c.foreground
                })),
                this.charts.push(new Chart(this.container.find("canvas:eq(1)"),{
                    type: "doughnut",
                    data: b.background,
                    options: c.background
                }))
            }
        }, {
            key: "transform",
            value: function() {
                var a = c("<canvas />").css({
                    width: this.container.width(),
                    height: this.container.height()
                });
                this.container.html(a).append(a.clone())
            }
        }, {
            key: "buildDataSets",
            value: function(a) {
                return {
                    foreground: {
                        datasets: [{
                            data: [a.targetValue / a.maxValue * 100, 100 - a.targetValue / a.maxValue * 100],
                            value: [a.targetValue, a.maxValue],
                            backgroundColor: [a.foregroundColor, "transparent"],
                            hoverBackgroundColor: [a.foregroundColor, "transparent"],
                            borderColor: [a.foregroundColor, "transparent"],
                            hoverBorderColor: [a.foregroundColor, "transparent"],
                            borderWidth: [0, 15]
                        }]
                    },
                    background: {
                        datasets: [{
                            data: [100],
                            backgroundColor: [a.backgroundColor],
                            hoverBackgroundColor: [a.backgroundColor],
                            borderColor: [, "white"],
                            hoverBorderColor: ["white"],
                            borderWidth: [15]
                        }]
                    }
                }
            }
        }, {
            key: "buildOptions",
            value: function(a) {
                var b = this.hexToRgb;
                return {
                    foreground: {
                        cutoutPercentage: 70,
                        rotation: 8.5,
                        circumference: 5,
                        animation: {
                            duration: 1500,
                            easing: "easeInOutCubic",
                            onProgress: function(c) {
                                var d = this.chart.ctx;
                                d.restore();
                                var e = (this.chart.height / 114).toFixed(2);
                                d.font = a.targetValueFont.replace("%AUTO_FONT_SIZE%", e + "em"),
                                d.textBaseline = "middle";
                                var f = c.animationObject.currentStep / c.animationObject.numSteps
                                  , g = this.data.datasets[0].value[0] || this.data.datasets[0].data[0];
                                if (this.animating) {
                                    var h = (f * this.data.datasets[0].data[0]).toFixed(1);
                                    g = this.data.datasets[0].value[0] ? (this.data.datasets[0].value[0] * f).toFixed(1) : h
                                }
                                var i = Math.round((this.chart.width - d.measureText(g).width) / 2)
                                  , j = Math.round((this.chart.height + 1.2 * parseInt(window.getComputedStyle(d.canvas).getPropertyValue("font-size"))) / 2);
                                d.fillStyle = a.targetValueColor,
                                d.fillText(g, i, j);
                                for (var k = 0; k < this.options.animation.labels.length; k++) {
                                    var l = b(this.options.animation.labels[k].hexaColor);
                                    d.fillStyle = "rgba(" + l.r + ", " + l.g + ", " + l.b + ", " + (this.animating ? f : 1) + ")",
                                    d.font = this.options.animation.labels[k].font,
                                    i = Math.round((this.chart.width - d.measureText(this.options.animation.labels[k].text).width) / 2),
                                    j = Math.round((this.chart.height + 1.2 * parseInt(window.getComputedStyle(d.canvas).getPropertyValue("font-size"))) / 2),
                                    d.fillText(this.options.animation.labels[k].text, i + (this.options.animation.labels[k].position.x || 0), j + (this.options.animation.labels[k].position.y || 0))
                                }
                                d.save()
                            },
                            labels: a.labels
                        },
                        responsive: !1,
                        tooltips: {
                            enabled: !1
                        }
                    },
                    background: {
                        cutoutPercentage: 70,
                        rotation: 8.5,
                        circumference: 5,
                        animation: {
                            duration: 750,
                            easing: "easeInOutCubic"
                        },
                        responsive: !1,
                        tooltips: {
                            enabled: !1
                        }
                    }
                }
            }
        }, {
            key: "hexToRgb",
            value: function(a) {
                var b = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
                a = a.replace(b, function(a, b, c, d) {
                    return b + b + c + c + d + d
                });
                var c = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
                return c ? {
                    r: parseInt(c[1], 16),
                    g: parseInt(c[2], 16),
                    b: parseInt(c[3], 16)
                } : null
            }
        }, {
            key: "resize",
            value: function() {
                for (var a = 0; a < this.charts.length; a++)
                    this.charts[a].destroy();
                setTimeout(this.create.bind(this, this.partialConfig), 200)
            }
        }, {
            key: "switchMobile",
            value: function() {
                this.resize()
            }
        }, {
            key: "switchDesktop",
            value: function() {
                this.resize()
            }
        }]),
        b
    }(b)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.defineInit("t1-controller-doughnutChart", ["T1-site-dependencies", "t1-component-doughnutChart", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    a.$ || $;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".doughnutChart:visible"));
                T1.channels.carchapter.subscribe(T1.constants.DOUGHNUTCHART_INIT, d.buildInstance.bind(d)),
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "initInstance",
            value: function(a) {
                T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                    elements: a,
                    options: {
                        once: !0,
                        event: T1.constants.DOUGHNUTCHART_INIT
                    }
                }),
                T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_PAUSE, {
                    paused: !1,
                    track: a
                })
            }
        }, {
            key: "buildInstance",
            value: function(a) {
                if (!a.element.data("DoughnutChart")) {
                    var c = new b(a.element,{
                        foregroundColor: a.element.data("foregroundcolor"),
                        backgroundColor: a.element.data("backgroundcolor"),
                        targetValue: a.element.data("targetvalue"),
                        maxValue: a.element.data("maxvalue"),
                        targetValueFont: a.element.data("targetvaluefont") || "%AUTO_FONT_SIZE%",
                        targetValueColor: a.element.data("targetvaluecolor"),
                        labels: a.element.data("labels")
                    });
                    this.instances.push(c)
                }
            }
        }]),
        c
    }(c))
});
var T1 = T1 || {};
T1.defineInit("t1-controller-navigationSecondary", ["T1-site-dependencies", "t1-component-navigationSecondaryDoubleTabsMenu", "t1-component-navigationSecondarySingleTabsMenu"], function(a, b, c) {
    "use strict";
    var d = a.$ || d
      , e = {
        secondLevelId: "nav-secondary-level",
        $navSecondary: null,
        secondLevelNavListClass: "secondLevelNavList",
        $doubleNavItem: null,
        secondLevelInstance: null,
        minimalScrollOffset: 300,
        prevScrollPosition: 0,
        subscriptions: {},
        init: function() {
            f.$navSecondary = d("#" + f.secondLevelId),
            f.$navSecondary.length && (f.$doubleNavItem = f.$navSecondary.find(".doubleNav"),
            f.$doubleNavItem.length ? f.doubleTabsMenuController.init() : f.singleTabsMenuController.init())
        },
        initDesktop: function() {
            f.$doubleNavItem && f.$doubleNavItem.length && f.doubleTabsMenuController.initDesktop()
        },
        switchMd: function() {
            f.$doubleNavItem && f.$doubleNavItem.length && f.secondLevelInstance.switchMd()
        },
        initSecondLevel: function() {
            var a = f.secondLevelInstance;
            a.$dropdownCollapser.length && T1.utilities.isTouchCapable && (a.$dropdownCollapser.on(T1.utilities.clickEvent, f.onDropdownClick),
            T1.channels.global.subscribe(g.ON_DOC_CLICK, f.onDOCClick))
        },
        onDropdownClick: function(a) {
            a.preventDefault(),
            f.secondLevelInstance.toggleShowMore()
        },
        onDOCClick: function(a) {
            var b = f.secondLevelInstance
              , c = d(a.target)
              , e = c.parents("#" + f.secondLevelId)
              , g = 0 === e.length
              , h = e.length > 0 && 0 === c.parents(".dropdown").length;
            (g || h) && b.isMoreSelected && b.toggleShowMore()
        },
        singleTabsMenuController: {
            hiddenOverflowClass: "overflow-hidden",
            init: function() {
                var a, b, d = {
                    id: f.secondLevelId,
                    navListClass: f.secondLevelNavListClass,
                    hiddenOverflowClass: f.singleTabsMenuController.hiddenOverflowClass
                };
                f.secondLevelInstance = new c(f.$navSecondary,d),
                f.secondLevelInstance.create(),
                b = f.secondLevelInstance,
                f.initSecondLevel(),
                a = b.$submenuItem,
                a.length && (T1.channels.global.subscribe(g.ON_BREAKPOINT_CHANGE, f.singleTabsMenuController.onBreakpointChange),
                f.singleTabsMenuController.onBreakpointChange(T1.breakpoints.currentBP()))
            },
            onBreakpointChange: function(a) {
                f.secondLevelInstance.updateDropdown()
            }
        },
        doubleTabsMenuController: {
            hiddenOverflowClass: "overflow-hidden-md",
            quickLinksMenuClass: "quicklinksMenu",
            onScrollSecondNavAsync: null,
            gradeExploreNavigation: "grade-explore-navs",
            init: function() {
                var a, c = {
                    id: f.secondLevelId,
                    navListClass: f.secondLevelNavListClass,
                    hiddenOverflowClass: f.doubleTabsMenuController.hiddenOverflowClass,
                    secondMenuClass: f.doubleTabsMenuController.quickLinksMenuClass,
                    gradeExploreNavigation: f.doubleTabsMenuController.gradeExploreNavigation
                };
                f.secondLevelInstance = new b(f.$navSecondary,c),
                f.secondLevelInstance.create(),
                a = f.secondLevelInstance,
                f.initSecondLevel(),
                a.$toggleCollapser.on("click", f.doubleTabsMenuController.toggleCollapserClick),
                T1.channels.global.subscribe(g.ON_DOC_CLICK, f.doubleTabsMenuController.onDOCClick)
            },
            initDesktop: function() {
                T1.utilities.isTouchCapable ? f.subscriptions.windowScroll = T1.channels.global.subscribe(g.GLOBAL_SWIPE, f.doubleTabsMenuController.handleWindowScroll) : f.subscriptions.windowScroll = T1.channels.global.subscribe(g.GLOBAL_SCROLL, f.doubleTabsMenuController.handleWindowScroll)
            },
            handleWindowScroll: function(a) {
                var b = void 0;
                b = f.secondLevelInstance.$gradeExploreNavigation && f.secondLevelInstance.$gradeExploreNavigation.length ? f.doubleTabsMenuController.handleFixedNavGradeExplore : f.doubleTabsMenuController.handleFixedNav,
                clearTimeout(f.doubleTabsMenuController.onScrollSecondNavAsync),
                f.doubleTabsMenuController.onScrollSecondNavAsync = setTimeout(b, 5)
            },
            handleFixedNav: function() {
                window.pageYOffset > 0 ? f.secondLevelInstance.isFixed || f.secondLevelInstance.toggleFixedClass(!0) : !d("html").hasClass(g.CLASS_NOSCROLL) && f.secondLevelInstance.isFixed && f.secondLevelInstance.toggleFixedClass(!1)
            },
            handleFixedNavGradeExplore: function() {
                var a = Math.max(0, window.pageYOffset);
                if (a - f.minimalScrollOffset > f.prevScrollPosition) {
                    var b = f.secondLevelInstance.$gradeExploreNavigation.closest("body");
                    f.secondLevelInstance.$gradeExploreNavigation.addClass("scrollDown"),
                    b.addClass("main-navigation-hidden"),
                    T1.channels.navigation.publish(g.NAVIGATION_VISIBILITY, {
                        navIsHidden: !0,
                        navContainer: b
                    }),
                    f.prevScrollPosition = a
                } else if (a + f.minimalScrollOffset < f.prevScrollPosition) {
                    var c = f.secondLevelInstance.$gradeExploreNavigation.closest("body")
                      , e = f.secondLevelInstance.$gradeExploreNavigation.hasClass("scrollDown")
                      , h = d("html").hasClass(g.CLASS_NOSCROLL);
                    !h && e && (f.secondLevelInstance.$gradeExploreNavigation.removeClass("scrollDown"),
                    c.removeClass("main-navigation-hidden")),
                    T1.channels.navigation.publish(g.NAVIGATION_VISIBILITY, {
                        navIsHidden: !1,
                        navContainer: c
                    }),
                    f.prevScrollPosition = a
                }
            },
            toggleCollapserClick: function(a) {
                a.preventDefault();
                var b = !f.secondLevelInstance.toggleMenuOpened;
                f.secondLevelInstance.toggleMenuOpenState(b)
            },
            onDOCClick: function(a) {
                var b = f.secondLevelInstance;
                0 === d(a.target).parents("#" + f.secondLevelId).length && b.toggleMenuOpened && b.toggleMenuOpenState(!1)
            }
        }
    }
      , f = e
      , g = T1.constants;
    return {
        init: e.init,
        initDesktop: e.initDesktop,
        switchMd: e.switchMd
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-controller-abstract", ["T1-site-dependencies"], function(a) {
    "use strict";
    var b = a.$ || b;
    return function() {
        function a(b, c, d) {
            if (_classCallCheck(this, a),
            this.constructor === a)
                throw new T1.error.ClassTypeError("Cannot instantiate Abstract Class");
            this.instances = [],
            this.selector = c,
            this.component = b,
            this.options = d || {}
        }
        return _createClass(a, [{
            key: "init",
            value: function() {
                var a = this;
                this.initOnDemand(),
                this.options.initOnMaterialBoxOpened && T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(b) {
                    return a.onMaterialBoxOpened(b)
                })
            }
        }, {
            key: "initOnDemand",
            value: function(a) {
                if (this.selector && "string" == typeof this.selector) {
                    var c = a ? a.find(this.selector) : b(this.selector);
                    this.initInstances(c)
                }
            }
        }, {
            key: "onMaterialBoxOpened",
            value: function(a) {
                this.initOnDemand(a.container)
            }
        }, {
            key: "initInstances",
            value: function(a) {
                for (var c = 0, d = a.length; c < d; c++) {
                    var e = b(a[c]);
                    this.initInstance(e)
                }
            }
        }, {
            key: "initInstance",
            value: function(a) {
                if (!this.instanceExists(a) && "function" == typeof this.component) {
                    var b = new this.component(a);
                    this.instances.push(b)
                }
            }
        }, {
            key: "instanceExists",
            value: function(a) {
                if (!a.length)
                    return !0;
                for (var b = a[0], c = 0; c < this.instances.length; c++) {
                    var d = this.instances[c].container;
                    if (d.length) {
                        if (d[0] === b)
                            return !0
                    }
                }
                return !1
            }
        }, {
            key: "getInstance",
            value: function(a) {
                if (a.length) {
                    for (var b = a[0], c = 0; c < this.instances.length; c++) {
                        var d = this.instances[c].container;
                        if (d.length) {
                            if (d[0] === b)
                                return this.instances[c]
                        }
                    }
                    return !1
                }
            }
        }, {
            key: "switchMobile",
            value: function() {
                this.switch("Mobile")
            }
        }, {
            key: "switchDesktop",
            value: function() {
                this.switch("Desktop")
            }
        }, {
            key: "switchMd",
            value: function() {
                this.switch("Md")
            }
        }, {
            key: "switchSm",
            value: function() {
                this.switch("Sm")
            }
        }, {
            key: "switch",
            value: function(a) {
                for (var b = 0; b < this.instances.length; b++)
                    if (this.instances[b]["switch" + a])
                        try {
                            this.instances[b]["switch" + a]()
                        } catch (e) {
                            console.log(this.constructor.name + ".switch" + a + " failed because " + e.message)
                        }
            }
        }]),
        a
    }()
}),
T1.defineInit("t1-controller-video", ["T1-site-dependencies", "t1-component-video", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    a.$;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = ".explore-video"
                  , e = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, d));
                c.instance = e
            }
            return a = c.instance,
            _possibleConstructorReturn(e, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();

/*=>*/
T1.define("t1-component-visualContent", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = a.$ || $;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a))
              , d = function(a) {
                return c.onBreakpointChanged(a)
            };
            return T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, d),
            c.pagesByRow = 3,
            c.inactivePagesByRow = 10,
            c.activeItemVw = 80,
            c.numberOfItems = c.container.find(".content > li").length,
            c.create(),
            c.createScroller(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                var a = this;
                this.container && this.container.length && (this.container.toggleClass("ie", T1.utilities.browser.isExplorer),
                !T1.utilities.isTouchCapable || T1.utilities.browser.isExplorer || T1.utilities.browser.isEdge ? (this.container.find(".content li, .content .icon-remove").on("click", function(b) {
                    return a.toggle(b)
                }),
                this.container.find(".btn-toggle-more").on("click", function(b) {
                    return a.onToggleMore(b)
                })) : (this.container.find(".content li, .content .icon-remove").swipe({
                    tap: function(b, c) {
                        a.toggle(b)
                    },
                    threshold: 25
                }),
                this.container.find(".btn-toggle-more").swipe({
                    tap: function(b, c) {
                        a.onToggleMore(b)
                    },
                    threshold: 25
                })))
            }
        }, {
            key: "createScroller",
            value: function() {
                var a = this;
                if (this.canIScroll()) {
                    if (!this.IscrollInstance && this.container && this.container.length) {
                        var b = this.container.find(".iscroller");
                        b.length && (this.IscrollInstance = new IScroll(b[0],{
                            scrollX: !0,
                            scrollY: !1,
                            mouseWheel: !1,
                            click: !0,
                            eventPassthrough: !0,
                            snap: "li"
                        }),
                        this.setContentWidth(),
                        this.IscrollInstance.on("scrollEnd", function(b) {
                            return a.onScrollEnd(b)
                        }),
                        this.container.find(".t1-arrow-control.prev").on(T1.utilities.clickEvent, function(b) {
                            return a.onNavigatePrev(b)
                        }),
                        this.container.find(".t1-arrow-control.next").on(T1.utilities.clickEvent, function(b) {
                            return a.onNavigateNext(b)
                        }))
                    }
                } else
                    this.IscrollInstance && (this.IscrollInstance.destroy(),
                    delete this.IscrollInstance,
                    setTimeout(function() {
                        this.container.find(".content").removeAttr("style")
                    }
                    .bind(this), 200))
            }
        }, {
            key: "setContentWidth",
            value: function() {
                if (this.IscrollInstance) {
                    var a = 200;
                    a = this.container.find(".active").length ? Math.ceil((this.numberOfItems - 1) / this.inactivePagesByRow * 100) + this.activeItemVw : Math.ceil(this.numberOfItems / this.pagesByRow * 100),
                    this.container.find(".iscroller > .content").css("width", a + "vw"),
                    this.IscrollInstance.refresh()
                }
            }
        }, {
            key: "onBreakpointChanged",
            value: function(a) {
                this.createScroller()
            }
        }, {
            key: "onNavigatePrev",
            value: function(a) {
                this.IscrollInstance.prev(),
                this.onNavigate(a, this.container.find("li.active").prev())
            }
        }, {
            key: "onNavigateNext",
            value: function(a) {
                this.IscrollInstance.next(),
                this.onNavigate(a, this.container.find("li.active").next())
            }
        }, {
            key: "onNavigate",
            value: function(a, b) {
                this.toggle(a, b || this.container.find("li.active"))
            }
        }, {
            key: "onScrollEnd",
            value: function(a) {
                var b = this.IscrollInstance.currentPage.pageX
                  , c = this.container.find(".content li").length;
                this.container.find(".t1-arrow-control.prev").toggleClass("hidden", 0 === b),
                this.container.find(".t1-arrow-control.next").toggleClass("hidden", b + this.pagesByRow >= c)
            }
        }, {
            key: "adjustPagePosition",
            value: function(a, b) {
                if (this.IscrollInstance && b.length) {
                    var c = this.IscrollInstance
                      , d = this.pagesByRow
                      , e = this.container.find(".content li").length;
                    setTimeout(function() {
                        c.refresh();
                        var a = b.index();
                        a === e - 1 ? e % d && (a -= 2) : a > 0 && a--,
                        c.goToPage(a, 0)
                    }, 0)
                }
            }
        }, {
            key: "toggle",
            value: function(a, b) {
                var d = this
                  , e = b || c(a.currentTarget)
                  , f = void 0;
                e.length && (e.is(".active, .icon-remove") ? (this.isMobile() && !e.is(".icon-remove") || (a.stopPropagation(),
                e.onTransitionEnd(function(a) {
                    return d.adjustPagePosition(a, e)
                }, {
                    one: !0
                }),
                this.container.find(".content li.active").removeClass("active"),
                this.container.find(".content").removeClass("active"),
                this.setContentWidth()),
                this.handleVideo(e, !1),
                f = "view-item-collapsed") : (e.onTransitionEnd(function(a) {
                    return d.adjustPagePosition(a, e)
                }, {
                    one: !0
                }),
                this.container.find(".content li.active").removeClass("active"),
                this.container.find(".content").add(e).addClass("active"),
                setTimeout(function(a) {
                    return d.setContentWidth(a)
                }, 1e3),
                this.handleVideo(e, !0),
                f = "view-item-full"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: e,
                    extraData: {
                        event: {
                            action: f
                        }
                    }
                }))
            }
        }, {
            key: "onToggleMore",
            value: function(a) {
                this.container.toggleClass("more")
            }
        }, {
            key: "handleVideo",
            value: function(a, b) {
                var c = a.find("video");
                c.length && (b ? c[0].play() : c[0].pause())
            }
        }, {
            key: "isMobile",
            value: function() {
                return "xs" === c.safe("T1.breakpoints.currentBP")()
            }
        }, {
            key: "canIScroll",
            value: function() {
                var a = c.safe("T1.breakpoints.currentBP")();
                return "xs" !== a && "sm" !== a
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-visualContent", ["T1-site-dependencies", "t1-component-visualContent"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c(".visual-content").each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();



T1.define("t1-component-slidingView", ["T1-site-dependencies", "t1-component-abstract", "t1-controller-slidingView"], function(a, b) {
    "use strict";
    var c = a.$ || $;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.create(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                var a = this;
                this.container.find(".nav-btn").on(T1.utilities.clickEvent, function(b) {
                    return a.onNavigate(b)
                })
            }
        }, {
            key: "onNavigate",
            value: function(a) {
                var b = c(a.currentTarget)
                  , d = b.data("frame")
                  , e = this.container.find(".collapse-panel.collapsing").length;
                if (b.is(".active") || e)
                    a.preventDefault(),
                    a.stopImmediatePropagation();
                else {
                    var f = this.container.find(".nav-btn")
                      , g = this.container.find(".slide-frames .collapse");
                    f.filter("[data-frame!=" + d + "]").removeClass("active"),
                    f.filter("[data-frame=" + d + "]").addClass("active"),
                    g.filter(".in").collapse("hide"),
                    g.filter(":eq(" + d + ")").collapse("show")
                }
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-slidingView", ["T1-site-dependencies", "t1-component-slidingView"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c(".sliding-view").each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-spin360", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = a._ || d;
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return d.modelData = c.modelData || {},
            d.waitForWebP(c),
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "waitForWebP",
            value: function(a) {
                var b = this;
                window.Modernizr.on("webp", function(c) {
                    return b.onWebPDone(c, a)
                })
            }
        }, {
            key: "onWebPDone",
            value: function(a, b) {
                this.webp = a,
                this.init(b)
            }
        }, {
            key: "init",
            value: function(a) {
                this.extendApi(),
                this.create(a)
            }
        }, {
            key: "create",
            value: function(a) {
                if (this.container && this.container.length) {
                    var b = a.carId || this.container.data("carid");
                    b ? (a.carId = b,
                    this.carData = a,
                    this.loadCarData(a)) : this.onGetModelDone(this.modelData, a)
                }
            }
        }, {
            key: "onGetModelDone",
            value: function(a, b) {
                this.carData = c.extend(a, b),
                this.loadCarData(this.carData)
            }
        }, {
            key: "onLoadFrames",
            value: function(a, b, c) {
                c.is(".ready") || (b.scale && c.find(".spritespin-instance").css("transform", "scale(" + b.scale + ")"),
                T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                    target: this.container.find(".carspin-container")
                }),
                !b.animate && b.startAngle && this.goToAngle(b.startAngle, c, !0),
                c.addClass("ready"))
            }
        }, {
            key: "onFrameChanged",
            value: function(a, b, c) {
                c.dragging || (c.frame === c.stopFrame ? this.onAnimationDone() : this.animating = !0)
            }
        }, {
            key: "onAnimationDone",
            value: function() {
                this.animating = !1
            }
        }, {
            key: "getImagesSettings",
            value: function(a) {
                return {
                    modelUrl: a.data("modelurl") || "[CCISHOST]/product-token/[PRODUCT-TOKEN]/vehicle/[MODEL]/[CARID]/width/[WIDTH]/height/[HEIGHT]/scale-mode/1/padding/0,0,10,10/background-colour/[BACKGROUND-COLOR]/image-quality/70/[FILENAME-PREFIX][MODE]-[ANGLE][COLOR].[EXTENSION]",
                    configUrl: a.data("configurl") || "[CCISHOST]/product-token/[PRODUCT-TOKEN]/configurationtype/visual-for-model-selector/model/[CARID]/fallback/true/width/[WIDTH]/height/[HEIGHT]/scale-mode/1/padding/0,0,10,10/background-colour/[BACKGROUND-COLOR]/image-quality/70/[FILENAME-PREFIX][MODE]-[ANGLE].[EXTENSION]",
                    extension: a.data("imagesextension") || "jpg",
                    backgroundColor: a.data("backgroundcolor") || "FFFFFF"
                }
            }
        }, {
            key: "getSpinSettings",
            value: function(a, b) {
                var e = this.getGrade(a.subModels, this.container.data("gradeGuid"))
                  , f = T1.settings.modelMapMap[a.modelGuid] || a.code || a.model
                  , g = T1.settings.modelMap[f]
                  , h = this.getImagesSettings(b)
                  , i = a.renderer || a.renderType || b.data("renderer") || "canvas"
                  , j = e.carId
                  , k = void 0;
                return Array.isArray(a.subModels) && (k = d.find(a.subModels, {
                    isHybrid: !0
                }),
                k || (k = a.subModels.length && a.subModels[0]),
                j = k && k.promoted),
                {
                    CCISHost: T1.settings.T1ImagesServer ? T1.settings.T1ImagesServer + "/ccis/[WEBP-EXTENSION]/[COUNTRY]" : T1.settings.CCISHost.replace(/\/$/g, "") || "//t1-ccis.toyota-europe.com",
                    model: f,
                    token: "true" === T1.settings.enableCarDbTokens && g && g.token ? g.token : null,
                    carId: a.carId || e.carId || j,
                    ccVersion: a.ccVersion || "",
                    baseUrl: a.baseUrl || a.carId && $.isEmptyObject(e) ? h.configUrl : h.modelUrl,
                    color: a.color || (b.data("color") ? b.data("color") : ""),
                    startAngle: a.startAngle || b.data("startangle") || 0,
                    frameSize: c.extend(!0, {
                        height: 400,
                        width: 800,
                        autoSize: !0
                    }, b.data("framesize")),
                    renderer: T1.utilities.browser.isExplorer && "image" === i ? "canvas" : i,
                    angleTime: b.data("angletime") || 40,
                    angleStep: b.data("anglestep") || 20,
                    imageSettings: h,
                    type: b.data("type") || "exterior",
                    frames: b.data("slides") || 36,
                    fileNamePrefix: (b.data("filenameprefix") || "day") + "-",
                    animate: void 0 === b.data("animate") || !!b.data("animate"),
                    preventLoader: a.preventLoader,
                    noLoader: a.noLoader,
                    transparentLoader: a.transparentLoader || !1,
                    sizeMode: b.data("sizemode") || "scale",
                    scrollThreshold: b.data("scrollthreshold") || 50,
                    responsive: b.data("responsive") || !1,
                    frameTime: b.data("frametime") || 50,
                    scale: b.data("scale")
                }
            }
        }, {
            key: "getSpinSize",
            value: function(a) {
                if (a.size)
                    return a.size;
                var b = window.innerWidth || c(window).innerWidth();
                return b <= T1.constants.SCREEN_SMALL ? {
                    width: 400,
                    height: 300
                } : b <= T1.constants.SCREEN_MEDIUM ? {
                    width: 600,
                    height: 450
                } : {
                    width: 800,
                    height: 600
                }
            }
        }, {
            key: "buildSpins",
            value: function(a, b) {
                var c = this;
                (b || this.carData) && a.each(function(a, d) {
                    return c.createSpinInstance(a, d, b || c.carData)
                })
            }
        }, {
            key: "createSpinInstance",
            value: function(a, b, d) {
                var e = this
                  , f = c(b)
                  , g = c("<div></div>")
                  , h = this.getSpinSettings(d, f)
                  , i = this.getSpinSize(d);
                this.container.hasClass("carexterior") || f.css({
                    height: Math.round(.7 * i.height) + "px"
                }),
                h.preventLoader || (f.find(".spritespin-instance").remove(),
                f.append(g)),
                g.spritespin({
                    responsive: h.responsive,
                    source: this.getImageUrls(h, f),
                    width: h.frameSize.autoSize ? i.width : h.frameSize.width,
                    height: h.frameSize.autoSize ? i.height : h.frameSize.height,
                    loop: !1,
                    stopFrame: this.degreeToAngle(h.startAngle),
                    angleTime: h.angleTime,
                    renderer: h.renderer,
                    onLoad: function(a) {
                        return e.onLoadFrames(a, h, f)
                    },
                    onFrame: function(a) {
                        return e.onFrameChanged(a, h, status)
                    },
                    behavior: void 0 === f.data("drag") || f.data("drag") ? "drag" : null,
                    animate: h.animate,
                    sizeMode: h.sizeMode,
                    scrollThreshold: h.scrollThreshold,
                    frameTime: h.frameTime
                }),
                d.preventLoader || d.noLoader || this.container.is(".carspin") || T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                    target: f,
                    transparent: d.transparentLoader
                })
            }
        }, {
            key: "loadCarData",
            value: function(a) {
                var b = this.container.find(".carspin-container");
                !a.preventLoader && !a.noLoader && b.length > 0 && !b.is(".loading") && T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                    target: b,
                    transparent: a.transparentLoader
                }),
                this.buildSpins(this.container.find(".spin:not([data-deffered=true])").or(this.container), a)
            }
        }, {
            key: "getGrade",
            value: function(a, b) {
                if (b) {
                    var c = null
                      , d = null;
                    "string" != typeof b && (b = b.toString());
                    for (var e = 0; e < a.length; e++) {
                        d = a[e].grades;
                        for (var f = 0; f < d.length; f++)
                            if (c = d[f],
                            b === c.id)
                                return c
                    }
                }
                return {}
            }
        }, {
            key: "getImageUrls",
            value: function(a) {
                for (var b = [], c = 0, d = "none" === a.imageSettings.backgroundColor, e = this.webp ? a.imageSettings.extension : "zip", f = 0; f < a.frames; f++)
                    c >= 360 && (c -= 360),
                    f % (a.angleStep / 10) ? c += 10 : (b.push(a.baseUrl.replace(/\[CCISHOST\]/g, a.CCISHost).replace(/\[COUNTRY\]/g, a.country || T1.settings.carconfig.country).replace(a.token ? /\[PRODUCT-TOKEN\]/g : /\/product-token\/\[PRODUCT-TOKEN\]/g, a.token ? a.token : "").replace(a.token ? /\[MODEL\]\//g : /\[MODEL\]/g, a.token ? "" : a.model).replace(/\[CARID\]/g, a.carId).replace(/\[MODE\]/g, a.type).replace(/\[ANGLE\]/g, Math.floor(c / 10)).replace(/\[WIDTH\]/g, a.frameSize.width).replace(/\[HEIGHT\]/g, a.frameSize.height).replace(d ? /\/background-colour\/\[BACKGROUND-COLOR\]/g : /\[BACKGROUND-COLOR\]/g, d ? "" : a.imageSettings.backgroundColor).replace(/\[COLOR\]/g, a.color ? "_" + a.color : "").replace(/\[FILENAME-PREFIX\]/g, a.fileNamePrefix).replace(/\[WEBP-EXTENSION\]/g, e).replace(/\[EXTENSION\]/g, this.webp ? "webp" : a.imageSettings.extension)),
                    c += 10);
                return b
            }
        }, {
            key: "getActiveSpin",
            value: function(a) {
                return a || this.container.find(".spin.active")
            }
        }, {
            key: "getSpinApi",
            value: function(a) {
                return a = a || this.container.find(".spin.active"),
                a.find(">.spritespin-instance").spritespin("api")
            }
        }, {
            key: "goToAngle",
            value: function(a, b, c) {
                if (Number.isInteger(a)) {
                    var d = this.getSpinApi(b);
                    if (d.data) {
                        var e = function() {
                            a = 10 * Math.round(a / 10),
                            d[c ? "updateFrame" : "playTo"](a / 10, {
                                nearest: !0
                            })
                        };
                        d.data.target.is(".loading") ? d.data.target.one("onLoad", e) : e()
                    }
                }
            }
        }, {
            key: "fit",
            value: function(a, b) {
                var c = this.getSpinApi(a);
                c.data && c.fit(b)
            }
        }, {
            key: "reboot",
            value: function(a) {
                var b = this.getSpinApi(a);
                b.data && b.reboot()
            }
        }, {
            key: "degreeToAngle",
            value: function(a) {
                return 10 * Math.round(a / 10) / 10
            }
        }, {
            key: "destroy",
            value: function() {
                var a = this.container.find(".spin.ready");
                a.find(">.spritespin-instance").spritespin("destroy"),
                a.removeClass("ready")
            }
        }, {
            key: "extendApi",
            value: function() {
                window.SpriteSpin && (SpriteSpin.Api.prototype.fit || SpriteSpin.extendApi({
                    fit: function(a) {
                        if (!this.data.target.is(".loading")) {
                            var b = Math.floor(this.data.width || this.data.frameWidth || this.data.target.innerWidth())
                              , c = Math.floor(this.data.height || this.data.frameHeight || this.data.target.innerHeight())
                              , d = b / c;
                            b = a.width || this.data.target.closest(".spin").parent().width(),
                            c = b / d | 0,
                            this.data.target.css({
                                width: b,
                                height: c
                            })
                        }
                    }
                }),
                SpriteSpin.Api.prototype.reboot || SpriteSpin.extendApi({
                    reboot: function() {
                        var a = this;
                        this.data.loading || (SpriteSpin.boot(this.data),
                        this.data.target.one("onLoad", function() {
                            return a.bootAnimation()
                        }))
                    }
                }),
                SpriteSpin.Api.prototype.bootAnimation || SpriteSpin.extendApi({
                    bootAnimation: function() {
                        var a = this.data.frame;
                        this.updateFrame(0),
                        this.playTo(a, {
                            nearest: !1
                        })
                    }
                }))
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-Spin360", ["T1-site-dependencies", "t1-component-spin360"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        spins: {},
        init: function() {
            var a = c(".carspin");
            d.modelData = {},
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_INIT, d.initInstance),
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_PLAY_TO, d.playTo),
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_REQUEST_ANIMATION, d.requestAnimation),
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_FIT, d.fit),
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_REBOOT, d.reboot),
            T1.channels.carchapter.subscribe(T1.constants.CARSPIN_DESTROY, d.destroyInstance),
            a.length && (T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                elements: a.filter(":not(:has(.spin[data-preload=true])), :not(:has(.spin[data-deffered=true]))"),
                options: {
                    once: !0,
                    event: T1.constants.CARSPIN_INIT
                }
            }),
            d.preload(a.filter(":has(.spin[data-preload=true])")))
        },
        preload: function(a) {
            a.each(function() {
                d.initInstance({
                    element: c(this)
                })
            })
        },
        initInstance: function(a) {
            if (a.element = a.element || a.section,
            a.element.length) {
                var e = a.element.data("model");
                a.element.attr("id") || a.element.attr("id", "_" + (new Date).getTime());
                var f = a.element.attr("id");
                d.spins[f] ? a.spins && d.spins[f].buildSpins(a.spins) : d.modelData[e] ? (a.modelData = d.modelData[e],
                d.spins[f] = new b(a.section || a.element,a)) : c.ajax({
                    url: "/api/cardb/spin360/[MODEL]".replace(/\[MODEL\]/g, e),
                    dataType: "JSON"
                }).done(function(c) {
                    c.error ? window.console.log("360 Spin Error: " + c.message) : (d.modelData[e] = c,
                    a.modelData = d.modelData[e],
                    d.spins[f] = new b(a.section || a.element,a))
                })
            }
        },
        destroyInstance: function(a) {
            if (a.element = a.element || a.section,
            a.element && a.element.length) {
                var b = a.element.attr("id")
                  , c = d.spins[b];
                c && (c.destroy(),
                delete d.spins[b],
                a.element.removeAttr("id"))
            }
        },
        requestAnimation: function(a) {
            if (a.callback && a.spin && a.spin.length) {
                var b = d.spins[a.spin.attr("id")];
                b && !b.animating ? a.callback() : a.fallback && a.fallback()
            }
        },
        playTo: function(a) {
            if (a.container && a.container.length) {
                var b = d.spins[a.container.attr("id")];
                b && b.goToAngle(a.angle, a.spin, a.noAnimation)
            }
        },
        fit: function(a) {
            if (a.container && a.container.length) {
                var b = d.spins[a.container.attr("id")];
                b && a.spin.each(function() {
                    b.fit(c(this), {
                        width: a.width
                    })
                })
            }
        },
        reboot: function(a) {
            if (a.container && a.container.length) {
                var b = d.spins[a.container.attr("id")];
                b && a.spin.each(function() {
                    b.reboot(c(this))
                })
            }
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-module360", ["T1-site-dependencies", "t1-component-abstract", "t1-controller-Spin360", "t1-controller-slidingView"], function(a, b) {
    "use strict";
    var c = a.$ || $;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.create(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                var a = this;
                this.subscriptions = {},
                this.trackWheel(),
                this.trackDefferedSpins(),
                this.trackColorThemeChanged(),
                this.initNavigation(),
                this.initSwipe(),
                this.container.find(".btn-toggle-spin").click(function(b) {
                    return a.toggleSpin(b)
                }),
                this.container.find(".btn-spin-view").click(function(b) {
                    return a.toggleSpinView(b)
                })
            }
        }, {
            key: "initNavigation",
            value: function() {
                var a = this;
                this.container.find(".nav-btn").on("click", function(b) {
                    return a.onNavigationClick(b)
                })
            }
        }, {
            key: "onNavigationClick",
            value: function(a) {
                var b = this
                  , d = c(a.currentTarget)
                  , e = d.data("frame")
                  , f = this.container.find(".collapse-panel.collapsing").length;
                if (this.trackElement(d),
                this.isSlidingView() || !d.is(".active") && !f) {
                    var g = function() {
                        return b.onRequestAnimation(d.data("playto"), e)
                    };
                    T1.channels.carchapter.publish(T1.constants.CARSPIN_REQUEST_ANIMATION, {
                        callback: g,
                        fallback: function() {
                            a.preventDefault(),
                            a.stopPropagation()
                        },
                        spin: this.container
                    })
                } else
                    a.preventDefault(),
                    a.stopPropagation()
            }
        }, {
            key: "isSlidingView",
            value: function() {
                return this.container.is(".sliding-view")
            }
        }, {
            key: "trackElement",
            value: function(a) {
                !0 !== a.data("noTracking") ? T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a
                }) : a.data("noTracking", !1)
            }
        }, {
            key: "onRequestAnimation",
            value: function(a, b) {
                var c = this.container.find(".nav-btn");
                this.playTo(a),
                c.filter("[data-frame!=" + b + "]").removeClass("active"),
                c.filter("[data-frame=" + b + "]").addClass("active")
            }
        }, {
            key: "initSwipe",
            value: function() {
                var a = this
                  , b = function(b, c) {
                    return a.onSwipe(b, c)
                };
                this.container.find(".slide-frames").swipe({
                    swipe: b,
                    threshold: 50,
                    triggerOnTouchEnd: !1,
                    allowPageScroll: $.fn.swipe.pageScroll.VERTICAL,
                    excludedElements: $.fn.swipe.defaults.excludedElements + ", .spritespin-instance"
                })
            }
        }, {
            key: "onSwipe",
            value: function(a, b) {
                this.isTargetOverflowableRow(a.target) || this.isSpinViewActive() || this.navigateByDirection(c(a.target), {
                    right: "left" === b,
                    left: "right" === b
                }),
                this.isSpinViewActive() && !this.container.data("spin-view-swipe-tracked") && (T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: this.container,
                    extraData: {
                        event: {
                            action: "click_function",
                            value: "spin-360"
                        }
                    }
                }),
                this.container.data("spin-view-swipe-tracked", !0))
            }
        }, {
            key: "isTargetOverflowableRow",
            value: function(a) {
                return $(a).is(".overflowable-row, .t1-iscroll-list, .t1-iscroll-item")
            }
        }, {
            key: "isMobile",
            value: function() {
                return "xs" === $.safe("T1.breakpoints.currentBP")()
            }
        }, {
            key: "getActiveFrameLayout",
            value: function() {
                return this.container.find(".nav-btn.active:first()").data("playto")
            }
        }, {
            key: "toggleSpin",
            value: function(a) {
                var b = c(a.currentTarget)
                  , d = c(b.attr("href"));
                d.is(".spin") && d.length && (a.preventDefault(),
                this.container.find(".spin, .btn-toggle-spin").not(d).removeClass("active"),
                d.add(b).addClass("active"),
                this.trackElement(b))
            }
        }, {
            key: "toggleSpinView",
            value: function(a) {
                a.preventDefault(),
                this.container.toggleClass("spin-view-active"),
                this.trackSpinView();
                var b = {
                    container: this.container,
                    transform: "none"
                }
                  , d = this.isMobile() || T1.utilities.isIphone()
                  , e = T1.utilities.viewport.isPortrait() ? "portrait" : "landscape"
                  , f = {
                    mobile: {
                        portrait: 1,
                        landscape: .5
                    },
                    desktop: .66
                }
                  , g = this.isSpinViewActive()
                  , h = this.container.width() * (d ? f.mobile[e] : f.desktop);
                T1.channels.carchapter.publish(T1.constants.CARSPIN_FIT, {
                    container: this.container,
                    spin: this.container.find(".spin"),
                    width: g ? this.container.width() * (d ? 1 : .8) : h
                }),
                g || (b = c.extend(!0, b, this.getActiveFrameLayout())),
                this.playTo(b),
                this.transform(b)
            }
        }, {
            key: "trackSpinView",
            value: function() {
                var a = this.container.find(".btn-spin-view");
                if (!0 !== a.data("noTracking")) {
                    var b = (this.isSpinViewActive() ? "view" : "close") + "-360";
                    T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                        node: this.container,
                        extraData: {
                            event: {
                                action: "click_function",
                                value: b
                            }
                        }
                    })
                } else
                    a.data("noTracking", !1)
            }
        }, {
            key: "trackWheel",
            value: function() {
                var a = this
                  , b = function(b) {
                    return a.wheelTo(b)
                }
                  , c = function(c) {
                    return a.onMaterialBoxOpen(c, b)
                };
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPEN, c);
                var d = function(c) {
                    return a.onMaterialBoxClosedAndRollbackCompleted(c, b)
                };
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_ROLLBACK_COMPLETE, d)
            }
        }, {
            key: "onMaterialBoxOpen",
            value: function(a, b) {
                this.container.is(a.selector) && (this.container.addClass("in-box"),
                document.addEventListener("wheel", b, !0))
            }
        }, {
            key: "onMaterialBoxClosedAndRollbackCompleted",
            value: function(a, b) {
                a.is(this.container) && (document.removeEventListener("wheel", b, !0),
                this.reset())
            }
        }, {
            key: "trackDefferedSpins",
            value: function() {
                var a = this;
                this.subscriptions.MATERIALBOX_OPENED = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(b) {
                    return a.onMaterialBoxOpened(b)
                })
            }
        }, {
            key: "trackColorThemeChanged",
            value: function() {
                var a = this;
                this.subscriptions.COLORPICKER_COLOR_CHANGED = T1.channels.global.subscribe(T1.constants.COLORPICKER_COLOR_CHANGED, function(b) {
                    return a.onColorThemeChanged(b)
                })
            }
        }, {
            key: "onMaterialBoxOpened",
            value: function(a) {
                a.content.is(this.container) && this.subscriptions.MATERIALBOX_OPENED && (this.subscriptions.MATERIALBOX_OPENED.unsubscribe(),
                T1.channels.carchapter.publish(T1.constants.CARSPIN_REBOOT, {
                    container: this.container,
                    spin: this.container.find(".spin[data-deffered!=true]")
                }),
                T1.channels.carchapter.publish(T1.constants.CARSPIN_INIT, {
                    element: this.container,
                    spins: this.container.find(".spin[data-deffered=true]")
                }))
            }
        }, {
            key: "onColorThemeChanged",
            value: function(a) {
                var b = this;
                if (!a.preview && this.isColorable()) {
                    var c = function(c) {
                        return b.onLazyLoadColor(c, a)
                    }
                      , d = this.container.prop("scrollTrackId");
                    this.isSpinViewActive() && this.container.find(".btn-spin-view").click(),
                    d && T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_REMOVE, {
                        scrollTrackId: d
                    }),
                    T1.channels.scrolling.publish(T1.constants.SCROLL_TRACK_ADD, {
                        elements: this.container,
                        options: {
                            once: !0,
                            callback: c
                        }
                    })
                }
            }
        }, {
            key: "onLazyLoadColor",
            value: function(a, b) {
                var c = this
                  , d = this.getSpinActiveState();
                T1.channels.carchapter.publish(T1.constants.CARSPIN_DESTROY, {
                    element: this.container
                }),
                this.transform({
                    transform: null
                }),
                this.subscriptions.LOADING_COMPLETE = T1.channels.dialog.subscribe(T1.constants.LOADING_COMPLETE, function(a) {
                    return c.onSpinReady(a, d)
                }),
                T1.channels.carchapter.publish(T1.constants.CARSPIN_INIT, {
                    element: this.container,
                    transparentLoader: !0,
                    color: b.colorCode,
                    startAngle: d.angle
                })
            }
        }, {
            key: "onSpinReady",
            value: function(a, b) {
                this.container.is(a.target) && (this.subscriptions.LOADING_COMPLETE.unsubscribe(),
                this.transform({
                    transform: b.transform
                }))
            }
        }, {
            key: "isColorable",
            value: function() {
                return this.container.find(".colorable-background").length
            }
        }, {
            key: "getSpinActiveState",
            value: function() {
                return this.container.find(".nav-btn.active").data("playto") || {}
            }
        }, {
            key: "wheelTo",
            value: function(a) {
                this.isSpinViewActive() ? this.container.find(".btn-spin-view").click() : this.navigateByDirection(c(a.target), {
                    left: a.deltaY < 0,
                    right: a.deltaY > 0
                })
            }
        }, {
            key: "navigateByDirection",
            value: function(a, b) {
                var c = this
                  , d = function() {
                    return c.onRequestAnimationFrame(a, b)
                };
                requestAnimationFrame(d)
            }
        }, {
            key: "onRequestAnimationFrame",
            value: function(a, b) {
                var c = this.container.find(".slide-frames");
                if (a.is(c) || c.has(a).length) {
                    var d = c.find(".nav-btn.active");
                    d.length && (b.left ? d.prev().click() : b.right && d.next().click())
                }
            }
        }, {
            key: "isSpinViewActive",
            value: function() {
                return this.container.is(".spin-view-active")
            }
        }, {
            key: "playTo",
            value: function(a) {
                a.container = this.container,
                T1.channels.carchapter.publish(T1.constants.CARSPIN_PLAY_TO, a),
                this.transform(a),
                this.container.find(".spin:not(.active)").each(function() {
                    T1.channels.carchapter.publish(T1.constants.CARSPIN_PLAY_TO, c.extend(!0, {
                        container: this.container,
                        spin: $(this),
                        noAnimation: !0
                    }, a))
                })
            }
        }, {
            key: "transform",
            value: function(a) {
                this.container.find(".spins-container").css("transform", a.transform || "none")
            }
        }, {
            key: "reset",
            value: function() {
                var a = this.container.find(".spin:not([data-deffered])");
                if (this.isSpinViewActive()) {
                    var b = this.container.find(".btn-spin-view");
                    b.data("noTracking", !0),
                    b.click()
                }
                this.container.removeClass("in-box");
                var c = this.container.find(".nav-btn.initial:first()");
                c.data("noTracking", !0),
                c.click(),
                this.container.find(".spin").removeClass("active"),
                this.container.data("spin-view-swipe-tracked", !1);
                var d = this.container.find('.btn-toggle-spin[href="#' + a.attr("id") + '"]');
                d.data("noTracking", !0),
                d.click()
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-Module360", ["T1-site-dependencies", "t1-component-module360", "t1-controller-Spin360", "t1-component-spin360"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c(".module-360").each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-overFlowableRow", ["t1-component-abstract", "T1-site-dependencies", "t1-controller-carousel"], function(a, b, c) {
    "use strict";
    var d = b.$ || d;
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, null));
            return a = d(a),
            e.$container = e.container,
            e.containerDomElement = e.$container[0],
            e.options = c,
            e.$itemsContainer = e.$container.find("." + c.itemsContainerClass),
            e.$items = e.$itemsContainer.find("." + c.itemClass),
            e.IscrollOptions = c.IscrollOptions,
            e.isSwipable = !1,
            e.IscrollInstance = null,
            e.isRtl = "rtl" === T1.settings.siteDirection,
            e.currentBreakpoint = T1.breakpoints.currentBP(),
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                var a = this
                  , b = this.$container.data("option")
                  , c = b && !1 === d.isEmptyObject(b)
                  , e = void 0;
                c && (e = b.centerActiveItemOnLoad,
                this.setOptions(b)),
                this.overflowingCheck(),
                this.attachCarouselEventHandlers(),
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, function(b) {
                    return a.onBreakPointChange(b)
                }),
                T1.channels.global.subscribe(T1.constants.OVERFLOWABLE_ROW_OVERFLOWING_CHECK, function(b) {
                    b.is(a.$container) && a.overflowingCheck()
                }),
                T1.channels.global.subscribe(T1.constants.OVERFLOWABLE_ROW_CENTER_ACTIVE, function(b) {
                    d(b).is(a.container) && a.centerActiveItem()
                }),
                this.centerOnSlidingNavTabsSwitch(),
                e && this.centerActiveItem()
            }
        }, {
            key: "centerOnSlidingNavTabsSwitch",
            value: function() {
                var a = this;
                T1.channels.tab.subscribe(T1.constants.SLIDING_NAV_TABS_SWITCH, function(b) {
                    b.context.get(0).closest(".overflowable-row") === a.$container.get(0) && a.centerActiveItem()
                })
            }
        }, {
            key: "attachCarouselEventHandlers",
            value: function() {
                var a = this;
                if (this.options.carouselNav)
                    if (this.setCarouselToNavigate(),
                    this.carouselToNavigate)
                        this.onCarouselCreated();
                    else {
                        var b = this.getCarouselToNavigate();
                        b.on(T1.constants.CAROUSEL_CREATED, function() {
                            return a.onCarouselCreated()
                        })
                    }
            }
        }, {
            key: "attachSlideToHandlers",
            value: function() {
                var a = this;
                this.slideToLinks = this.container.find("[data-t1-slide-to]");
                for (var b = this.slideToLinks.length, c = 0; c < b; c++) {
                    var e = d(this.slideToLinks[c])
                      , f = {
                        slideToIndex: e.data("t1-slide-to")
                    };
                    e.on(T1.utilities.clickEvent, null, f, function(b) {
                        return a.onSlideToElementClick(b)
                    })
                }
            }
        }, {
            key: "onBreakPointChange",
            value: function(a) {
                this.currentBreakpoint = a,
                this.overflowingCheck()
            }
        }, {
            key: "onCarouselCreated",
            value: function() {
                this.carouselToNavigate || this.setCarouselToNavigate(),
                this.attachOnSlideHandler(),
                this.attachSlideToHandlers()
            }
        }, {
            key: "attachOnSlideHandler",
            value: function() {
                var a = this;
                this.carouselToNavigate.container.on("beforeChange", function(b, c, d, e) {
                    return a.onCarouselSlide(b, c, d, e)
                })
            }
        }, {
            key: "onCarouselSlide",
            value: function(a, b, c, d) {
                var e = this.getActiveItem()
                  , f = e.data("t1-slide-to")
                  , g = e.data("last-slide-index");
                if (g) {
                    if (!this.isInCurrentActiveRange(d, f, g)) {
                        var h = this.getCurrentActiveRangeIndex(d);
                        this.activateSlideToItem(h.data("t1-slide-to"))
                    }
                } else
                    this.activateSlideToItem(d)
            }
        }, {
            key: "getCurrentActiveRangeIndex",
            value: function(a) {
                var b = this
                  , c = a
                  , e = function(a, e) {
                    var f = d(e)
                      , g = f.data("t1-slide-to")
                      , h = f.data("last-slide-index");
                    return b.isInCurrentActiveRange(c, g, h)
                };
                return this.slideToLinks.filter(e)
            }
        }, {
            key: "isInCurrentActiveRange",
            value: function(a, b, c) {
                return a >= b && a <= c
            }
        }, {
            key: "activateSlideToItem",
            value: function(a) {
                var b = this.getItemFromSlideIndex(a);
                this.deactivateCurrentActive(),
                b.addClass("active"),
                this.isSwipable && this.centerActiveItem(),
                this.activateList()
            }
        }, {
            key: "activateList",
            value: function() {
                if (this.options.listActivation) {
                    var a = this.getActiveItem()
                      , b = a.closest("ul");
                    if (!1 === b.hasClass("active")) {
                        this.container.find("ul").removeClass("active"),
                        b.addClass("active")
                    }
                }
            }
        }, {
            key: "getItemFromSlideIndex",
            value: function(a) {
                return this.slideToLinks.filter(function(b, c) {
                    return d(c).data("t1-slide-to") === a
                })
            }
        }, {
            key: "onSlideToElementClick",
            value: function(a) {
                var b = a.data
                  , c = b.slideToIndex;
                this.userIsSwipingIscroll() || (this.carouselToNavigate.isPaused || this.carouselToNavigate.pause(),
                this.carouselToNavigate.slideTo(c, !1))
            }
        }, {
            key: "overflowingCheck",
            value: function() {
                var a = this.rowIsOverflowingContainer();
                this.disableHorizontalSwiping(),
                a && this.enableHorizontalSwiping()
            }
        }, {
            key: "enableHorizontalSwiping",
            value: function() {
                var a = this.isBreakpointSupported();
                if (!this.isSwipable && a) {
                    var b = this.getItemsContainerWidth()
                      , c = this.IscrollOptions;
                    this.isRtl && (c.startX = -(b - this.$container.width())),
                    this.$container.addClass("iscrollEnabled"),
                    this.$itemsContainer.width(b),
                    this.IscrollInstance = new window.IScroll(this.containerDomElement,c),
                    this.isSwipable = !0,
                    T1.channels.dialog.publishAsync(T1.constants.OVERFLOWABLE_ROW_SWIPE_ENABLED, {
                        $container: this.$container
                    }),
                    this.$container.trigger({
                        type: T1.constants.OVERFLOWABLE_ROW_SWIPE_ENABLED
                    })
                }
            }
        }, {
            key: "isBreakpointSupported",
            value: function() {
                var a = this.options.breakpointDependent;
                return !a || !!a[this.currentBreakpoint]
            }
        }, {
            key: "disableHorizontalSwiping",
            value: function() {
                this.isSwipable && this.IscrollInstance.destroy && (this.$container.removeClass("iscrollEnabled"),
                this.$itemsContainer.removeAttr("style"),
                this.$container.removeAttr("style"),
                this.IscrollInstance.destroy(),
                this.isSwipable = !1,
                T1.channels.dialog.publishAsync(T1.constants.OVERFLOWABLE_ROW_SWIPE_DISABLED, {
                    $container: this.$container
                }),
                this.$container.trigger({
                    type: T1.constants.OVERFLOWABLE_ROW_SWIPE_DISABLED
                }))
            }
        }, {
            key: "scrollToPosition",
            value: function(a, b, c, d) {
                if (this.isSwipable) {
                    var e = 500
                      , f = "number" == typeof c ? c : e
                      , g = d || null;
                    a = a >= this.IscrollInstance.maxScrollX ? a : this.IscrollInstance.maxScrollX,
                    this.IscrollInstance.scrollTo(a, b, f, g)
                }
            }
        }, {
            key: "rowIsOverflowingContainer",
            value: function() {
                return this.getItemsContainerWidth() > this.getContainerWidth()
            }
        }, {
            key: "deactivateCurrentActive",
            value: function() {
                this.$items.removeClass("active")
            }
        }, {
            key: "activateItemByIndex",
            value: function(a) {
                var b = this.$items
                  , c = b.eq(a);
                return this.deactivateCurrentActive(),
                c.addClass("active"),
                c
            }
        }, {
            key: "centerActiveItem",
            value: function() {
                var a = 2
                  , b = this.getActiveItem()
                  , c = b.width() / a
                  , d = b.offset && this.$container.offset ? b.offset().left - this.$container.offset().left : 0
                  , e = d + c + Math.abs(this.getScrollerPositions().x)
                  , f = this.getContainerWidth() / a
                  , g = "number" == typeof this.options.transitionDuration ? this.options.transitionDuration : null;
                if (e > f) {
                    var h = this.getOverflowableRowWidth()
                      , i = e - f;
                    i < h ? this.scrollToPosition(-i, 0, g, null) : this.scrollToPosition(-h, 0, g, null)
                } else
                    this.scrollToPosition(0, 0, g, null)
            }
        }, {
            key: "userIsSwipingIscroll",
            value: function() {
                return !!(this.isSwipable && this.IscrollInstance && this.IscrollInstance.moved)
            }
        }, {
            key: "getItemsContainerWidth",
            value: function() {
                return this.$itemsContainer.outerWidth()
            }
        }, {
            key: "getScrollerPositions",
            value: function() {
                var a = {
                    x: 0,
                    y: 0
                };
                return this.isSwipable && this.IscrollInstance.x && (a.x = this.IscrollInstance.x,
                a.y = this.IscrollInstance.y),
                a
            }
        }, {
            key: "getActiveItem",
            value: function() {
                return this.$itemsContainer.find(".active." + this.options.itemClass)
            }
        }, {
            key: "getContainerWidth",
            value: function() {
                return this.$container.outerWidth()
            }
        }, {
            key: "getOverflowableRowWidth",
            value: function() {
                return this.$itemsContainer.width()
            }
        }, {
            key: "getCarouselToNavigate",
            value: function() {
                return this.container.closest("." + c.containerClass)
            }
        }, {
            key: "setCarouselToNavigate",
            value: function() {
                var a = this.getCarouselToNavigate();
                this.carouselToNavigate = c.getInstance(a)
            }
        }]),
        b
    }(a)
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , _get = function a(b, c, d) {
    null === b && (b = Function.prototype);
    var e = Object.getOwnPropertyDescriptor(b, c);
    if (void 0 === e) {
        var f = Object.getPrototypeOf(b);
        return null === f ? void 0 : a(f, c, d)
    }
    if ("value"in e)
        return e.value;
    var g = e.get;
    if (void 0 !== g)
        return g.call(d)
};
window.T1 = window.T1 || {},
T1.defineInit("t1-controller-overflowableRow", ["T1-site-dependencies", "t1-component-overFlowableRow", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    var d = a.$;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = "overflowable-row"
                  , e = {
                    initOnMaterialBoxOpened: !0
                }
                  , f = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, "." + d, e));
                f.containerClass = d,
                f.rowOptions = {
                    tabs: {
                        itemClass: "tab",
                        itemsContainerClass: "t1-tab-list",
                        IscrollOptions: {
                            scrollX: !0,
                            scrollY: !1,
                            mouseWheel: !1,
                            eventPassthrough: !0
                        }
                    },
                    thumbnails: {
                        itemClass: "thumbnail",
                        itemsContainerClass: "t1-iscroll-list",
                        IscrollOptions: {
                            scrollX: !0,
                            scrollY: !1,
                            mouseWheel: !1,
                            eventPassthrough: !1
                        }
                    },
                    default: {
                        itemClass: "t1-iscroll-item",
                        itemsContainerClass: "t1-iscroll-list",
                        IscrollOptions: {
                            scrollX: !0,
                            scrollY: !1,
                            mouseWheel: !1,
                            click: !0,
                            eventPassthrough: !0
                        }
                    }
                },
                c.instance = f
            }
            return a = c.instance,
            _possibleConstructorReturn(f, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "init",
            value: function() {
                var a = this;
                _get(c.prototype.__proto__ || Object.getPrototypeOf(c.prototype), "init", this).call(this),
                T1.channels.dialog.subscribe(T1.constants.LOADING_COMPLETE, function(b) {
                    if ("object" === (void 0 === b ? "undefined" : _typeof(b))) {
                        var c = b.target || d("body");
                        a.initOnDemand(c)
                    }
                })
            }
        }, {
            key: "initInstance",
            value: function(a) {
                var c = a.data("type")
                  , e = c && c.length ? d.extend(!0, {}, this.rowOptions[c]) : d.extend(!0, {}, this.rowOptions.default)
                  , f = void 0;
                f = new b(a,e),
                f.create(),
                this.instances.push(f),
                T1.channels.dialog.publishAsync(T1.constants.OVERFLOWABLE_ROW_CREATED, {
                    $container: this.$container
                }),
                f.container.trigger({
                    type: T1.constants.OVERFLOWABLE_ROW_CREATED
                })
            }
        }]),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();



/*=>*/
T1.define("t1-component-carousel", ["t1-component-abstract", "T1-site-dependencies"], function(a, b) {
    "use strict";
    var c = b.handlebars
      , d = b.$ || d;
    return function(a) {
        function b(a, c) {
            _classCallCheck(this, b);
            var d = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, null));
            return d.carousel = d.container.find("." + c.carouselClass),
            d.slideClass = c.slideClass,
            d.options = c,
            d.isPaused = !1,
            d.slideCount = null,
            d.slideFullheight = !!c.slideFullheight && c.slideFullheight,
            d.$parentCollapsiblePanel = d.container.closest(".collapse"),
            d.isInsideCollapsiblePanel = !!d.$parentCollapsiblePanel.length,
            d.containsVideos = !!d.container.find(".internal-video").length,
            d
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "create",
            value: function() {
                this.carousel && this.carousel.length && (this.attachEventHandlers(),
                this.carousel.slick(this.options.slickOptions),
                this.lazyloadCurrentSlide(),
                this.centerImgInSlide(),
                this.isCreated = !0,
                this.attachLinesIndicatorsTrackBrowseHandlers())
            }
        }, {
            key: "attachEventHandlers",
            value: function() {
                var a = this;
                this.carousel.on("init", function(b, c) {
                    return a.onSlickInit(b, c)
                }),
                this.container.on("beforeChange", function(b, c, d, e) {
                    return a.onBeforeSlideChange(b, c, d, e)
                }),
                this.container.on("afterChange", function(b, c, d) {
                    return a.onAfterSlideChange(b, c, d)
                }),
                T1.channels.media.subscribe(T1.constants.VIDEO_ADDEDPLAYER, function(b) {
                    return a.onVideoPlayerAdded(b)
                }),
                this.attachCollapsiblePanelHandlers(),
                this.attachArrowsEventHandlers(),
                this.attachOverlayerListeners()
            }
        }, {
            key: "attachLinesIndicatorsTrackBrowseHandlers",
            value: function() {
                var a = this
                  , b = this.container.find(".slick-dots button");
                b.length && b.off("click", function(b) {
                    return a.trackBrowse(b)
                }).on("click", function(b) {
                    return a.trackBrowse(b)
                })
            }
        }, {
            key: "attachArrowsEventHandlers",
            value: function() {
                this.options.addT1Arrows && (this.addT1Arrows(),
                this.attachArrowsHoverEvent(),
                this.attachArrowsClickEvents(),
                this.attachArrowsActivatorEvents(),
                this.initialArrowsActivatorShow())
            }
        }, {
            key: "attachOverlayerListeners",
            value: function() {
                var a = this;
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_OPEN, function() {
                    a.pause()
                }),
                T1.channels.dialog.subscribe(T1.constants.PAGEOVERLAYER_CLOSED, function() {
                    a.play()
                }),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(b) {
                    b && "fullscreen" === b.size && a.pause()
                }),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, function(b) {
                    b && "fullscreen" === b.size && a.play()
                })
            }
        }, {
            key: "attachArrowsHoverEvent",
            value: function() {
                var a = this
                  , b = this.container.find("." + this.options.arrowClasses)
                  , c = function() {
                    return a.play()
                }
                  , d = function() {
                    a.pause(),
                    b.off("mouseleave", c).on("mouseleave", c)
                };
                b.length && b.off("mouseenter", d).on("mouseenter", d)
            }
        }, {
            key: "attachArrowsClickEvents",
            value: function() {
                for (var a = this, b = this.container.find("." + this.options.arrowClasses), c = b.length, e = b.closest("." + this.options.arrowHoverActivatorClass), f = !!e.length, g = function(b) {
                    return !!d(b.currentTarget).closest(".active." + a.options.arrowHoverActivatorClass).length
                }, h = function(b) {
                    f && !g(b) && T1.utilities.isTouchCapable || (b.preventDefault(),
                    b.stopPropagation(),
                    a.slideToNext(),
                    a.trackBrowse(b),
                    a.pause(),
                    d(b.currentTarget).off("mouseleave"))
                }, i = function(b) {
                    f && !g(b) && T1.utilities.isTouchCapable || (b.preventDefault(),
                    b.stopPropagation(),
                    a.slideToPrev(),
                    a.trackBrowse(b),
                    a.pause(),
                    d(b.currentTarget).off("mouseleave"))
                }, j = T1.utilities.clickEvent, k = 0; k < c; k++) {
                    var l = d(b[k]);
                    l.is(".prev") ? l.off(j, i).on(j, i) : l.off(j, h).on(j, h)
                }
            }
        }, {
            key: "trackBrowse",
            value: function() {
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: this.container,
                    extraData: {
                        event: {
                            action: "click_function",
                            value: "browse"
                        }
                    }
                })
            }
        }, {
            key: "attachArrowsActivatorEvents",
            value: function() {
                var a = this
                  , b = this.container.find("." + this.options.arrowHoverActivatorClass)
                  , c = b.length
                  , e = function() {
                    a.canResumePlay && a.play()
                }
                  , f = function() {
                    a.canResumePlay = !a.isPaused,
                    a.pause(),
                    b.off("mouseleave", e).on("mouseleave", e)
                };
                if (c && b.off("mouseenter", f).on("mouseenter", f),
                T1.utilities.isTouchCapable) {
                    for (var g = 0; g < c; g++) {
                        var h = d(b[g])
                          , i = "touchend"
                          , j = function(a) {
                            d(this).addClass("active"),
                            a.stopPropagation()
                        };
                        h.off(i, j).on(i, j)
                    }
                    this.container.off("touchend", function(b) {
                        return a.onCarouselTouchend(b)
                    }).on("touchend", function(b) {
                        return a.onCarouselTouchend(b)
                    })
                }
            }
        }, {
            key: "onCarouselTouchend",
            value: function(a) {
                d(a.target).closest("." + this.options.arrowClasses).length || this.deactivateArrowsActivator()
            }
        }, {
            key: "initialArrowsActivatorShow",
            value: function() {
                var a = this;
                setTimeout(function() {
                    return a.deactivateArrowsActivator()
                }, 5e3)
            }
        }, {
            key: "attachCollapsiblePanelHandlers",
            value: function() {
                var a = this;
                this.isInsideCollapsiblePanel && this.options.slickOptions.autoplay && (this.$parentCollapsiblePanel.on(T1.constants.BOOTSTRAP_COLLAPSE_SHOWN, function() {
                    return a.play()
                }),
                this.$parentCollapsiblePanel.on(T1.constants.BOOTSTRAP_COLLAPSE_HIDDEN, function() {
                    return a.pause()
                }))
            }
        }, {
            key: "addT1Arrows",
            value: function() {
                var a = this.options.arrowHoverActivator;
                if (!(this.container.find("." + this.options.arrowClasses).length > 0)) {
                    var b = c.partials[T1.constants.TEMPLATE_NAME_CAROUSEL_ARROWS]
                      , e = b({
                        arrowHoverActivator: a
                    })
                      , f = d(e);
                    this.container.append(f)
                }
            }
        }, {
            key: "centerImgInSlide",
            value: function() {
                var a = this;
                this.options.centerImgInSlide && (this.setSlidesHeightToContainerHeight(),
                this.baseImgCenteringOnreference(),
                this.onWinResizeImgCenteringAsync = null,
                T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, function(b) {
                    return a.onWinResizeImgCentering(b)
                }))
            }
        }, {
            key: "deactivateArrowsActivator",
            value: function() {
                this.container.find("." + this.options.arrowHoverActivatorClass).removeClass("active")
            }
        }, {
            key: "flagCurrentVideoSlide",
            value: function(a) {
                if ("number" == typeof a) {
                    var b = this.getSlidesByIndex(a)
                      , c = !!b.find(".internal-video").length
                      , d = b.find(".posterWrapper:hidden").length
                      , e = !(!c || !d);
                    this.container.toggleClass("internal-video-style", c),
                    this.container.toggleClass("active-video", e)
                }
            }
        }, {
            key: "lazyloadNextSlides",
            value: function(a, b, c, e) {
                var f = this.options.lazyloadNext;
                if (f)
                    for (var g = 0; g < f; g++)
                        for (var h = e + g, i = this.getSlidesByIndex(h), j = 0, k = i.length; j < k; j++)
                            d.safe("T1.lazyLoad.onDemand")(d(i[j]))
            }
        }, {
            key: "lazyloadCurrentSlide",
            value: function(a) {
                if (this.options.lazyloadNext)
                    for (var b = a && "number" == typeof a ? a : this.getCurrentSlideIndex(), c = this.getSlidesByIndex(b), e = 0, f = c.length; e < f; e++)
                        d.safe("T1.lazyLoad.onDemand")(d(c[e]))
            }
        }, {
            key: "slideTo",
            value: function(a, b) {
                this.carousel.slick("slickGoTo", a, b)
            }
        }, {
            key: "slideToNext",
            value: function() {
                this.carousel.slick("slickNext")
            }
        }, {
            key: "slideToPrev",
            value: function() {
                this.carousel.slick("slickPrev")
            }
        }, {
            key: "toggleCounterAndLines",
            value: function(a) {
                var b = this.slideCount > a;
                this.container.find(".slide-counter").toggleClass("hidden", !b),
                this.carousel.find(".slick-dots").toggleClass("hidden", b)
            }
        }, {
            key: "switchDesktop",
            value: function() {
                this.toggleCounterAndLines(this.options.maxSlickLinesDesktop)
            }
        }, {
            key: "switchMobile",
            value: function() {
                this.toggleCounterAndLines(this.options.maxSlickLinesMobile)
            }
        }, {
            key: "destroy",
            value: function() {
                this.carousel && this.carousel.length && this.carousel.slick("unslick")
            }
        }, {
            key: "pause",
            value: function() {
                this.carousel.slick("pause"),
                this.isPaused = !0
            }
        }, {
            key: "play",
            value: function() {
                this.carousel.slick("slickPlay"),
                this.isPaused = !1
            }
        }, {
            key: "baseImgCenteringOnreference",
            value: function() {
                var a = this
                  , b = this.options.lazyloadNext
                  , c = this.getCurrentSlideImg()
                  , d = c.length ? c : this.getFirstCarouselImg();
                if (b && d.hasClass("lazy-loaded"))
                    this.updateSlidesForImgCentering(d);
                else {
                    var e = d.length ? d[0] : null;
                    e && e.complete ? this.updateSlidesForImgCentering(d) : d.load(function() {
                        return a.updateSlidesForImgCentering(d)
                    })
                }
            }
        }, {
            key: "updateSlidesForImgCentering",
            value: function(a) {
                var b = T1.utilities.itemAndContainerRatioCompare(a, this.container)
                  , c = "lg" === d.safe("T1.breakpoints.currentBP")();
                this.setSlidesHeightToContainerHeight(),
                this.setCenteringImgContainerClass(b, c)
            }
        }, {
            key: "getCurrentSlideIndex",
            value: function() {
                var a = this.isCreated ? this.carousel.slick("slickCurrentSlide") : this.getInitialSlideIndex();
                return "number" == typeof a ? a : 0
            }
        }, {
            key: "getInitialSlideIndex",
            value: function() {
                return this.carousel.find(".initialSlide").index()
            }
        }, {
            key: "getSlidesByIndex",
            value: function(a) {
                return this.getAllSlides().filter("[data-slide-index='" + a + "']")
            }
        }, {
            key: "getAllSlides",
            value: function() {
                return this.carousel.find("." + this.slideClass)
            }
        }, {
            key: "getCurrentSlideImg",
            value: function() {
                var a = this.getCurrentSlideIndex();
                return this.getSlidesByIndex(a).find("img").first()
            }
        }, {
            key: "getFirstCarouselImg",
            value: function() {
                return this.getAllSlides().find("img").first()
            }
        }, {
            key: "setSlideCount",
            value: function() {
                this.container.find(".slide-counter .total").text(this.slideCount)
            }
        }, {
            key: "setCurrentSlideNumber",
            value: function(a) {
                this.container.find(".slide-counter .current").text(a + 1)
            }
        }, {
            key: "setSlidesHeightToContainerHeight",
            value: function() {
                if (this.options.slideFullheight)
                    for (var a = this.container.height(), b = this.getAllSlides(), c = 0, e = b.length; c < e; c++)
                        d(b[c]).height(a)
            }
        }, {
            key: "setCenteringImgContainerClass",
            value: function(a, b) {
                var c = void 0
                  , d = void 0;
                b ? (c = a ? this.options.fullWithClasses.horizontalCenterClass : this.options.fullWithClasses.verticalCenterClass,
                d = a ? this.options.fullWithClasses.verticalCenterClass : this.options.fullWithClasses.horizontalCenterClass) : (c = a ? this.options.fullWithClasses.verticalCenterClass : this.options.fullWithClasses.horizontalCenterClass,
                d = a ? this.options.fullWithClasses.horizontalCenterClass : this.options.fullWithClasses.verticalCenterClass),
                this.container.removeClass(d).addClass(c)
            }
        }, {
            key: "onVideoPlayerAdded",
            value: function(a) {
                var b = a.target
                  , c = b.closest("." + this.slideClass)
                  , d = !!c.length
                  , e = !(!this.options || !this.options.lazyloadNext) && this.options.lazyloadNext;
                if (d && e) {
                    for (var f = this.getCurrentSlideIndex(), g = this.getSlidesByIndex(f), h = g.length, i = 0; i < h; i++)
                        if (c[0] === g[i])
                            return void this.lazyloadCurrentSlide(f);
                    this.baseImgCenteringOnreference()
                }
            }
        }, {
            key: "onBeforeSlideChange",
            value: function(a, b, c, d) {
                this.setCurrentSlideNumber(d),
                this.lazyloadCurrentSlide(c),
                this.lazyloadNextSlides(a, b, c, d)
            }
        }, {
            key: "onAfterSlideChange",
            value: function(a, b, c) {
                this.onAfterSlideVideoHandler(c),
                this.lazyloadCurrentSlide(c)
            }
        }, {
            key: "onAfterSlideVideoHandler",
            value: function(a) {
                this.containsVideos && (window.vjs ? T1.channels.media.publish(T1.constants.VIDEO_STOP, {}) : T1.channels.media.publish(T1.constants.VIDEO_RESET, !1),
                this.flagCurrentVideoSlide(a))
            }
        }, {
            key: "onSlickInit",
            value: function(a, b) {
                this.slideCount = b.slideCount,
                this.setSlideCount(),
                this.setCurrentSlideNumber(b.currentSlide)
            }
        }, {
            key: "onBreakpoint",
            value: function(a) {
                this.carousel.on("breakpoint", a)
            }
        }, {
            key: "onWinResizeImgCentering",
            value: function() {
                var a = this;
                clearTimeout(this.onWinResizeImgCenteringAsync),
                this.onWinResizeImgCenteringAsync = setTimeout(function() {
                    return a.baseImgCenteringOnreference()
                }, 100)
            }
        }]),
        b
    }(a)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , T1 = T1 || {};
T1.defineInit("t1-controller-carousel", ["T1-site-dependencies", "t1-component-carousel", "slick", "t1-hbs-templates", "t1-controller-abstract"], function(a, b, c, d, e) {
    "use strict";
    var f = a.$;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = "t1-carousel-container:not(.custom)"
                  , e = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, d.toSelector()));
                e.containerClass = d,
                e.slideArrowsClass = "t1-slide",
                e.defaultOptions = {
                    arrowHoverActivatorClass: "t1-arrow-activator",
                    carouselClass: "t1-carousel",
                    arrowClasses: "t1-arrow-control",
                    slideClass: "t1-slide",
                    maxSlickLinesDesktop: 7,
                    maxSlickLinesMobile: 3,
                    fullWithClasses: {
                        horizontalCenterClass: "horizontal-center-imgs",
                        verticalCenterClass: "vertical-center-imgs"
                    },
                    slickOptions: {
                        dots: !0,
                        infinite: !0,
                        speed: 300,
                        autoplaySpeed: 5e3,
                        autoplay: !0,
                        rtl: "rtl" === T1.settings.siteDirection
                    }
                },
                c.instance = e
            }
            return a = c.instance,
            _possibleConstructorReturn(e, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "initInstance",
            value: function(a) {
                if (!this.instanceExists(a)) {
                    var c = a.data("option") || {}
                      , d = f.extend(!0, {}, this.defaultOptions)
                      , e = new b(a,d);
                    e.setOptions(c),
                    e.create(),
                    this.instances.push(e),
                    e.container.trigger({
                        type: T1.constants.CAROUSEL_CREATED
                    })
                }
            }
        }]),
        c
    }(e))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , T1 = T1 || {};
/*<=*/





T1.defineInit("t1-controller-gradecarousel", ["T1-site-dependencies", "t1-component-carousel", "slick", "t1-hbs-templates", "t1-controller-abstract"], function(a, b, c, d, e) {
    "use strict";
    var f = a.$
      , g = {
        XS: 1,
        MD: 4,
        DEFAULT: 4
    };
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = ".t1-carousel-container.custom.grade"
                  , e = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, d));
                e.defaultOptions = {
                    carouselClass: "t1-carousel",
                    slideClass: "t1-slide",
                    slickOptions: {
                        infinite: !1,
                        autoplay: !1,
                        slidesToShow: g.MD,
                        slidesToScroll: g.MD,
                        rtl: "rtl" === T1.settings.siteDirection,
                        responsive: [{
                            breakpoint: T1.constants.SCREEN_MEDIUM,
                            settings: {
                                variableWidth: !0,
                                swipeToSlide: !0,
                                arrows: !1,
                                slidesToShow: g.XS,
                                slidesToScroll: g.XS
                            }
                        }]
                    }
                },
                c.instance = e
            }
            return a = c.instance,
            _possibleConstructorReturn(e, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "initInstance",
            value: function(a) {
                var c = this;
                if (!this.instanceExists(a)) {
                    var d = a.data("option") || {}
                      , e = f.extend(!0, {}, this.defaultOptions)
                      , h = new b(a,e);
                    d.slickOptions = d.slickOptions || {},
                    d.slickOptions.initialSlide = d.slickOptions.initialSlide || 0,
                    d.slickOptions.responsive = d.slickOptions.responsive || e.slickOptions && e.slickOptions.responsive || [];
                    var i = d.slickOptions.initialSlide
                      , j = g.DEFAULT;
                    d.slickOptions.initialSlide = Math.floor(i / j) * j,
                    d.slickOptions.responsive.forEach(function(a) {
                        "unslick" !== a.settings && (a.settings = a.settings || {},
                        a.settings.initialSlide = i)
                    }),
                    T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, function(b) {
                        return c.OnScreenSizeChange(a, h, d)
                    }),
                    T1.channels.global.subscribe(T1.constants.ON_ORIENTATION_CHANGE, function(b) {
                        return c.OnScreenSizeChange(a, h, d)
                    }),
                    h.setOptions(d),
                    h.create(),
                    this.instances.push(h),
                    h.container.trigger({
                        type: T1.constants.CAROUSEL_CREATED
                    })
                }
            }
        }, {
            key: "OnScreenSizeChange",
            value: function(a, b, c) {
                a.find(this.defaultOptions.carouselClass.toSelector()).hasClass("slick-initialized") || (b.setOptions(c),
                b.create())
            }
        }]),
        c
    }(e))
}),
T1.defineInit("t1-controller-gallery-explore", ["T1-site-dependencies", "t1-controller-carousel", "t1-controller-overflowableRow", "slick", "t1-hbs-templates"], function(a, b, c, d, e) {
    "use strict";
    var f = a.$ || f
      , g = {
        containerClass: "explore-gallery",
        carouselContainerClass: "t1-carousel-container",
        carouselSlidesContainerClass: "t1-carousel",
        carouselArrowActivatorClass: "t1-arrow-activator",
        carouselSlideClass: "t1-slide",
        carouselInpageInstances: [],
        overflowableRowContainerClass: c.containerClass || "overflowable-row",
        lazyloaderContainerClass: "lazy-loader",
        init: function() {
            var a = f("." + h.containerClass);
            if (h.overlayer.taggingMultimedia = {},
            a.length) {
                h.isTrackingEnabled = T1.statistics.isTrackingEnabled();
                var c = a.find("." + h.carouselContainerClass)
                  , d = b ? b.getInstance(c) : null;
                if (d && h.inpageCarousel.initializeInpageCarousel(c, d),
                h.isTrackingEnabled) {
                    var e = function(a) {
                        var b = f(a.target);
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: b
                        })
                    };
                    a.find(".tab").off("click", e).on("click", e)
                }
            }
        },
        trackMultimediaIfTagging: function(a, b, c) {
            if (b && b.event) {
                var d = {};
                f.extend(!0, d, b),
                d.event.eventclass = "assetevent",
                c || (d.event.action = "video" === d.event.assettype ? "select_video" : "view_picture"),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: a,
                    extraData: d
                })
            }
        },
        overlayer: {
            initializeOverlayer: function(a, c, d) {
                var e = c.find("." + h.carouselSlidesContainerClass).closest("." + h.carouselContainerClass)
                  , f = void 0;
                h.overlayer.openMaterialBox(a, c),
                b.initInstance(e),
                (f = b.getInstance(e)) && (h.overlayCarousel.initializeOverlayCarousel(f, d),
                h.overlayerThumbnailList.initializeThumbnailList(c, f, d),
                h.isTrackingEnabled && h.overlayer.configureTrackingForOverlayer(a, e, d))
            },
            configureTrackingForOverlayer: function(a, b, c) {
                b.length && (b.attr("data-bt-eventclass", "componentevent"),
                b.attr("data-bt-category", "component"),
                b.attr("data-bt-componentname", "gallery"),
                b.attr("data-bt-custom-suffix-action", "_fullscreen")),
                T1.channels.media.subscribe(T1.constants.VIDEO_CLICK, function(a) {
                    var b = f(a);
                    if (b.length) {
                        var c = b.closest(".t1-slide");
                        if (c.length && c.closest(".explore-gallery-box").length && "play_video" !== c.attr("data-bt-action")) {
                            c.attr("data-bt-action", "play_video");
                            var d = "" + c.data("slide-index");
                            h.trackMultimediaIfTagging(c, h.overlayer.taggingMultimedia[d], !0)
                        }
                    }
                });
                var d = b.find(".t1-tab-list");
                if (d.length) {
                    d.attr("data-bt-action", "click_tab");
                    var e = function(a) {
                        var b = f(a.target);
                        T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                            node: b
                        })
                    };
                    d.find(".tab").off("click", e).on("click", e)
                }
                var g = b.find(".gallery-overlayer-nav-container .thumbnail");
                if (g.length) {
                    for (var i = "" + c.initialSlideIndex, j = 0; j < g.length; j++) {
                        if (f(g[j]).attr("data-t1-slide-to") === i) {
                            h.trackMultimediaIfTagging(a, h.overlayer.taggingMultimedia[i]);
                            break
                        }
                    }
                    var k = function(a) {
                        var b = f(a.target).closest(".thumbnail");
                        if (b.length) {
                            var c = "" + b.data("t1-slide-to");
                            h.trackMultimediaIfTagging(b, h.overlayer.taggingMultimedia[c])
                        }
                    };
                    g.off("click", k).on("click", k)
                }
            },
            openMaterialBox: function(a, b) {
                T1.channels.dialog.publish(i.MATERIALBOX_OPEN, {
                    target: a,
                    html: b,
                    size: "fullscreen",
                    styleClass: "explore-gallery-box explore-gallery " + h.overlayCarousel.activeNavWrapperClass,
                    onClose: function() {
                        var a = this;
                        h.overlayer.clearMaterialbox(a)
                    },
                    globalClose: !0
                })
            },
            clearMaterialbox: function(a) {
                a.container.empty()
            },
            getGalleryOverlayTemplate: function(a, b) {
                var c = f.Deferred()
                  , d = e.templates[i.TEMPLATE_NAME_EXPLORE_OVERLAYER_GALLERY]
                  , g = b.closest("." + h.containerClass)
                  , j = g.data("overlay-gallery-data");
                return f.safe("T1.utilities.get.json")(j).done(function(b) {
                    var e = h.overlayCarousel.cloneTemplateBaseData(b)
                      , g = h.overlayCarousel.preprocessTemplateData(e, a)
                      , i = d(g)
                      , j = f(i);
                    return c.resolve(j)
                }).fail(function(a, b, d) {
                    return console.log(b + ": " + d + " => Could not retrieve gallery data from " + j),
                    c.resolve(null)
                }),
                c.promise()
            }
        },
        inpageCarousel: {
            initializeInpageCarousel: function(a, b) {
                a.find("." + h.carouselSlideClass + " a").off("click", h.inpageCarousel.onGalleryItemClick).on("click", h.inpageCarousel.onGalleryItemClick)
            },
            onGalleryItemClick: function(a) {
                var b = a.target
                  , c = f(this)
                  , d = c.closest("." + h.carouselSlideClass)
                  , e = {
                    initialSlideIndex: c.data("overlay-slide-index"),
                    initialSectionIndex: d.data("section-index")
                };
                h.overlayer.getGalleryOverlayTemplate(e, c).done(function(a) {
                    a && h.overlayer.initializeOverlayer(b, a, e)
                })
            }
        },
        overlayCarousel: {
            navContainerClass: "gallery-overlayer-nav-container",
            navActivatorClass: "nav-activator",
            activeNavWrapperClass: "gallery-nav-active",
            navActivatorEvent: null,
            lastNavActivation: null,
            deactivateNavTimeout: 5e3,
            initializeOverlayCarousel: function(a, b) {
                h.overlayCarousel.initializeNavActivator(a),
                a.container.one(T1.utilities.clickEvent, function(b) {
                    return a.pause()
                }),
                a.slideTo(b.initialSlideIndex, !0)
            },
            initializeNavActivator: function(a) {
                var b = T1.utilities.isTouchCapable
                  , c = a.container.closest("." + h.containerClass)
                  , d = c.find("." + h.overlayCarousel.navActivatorClass)
                  , e = c.find("." + h.overlayCarousel.navContainerClass)
                  , f = {
                    $overlayerContainer: c,
                    isTouchableDevice: b
                };
                h.overlayCarousel.lastNavActivation = (new Date).getTime(),
                h.overlayCarousel.navActivatorEvent = b ? T1.utilities.clickEvent : "mouseenter",
                setTimeout(h.overlayCarousel.deactivateCarouselNav(e, c, b), h.overlayCarousel.deactivateNavTimeout),
                d.off(h.overlayCarousel.navActivatorEvent, h.overlayCarousel.activateCarouselNav).on(h.overlayCarousel.navActivatorEvent, null, f, h.overlayCarousel.activateCarouselNav),
                e.off(h.overlayCarousel.navActivatorEvent, h.overlayCarousel.refreshLastNavActivation).on(h.overlayCarousel.navActivatorEvent, h.overlayCarousel.refreshLastNavActivation)
            },
            refreshLastNavActivation: function(a) {
                h.overlayCarousel.lastNavActivation = (new Date).getTime()
            },
            activateCarouselNav: function(a) {
                var b = (f(this),
                a.data)
                  , c = b.$overlayerContainer
                  , d = c.find("." + h.overlayCarousel.navContainerClass);
                c.hasClass(h.overlayCarousel.activeNavWrapperClass) || (c.addClass(h.overlayCarousel.activeNavWrapperClass),
                d.removeClass("invisible").addClass("active"),
                setTimeout(h.overlayCarousel.deactivateCarouselNav(d, c, b.isTouchableDevice), h.overlayCarousel.deactivateNavTimeout))
            },
            deactivateCarouselNav: function(a, b, c) {
                return function(d) {
                    var e = (new Date).getTime()
                      , f = e - h.overlayCarousel.lastNavActivation
                      , g = f >= h.overlayCarousel.deactivateNavTimeout
                      , i = !c && a.is(":hover");
                    if (g && !i)
                        b.removeClass(h.overlayCarousel.activeNavWrapperClass),
                        a.removeClass("active"),
                        setTimeout(function() {
                            a.addClass("invisible")
                        }, 500);
                    else {
                        var j = void 0;
                        j = g ? h.overlayCarousel.deactivateNavTimeout : h.overlayCarousel.deactivateNavTimeout - f,
                        setTimeout(h.overlayCarousel.deactivateCarouselNav(a, b, c), j)
                    }
                }
            },
            cloneTemplateBaseData: function(a) {
                return f.extend(!0, a, {})
            },
            preprocessTemplateData: function(a, b) {
                for (var c = a.sections, d = c.length, e = b.initialSectionIndex, f = b.initialSlideIndex, g = 0; g < d; g++) {
                    for (var i = c[g], j = i.slides, k = j.length, l = g === e, m = 0; m < k; m++) {
                        var n = j[m];
                        h.overlayer.taggingMultimedia["" + n.slideIndex] = n.tagging
                    }
                    l && h.overlayCarousel.preprocessInitialSectionData(i, f)
                }
                return a
            },
            preprocessInitialSectionData: function(a, b) {
                var c = void 0;
                a.isInitialSection = !0,
                c = a.slides.filter(function(a, c, d) {
                    return a.slideIndex === b
                }),
                c.length && (c[0].initialSlideIndex = !0)
            }
        },
        overlayerThumbnailList: {
            t1ThumbnailList: "t1-thumbnail-list",
            initializeThumbnailList: function(a, b, c) {
                h.overlayerThumbnailList.lazyloadThumbnails(b)
            },
            lazyloadThumbnails: function(a) {
                var b = a.container.find("." + h.overflowableRowContainerClass)
                  , c = b.find("." + h.lazyloaderContainerClass);
                f.safe("T1.lazyLoad.onDemand")(c)
            }
        }
    }
      , h = g
      , i = T1.constants;
    return {
        init: h.init
    }
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-linkExpander", ["t1-component-abstract", "T1-site-dependencies"], function(a, b) {
    "use strict";
    var c = b.$ || c;
    return function(a) {
        function b(a, d) {
            _classCallCheck(this, b);
            var e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, d));
            return e.container && e.container.length ? e.container = a : e.container = c(".link-expander"),
            d && d.length || (e.content = e.container.find(".expander-content")),
            e.trigger = e.container.find(".expander-link"),
            e.trigger && e.trigger.length && (e.bind(),
            e.toggleTabindex()),
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "bind",
            value: function() {
                var a = this
                  , b = function(b) {
                    return a.toggle(b)
                };
                this.trigger.off("click", b).on("click", b)
            }
        }, {
            key: "toggle",
            value: function(a) {
                a.preventDefault(),
                this.container.toggleClass(T1.constants.CLASS_ACTIVE),
                this.toggleTabindex()
            }
        }, {
            key: "toggleTabindex",
            value: function() {
                var a = this.container.find("a:not(.expander-link)")
                  , b = a.attr("tabindex");
                "undefined" !== (void 0 === b ? "undefined" : _typeof(b)) && !1 !== b ? a.removeAttr("tabindex") : a.attr("tabindex", -1)
            }
        }]),
        b
    }(a)
}),
T1.defineInit("t1-controller-linkExpanderController", ["T1-site-dependencies", "t1-component-linkExpander", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = ".link-expander"
                  , e = {
                    initOnMaterialBoxOpened: !0
                }
                  , f = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, d, e));
                c.instance = f
            }
            return a = c.instance,
            _possibleConstructorReturn(f, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-ajaxPanel", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = a.$ || c;
    return function(a) {
        function b(a, d) {
            _classCallCheck(this, b);
            var e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return e.$container = e.container,
            e.$parentToAppend = null,
            e.options = c.extend(e.getDefaultOptions(), d),
            e.create(),
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getDefaultOptions",
            value: function() {
                return {
                    requestMethod: "get"
                }
            }
        }, {
            key: "create",
            value: function() {
                var a = this;
                if (this.container && this.container.length && this.options.url && this.options.one) {
                    var b = this.container.find(this.options.one.target).or(this.options.one.target).or(this.container)
                      , c = this.options.one.event;
                    this.setParentAppender(),
                    b.one(c, function(b) {
                        return a.loadContentOnceHandler(b)
                    })
                }
            }
        }, {
            key: "loadContentOnceHandler",
            value: function(a) {
                T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                    target: this.$container
                }),
                this.getContent()
            }
        }, {
            key: "onGetContentDone",
            value: function(a, b, c) {
                var d = this.getHtmlFromResponse(a);
                this.renderPanel(d),
                this.lazyloadContent(),
                this.hideTrigger(),
                this.removeTrigger(),
                this.publishContentLoaded()
            }
        }, {
            key: "onGetcontentFail",
            value: function(a, b, c) {
                this.logError(c)
            }
        }, {
            key: "getContent",
            value: function() {
                var a = this;
                if (this.options.url) {
                    var b = c[this.options.requestMethod]({
                        url: this.options.url,
                        headers: "json" === this.options.requestType ? {
                            contentType: "application/json"
                        } : null,
                        data: "post" === this.options.requestMethod ? this.$container.closest("form").serializeArray() : null
                    });
                    c.each(this.options.events, function(a, c) {
                        b[c.event](function() {
                            T1.channels[c.channel].publish(c.topic)
                        })
                    }),
                    b.done(function(b, c, d) {
                        return a.onGetContentDone(b, c, d)
                    }),
                    b.fail(function(b, c, d) {
                        return a.onGetcontentFail(b, c, d)
                    })
                }
            }
        }, {
            key: "getHtmlFromResponse",
            value: function(a) {
                var b = this.options.responseType
                  , d = this.options.responseContentClass
                  , e = void 0;
                if (b && "json" === b)
                    e = c(d && d.length ? "<div class=" + d + ">" + a.content + "</div>" : "<div>" + a.content + "</div>");
                else {
                    e = c("<div>" + a + "</div>").find("#pagecontent").contents()
                }
                return e
            }
        }, {
            key: "publishContentLoaded",
            value: function() {
                var a = this.options.appendToParent
                  , b = a ? this.$parentToAppend : this.$container;
                T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                    target: b
                })
            }
        }, {
            key: "setParentAppender",
            value: function() {
                var a = this.options.appendToParent;
                a && (this.$parentToAppend = a.length ? this.$container.closest(a).or(this.$container.parent()) : this.$container)
            }
        }, {
            key: "hideTrigger",
            value: function() {
                this.options.hideTrigger && this.$container.hide()
            }
        }, {
            key: "removeTrigger",
            value: function() {
                this.options.removeTrigger && this.$container.remove()
            }
        }, {
            key: "emptyParent",
            value: function() {
                this.options.emptyParent && this.$parentToAppend.empty()
            }
        }, {
            key: "lazyloadContent",
            value: function() {
                if (this.options.lazyload) {
                    var a = this.$container.hasClass("lazy-loader")
                      , b = this.$container.find(".lazy-loader");
                    a && c.safe("T1.lazyLoad.onDemand")(this.$container),
                    b.each(function() {
                        c.safe("T1.lazyLoad.onDemand")(c(this))
                    })
                }
            }
        }, {
            key: "renderPanel",
            value: function(a) {
                this.options.appendToParent ? (this.emptyParent(),
                this.$parentToAppend.append(a)) : this.render(a),
                T1.channels.global.publish(T1.constants.PLACEHOLDER_ROLLON, {
                    root: a
                })
            }
        }]),
        b
    }(b)
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , _get = function a(b, c, d) {
    null === b && (b = Function.prototype);
    var e = Object.getOwnPropertyDescriptor(b, c);
    if (void 0 === e) {
        var f = Object.getPrototypeOf(b);
        return null === f ? void 0 : a(f, c, d)
    }
    if ("value"in e)
        return e.value;
    var g = e.get;
    if (void 0 !== g)
        return g.call(d)
};
T1.defineInit("t1-controller-ajaxPanel", ["T1-site-dependencies", "t1-component-ajaxPanel", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    var d = a.$;
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = "t1-ajaxPanel"
                  , e = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, "." + d));
                e.containerClass = d,
                c.instance = e
            }
            return a = c.instance,
            _possibleConstructorReturn(e, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "init",
            value: function() {
                var a = this;
                _get(c.prototype.__proto__ || Object.getPrototypeOf(c.prototype), "init", this).call(this),
                T1.channels.dialog.subscribe(T1.constants.LOADING_COMPLETE, function(b) {
                    if ("object" === (void 0 === b ? "undefined" : _typeof(b))) {
                        var c = b.target
                          , d = c.find("." + a.containerClass);
                        a.initInstances(d)
                    }
                }),
                T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function(b) {
                    return a.onMaterialBoxOpened(b)
                })
            }
        }, {
            key: "initOnDemand",
            value: function(a) {
                var b = d(a).or("body");
                _get(c.prototype.__proto__ || Object.getPrototypeOf(c.prototype), "initOnDemand", this).call(this, b)
            }
        }, {
            key: "initInstance",
            value: function(a) {
                if (!this.instanceExists(a) && "function" == typeof this.component) {
                    var b = this.getPanelOptions(a)
                      , c = new this.component(a,b);
                    this.instances.push(c)
                }
            }
        }, {
            key: "onMaterialBoxOpened",
            value: function(a) {
                this.initOnDemand(a.container)
            }
        }, {
            key: "getPanelOptions",
            value: function(a) {
                var b = a.data("option") || {};
                return b.url = a.data("url"),
                b.one = {
                    event: a.data("one"),
                    target: a.data("one-target")
                },
                b
            }
        }]),
        c
    }(c))
}),
T1.defineInit("t1-controller-recently-viewed", ["jquery", "t1-hbs-templates"], function(a, b) {
    "use strict";
    var c = a || c
      , d = {
        containerId: "recently-viewed-models",
        amountOfModels: 2,
        dataComplete: !0,
        templateData: {},
        $section: null,
        init: function() {
            d.$section = c("#" + d.containerId),
            d.$section.length && (d.templateData = {
                compareLabel: T1.labels.compare,
                currentModel: T1.ctx.model,
                title: T1.labels.recentlyViewed,
                introLabel: T1.labels.recentlyViewedCompare,
                estimatedDeliveryLabel: T1.labels.recentlyViewedEstimatedDelivery
            },
            d.templateData.introLabel && T1.settings.modelMap && T1.settings.modelMap[T1.ctx.model.toUpperCase()] && (d.templateData.introLabel = d.templateData.introLabel.replace("{0}", T1.settings.modelMap[T1.ctx.model.toUpperCase()].ccName)),
            d.getRecentModelsFromServer(d.amountOfModels).then(d.onRecentModelsRetrieve))
        },
        getRecentModelsFromServer: function(a) {
            var b = c.Deferred()
              , d = T1.ctx && T1.ctx.model ? T1.ctx.model : ""
              , e = T1.personalization.tracking.getSortedPersonalizationCarData(a, d);
            return Object.keys(e).length < a ? b.resolve(null) : (c.ajax({
                url: "/api/pers/recent",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(e),
                success: function(a) {
                    if ("string" == typeof a)
                        try {
                            a = JSON.parse(a)
                        } catch (c) {
                            console.log("Invalid json received from server - " + c)
                        }
                    return a ? b.resolve(a) : b.resolve(null)
                }
            }),
            b.promise())
        },
        onRecentModelsRetrieve: function(a) {
            if (a && a && a.length === d.amountOfModels) {
                if (a.forEach(d.processModel),
                !d.dataComplete)
                    return;
                d.templateData.models = a;
                var e = b.templates[d.$section.data("template") || f.TEMPLATE_NAME_EXPLORE_RECENTLY_VIEWED]
                  , g = e(d.templateData)
                  , h = c(g);
                d.$section.append(h)
            }
        },
        processModel: function(a) {
            return a ? ("0" == a.position && (a.isFirst = !0),
            0 != a.position && 1 != a.position ? void (d.dataComplete = !1) : (Array.isArray(a.price) && a.price[0] && (a.price = a.price[0]),
            a.reviews = T1.labels.recentlyViewedReviews,
            a.reviews && (a.reviews = a.reviews.replace("{0}", a.reviewTotalCount)),
            void 0)) : void (d.dataComplete = !1)
        }
    }
      , e = d
      , f = T1.constants;
    return {
        init: e.init
    }
});
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
    return typeof a
}
: function(a) {
    return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a
}
  , _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.defineInit("t1-util-popupManager", ["T1-site-dependencies"], function(a) {
    var b = a.$ || b
      , c = a._ || c
      , d = function() {
        function a(b) {
            _classCallCheck(this, a);
            return "object" !== (void 0 === b ? "undefined" : _typeof(b)) ? void (this.error = "The popup item you passed on is not in the format of an object.") : b.uniqueId ? c.find(e.popupItems, {
                uniqueId: b.uniqueId
            }) ? void (this.error = 'A popup item with uniqueId "' + b.uniqueId + '" has already been added. If you are certain the module has not been added, make sure the id you use is unique') : (this.priority = b.priority || 99,
            -1 !== b.uniqueId.toLowerCase().indexOf("usabilla") && (this.isUsabilla = !0),
            this.uniqueId = b.uniqueId,
            this.src = "string" == typeof b.src ? b.src : null,
            this.alwaysOnPage = b.alwaysOnPage,
            void (this.alwaysOnPage && this.addToPage())) : void (this.error = "The popup item needs a uniqueId attribute.")
        }
        return _createClass(a, [{
            key: "addToPage",
            value: function() {
                if (!this.isOnPage && this.src) {
                    var a = b("<script>").attr("src", this.src)
                      , c = b("script")
                      , d = c.length && c[0] || null;
                    d ? a.insertBefore(d) : b("body").append(a),
                    this.isOnPage = !0
                }
            }
        }, {
            key: "priority",
            set: function(a) {
                this._priority && e.priorities.length < a ? this._priority = e.priorities.length : this._priority = a
            },
            get: function() {
                return this._priority
            }
        }]),
        a
    }()
      , e = {
        initialized: !1,
        sessionAllow: !0,
        popupSessionStorageKey: T1.constants.NAMESPACE_BASE + ".t1.popups",
        popupItems: [],
        priorities: [],
        defaultPercentages: [60, 30, 10],
        init: function() {
            e.sessionAllow = e.getSessionAllowFlag(),
            e.initialized || (e.setPercentages({
                percentagesArray: T1 && T1.settings && T1.settings.popup && T1.settings.popup.percentages
            }),
            T1.utilities.isEnvironment.production || T1.channels.global.subscribe(T1.constants.POPUP_MANAGER_SET_PERCENTAGES, e.setPercentages),
            !0 !== e.sessionAllow && e.recalculatePriorities({
                disableAll: !0
            }),
            e.setQuerySubscriptions(),
            T1.channels.global.publishAsync(T1.constants.POPUP_MANAGER_INITIALIZED, {}),
            e.initialized = !0)
        },
        getAllowedPriority: function() {
            if (!0 !== e.sessionAllow)
                return "none";
            for (var a = 0; a < e.priorities.length; a++)
                if (!0 === e.priorities[a].allow)
                    return a + 1
        },
        setQuerySubscriptions: function() {
            T1.channels.global.subscribe(T1.constants.POPUP_MANAGER_ADD, e.addItem),
            T1.channels.global.subscribe(T1.constants.POPUP_MANAGER_TRIGGER_QUERY, e.canTrigger)
        },
        setPercentages: function(a) {
            for (var b = 0, c = Array.isArray(a.percentagesArray) ? a.percentagesArray : e.defaultPercentages, d = 5, f = 0; f < c.length; f++)
                b += c[f];
            if (100 === b) {
                e.priorities.length = 0;
                for (var g = 0; g < c.length; g++)
                    e.priorities.push({
                        percentage: c[g],
                        allow: !1
                    });
                e.recalculatePriorities()
            } else
                a.depth = ++a.depth || 1,
                a.percentagesArray = e.defaultPercentages,
                a.error = "Total percentage for popup manager overwrite does not add up to 100%. Default values will be used",
                a.depth < d && e.setPercentages(a);
            a.priorityAllowed = e.getAllowedPriority()
        },
        recalculatePriorities: function(a) {
            for (var b = a && !0 === a.disableAll || !1, c = 0, d = Math.floor(100 * Math.random()) + 1, f = 0; f < e.priorities.length; f++) {
                var g = c
                  , h = void 0
                  , i = void 0;
                c += e.priorities[f].percentage,
                h = d > g && d <= c,
                i = !0 !== b && h,
                e.priorities[f].allow = i
            }
            !0 === b && e.setSessionAllowFlagFalse()
        },
        setSessionAllowFlagFalse: function() {
            sessionStorage.setItem(e.popupSessionStorageKey, JSON.stringify({
                allow: !1
            })),
            e.sessionAllow = !1
        },
        getSessionAllowFlag: function() {
            var a = !0;
            try {
                var b = e.getSessionStoragePopup();
                return "boolean" == typeof b.allow ? b.allow : a
            } catch (e) {
                return a
            }
        },
        getSessionStoragePopup: function() {
            try {
                var a = JSON.parse(sessionStorage.getItem(e.popupSessionStorageKey));
                return "object" === (void 0 === a ? "undefined" : _typeof(a)) ? a : {}
            } catch (e) {
                return {}
            }
        },
        canTrigger: function(a) {
            var b = "object" !== (void 0 === a ? "undefined" : _typeof(a)) || !a.uniqueId
              , d = c.find(e.popupItems, {
                uniqueId: a.uniqueId
            })
              , f = d && d.priority
              , g = window.signalActivity && signalActivity.ignition && !1 === signalActivity.ignition.willNotShow || !1;
            a.canTrigger = !1,
            g ? (a.message = "Ignition is set to show, all other popups will be ignored.",
            e.recalculatePriorities({
                disableAll: !0
            })) : b ? a.message = 'The format, of the parameter passed on, is wrong. "uniqueId" is a mandatory property' : d ? f ? e.priorities.length < f ? a.message = 'The priority assigned to "' + a.uniqueId + '" is not a priority defined in the priorities list of the module. Add your item with one of the defined priorities and try again.' : !0 !== e.sessionAllow ? a.message = 'There has been a popup item during this session. "' + a.uniqueId + '" can no longer be shown.' : e.priorities[f - 1].allow ? e.itemIsAllowedToTrigger(f) ? (d.addToPage(),
            e.recalculatePriorities({
                disableAll: !0
            }),
            a.canTrigger = !0,
            a.message = !1) : a.message = "Multiple items with priority " + f + ' exist. To allow any of them to have equal chances of being allowed to pop up, "' + a.uniqueId + '" is not allowed to show at this time.' : a.message = 'The priority you have set for "' + a.uniqueId + '" does not have permission to be displayed at this time' : a.message = '"' + a.uniqueId + '" requesting a popup, has not been registered with the module. Please register it first by publishing the "popup.manager.add" event.' : a.message = 'The item with id "' + a.uniqueId + '" could not be found. Make sure you add it before calling the trigger request.'
        },
        itemIsAllowedToTrigger: function(a) {
            var b = c.t1SumBy(e.popupItems, function(b) {
                return b.priority === a ? 1 : 0
            })
              , d = Math.floor(Math.random() * b) + 1;
            return T1 && T1.settings && T1.settings.mock && console.log("itemIsAllowedToTrigger random number is " + d),
            1 === d
        },
        addItem: function(a) {
            var b = new d(a);
            b.error ? a.error = b.error : (e.popupItems.push(b),
            b.isUsabilla && (e.initUsabilla(b.priority),
            e.updateUsabillaCookie(b.priority)))
        },
        initUsabilla: function(a) {
            window.usabilla && window.usabilla("setEventCallback", function(a, b, c) {
                "Campaign:Open" === b && (document.cookie = "campaign_complete=1;path=/",
                e.recalculatePriorities({
                    disableAll: !0
                }))
            })
        },
        updateUsabillaCookie: function(a) {
            var b = a === e.getAllowedPriority();
            document.cookie = "campaign_complete=" + (b ? "0" : "1")
        }
    }
      , f = {
        init: e.init,
        isInitialized: function() {
            return e.initialized
        }
    };
    return T1.settings.mock && (f.module = e),
    f
}),
T1.defineInit("t1-controller-colourPicker", ["T1-site-dependencies", "t1-component-colourPicker"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c(".colour-picker").each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-colourPicker", ["T1-site-dependencies", "t1-component-abstract", "t1-api-gradedata", "t1-controller-colourPicker"], function(a, b, c) {
    "use strict";
    var d = a.$ || $
      , e = "not-available";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.colorsByPage = 4,
            T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, function(a) {
                return c.onBreakpointChanged(a)
            }),
            T1.channels[c.getChannel()].subscribe(T1.constants.COLORPICKER_COLOR_CHANGED, function(a) {
                return c.onColorChanged(a)
            }),
            T1.channels[c.getChannel()].subscribe(T1.constants.COLORPICKER_REQUEST_COLOR_PREVIEW, function(a) {
                return c.onColorPreview(a)
            }),
            T1.channels[c.getChannel()].subscribe(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, function(a) {
                return c.onEngineChanged(a)
            }),
            T1.channels[c.getChannel()].subscribe(T1.constants.BODYTYPE_CHANGED, function() {
                return c.updateColorsAvailabilityState()
            }),
            T1.channels[c.getChannel()].subscribe(T1.constants.WHEELBASE_CHANGED, function() {
                return c.updateColorsAvailabilityState()
            }),
            c.create(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getChannel",
            value: function() {
                return this.container.data("color-picker-channel") || "global"
            }
        }, {
            key: "create",
            value: function() {
                var a = this
                  , b = this.container.find("li");
                this.createScroller(),
                b.on("click", function(b) {
                    return a.onColorPickerClick(b)
                }),
                b.on("mouseover", function(b) {
                    return a.onColorPickerMouseOver(b)
                }),
                b.on("mouseout", function(b) {
                    return a.onColorPickerMouseOut(b)
                })
            }
        }, {
            key: "onColorPickerMouseOver",
            value: function(a) {
                if ("lg" === d.safe("T1.breakpoints.currentBP")()) {
                    var b = $(a.currentTarget)
                      , c = b.find(".color-label");
                    c.toggleClass(e, b.hasClass(e)),
                    c.css("left", b.position().left - c.width() / 2 + "px"),
                    c.prop("owner", b).prependTo(this.container)
                }
            }
        }, {
            key: "onColorPickerMouseOut",
            value: function(a) {
                if ("lg" === d.safe("T1.breakpoints.currentBP")()) {
                    var b = this.container.find("> .color-label")
                      , c = b.prop("owner");
                    c && c[0] === a.currentTarget && (b.appendTo(c),
                    b.removeClass(e))
                }
            }
        }, {
            key: "onColorPickerClick",
            value: function(a) {
                var b = this
                  , e = $(a.target)
                  , f = e.css("background-color")
                  , g = function(a) {
                    return b.updateColorSelection({
                        target: a
                    })
                }
                  , h = function() {
                    return b.updateColorsAvailabilityState()
                };
                if (f && !e.is("." + T1.util.Constants.CLASS_ACTIVE)) {
                    var i = d.safe("T1.personalization.getCurrentGradeConfig")()
                      , j = {
                        colourId: e.data("colorGuid"),
                        carId: i.carId,
                        engineEtw: i.engineEtw,
                        wheelBaseFilter: i.wheelBaseFilter,
                        bodyTypeFilter: i.bodyTypeFilter
                    };
                    i.clickedEngine && !c.gradeComboExists(j) ? T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        type: "box-alert-okcancel",
                        msg: T1.labels && T1.labels.colorPicker && T1.labels.colorPicker.colorNotAvailableMsg,
                        styleClass: "grade-box-layout",
                        buttons: {
                            ok: {
                                caption: T1.labels && T1.labels.colorPicker && T1.labels.colorPicker.colorNotAvailableOkBtn,
                                styleClass: "btn-functional",
                                function: function() {
                                    i.clickedEngine = !1,
                                    g(e),
                                    h(),
                                    this.close()
                                }
                            },
                            cancel: {
                                function: function() {
                                    this.close()
                                }
                            }
                        }
                    }) : g(e)
                }
            }
        }, {
            key: "updateColorSelection",
            value: function() {
                var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                  , b = {
                    color: a.target.css("background-color"),
                    colorCode: a.target.data("color-code"),
                    lightColor: a.target.data("light-color") || !1,
                    customClass: a.target.data("custom-class"),
                    colorGuid: a.target.data("color-guid"),
                    carId: a.carId,
                    clicked: a.clicked || !0,
                    preview: a.preview
                };
                T1.channels[this.getChannel()].publish(T1.constants.COLORPICKER_BEFORE_COLOR_CHANGED, b),
                T1.channels[this.getChannel()].publish(T1.constants.COLORPICKER_COLOR_CHANGED, b),
                a.target.siblings("." + T1.util.Constants.CLASS_ACTIVE).removeClass(T1.util.Constants.CLASS_ACTIVE),
                a.target.addClass(T1.util.Constants.CLASS_ACTIVE)
            }
        }, {
            key: "onColorChanged",
            value: function(a) {
                var b = this;
                this.loadingStart();
                var c = function(a) {
                    b.changeBackgroundsColor(a),
                    b.toggleCustomClass(b.container, a),
                    b.container.toggleClass("light-color", a.lightColor)
                }
                  , d = function() {
                    return b.loadingComplete(a.container)
                };
                this.updateCarHeroColour(a).done([c, a.done]).always(d)
            }
        }, {
            key: "onColorPreview",
            value: function() {
                var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                a.preview = !0,
                a.enabled ? (a.container = a.container.closest(".grade-header"),
                a.colorGuid = this.getColorGuid(a.colorCode) || a.promotedColorGuid,
                this.changeBackgroundsColor(a)) : this.resetColor(a)
            }
        }, {
            key: "resetColor",
            value: function() {
                var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                  , b = this.container.find("li.active");
                this.changeBackgroundsColor({
                    node: a.node,
                    preview: a.preview,
                    color: this.getHexColorCode(b.data("colorGuid")),
                    lightColor: b.data("lightColor"),
                    customClass: b.data("custom-class")
                })
            }
        }, {
            key: "getActiveColorCode",
            value: function() {
                return this.container.find("li.active").data("color-code")
            }
        }, {
            key: "getColorGuid",
            value: function(a) {
                return this.container.find('li[data-color-code="' + a + '"]').data("colorGuid")
            }
        }, {
            key: "getHexColorCode",
            value: function(a) {
                return this.container.find('li[data-color-guid="' + a + '"]').css("background-color")
            }
        }, {
            key: "onEngineChanged",
            value: function(a) {
                var b = this
                  , d = this.container.find(".iscroller li")
                  , e = $.safe("T1.personalization.getCurrentGradeConfig")()
                  , f = d.filter("." + T1.util.Constants.CLASS_ACTIVE)
                  , g = {
                    colourId: f.data("colorGuid"),
                    carId: a.carId,
                    engineEtw: e.engineEtw,
                    wheelBaseFilter: e.wheelBaseFilter,
                    bodyTypeFilter: e.bodyTypeFilter
                };
                if (a.clicked && e.clickedColour && !c.gradeComboExists(g)) {
                    var h = d.filter(function() {
                        return !($(this).data("unavailable-engines") || []).includes(a.engineEtw)
                    });
                    this.updateColorSelection({
                        target: $(h[0]),
                        carId: a.carId,
                        clicked: !1
                    })
                } else
                    a.carId && (this.loadingStart(),
                    this.updateCarHeroColour({
                        carId: a.carId
                    }).always(function() {
                        return b.loadingComplete()
                    }));
                this.updateColorsAvailabilityState(d)
            }
        }, {
            key: "onExtraFilterChanged",
            value: function(a) {
                this.updateColorsAvailabilityState()
            }
        }, {
            key: "updateColorsAvailabilityState",
            value: function(a) {
                var b = d.safe("T1.personalization.getCurrentGradeConfig")();
                a = a || this.container.find(".iscroller li"),
                a.each(function() {
                    var a = $(this)
                      , d = {
                        colourId: a.data("colorGuid"),
                        carId: b.carId,
                        engineEtw: b.engineEtw,
                        wheelBaseFilter: b.wheelBaseFilter,
                        bodyTypeFilter: b.bodyTypeFilter
                    };
                    a.toggleClass(e, !!b.clickedEngine && !c.gradeComboExists(d))
                })
            }
        }, {
            key: "changeBackgroundsColor",
            value: function(a) {
                var b = a.color || this.getHexColorCode(a.colorGuid) || a.promotedColorHex;
                if (b) {
                    var c = $(a.container || "body").find(this.container.data("colorable-background-selector"));
                    if (c.length) {
                        c.css("background-color", b);
                        var d = c.closest("section");
                        this.toggleLightColorClass(d, a),
                        this.toggleCustomClass(d, a)
                    }
                    if (!0 !== a.preview) {
                        var e = $(a.container || "body").find(this.container.data("colorpicker-selector"));
                        e.length && (this.toggleLightColorClass(e, a),
                        this.toggleCustomClass(e, a))
                    }
                }
            }
        }, {
            key: "setNavigationState",
            value: function() {
                var a = this.IscrollInstance.currentPage.pageX
                  , b = this.container.find(".iscroller li").length / this.colorsByPage;
                this.container.find(".arrow.prev").toggleClass("hidden", 0 === a),
                this.container.find(".arrow.next").toggleClass("hidden", a >= b - 1)
            }
        }, {
            key: "toggleLightColorClass",
            value: function(a, b) {
                a.toggleClass("light-color", b.lightColor)
            }
        }, {
            key: "toggleCustomClass",
            value: function(a, b) {
                a.removeClass(function(a, b) {
                    return (b.match(/(^|\s)custom-\S+/g) || []).join(" ")
                }),
                b.customClass && a.addClass("custom-" + b.customClass)
            }
        }, {
            key: "loadingStart",
            value: function() {
                T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                    target: this.getLoadingContainer(),
                    keepVisible: !0
                })
            }
        }, {
            key: "loadingComplete",
            value: function(a) {
                T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                    target: this.getLoadingContainer(a)
                })
            }
        }, {
            key: "getLoadingContainer",
            value: function(a) {
                return $(a || "body").find(this.container.data("colorable-loader-selector")).or(this.container)
            }
        }, {
            key: "updateCarHeroColour",
            value: function(a) {
                var b = $.Deferred();
                if (a.colorCode || a.carId) {
                    var c = $(a.container || "body").find(this.container.data("colorable-ccis-image-selector"));
                    if (c.length) {
                        var d = this;
                        c.each(function() {
                            var b = $(this);
                            if (a.colorCode) {
                                var c = b.data("availableColours")
                                  , e = b.data("promotedColour")
                                  , f = e && c && !c.includes(a.colorGuid) ? e : a.colorCode
                                  , g = $.extend({}, a);
                                g.colorCode = f,
                                d.changeCCISImage(b, g),
                                d.changeColorData(b, g)
                            } else
                                a.carId && d.changeCCISImage(b, a)
                        }),
                        c.filter(":uncached").length ? c.waitForImages(!0).done(function() {
                            b.resolve(a)
                        }) : b.resolve(a)
                    } else
                        b.resolve(a)
                }
                return b.promise()
            }
        }, {
            key: "changeColorData",
            value: function(a, b) {
                var c = a.is(".slide-content");
                c.length || (c = a.closest(".slide-content")),
                c.length && c.data("colorCode") !== b.colorCode && (c.data("colorCode", b.colorCode),
                c.data("light-color", b.lightColor),
                c.data("custom-class", b.customClass || ""))
            }
        }, {
            key: "changeCCISImage",
            value: function(a, b) {
                var c = a.attr("src");
                c = this.changeCCISImageUrlColor(c, b.colorCode),
                c = this.changeCCISImageUrlCarId(c, b.carId),
                a.attr("src", c)
            }
        }, {
            key: "changeCCISImageUrlColor",
            value: function(a, b) {
                if (b) {
                    var c = a.match(/[\w\.\$]+(?=png|jpg)\w+/g);
                    if (c && c[0]) {
                        var d = c[0].match(/_(.*)\./);
                        d && d[1] && (a = a.replace(c[0], c[0].replace(d[1], b)))
                    }
                }
                return a
            }
        }, {
            key: "changeCCISImageUrlCarId",
            value: function(a, b) {
                if (b) {
                    var c = a.match("/" + T1.ctx.model + "/([^/]+)/");
                    c && c[1] && (a = a.replace(c[1], b))
                }
                return a
            }
        }, {
            key: "onBreakpointChanged",
            value: function() {
                this.createScroller()
            }
        }, {
            key: "createScroller",
            value: function() {
                var a = this;
                this.destroyScroller().done(function(b) {
                    return a.onDestroyScrollerDone(b)
                })
            }
        }, {
            key: "onDestroyScrollerDone",
            value: function(a) {
                var b = this;
                if (this.container && this.container.length) {
                    var c = this.container.find(".iscroller");
                    c.length && (this.IscrollInstance = new window.IScroll(c[0],{
                        scrollX: !0,
                        scrollY: !1,
                        mouseWheel: !1,
                        disablePointer: !this.isMobile(),
                        disableTouch: !this.isMobile(),
                        click: !0,
                        eventPassthrough: !0,
                        snap: !0
                    }),
                    a.page && this.IscrollInstance.goToPage(a.page, 0),
                    this.IscrollInstance.on("scrollEnd", function(a) {
                        return b.onScrollEnd(a)
                    }),
                    this.container.find(".arrow.prev").off(T1.utilities.clickEvent).on(T1.utilities.clickEvent, function(a) {
                        return b.onNavigatePrev(a)
                    }),
                    this.container.find(".arrow.next").off(T1.utilities.clickEvent).on(T1.utilities.clickEvent, function(a) {
                        return b.onNavigateNext(a)
                    }))
                }
            }
        }, {
            key: "onScrollEnd",
            value: function() {
                this.setNavigationState()
            }
        }, {
            key: "onNavigatePrev",
            value: function() {
                this.IscrollInstance.prev()
            }
        }, {
            key: "onNavigateNext",
            value: function() {
                this.IscrollInstance.next()
            }
        }, {
            key: "destroyScroller",
            value: function() {
                var a = $.Deferred();
                if (this.IscrollInstance) {
                    var b = this.IscrollInstance.currentPage.pageX;
                    this.IscrollInstance.destroy(),
                    delete this.IscrollInstance,
                    setTimeout(function() {
                        this.container.find(".iscroller > ul").removeAttr("style"),
                        a.resolve({
                            page: b
                        })
                    }
                    .bind(this), 200)
                } else
                    a.resolve({
                        page: this.getActivePage()
                    });
                return a
            }
        }, {
            key: "getActivePage",
            value: function() {
                return Math.floor(this.container.find(".iscroller li.active").index() / this.colorsByPage)
            }
        }, {
            key: "isMobile",
            value: function() {
                return "xs" === d.safe("T1.breakpoints.currentBP")()
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-engineselector", ["T1-site-dependencies", "t1-component-engineselector", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".engine-selector", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-engineselector", ["T1-site-dependencies", "t1-component-abstract", "t1-api-gradedata"], function(a, b, c) {
    "use strict";
    var d = a.$
      , e = "engine-column"
      , f = "engine-container";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.attachEventListeners(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getChannel",
            value: function() {
                return this.container.data("engine-channel") || "global"
            }
        }, {
            key: "attachEventListeners",
            value: function() {
                var a = this;
                d("body").on("click", "btn-engine-selector".toSelector(), function(b) {
                    return a.onEngineSelected(b)
                }),
                T1.channels[this.getChannel()].subscribe(T1.constants.COLORPICKER_COLOR_CHANGED, function(b) {
                    return a.onColorThemeChanged(b)
                })
            }
        }, {
            key: "onColorThemeChanged",
            value: function(a) {
                if (!a.preview) {
                    var b = this.container.find(e.toSelector())
                      , c = b.filter(":has(>." + T1.util.Constants.CLASS_ACTIVE + ")")
                      , f = c.data("unavailable-colors") || [];
                    if (a.clicked && f.indexOf(a.colorGuid) >= 0) {
                        var g = b.filter(function() {
                            return !(d(this).data("unavailable-colors") || []).includes(a.colorGuid)
                        });
                        this.updateEngineSelection(this.getEngineStructure(d(g[0])), !1)
                    }
                    this.updateEnginesAvailabilityState(b, a.colorGuid)
                }
            }
        }, {
            key: "updateEnginesAvailabilityState",
            value: function(a, b) {
                a.each(function() {
                    var a = d(this)
                      , c = a.data("unavailable-colors") || [];
                    a.toggleClass("not-available", c.indexOf(b) >= 0)
                })
            }
        }, {
            key: "onEngineSelected",
            value: function(a) {
                var b = this
                  , g = d(a.target);
                if (!g.is(T1.util.Constants.CLASS_PREVENT_DEFAULT.toSelector()) && !g.closest(T1.util.Constants.CLASS_PREVENT_DEFAULT.toSelector()).length) {
                    var h = d(a.currentTarget)
                      , i = h.data("engine-etw")
                      , j = h.data("car-id")
                      , k = d.safe("T1.personalization.getCurrentGradeConfig")()
                      , l = {
                        colourId: k.colourId,
                        carId: j,
                        engineEtw: i,
                        wheelBaseFilter: k.wheelBaseFilter,
                        bodyTypeFilter: k.bodyTypeFilter
                    }
                      , m = this.container.find(e.toSelector() + '[data-engine-etw="' + i + '"]')
                      , n = this.getEngineStructure(m)
                      , o = function(a) {
                        if (b.updateEngineSelection(a),
                        T1.statistics.isTrackingEnabled()) {
                            var c = window.t1DataLayer.configuration;
                            if (!c)
                                return;
                            c.engineid && (c.engineid = i),
                            void 0 !== c.ishybrid && (c.ishybrid = h.data("is-hybrid") ? "1" : "0"),
                            c.cardetails && c.cardetails.engine && (c.cardetails.engine = d(a.container).find(".engine-header >.title").text()),
                            T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                                node: h,
                                extraData: {
                                    event: {
                                        eventclass: "gradeevent",
                                        componentname: "grade-selector",
                                        action: "select-engine",
                                        value: a.container.find(".engine-header .title").text()
                                    }
                                }
                            })
                        }
                    };
                    n.container.length || (n.container = h.closest(f.toSelector())),
                    n.etw && !n.container.is(T1.util.Constants.CLASS_ACTIVE.toSelector()) && (k.clickedColour && !c.gradeComboExists(l) ? T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        type: "box-alert-okcancel",
                        msg: T1.labels && T1.labels.engineSelector && T1.labels.engineSelector.engineNotAvailableMsg,
                        styleClass: "grade-box-layout",
                        buttons: {
                            ok: {
                                caption: T1.labels && T1.labels.engineSelector && T1.labels.engineSelector.engineNotAvailableOkBtn,
                                styleClass: "btn-functional",
                                function: function() {
                                    k.clickedColour = !1,
                                    o(n),
                                    this.close()
                                }
                            },
                            cancel: {
                                function: function() {
                                    this.close()
                                }
                            }
                        }
                    }) : o(n))
                }
            }
        }, {
            key: "updateEngineSelection",
            value: function(a) {
                var b = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                if (a) {
                    var c = this.container.find(e.toSelector())
                      , g = a.container.find(".engine-spec")
                      , h = {
                        engineType: a.container.find(".engine-header .title").text(),
                        fuelUsed: a.container.find(".engine-header .fuel-used").text()
                    };
                    g.filter("[data-spec-id]").each(function(a) {
                        var b = d(g[a])
                          , c = b.find(".value").contents().not(d(".value").children()).text();
                        h[b.data("spec-id")] = c
                    }),
                    T1.channels[this.getChannel()].publish(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, {
                        engineEtw: a.etw,
                        engineId: a.column.data("engine-id"),
                        transmissionId: a.column.data("transmission-id"),
                        wheeldriveId: a.column.data("wheeldrive-id"),
                        engineSpecs: h,
                        carId: a.column.data("car-id"),
                        clicked: b,
                        tfsCode: g.filter("[data-tfs-code]").data("tfs-code")
                    }),
                    c.find(">." + f).removeClass(T1.util.Constants.CLASS_ACTIVE),
                    a.container.addClass(T1.util.Constants.CLASS_ACTIVE),
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_CLOSE)
                }
            }
        }, {
            key: "getEngineStructure",
            value: function(a) {
                return {
                    column: a,
                    container: a.find(">." + f),
                    etw: a.data("engine-etw")
                }
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-bodyTypeFilter", ["T1-site-dependencies", "t1-component-bodyTypeFilter"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c('fieldset[data-filtername="bodyType"]').each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-bodyTypeFilter", ["T1-site-dependencies", "t1-component-abstract", "t1-controller-bodyTypeFilter"], function(a, b) {
    "use strict";
    var c = a.$;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.create(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getChannel",
            value: function() {
                return this.container.data("filters-channel") || "global"
            }
        }, {
            key: "create",
            value: function() {
                var a = this;
                this.radioBtns = this.container.find('input[type="radio"][name="body-type"]'),
                this.initState(),
                this.radioBtns.change(function(b) {
                    return a.onBodyTypeChanged(b)
                })
            }
        }, {
            key: "initState",
            value: function() {
                var a = c.safe("T1.personalization.getCurrentGradeConfig")();
                this.radioBtns.filter('[value="' + a.bodyTypeFilter + '"]').prop("checked", !0)
            }
        }, {
            key: "onBodyTypeChanged",
            value: function(a) {
                T1.channels[this.getChannel()].publish(T1.constants.BODYTYPE_CHANGED, {
                    bodyTypeFilter: a.target.value,
                    radioBtns: this.radioBtns
                })
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-wheelBaseFilter", ["T1-site-dependencies", "t1-component-wheelBaseFilter"], function(a, b) {
    "use strict";
    var c = a.$ || $
      , d = {
        init: function() {
            c('fieldset[data-filtername="wheelBase"]').each(function() {
                d.initInstance(c(this))
            })
        },
        initInstance: function(a) {
            new b(a)
        }
    };
    return {
        init: d.init
    }
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-wheelBaseFilter", ["T1-site-dependencies", "t1-component-abstract", "t1-controller-wheelBaseFilter"], function(a, b) {
    "use strict";
    var c = a.$;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.create(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "getChannel",
            value: function() {
                return this.container.data("filters-channel") || "global"
            }
        }, {
            key: "create",
            value: function() {
                var a = this;
                this.radioBtns = this.container.find('input[type="radio"][name="wheel-base"]'),
                this.initState(),
                this.radioBtns.change(function(b) {
                    return a.onWheelBaseChanged(b)
                })
            }
        }, {
            key: "initState",
            value: function() {
                var a = c.safe("T1.personalization.getCurrentGradeConfig")();
                this.radioBtns.filter('[value="' + a.wheelBaseFilter + '"]').prop("checked", !0)
            }
        }, {
            key: "onWheelBaseChanged",
            value: function(a) {
                T1.channels[this.getChannel()].publish(T1.constants.WHEELBASE_CHANGED, {
                    wheelBaseFilter: a.target.value,
                    radioBtns: this.radioBtns
                })
            }
        }]),
        b
    }(b)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-grade-header", ["T1-site-dependencies", "t1-component-abstract", "t1-api-gradedata"], function(a, b, c) {
    "use strict";
    var d = a._
      , e = "#gradeCarousel"
      , f = ".slide-content[data-color-guid]"
      , g = ".slick-slide:has(" + f + ")"
      , h = ".t1-carousel-container"
      , i = "#keyFeatures"
      , j = "#engines-details"
      , k = new RegExp(/day-exterior-\d{1,2}/g);
    return function(b) {
        function l(a) {
            _classCallCheck(this, l);
            var b = _possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).call(this, a));
            return b.subscriptions = {},
            b.$gradeFocus = a.find(".grade-focus"),
            b.previousBreakpoint = $.safe("T1.breakpoints.currentBP")(),
            b.initToggleContainer(),
            b.breakpointHandler(b.previousBreakpoint),
            b.attachEventHandlers(),
            b.carAngle = b.retrieveImageAngle(),
            b
        }
        return _inherits(l, b),
        _createClass(l, [{
            key: "collapsingHandler",
            value: function(a) {
                var b = a.data.$collapsibleElements
                  , c = a.data.collapsibleElementsKeys
                  , d = $(a.currentTarget)
                  , e = d.is(".collapsed") ? "show" : "hide";
                $.each(c, function(a) {
                    $(b[c[a]]).collapse("toggle")
                }),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: d,
                    extraData: {
                        event: {
                            action: e
                        }
                    }
                })
            }
        }, {
            key: "onShowHighlights",
            value: function(a) {
                var b = $(a.currentTarget)
                  , c = b.is(".collapsed") ? "show" : "hide";
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: b,
                    extraData: {
                        event: {
                            action: c
                        }
                    }
                })
            }
        }, {
            key: "onCarouselArrowClick",
            value: function(a) {
                var b = $(a.currentTarget);
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: b,
                    extraData: {
                        event: {
                            action: "click_function",
                            value: "browse"
                        }
                    }
                })
            }
        }, {
            key: "onDimensionsClick",
            value: function(a) {
                var b = "/api/fragment/dimensions"
                  , c = void 0
                  , d = $.safe("T1.personalization.getCurrentGradeConfig")()
                  , e = b;
                if (!T1.settings.mock) {
                    $.isEmptyObject(d) || (e += "/model=" + d.model + "%7Cgrade=" + d.gradeId + "%7CbodyType=" + d.bodyTypeId + "%7Cetw=" + d.engineEtw);
                    var f = $(a.target).data("image-path");
                    f && (e += "%7CimagePath=" + f)
                }
                c = $.safe("T1.utilities.get.html")(e),
                c.done(function(a) {
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        html: $(a)
                    })
                }).fail(function() {
                    T1.utilities.isEnvironment.production || console.log("Could not retrieve data from " + b)
                })
            }
        }, {
            key: "attachEventHandlers",
            value: function() {
                var a = this;
                this.subscriptions[T1.constants.ON_BREAKPOINT_CHANGE] = T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, function(b) {
                    return a.breakpointHandler(b)
                }),
                this.subscriptions[T1.constants.BOOTSTRAP_COLLAPSE_SHOW] = this.container.find(j).on(T1.constants.BOOTSTRAP_COLLAPSE_SHOW, function(b) {
                    return a.onEnginePanelShow(b)
                }),
                this.subscriptions[T1.constants.COLORPICKER_BEFORE_COLOR_CHANGED] = T1.channels[this.getChannel()].subscribe(T1.constants.COLORPICKER_BEFORE_COLOR_CHANGED, function(b) {
                    return a.onBeforeColorChanged(b)
                }),
                this.subscriptions[T1.constants.ENGINESELECTOR_ENGINE_CHANGED] = T1.channels[this.getChannel()].subscribe(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, function(b) {
                    return a.onEngineChanged(b)
                }),
                T1.channels[this.getChannel()].subscribe(T1.constants.BODYTYPE_CHANGED, function(b) {
                    return a.onBodyTypeChanged(b)
                }),
                this.container.find(".t1-carousel").on("init", function(b, c) {
                    return a.onGradeCarouselInit(b, c)
                }),
                T1.channels[this.getChannel()].subscribe(T1.constants.WHEELBASE_CHANGED, function(b) {
                    return a.onWheelBaseChanged(b)
                }),
                this.attachSlideEvents(),
                this.isTrackingEnabled() && ($(i + " .collapsed-trigger").on("click", this.onShowHighlights),
                $(e + " .slick-arrow").on("click", this.onCarouselArrowClick)),
                $("#dimensions").on("click", this.onDimensionsClick.bind(this))
            }
        }, {
            key: "attachSlideEvents",
            value: function() {
                var a = this;
                this.container.find(e + " " + g).off("mouseenter").mouseenter(function(b) {
                    return a.onGradeCarouselSlideMouseEnter(b)
                }).off("mouseleave").mouseleave(function(b) {
                    return a.onGradeCarouselSlideMouseLeave(b)
                }),
                this.container.find(e + " " + h).off("mouseleave").mouseleave(function(b) {
                    return a.onGradeCarouselMouseLeave(b)
                })
            }
        }, {
            key: "onEnginePanelShow",
            value: function(a) {
                $(a.target).is(j) && setTimeout(function() {
                    this.container.find(".t1-carousel").slick("refresh")
                }
                .bind(this), 0)
            }
        }, {
            key: "disablePreview",
            value: function() {
                this.container.find(g).each(function() {
                    var a = $(this)
                      , b = a.find(f);
                    a.off("mouseenter").off("mouseleave"),
                    b.removeAttr("data-color-code").removeData("color-code"),
                    b.removeAttr("data-color-guid").removeData("color-guid"),
                    b.removeAttr("data-light-color").removeData("light-color"),
                    b.removeAttr("data-custom-class").removeData("custom-class"),
                    b.find(".disabled-loader").removeClass("disabled-loader"),
                    b.find(".colorable-ccis-image").removeAttr("data-available-colours").removeData("available-colours")
                }),
                this.container.find(h).off("mouseleave")
            }
        }, {
            key: "onGradeCarouselInit",
            value: function(a, b) {
                this.attachSlideEvents()
            }
        }, {
            key: "onGradeCarouselSlideMouseEnter",
            value: function(a) {
                var b = this
                  , c = $(a.currentTarget).find(f);
                if (!c.is(T1.util.Constants.CLASS_ACTIVE.toSelector())) {
                    var d = this.container.find(".grade-picture")
                      , e = this.normalizeImageSource(c.find(".ccis-image").prop("src"));
                    T1.channels.dialog.publishAsync(T1.constants.LOADING_START, {
                        target: d,
                        keepVisible: !0
                    }),
                    d.find(".ccis-image").prop("src", e),
                    this.container.waitForImages(function() {
                        b.onPreviewDone({
                            target: c,
                            imageSource: e
                        }),
                        c.addClass(T1.util.Constants.CLASS_ACTIVE),
                        T1.channels.dialog.publishAsync(T1.constants.LOADING_COMPLETE, {
                            target: d
                        })
                    })
                }
            }
        }, {
            key: "normalizeImageSource",
            value: function(a) {
                var b = a.replace(/\/width\/\d{1,4}/g, "");
                return b = b.replace(/\/height\/\d{1,4}/g, ""),
                b.replace(/\/padding\/\d{1,4},\d{1,4},\d{1,4},\d{1,4}/g, ""),
                b.replace(k, "day-exterior-" + this.carAngle)
            }
        }, {
            key: "retrieveImageAngle",
            value: function() {
                var a = 2
                  , b = this.container.find(".grade-picture .ccis-image").attr("src") || ""
                  , c = b.match(k)
                  , d = [];
                return c.length && (d = c[0].split("-")),
                d.length > a ? d[a] : 4
            }
        }, {
            key: "retrieveImageColorCode",
            value: function(a) {
                var b = a.match(/[\w\.\$]+(?=png|jpg)\w+/g);
                if (b && b[0]) {
                    var c = b[0].match(/_(.*)\./);
                    if (c && c[1])
                        return c[1]
                }
                return null
            }
        }, {
            key: "onGradeCarouselSlideMouseLeave",
            value: function(a) {
                $(a.currentTarget).is(g) && this.container.find(g + " " + f).removeClass(T1.util.Constants.CLASS_ACTIVE)
            }
        }, {
            key: "onGradeCarouselMouseLeave",
            value: function(a) {
                var b = $(a.target).closest("#gradeCarousel").find(".active-grade .ccis-image")
                  , c = this.normalizeImageSource(b.prop("src"));
                this.container.find(".grade-picture .ccis-image").prop("src", c),
                this.onPreviewUndone()
            }
        }, {
            key: "onBeforeColorChanged",
            value: function(a) {
                a.preview || this.subscriptions[T1.constants.COLORPICKER_BEFORE_COLOR_CHANGED].unsubscribe()
            }
        }, {
            key: "onPreviewUndone",
            value: function() {
                T1.channels[this.getChannel()].publish(T1.constants.COLORPICKER_REQUEST_COLOR_PREVIEW, {
                    enabled: !1
                }),
                this.updateTitle(),
                this.updateIntroText(),
                this.updateFeatures()
            }
        }, {
            key: "onPreviewDone",
            value: function(a) {
                var b = a.target.find(".car-title")
                  , c = a.target.find(".grade-intro").text()
                  , d = a.target.find(".key-features-list li").map(function() {
                    return $.trim($(this).text())
                }).get();
                T1.channels[this.getChannel()].publish(T1.constants.COLORPICKER_REQUEST_COLOR_PREVIEW, {
                    container: this.container.find(".grade-picture"),
                    colorCode: this.retrieveImageColorCode(a.imageSource) || a.target.data("color-code"),
                    promotedColorGuid: a.target.data("colorGuid"),
                    promotedColorHex: a.target.data("colorValue") || "#666",
                    lightColor: a.target.data("light-color") || !1,
                    customClass: a.target.data("custom-class"),
                    enabled: !0
                }),
                this.updateTitle({
                    modelType: b.find(".model-type").text(),
                    gradeType: b.find(".grade-type").text(),
                    bodyType: b.find(".body-type").text()
                }),
                this.updateIntroText(c.length && c || {
                    visible: !1
                }),
                this.updateFeatures(d)
            }
        }, {
            key: "updateTitle",
            value: function(a) {
                var b = this.container.find("#pageTitle")
                  , c = this.container.find("#pageTitleClone");
                a ? (c.length || (c = b.clone().attr("id", "pageTitleClone")),
                c.find(".model-type").text(a.modelType),
                c.find(".grade-type").text(a.gradeType),
                c.find(".body-type").text(a.bodyType),
                b.addClass(T1.util.Constants.CLASS_HIDDEN).after(c)) : (c.remove(),
                b.removeClass(T1.util.Constants.CLASS_HIDDEN))
            }
        }, {
            key: "updateFeatures",
            value: function(a) {
                var b = this.container.find(i + " .key-features-list:not(.clone)")
                  , c = this.container.find(i + " .key-features-list.clone");
                a ? (c.length || (c = b.clone().addClass("clone")),
                c.empty().append($("<li>" + a.join("</li><li>") + "</li>")),
                b.addClass(T1.util.Constants.CLASS_HIDDEN).after(c)) : (c.remove(),
                b.removeClass(T1.util.Constants.CLASS_HIDDEN))
            }
        }, {
            key: "updateIntroText",
            value: function(a) {
                var b = this.container.find("#gradeIntro").or(".grade-header .intro:not(#gradeIntroClone)")
                  , c = this.container.find("#gradeIntroClone");
                b.length && (a ? (c.length || (c = b.clone().attr("id", "gradeIntroClone")),
                c.css("visibility", !1 === a.visible ? "hidden" : ""),
                "string" == typeof a && c.text(a),
                b.addClass(T1.util.Constants.CLASS_HIDDEN).after(c)) : (c.remove(),
                b.removeClass(T1.util.Constants.CLASS_HIDDEN)))
            }
        }, {
            key: "getChannel",
            value: function() {
                return this.container.data("grade-header-channel") || "global"
            }
        }, {
            key: "onEngineChanged",
            value: function(a) {
                var b = this.container.find(".select-engine");
                b.toggleClass("collapsed", !0),
                this.container.find(".toggle-container .collapse.engine-selector").collapse("hide"),
                "undefined" !== a.engineSpecs && (b.find(".type").html(a.engineSpecs.engineType),
                b.find(".fuel-used").html(a.engineSpecs.fuelUsed))
            }
        }, {
            key: "onBodyTypeChanged",
            value: function(b) {
                var c = a.$.safe("T1.personalization.getCurrentGradeConfig")()
                  , e = c.bodyTypeFilter;
                if (b.bodyTypeFilter !== e) {
                    var f = d.clone(c);
                    d.merge(f, {
                        gradeId: c.gradeId,
                        bodyTypeId: c.bodyTypeId,
                        engineEtw: c.engineEtw,
                        colourId: c.colourId,
                        carId: c.carId,
                        wheelBaseFilter: c.wheelBaseFilter,
                        bodyTypeFilter: b.bodyTypeFilter
                    }),
                    this.handleFiltersChanged(f, e, b, "bodyTypeFilter")
                }
            }
        }, {
            key: "onWheelBaseChanged",
            value: function(b) {
                var c = a.$.safe("T1.personalization.getCurrentGradeConfig")()
                  , e = c.wheelBaseFilter;
                if (b.wheelBaseFilter !== e) {
                    var f = d.clone(c);
                    d.merge(f, {
                        gradeId: c.gradeId,
                        bodyTypeId: c.bodyTypeId,
                        engineEtw: c.engineEtw,
                        colourId: c.colourId,
                        carId: c.carId,
                        wheelBaseFilter: b.wheelBaseFilter,
                        bodyTypeFilter: c.bodyTypeFilter
                    }),
                    this.handleFiltersChanged(f, e, b, "wheelBaseFilter")
                }
            }
        }, {
            key: "handleFiltersChanged",
            value: function(a, b, e, f) {
                if (!a.explicitSelection || c.gradeComboExists(a))
                    this.refreshWithNewGrade(a, f);
                else {
                    var g = c.getGradeUndefinedProperty(a)
                      , h = T1.labels && T1.labels.gradeFilters || T1.constants.GRADE_FILTERS
                      , i = {
                        msg: null,
                        btn: h.okBtnLabel
                    };
                    if ("wheelBaseFilter" === g) {
                        var j = e.wheelBaseFilter ? "bodyType" : "wheelBase"
                          , k = c.findMatch(a, f);
                        k ? (d.merge(a, k),
                        i.msg = h[j + "NotAvailableMsg"]) : i.msg = h[j + "AndEngineNotAvailableMsg"]
                    } else if ("carId" === g) {
                        var l = c.findMatch(a);
                        l ? (l.colours[a.colourId] || (i.msg = h.colourNotAvailableMsg),
                        d.merge(a, l)) : i.msg = h.engineNotAvailableMsg
                    } else
                        "colourId" === g && (i.msg = h.colourNotAvailableMsg);
                    if (i.msg) {
                        var m = this;
                        T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                            type: "box-alert-okcancel",
                            msg: i.msg,
                            styleClass: "grade-box-layout",
                            buttons: {
                                ok: {
                                    caption: i.btn,
                                    styleClass: "btn-functional",
                                    function: function() {
                                        m.refreshWithNewGrade(a, f),
                                        this.close()
                                    }
                                },
                                cancel: {
                                    function: function() {
                                        e.radioBtns.filter('[value="' + b + '"]').prop("checked", !0),
                                        this.close()
                                    }
                                }
                            }
                        })
                    } else
                        this.refreshWithNewGrade(a, f)
                }
            }
        }, {
            key: "refreshWithNewGrade",
            value: function(a, b) {
                window.location.assign($.safe("T1.personalization.generateGradeUrl")(a, {
                    filterPriority: b
                }))
            }
        }, {
            key: "initToggleContainer",
            value: function() {
                var a = this.container
                  , b = a.find(".toggle-container");
                b.find(".panel >.collapse:not(.in)").on("hide.bs.collapse", function(a) {
                    $(a.target).is(".in") && b.find(".panel >.collapse:not(.in)").collapse("show")
                });
                var c = b.find(".panel .collapse.engine-specs");
                b.on("hide.bs.collapse", c, function(a) {
                    if (a.stopPropagation(),
                    c.last().is(a.target)) {
                        var d = $("#grade-explore-navs")
                          , e = d.is(".scrollDown") ? $("#nav-secondary-level").height() : $("#navigation").height() + $("#nav-secondary-level").height();
                        $(window).scrollTo(b, T1.constants.ANIMATION_SPEED_SCROLL, {
                            offset: -e
                        })
                    }
                }),
                c.on("hidden.bs.collapse", function() {
                    $(this).removeAttr("style")
                })
            }
        }, {
            key: "breakpointHandler",
            value: function(a) {
                this.initCollapsibleHandler(a, this.previousBreakpoint),
                this.previousBreakpoint = a
            }
        }, {
            key: "initCollapsibleHandler",
            value: function(a, b) {
                this.setCollapseOpenWhenLG(a);
                var c = this.$gradeFocus.find(".grade-chooser")
                  , d = this.$gradeFocus.find(e).hasClass("in")
                  , f = this.$gradeFocus.find(".collapsible-instance")
                  , g = void 0
                  , h = void 0
                  , i = [];
                f.each(function(c) {
                    var e = $(f[c]).data("collapsible-option");
                    if ($(f[c]).collapse({
                        toggle: !1
                    }),
                    e && (g = e.breakpointDependent[a],
                    g && i.push(c),
                    h = e.breakpointDependent[b],
                    d)) {
                        var j = void 0;
                        g ? j = "hide" : h && (j = "show"),
                        j && $(f[c]).collapse(j)
                    }
                }),
                c.off("click", this.collapsingHandler).on("click", {
                    collapsibleElementsKeys: i,
                    $collapsibleElements: f
                }, this.collapsingHandler)
            }
        }, {
            key: "setCollapseOpenWhenLG",
            value: function(a) {
                if ("lg" === a) {
                    var b = this.$gradeFocus.find("#collapsedTarget");
                    b.hasClass("in") || (b.addClass("in").removeAttr("style"),
                    this.$gradeFocus.find(i + " a").removeClass("collapsed"))
                }
            }
        }, {
            key: "isTrackingEnabled",
            value: function() {
                return T1.statistics.isTrackingEnabled()
            }
        }]),
        l
    }(b)
}),
T1.defineInit("t1-controller-grade-header", ["T1-site-dependencies", "t1-component-grade-header", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".grade-header", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-key-specs", ["T1-site-dependencies", "t1-component-abstract", "t1-api-gradedata"], function(a, b, c) {
    "use strict";
    var d = a.$ || d;
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.attachEventHandlers(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "attachEventHandlers",
            value: function() {
                var a = this
                  , b = this
                  , c = this.container.find(".see-all");
                T1.channels[this.getChannel()].subscribe(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, function(b) {
                    return a.onEngineChanged(b)
                }),
                T1.channels[this.getChannel()].subscribe(T1.constants.COLORPICKER_COLOR_CHANGED, function(b) {
                    return a.onColourChanged(b)
                }),
                T1.channels.finance.subscribe(T1.constants.FINANCE_RATE_ERROR, function(b) {
                    return a.onFinanceError(b)
                }),
                c.off("click", this.handleSeeAllSpecsOverlayer).on("click", {
                    that: b
                }, this.handleSeeAllSpecsOverlayer)
            }
        }, {
            key: "getChannel",
            value: function() {
                return this.container.data("engine-channel") || "global"
            }
        }, {
            key: "onEngineChanged",
            value: function(a) {
                var b = d.safe("T1.personalization.getCurrentGradeConfig")()
                  , e = {
                    colourId: b.colourId,
                    carId: a.carId,
                    engineEtw: b.engineEtw,
                    wheelBaseFilter: b.wheelBaseFilter,
                    bodyTypeFilter: b.bodyTypeFilter
                };
                c.gradeComboExists(e) && (this.updateRates(a),
                this.updateKeySpecs(a),
                this.updatePrice(c.getTotalPrice(e)))
            }
        }, {
            key: "onColourChanged",
            value: function(a) {
                var b = d.safe("T1.personalization.getCurrentGradeConfig")()
                  , e = {
                    colourId: a.colorGuid,
                    carId: b.carId,
                    engineEtw: b.engineEtw,
                    wheelBaseFilter: b.wheelBaseFilter,
                    bodyTypeFilter: b.bodyTypeFilter
                };
                c.gradeComboExists(e) && (this.updatePrice(c.getTotalPrice(e)),
                this.updateRates({
                    tfsCode: c.getTfsCode(e)
                }))
            }
        }, {
            key: "updateRates",
            value: function(a) {
                if (a.tfsCode && (this.container.find("[data-tfs-code]").data("tfs-code", a.tfsCode),
                T1.data.finance.configs[a.tfsCode])) {
                    var b = {};
                    b[a.tfsCode] = T1.data.finance.configs[a.tfsCode],
                    d.safe("T1.financeRates.requestRates")(this.container, {
                        configs: b,
                        source: "Grade explore key specs"
                    })
                }
            }
        }, {
            key: "updateKeySpecs",
            value: function(a) {
                var b = this.container.find(".spec-col").filter("[data-spec-id]")
                  , c = void 0
                  , e = void 0
                  , f = void 0;
                b.each(function(g) {
                    c = d(b[g]),
                    e = d(c).data("spec-id"),
                    f = a.engineSpecs[e],
                    "cash-price" !== e && void 0 !== f && d(c).find(".value").html(f)
                })
            }
        }, {
            key: "handleSeeAllSpecsOverlayer",
            value: function(a) {
                var b = (a.data.that,
                d.safe("T1.personalization.getCurrentGradeConfig")())
                  , c = "/api/html/grade-specs"
                  , e = void 0;
                if (null === b && T1.settings.mock)
                    b = {
                        bodyTypeId: "7b77d85b-8f26-4645-82ac-22154a7d6293",
                        carId: "21e2bc0d-2ed7-4502-bb2d-1f73cc9c9dc8",
                        colourCode: "3p0",
                        colourId: "8ca65d30-b78e-4b37-9267-f4534c8a9626",
                        engineEtw: "1KR-10P--05M2WD",
                        gradeId: "1a930f65-6000-48ec-a3b0-0d16781e94a3",
                        model: "ag"
                    };
                else {
                    if (d.isEmptyObject(b))
                        return;
                    c = c + "/model=" + b.model + "%7Cgrade=" + b.gradeId + "%7CbodyType=" + b.bodyTypeId + "%7Ccolour=" + b.colourId + "%7Cetw=" + b.engineEtw
                }
                e = d.safe("T1.utilities.get.html")(c),
                e.done(function(a) {
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, {
                        html: d(a)
                    })
                }).fail(function() {
                    T1.utilities.isEnvironment.production || console.log("Could not retrieve data from " + c)
                })
            }
        }, {
            key: "getTemplateData",
            value: function(a) {
                return d.ajax({
                    type: "GET",
                    dataType: "html",
                    url: a
                })
            }
        }, {
            key: "updatePrice",
            value: function(a) {
                this.container.find('[data-spec-id="cash-price"] .value').text(window.globalize.format(a, "c"))
            }
        }, {
            key: "onFinanceError",
            value: function(a) {
                if (a = a || {},
                this.container.find(a.node).length) {
                    var b = a.node.parent(".spec-col");
                    b.length && b.remove()
                }
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-key-specs", ["T1-site-dependencies", "t1-component-key-specs", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".key-specs", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
}),
T1.defineInit("t1-controller-cskeywords", ["T1-site-dependencies", "t1-component-cskeywords", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".cs-keywords", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-cskeywords", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.keywords = c.container.find(".cs-keyword"),
            c.currentIndex = 0,
            c.attachEventListeners(),
            c.startInterval(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "setDirectionClass",
            value: function(a, b, c) {
                this.keywords.find(".btn").removeClass("animate"),
                this.container.removeClass(function(a, b) {
                    return (b.match(/(^|\s)direction-\S+/g) || []).join(" ")
                }),
                this.container.addClass("direction-" + a)
            }
        }, {
            key: "swipeCtas",
            value: function(a, b) {
                var c = a.find(".swipe-ctas");
                if (c.length) {
                    var d = a.find(".swipe-block")
                      , e = (a.height() - c.height()) / d.length;
                    c.css("padding-bottom", e * b + "px")
                }
            }
        }, {
            key: "attachEventListeners",
            value: function() {
                var a = this;
                $(window).one("mousemove", function(b) {
                    a.InitialmousePositionInContainer(a.container, b) && a.stopInterval()
                }),
                this.attachHoverEvents()
            }
        }, {
            key: "attachHoverEvents",
            value: function() {
                var a = this;
                this.container.on("mouseenter", function() {
                    a.stopInterval()
                }),
                this.container.on("mouseleave", function() {
                    a.startInterval()
                }),
                this.keywords.find(".btn").on("mouseenter touchend", function(b) {
                    a.keywordBtnHoverHandler(b)
                })
            }
        }, {
            key: "InitialmousePositionInContainer",
            value: function(a, b) {
                var c = {
                    x: b.clientX,
                    y: b.clientY
                }
                  , d = a.offset()
                  , e = {
                    x: d.left,
                    y: d.top,
                    width: a.width(),
                    height: a.height()
                }
                  , f = c.x > e.x && c.x < e.x + e.width
                  , g = c.y > e.y && c.y < e.y + e.height;
                return f && g
            }
        }, {
            key: "startInterval",
            value: function() {
                var a = this;
                this.intervalID || (this.stopInterval(),
                this.intervalID = setInterval(function() {
                    a.intervalHandler()
                }, 3e3))
            }
        }, {
            key: "stopInterval",
            value: function() {
                this.intervalID && (window.clearInterval(this.intervalID),
                this.intervalID = null)
            }
        }, {
            key: "intervalHandler",
            value: function() {
                this.currentIndex = this.getNextKeywordIndex(this.currentIndex),
                this.activateKeyword(this.currentIndex)
            }
        }, {
            key: "activateKeyword",
            value: function(a) {
                var b = this.keywords.find(".btn")
                  , c = b.filter(T1.constants.CLASS_ACTIVE.toSelector())
                  , d = $(b[a]);
                this.setDirectionClass(a > c.parent().index() ? "up" : "down", c, d),
                b.removeClass(T1.constants.CLASS_ACTIVE),
                d.addClass(T1.constants.CLASS_ACTIVE),
                this.container.find(".cs-background").removeClass(T1.constants.CLASS_ACTIVE).eq(a).addClass(T1.constants.CLASS_ACTIVE)
            }
        }, {
            key: "keywordBtnHoverHandler",
            value: function(a) {
                var b = this.keywords.find(".btn")
                  , c = b.filter(T1.constants.CLASS_ACTIVE.toSelector())
                  , d = $(a.target);
                this.setDirectionClass(d.parent().index() > c.parent().index() ? "up" : "down", c, d),
                b.removeClass(T1.constants.CLASS_ACTIVE),
                this.currentIndex = d.data("index"),
                d.addClass(T1.constants.CLASS_ACTIVE),
                this.container.find(".cs-background").removeClass(T1.constants.CLASS_ACTIVE).eq(this.currentIndex).addClass(T1.constants.CLASS_ACTIVE)
            }
        }, {
            key: "getNextKeywordIndex",
            value: function(a) {
                return a + 1 >= this.keywords.length ? 0 : a + 1
            }
        }]),
        b
    }(b)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-warranty", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = ".extendable.collapse";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.gradeNavigation = $("#grade-explore-navs"),
            c.previousBreakpointMode = $.safe("T1.breakpoints.currentMode")(),
            c.breakpointChangeHandler(),
            c.attachEventHandlers(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "attachEventHandlers",
            value: function() {
                var a = this;
                T1.channels.global.subscribe(T1.constants.ON_BREAKPOINT_CHANGE, function(b) {
                    return a.breakpointChangeHandler(b)
                })
            }
        }, {
            key: "collapseCardsHandler",
            value: function(a) {
                var b = a.data.that
                  , d = a.target
                  , e = a.data.that.container
                  , f = e.find(c)
                  , g = $(d).closest(".card")
                  , h = a.data.currentBreakpointMode;
                g.find(".show-more-btn:not(.collapsed)").addClass("collapsed"),
                f.last().is(d) && h === T1.constants.BREAKPOINTS_MODE.DESKTOP && b.scrollToTarget(e),
                h !== T1.constants.BREAKPOINTS_MODE.MOBILE && h !== T1.constants.BREAKPOINTS_MODE.TABLET || b.scrollToTarget(g)
            }
        }, {
            key: "unCollapseCardsHandler",
            value: function(a) {
                var b = a.target;
                $(b).closest(".card").find(".show-more-btn.collapsed").removeClass("collapsed")
            }
        }, {
            key: "initCollapsibleHandler",
            value: function(a, b) {
                var d = this
                  , e = this.container.find(c)
                  , f = void 0;
                if (e.off(T1.constants.BOOTSTRAP_COLLAPSE_SHOW, this.unCollapseCardsHandler).on(T1.constants.BOOTSTRAP_COLLAPSE_SHOW, this.unCollapseCardsHandler),
                e.off(T1.constants.BOOTSTRAP_COLLAPSE_HIDE, this.collapseCardsHandler).on(T1.constants.BOOTSTRAP_COLLAPSE_HIDE, {
                    currentBreakpointMode: a,
                    that: d
                }, this.collapseCardsHandler),
                (b === T1.constants.BREAKPOINTS_MODE.MOBILE || b === T1.constants.BREAKPOINTS_MODE.TABLET) && a === T1.constants.BREAKPOINTS_MODE.DESKTOP) {
                    var g = [];
                    e.each(function(a, b) {
                        $(e[a]).hasClass("in") && g.push(b)
                    }),
                    g.length > 0 && (f = e.not(".in"),
                    f.closest(".card").find(".show-more-btn").removeClass("collapsed"),
                    f.addClass("in").removeAttr("style"))
                }
            }
        }, {
            key: "scrollToTarget",
            value: function(a) {
                var b = this.gradeNavigation.is(".scrollDown") ? $("#nav-secondary-level").height() : $("#navigation").height() + $("#nav-secondary-level").height();
                $(window).scrollTo(a, T1.constants.ANIMATION_SPEED_SCROLL, {
                    offset: -b
                })
            }
        }, {
            key: "breakpointChangeHandler",
            value: function() {
                var a = $.safe("T1.breakpoints.currentMode")();
                this.initCollapsibleHandler(a, this.previousBreakpointMode),
                this.previousBreakpointMode = a
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-warranty", ["T1-site-dependencies", "t1-component-warranty", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".warranty", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-see-all-specs", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = "collapsed";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return c.attachEventHandlers(),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "trackCategory",
            value: function(a) {
                var b = $(a.currentTarget)
                  , c = b.hasClass("collapsed") ? "show" : "hide"
                  , d = b.find(".sub-category-name").text();
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: b,
                    extraData: {
                        event: {
                            action: c + "-specs",
                            value: d
                        }
                    }
                })
            }
        }, {
            key: "attachEventHandlers",
            value: function() {
                var a = this.container.find(".expand-collapse")
                  , b = this.container.find("li[data-toggle]");
                a.on("click", this.expandCollapsibleElements),
                b.off("click", this.trackCategory).on("click", this.trackCategory)
            }
        }, {
            key: "expandCollapsibleElements",
            value: function() {
                var a = $(this).closest(".collapse-group")
                  , b = a.find(".collapse")
                  , d = $(this).data("panels-expanded")
                  , e = void 0;
                d ? (e = "collapse",
                b.collapse("hide"),
                b.each(function(a) {
                    $(b[a]).closest(".sub-category-item").addClass(c)
                }),
                $(this).addClass(c),
                $(this).data("panels-expanded", !1)) : (e = "expand",
                b.collapse("show"),
                b.each(function(a) {
                    $(b[a]).closest("." + c).removeClass(c)
                }),
                $(this).removeClass(c),
                $(this).data("panels-expanded", !0)),
                T1.channels.statistics.publishAsync(T1.constants.STATS_TRACK, {
                    node: $(this),
                    extraData: {
                        event: {
                            action: "click_function",
                            value: e + "-all-specifications"
                        }
                    }
                })
            }
        }]),
        b
    }(b)
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}()
  , _get = function a(b, c, d) {
    null === b && (b = Function.prototype);
    var e = Object.getOwnPropertyDescriptor(b, c);
    if (void 0 === e) {
        var f = Object.getPrototypeOf(b);
        return null === f ? void 0 : a(f, c, d)
    }
    if ("value"in e)
        return e.value;
    var g = e.get;
    if (void 0 !== g)
        return g.call(d)
};
T1.defineInit("t1-controller-see-all-specs", ["T1-site-dependencies", "t1-component-see-all-specs", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".see-all-specs", {
                    initOnMaterialBoxOpened: !0
                }));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        _createClass(c, [{
            key: "init",
            value: function() {
                _get(c.prototype.__proto__ || Object.getPrototypeOf(c.prototype), "init", this).call(this)
            }
        }]),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-gradeInsurance", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var c = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return T1.channels.global.subscribe(T1.constants.ENGINESELECTOR_ENGINE_CHANGED, function(a) {
                c.updateInsurancePrice(a.tfsCode)
            }),
            c
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "updateInsurancePrice",
            value: function(a) {
                this.updateTfsCode(a);
                var b = {};
                b[a] = T1.data.finance.configs[a],
                T1.financeRates.requestRates(this.container, {
                    configs: b
                })
            }
        }, {
            key: "updateTfsCode",
            value: function(a) {
                this.container.find("[data-tfs-code]").attr("data-tfs-code", a)
            }
        }]),
        b
    }(b)
}),
T1.defineInit("t1-controller-gradeInsurance", ["T1-site-dependencies", "t1-component-gradeInsurance", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".grade-explore .insurance", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
}),
T1.defineInit("t1-controller-quicklinks", ["T1-site-dependencies", "t1-component-quicklinks", "t1-controller-abstract"], function(a, b, c) {
    "use strict";
    return new (function(a) {
        function c() {
            var a;
            if (_classCallCheck(this, c),
            !c.instance) {
                var d = _possibleConstructorReturn(this, (c.__proto__ || Object.getPrototypeOf(c)).call(this, b, ".quick-links", {}));
                c.instance = d
            }
            return a = c.instance,
            _possibleConstructorReturn(d, a)
        }
        return _inherits(c, a),
        c
    }(c))
});
var _createClass = function() {
    function a(a, b) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c];
            d.enumerable = d.enumerable || !1,
            d.configurable = !0,
            "value"in d && (d.writable = !0),
            Object.defineProperty(a, d.key, d)
        }
    }
    return function(b, c, d) {
        return c && a(b.prototype, c),
        d && a(b, d),
        b
    }
}();
T1.define("t1-component-quicklinks", ["T1-site-dependencies", "t1-component-abstract"], function(a, b) {
    "use strict";
    var c = ".quick-links-item"
      , d = ".quick-links-focus-panel"
      , e = "hidden"
      , f = "hiding"
      , g = "next-panel"
      , h = "order";
    return function(a) {
        function b(a) {
            _classCallCheck(this, b);
            var e = _possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));
            return e.quicklinkItems = a.find(c),
            e.quicklinkFocusPanels = a.find(d),
            e.attachEventListeners(),
            e
        }
        return _inherits(b, a),
        _createClass(b, [{
            key: "attachEventListeners",
            value: function() {
                var a = this;
                $(".quick-links .intro-panel .btn-action-primary").on("click", function(b) {
                    a.introPanelBtnClick(b)
                }),
                this.quicklinkItems.find(".chevron-right-to-btn-simple.action-inpage").on("click", function(b) {
                    a.quicklinksItemClick(b)
                }),
                this.quicklinkFocusPanels.on("transitionend", function(b) {
                    a.panelTransitionEnd(b)
                })
            }
        }, {
            key: "introPanelBtnClick",
            value: function(a) {
                if (a.target.dataset.order) {
                    a.preventDefault();
                    var b = $(a.target)
                      , c = b.closest(d)
                      , e = this.quicklinkFocusPanels.filter("[data-" + h + "=" + b.attr("data-" + h) + "]");
                    e.length > 0 && this.switchVisiblePanel(c, e)
                }
            }
        }, {
            key: "quicklinksItemClick",
            value: function(a) {
                a.preventDefault();
                var b = $(a.target)
                  , d = this.quicklinkFocusPanels.filter(":not(." + e + ")")
                  , f = this.quicklinkFocusPanels.filter("[data-order=" + b.closest(c).attr("data-order") + "]");
                this.switchVisiblePanel(d, f),
                this.switchFocusItem(this.quicklinkItems.filter("." + e), b.closest(c))
            }
        }, {
            key: "panelTransitionEnd",
            value: function(a) {
                var b = $(a.target);
                if (b.hasClass(f)) {
                    b.addClass(e);
                    var c = this.quicklinkFocusPanels.filter("." + g);
                    c.removeClass(e + " " + g),
                    this.initPanelComponents(c),
                    this.container.offset().top < window.pageYOffset && this.scrollIntoView(),
                    setTimeout(function() {
                        c.removeClass(f)
                    }, 0)
                }
            }
        }, {
            key: "switchVisiblePanel",
            value: function(a, b) {
                b.addClass(g),
                a.addClass(f)
            }
        }, {
            key: "initPanelComponents",
            value: function(a) {
                a.find(".overflowable-row").each(function(a, b) {
                    T1.channels.global.publish(T1.constants.OVERFLOWABLE_ROW_OVERFLOWING_CHECK, $(b))
                })
            }
        }, {
            key: "setItemOrder",
            value: function(a) {
                a.css(h, a.data(h))
            }
        }, {
            key: "switchItemOrder",
            value: function(a, b) {
                var c = a.data(h);
                a.data(h, b.data(h)),
                b.data(h, c),
                this.setItemOrder(a),
                this.setItemOrder(b)
            }
        }, {
            key: "switchFocusItem",
            value: function(a, b) {
                b.addClass(e),
                a.removeClass(e),
                this.switchItemOrder(a, b)
            }
        }, {
            key: "scrollIntoView",
            value: function() {
                $(window).scrollTo(this.container, T1.constants.ANIMATION_SPEED_SCROLL, {
                    offset: -($("#navigation").height() + $("#nav-secondary-level").height())
                })
            }
        }]),
        b
    }(b)
});
var T1 = T1 || {};
T1.defineInit("t1-controller-materialBox", ["T1-site-dependencies", "t1-component-materialBox"], function(a, b) {
    "use strict";
    var c = a._
      , d = {
        instances: [],
        triggers: [],
        init: function() {
            d.triggers = $(".trigger-box"),
            T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPEN, d.triggerMaterialBox),
            T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSE, d.closeMaterialBox),
            T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_REMOVE, d.removeMaterialBox),
            T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_CLOSED, d.onMaterialBoxClosed),
            $(document).off("keydown", d.handleKeyPress).on("keydown", d.handleKeyPress),
            d.triggers.on("click", d.triggerMaterialBox)
        },
        handleKeyPress: function(a) {
            d.instances.length && a.keyCode === T1.constants.KEYCODE_ESC && d.closeMaterialBox({}, !0)
        },
        onMaterialBoxClosed: function(a) {
            a.content && d.html.placeHolder.rollBack(a.content.find(".content-container > *").or(a.content))
        },
        triggerMaterialBox: function(a) {
            if (a || (a = {}),
            a.preventDefault && a.preventDefault(),
            a.triggerElement = $(a.target),
            $.extend(!0, a, d.getExtendOptions(a.triggerElement)),
            a.url = d.getOptionsUrl(a),
            a.whiteListed = !0,
            a.url)
                if (!T1.utilities || T1.utilities.whitelist.test(a.url)) {
                    if ("https:" === window.location.protocol && (a.url = a.url.replace(/^http:/, "")),
                    $.safe("T1.utilities.youtube.isYoutubeUrl")(a.url)) {
                        var b = T1.utilities.youtube.getYouTubeId(a.url);
                        $.ajax({
                            url: (T1.settings.mock ? "https://t1-new-dev-fr.herokuapp.com" : "") + "/api/verify/youtube/" + b,
                            async: !1
                        }).done(function(b) {
                            b.whitelist || (a.errorMessage = T1.labels.iframeYoutubeRejectMsg || "Youtube channel not supported",
                            a.whiteListed = !1)
                        }).fail(function() {
                            a.errorMessage = T1.labels.iframeYoutubeRejectMsg || "Youtube channel not supported",
                            a.whiteListed = !1
                        })
                    }
                } else
                    a.errorMessage = T1.labels.iframeDomainWhiteListRejectMsg || "Domain not supported",
                    a.whiteListed = !1;
            d.getContent(a)
        },
        getOptionsUrl: function(a) {
            var b = a.url || a.youtubeUrl;
            return !b && a.options && a.options.length && a.options[0] && (b = a.options[0]),
            b
        },
        showToastWhenLoaded: function(a) {
            var b = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function() {
                b.unsubscribe(),
                T1.channels.dialog.publish(T1.constants.TOAST_CUSTOM, {
                    customContainer: $(".material-box").last(),
                    customText: a,
                    timeout: 5e3
                })
            })
        },
        getContent: function(a) {
            if (!1 === a.whiteListed) {
                var c = new b(null,a);
                d.instances.push(c),
                d.showToastWhenLoaded(a.errorMessage || T1.labels.iframeDomainWhiteListRejectMsg || "Domain not supported"),
                c.show()
            } else
                d.html.get(a).done(function(c, e) {
                    a.response = e;
                    var f = $(".menu-item-level-1.active:first")
                      , g = f.find("a:first");
                    g.length && g.click();
                    var h = new b(c,a);
                    d.instances.push(h),
                    T1.channels.global.subscribe(T1.constants.ON_WIN_RESIZE, function() {
                        d.instances.forEach(function(a) {
                            a.fitImage({})
                        })
                    }),
                    h.show(),
                    h.container.find(".btn-close, .btn-close-alt").on("click", d.closeMaterialBox.bind(h, a, !1, !0))
                }).fail(function(a) {
                    d.closeMaterialBox(),
                    console.log("MATERIALBOX: Error getting data - " + a)
                })
        },
        getExtendOptions: function(a) {
            var b = {};
            if (a)
                for (var c in a.data())
                    c.toLowerCase().startsWith("actionbox") && (b[c.substr(9).toLowerCase()] = a.data(c));
            return b
        },
        html: {
            get: function(a) {
                if (a || (a = {}),
                !a.type && a.selector && (a.type = "box-selector"),
                a.dfrGetHtml = $.Deferred(),
                a.html5id && (a.url = "/api/html/page" + location.pathname + "?id=" + a.html5id,
                a.hashAction = !0),
                void 0 !== a.html) {
                    if (a.forceTopBar) {
                        var b = $("<div></div>");
                        return b.append(d.html.alert.getTopBarNode(a)),
                        b.append($(a.html)),
                        a.dfrGetHtml.resolve(b, a.html)
                    }
                    return a.dfrGetHtml.resolve(a.html)
                }
                var c = a.type.replace(/^\s*box-/, "").replace(/-/g, ".")
                  , e = Object.resolve(c, d.html);
                return e ? e(a) : a.dfrGetHtml.reject("No function found to fetch data of type " + c)
            },
            ajax: function(a) {
                var b = a.url || a.triggerElement && a.triggerElement.length && a.triggerElement.attr("href");
                return b ? (a.url || (a.url = b),
                $.ajax({
                    url: b
                }).done(function(b) {
                    var c = $("<div></div>");
                    c.append($(b));
                    var e = c.find("#pagecontent");
                    e && e.length ? a.dfrGetHtml.resolve((a.title ? d.html.alert.getTopBarNode({
                        title: a.title
                    })[0].outerHTML : "") + e[0].innerHTML, b) : a.dfrGetHtml.reject()
                }).fail(a.dfrGetHtml.reject),
                a.dfrGetHtml) : a.dfrGetHtml.reject("Url not provided")
            },
            iframe: function(a) {
                var b = a.url || a.target && a.target.length && a.target.attr("href")
                  , c = $("<iframe></iframe>");
                return a && "fullscreen" === a.size && (c.attr("allowfullscreen", !0),
                c.css({
                    height: "100%",
                    width: "100%"
                })),
                b ? (a.url || (a.url = b),
                c.attr("src", b),
                a.width && c.attr("width", a.width + "px"),
                a.height && c.attr("height", a.height + "px"),
                a.dfrGetHtml.resolve(c[0].outerHTML)) : a.dfrGetHtml.reject("Url not provided")
            },
            video: function(a) {
                a.el && void 0 !== T1.statistics && (a.video.tagging = T1.statistics.getAttributes($(a.el), {
                    ancestor: !0
                }));
                var b = $('<div class="materialbox-video-target"></div>');
                return a.video.target = b,
                T1.channels.media.publish(T1.constants.VIDEO_CREATEPLAYER, a.video),
                a.dfrGetHtml.resolve(b[0])
            },
            youtube: function(a) {
                var b = decodeURIComponent(a.youtubeUrl);
                b = b.replace(/^(http)(s)*(:\/\/)/gi, "//");
                var c = $("<iframe></iframe>", {
                    src: b,
                    class: "youtube-video"
                });
                return a.dfrGetHtml.resolve(c)
            },
            selector: function(a) {
                if (a.selector) {
                    var b = $(a.selector);
                    return b.length ? (d.html.placeHolder.rollOn(b),
                    a.dfrGetHtml.resolve(b)) : a.dfrGetHtml.reject("Selector not found")
                }
                return a.dfrGetHtml.reject("Selector not provided")
            },
            placeHolder: {
                rollOn: function(a) {
                    if (a && a.length) {
                        var b = $('<figure class="material-placeholder"/>');
                        a.before(b),
                        a.data({
                            placeholder: b
                        })
                    }
                },
                rollBack: function(a) {
                    if (a && a instanceof jQuery) {
                        var b = a.length && a.data()
                          , c = b && b.placeholder;
                        c && c.replaceWith(a),
                        T1.channels.dialog.publish(T1.constants.MATERIALBOX_ROLLBACK_COMPLETE, a)
                    }
                }
            },
            alert: {
                yesno: function(a) {
                    var b = a.function || a.fn || a.callback;
                    return a.buttons || (a.buttons = {
                        yes: "function" == typeof b && b("YES") || !0,
                        no: "function" == typeof b && b("NO") || !0
                    }),
                    d.html.alert.any(a)
                },
                okcancel: function(a) {
                    var b = a.function || a.fn || a.callback;
                    return a.buttons || (a.buttons = {
                        ok: "function" == typeof b && b("OK") || !0,
                        cancel: "function" == typeof b && b("CANCEL") || !0
                    }),
                    d.html.alert.any(a)
                },
                ok: function(a) {
                    var b = a.function || a.fn || a.callback;
                    return a.buttons || (a.buttons = {
                        ok: "function" == typeof b && b("OK") || !0
                    }),
                    d.html.alert.any(a)
                },
                none: function(a) {
                    return a.buttons = {},
                    d.html.alert.any(a)
                },
                any: function(a) {
                    var b = $("<div></div>");
                    a.styleClass = a.styleClass + " dialog",
                    a.onClosed = function() {
                        this.container.removeClass("dialog")
                    }
                    ,
                    b.append(d.html.alert.getTopBarNode(a)),
                    b.append(d.html.alert.getContentNode(a)),
                    a.buttons || (a.buttons = {
                        close: !0
                    });
                    var c = $("<div></div>").addClass("buttons");
                    b.append(c);
                    for (var e in a.buttons) {
                        var f = d.html.buttons[e] || d.html.buttons.standard
                          , g = "btn-" + e + "-" + (new Date).getTime();
                        "object" != typeof a.buttons[e] && (a.buttons[e] = {
                            callback: a.buttons[e]
                        }),
                        a.buttons[e].id = g,
                        c.append(f(a.buttons[e], a, e))
                    }
                    return a.dfrGetHtml.resolve(b.children())
                },
                getTopBarNode: function(a) {
                    var b = $('<div class="top-bar"></div>')
                      , c = $("<header></header>");
                    return a.title && c.html("<h2>" + a.title + "</h2>"),
                    b.append(c),
                    b
                },
                getContentNode: function(a) {
                    var b = $('<div class="content container-fluid"></div>')
                      , c = $('<div class="row"></div>');
                    if (a.msg || a.content || a.selector) {
                        var e = a.icon ? "col-xs-10" : "col-xs-12";
                        a.selector && d.html.placeHolder.rollOn($(a.selector)),
                        c.append($('<div class="' + e + ' content-container"></div>').html(a.msg || a.content || $(a.selector))),
                        a.icon && c.append($('<div class="col-xs-2 icon-container"></div>').html('<i class="icon-svg ' + a.icon + '"></i>'))
                    }
                    return b.append(c),
                    b
                }
            },
            buttons: {
                ok: function(a, b) {
                    return d.html.buttons.standard(a, b, "ok")
                },
                cancel: function(a, b) {
                    return d.html.buttons.standard(a, b, T1 && T1.labels && T1.labels.cancel || "cancel")
                },
                close: function(a, b) {
                    return d.html.buttons.standard(a, b)
                },
                yes: function(a, b) {
                    return d.html.buttons.standard(a, b, T1 && T1.labels && T1.labels.yes || "yes")
                },
                no: function(a, b) {
                    return d.html.buttons.standard(a, b, T1 && T1.labels && T1.labels.no || "no")
                },
                standard: function(a, b, c) {
                    return $("<a" + (a.id ? ' id="' + a.id + '"' : "") + ' class="btn ' + (a.styleClass || a.styleclass || "btn-simple") + '"></a>').html(a.caption || c || "")
                }
            }
        },
        closeMaterialBox: function(a, e, f) {
            for (var g, h, i = 0; arguments.length > i; i++)
                arguments[i]instanceof jQuery.Event && (g = arguments[i],
                g.preventDefault());
            a = !arguments[0] || arguments[0]instanceof jQuery.Event ? {} : arguments[0],
            e = !0 === e,
            f = !0 === f,
            a instanceof b ? a.close(e, f) : a.closeAllMaterialBoxes ? d.closeAllMaterialBoxes() : a.hash && a.hash.hash ? h = c.find(d.instances, {
                hash: a.hash.hash
            }) : a.box instanceof b ? h = a.box : d.instances.length && (h = d.instances[d.instances.length - 1]),
            h instanceof b && d.closeMaterialBox(h, e, f)
        },
        closeAllMaterialBoxes: function() {
            for (; d.instances.length; ) {
                var a = d.instances[d.instances.length - 1];
                a instanceof b && d.closeMaterialBox(a)
            }
        },
        removeMaterialBox: function(a) {
            var b = c.find(d.instances, {
                id: a
            });
            b && !b.active && c.remove(d.instances, b)
        },
        getLastUrl: function() {
            if (!d.instances.length)
                return null;
            for (var a = d.instances.length - 1; a >= 0; a--)
                if (d.instances[a].url)
                    return d.instances[a].url;
            return null
        }
    };
    return {
        init: d.init,
        getLastUrl: d.getLastUrl
    }
});
var T1 = T1 || {};
require(["T1-site-dependencies"], function(a) {
    T1.hash = function() {
        "use strict";
        var a = {
            lastHash: "",
            lastHashes: [],
            defaultHash: "",
            currentHashParams: null,
            hashActions: {
                AJAX: "ajax",
                BOX_AJAX: "box-ajax",
                BOX_IFRAME: "box-iframe",
                BOX_SELECTOR: "box-selector",
                DROP: "drop",
                OVERLAY_AJAX: "overlay-ajax",
                OVERLAY_IFRAME: "overlay-iframe",
                CAROUSEL_STOP: "stop_carousel",
                GALLERY: "gallery",
                IFRAME: "iframe",
                IFRAME_INLINE: "iframe-inline",
                MOBILE: "mobile",
                PUBLISH: "publish",
                SPOTLIGHT: "spotlight",
                VIDEO: "video",
                YOUTUBE: "youtube",
                CARCONFIG: "carconfig",
                SSO: "sso",
                GRMN: "grmn",
                CONNECTME: "connectme",
                CUSTOMER_PORTAL: "my-toyota",
                CUSTOMER_PORTAL2: "mytoyota",
                CUSTOMER_PORTAL3: "cp"
            },
            init: function() {
                $(window).on("hashchange", a.hashChanged),
                T1.channels.hash.subscribe(T1.constants.HASH_ADD, a.addHash),
                T1.channels.hash.subscribe(T1.constants.HASH_CHANGE, a.changeHash),
                T1.channels.hash.subscribe(T1.constants.HASH_REMOVE, a.removeHash),
                T1.channels.hash.subscribe(T1.constants.HASH_REPLACE, a.replaceHash),
                T1.channels.hash.subscribe(T1.constants.HASH_REWRITE, a.rewriteHash)
            },
            initDesktop: function() {
                -1 !== location.href.indexOf("#") && a.hashChanged()
            },
            initMobile: function() {
                location.href.indexOf("#") > -1 && a.hashChanged()
            },
            parseOptions: function(a, b) {
                var c = {};
                if (a && a.constructor === Array && a.length > 0) {
                    for (var d = !0, e = 0; e < a.length; e++) {
                        var f = a[e].split(b);
                        f.length > 1 && (c[f[0]] = f[1],
                        d = !1)
                    }
                    d && (c = null)
                }
                return c
            },
            getHash: function() {
                return -1 === location.href.indexOf("#") ? "" : location.href.replace(/.*#/, "").replace(/\?.*/, "")
            },
            getLastHash: function() {
                var b = a.getAllHashActions();
                return b.length > 0 ? b[b.length - 1].hash : ""
            },
            getAllHashActions: function() {
                var b = a.getHash()
                  , c = []
                  , d = b.split(/\/\+|\/-/);
                for (var e in d)
                    d.hasOwnProperty(e) && c.push({
                        hash: d[e],
                        async: b.indexOf(d[e] + "/-") > -1
                    });
                return c
            },
            hashChanged: function() {
                for (var b, c, d, e = null, f = $.Deferred().resolve(), g = a.getAllHashActions(), h = [], i = a.lastHashes.slice(), j = 0; j < g.length; j++) {
                    c = g[j],
                    b = !1;
                    for (var k = 0; k < a.lastHashes.length; k++)
                        d = a.lastHashes[k],
                        d.hash.toLowerCase() === c.hash.toLowerCase() && (b = !0,
                        delete i[k]);
                    b || h.push(c)
                }
                for (var l = "", m = 0; m < i.length; m++)
                    (l = i[m]) && (T1.channels.dialog.publish(T1.constants.PAGEOVERLAYER_CLOSE, {
                        hash: l
                    }),
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_CLOSE, {
                        hash: l
                    }));
                for (m = 0; m < h.length; m++)
                    if (e = h[m],
                    "#" !== e.hash && "" !== e.hash) {
                        var n = e.hash.split("/");
                        "" !== n[0] && n.unshift("");
                        var o = n.length > 1 ? n[1].toLowerCase() : ""
                          , p = n.length > 2 ? n.splice(2, n.length - 1) : "";
                        f = f.then(a.runHash(o, p, e.async))
                    }
                "" !== a.defaultHash && 1 === g.length && "" === g[0].hash && a.changeHash(a.defaultHash),
                a.lastHashes = g,
                T1.channels.hash.publishAsync(T1.constants.HASH_CHANGED, {
                    hashes: g,
                    newHashes: h
                })
            },
            materialBoxHandler: function(b, c, d) {
                require(["t1-component-materialBox"], function() {
                    var e = a.getParamsObject(c, 0)
                      , f = T1.channels.dialog.subscribe(T1.constants.MATERIALBOX_OPENED, function() {
                        f.unsubscribe(),
                        d.resolve(b)
                    });
                    e.hashAction = b.toLowerCase(),
                    e.type = e.hashAction,
                    T1.channels.dialog.publish(T1.constants.MATERIALBOX_OPEN, e)
                })
            },
            runHash: function(b, c, d) {
                return function() {
                    a.currentHashParams = null;
                    var f = $.Deferred();
                    d && f.resolve(b);
                    try {
                        switch (b) {
                        case a.hashActions.PUBLISH:
                            var g = a.getParamsObject(c, 1)
                              , h = null;
                            g.options.length ? h = g.options : (h = g,
                            delete h.options),
                            T1.channels.publish(T1.constants[c[0].toUpperCase()] || c[0], h),
                            f.resolve(b);
                            break;
                        case a.hashActions.AJAX:
                        case a.hashActions.IFRAME:
                            if (c.length)
                                if ($.safe("T1.utilities.youtube.isYoutubeUrl")(decodeURIComponent(c[0]))) {
                                    var i = a.runHash("youtube", c);
                                    i()
                                } else
                                    b = "box-" + b,
                                    c[0] = "url=" + encodeURIComponent(c[0]),
                                    c[1] = "size=fullscreen",
                                    a.materialBoxHandler(b, c, f);
                            break;
                        case a.hashActions.BOX_AJAX:
                        case a.hashActions.BOX_IFRAME:
                        case a.hashActions.BOX_SELECTOR:
                        case a.hashActions.OVERLAY_AJAX:
                        case a.hashActions.OVERLAY_IFRAME:
                            var j = c && c.length && decodeURIComponent(c[0]);
                            if ($.safe("T1.utilities.youtube.isYoutubeUrl")(j)) {
                                var i = a.runHash("youtube", c);
                                i()
                            } else
                                a.materialBoxHandler(b, c, f);
                            break;
                        case a.hashActions.IFRAME_INLINE:
                            postal.publishAsync({
                                channel: T1.channels.mytoyota.channel,
                                topic: T1.constants.IFRAME_INLINE_SHOW,
                                data: {
                                    url: decodeURIComponent(c[0])
                                }
                            });
                            break;
                        case a.hashActions.GALLERY:
                            T1.channels.media.publishAsync(T1.constants.GALLERY_ITEM_CLICK, {
                                el: $("#" + c[0]),
                                index: parseInt(c[1], 10)
                            }),
                            f.resolve(b);
                            break;
                        case a.hashActions.SPOTLIGHT:
                            var k = $("#" + c[0]);
                            k.addClass("gallery"),
                            T1.channels.media.publishAsync(T1.constants.GALLERY_ITEM_CLICK, {
                                el: k,
                                index: parseInt(c[1], 10)
                            }),
                            f.resolve(b);
                            break;
                        case a.hashActions.YOUTUBE:
                            var l = {};
                            c.length > 0 && (l = {
                                youtubeUrl: decodeURIComponent(c[0]),
                                noScroll: !0
                            },
                            $.safe("T1.utilities.youtube.isYoutubeUrl")(l.youtubeUrl) || (l.youtubeUrl = $.safe("T1.utilities.youtube.getEmbedUrl")(l.youtubeUrl))),
                            T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                                type: "youtube",
                                youtubeUrl: l.youtubeUrl,
                                styleClass: "video no-scroll",
                                size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                                hashAction: b
                            }),
                            f.resolve(b);
                            break;
                        case a.hashActions.VIDEO:
                            var m = $("#" + c[0])
                              , n = void 0 !== m.data("autoloop") ? m.data("autoloop") : T1.settings.autoLoop || !1
                              , o = {
                                autoplay: "true",
                                autoloop: n,
                                srcMp4: m.data("video-mp4"),
                                srcWebm: m.data("video-webm"),
                                srcOgv: m.data("video-ogv"),
                                srcFlv: m.data("video-flv"),
                                poster: m.data("poster"),
                                srcVtt: m.data("video-vtt"),
                                srcVttLang: m.data("video-vttlang"),
                                isOverlayer: !0
                            };
                            T1.channels.dialog.publishAsync(T1.constants.MATERIALBOX_OPEN, {
                                type: "video",
                                video: o,
                                el: m,
                                noScroll: !0,
                                fitImages: !0,
                                styleClass: "video no-scroll",
                                size: T1.constants.MATERIALBOX_SIZE_FULLSCREEN,
                                hashAction: "video",
                                hideContent: !0
                            }),
                            f.resolve(b);
                            break;
                        case a.hashActions.MOBILE:
                            var p = {
                                ids: c[0] ? c[0].split("%7C") : null
                            };
                            c[1] && (p.param = c[1]),
                            T1.channels.mobile.publishAsync(T1.constants.MOBILE_OPEN, p),
                            f.resolve(b);
                            break;
                        case a.hashActions.CAROUSEL_STOP:
                            T1.channels.media.publishAsync(T1.constants.CAROUSEL_PAUSE, {
                                carousel: $(".carousel")
                            }),
                            f.resolve(b);
                            break;
                        case a.hashActions.CARCONFIG:
                            var q = postal.subscriptions[T1.constants.CHANNEL_CARCONFIG]
                              , r = null;
                            q[c[0]] && (r = c[0]);
                            var g = a.getParamsObject(c, r ? 1 : 0);
                            T1.channels.carconfig.publish(r || T1.constants.CARCONFIG_RENDER, g);
                            break;
                        case a.hashActions.SSO:
                            var g = a.getParamsObject(c, r ? 1 : 0);
                            g.options[0] && (g.contractKey = g.options[0]),
                            T1.channels.mytoyota.publish(T1.constants.SSO_RENDER, g);
                            break;
                        case a.hashActions.GRMN:
                            var s = a.getHash()
                              , t = "appID=grmn";
                            -1 === s.indexOf(t) && (s = a.addTrailingSlash(s) + t,
                            a.rewriteHash("#" + s)),
                            requirejs(["/scripts/grmn/grmnPopupWindow" + (T1.settings.mock ? "" : ".min") + ".js"], function(d) {
                                "object" != typeof c && (c = {}),
                                c.hashAction = b.toLowerCase(),
                                d && d.render && d.render(a.getParamsObject(c, 0))
                            });
                            break;
                        case a.hashActions.CONNECTME:
                            T1.channels.wifibox.publish(T1.constants.WIFIBOX_RENDER, c);
                            break;
                        case a.hashActions.CUSTOMER_PORTAL:
                        case a.hashActions.CUSTOMER_PORTAL2:
                        case a.hashActions.CUSTOMER_PORTAL3:
                            "profile" !== c[0] && (a.defaultHash = a.getHash()),
                            postal.publishAsync({
                                channel: "com.toyota.tme.cp",
                                topic: T1.constants.CUSTOMER_PORTAL_SHOW,
                                data: {
                                    section: c.join("/")
                                }
                            });
                            break;
                        default:
                            f.resolve(b)
                        }
                        return f
                    } catch (e) {
                        return console.error && console.error("Failed to execute hash: " + b + " with parameters " + c.join(", ") + "\n" + e),
                        f.resolve(b)
                    }
                }
            },
            addTrailingSlash: function(a) {
                return "/" !== a.charAt(a.length - 1) ? a + "/" : a
            },
            getParamsObject: function(b, c) {
                var d = {
                    options: []
                }
                  , e = c || 0;
                if (!b || !b.length)
                    return d;
                for (e; e < b.length; e++) {
                    var f = b[e].split("=");
                    2 === f.length ? d[f[0]] = decodeURIComponent(decodeURIComponent(f[1])) : "" !== f[0] && d.options.push(decodeURIComponent(f[0]))
                }
                return a.currentHashParams = d,
                d
            },
            addHash: function(b) {
                var c = a.getHash();
                "/" !== b.charAt(0) && (b = "/" + b),
                location.hash = c + ("" === c ? "" : "/+") + b
            },
            removeHash: function(b) {
                b || (b = a.getLastHash()),
                "/" !== b.charAt(0) && (b = "/" + b),
                location.hash = a.getHash().replace(b, "").replace(/(\/\+|\/-)$/, "")
            },
            changeHash: function(a) {
                "/" !== a.charAt(0) && (a = "/" + a),
                location.hash = a
            },
            replaceHash: function(a) {
                location.hash = location.hash.replace(a.oldValue, a.newValue)
            },
            rewriteHash: function(a) {
                window.history ? history.replaceState(null, null, a) : location.replace(a)
            },
            getCurrentHashParams: function() {
                return a.currentHashParams
            }
        };
        return {
            init: a.init,
            initDesktop: a.initDesktop,
            initMobile: a.initMobile,
            params: a.getParamsObject,
            getCurrentHashParams: a.getCurrentHashParams,
            getHash: a.getHash,
            getLastHash: a.getLastHash
        }
    }()
}),
require.config({
    waitSeconds: 180
}),
require(["T1-site-dependencies"], function(a) {
    var b = a.postal || b
      , c = window.console || {
        log: function() {}
    };
    for (var d in T1)
        T1.hasOwnProperty(d) && T1[d] && !T1[d].dfrInitialized && (T1[d].dfrInitialized = a.$.Deferred());
    T1.waitForModules = function(b) {
        var c = [];
        if ("string" == typeof b && (b = b.split(",")),
        !Array.isArray(b))
            return a.$.Deferred().resolve();
        for (var d = 0; d < b.length; d++) {
            var e = b[d];
            T1[e] && T1[e].dfrInitialized && c.push(T1[e].dfrInitialized)
        }
        return a.$.when.apply(a.$, c)
    }
    ,
    $(document).ready(function() {
        "use strict";
        function d(c, d) {
            if (window.postal = a.postal,
            d) {
                var e = T1.settings || {}
                  , k = e.ssoBaseUrl.replace(/^(http(s)?:)|\/$/, "") + "/"
                  , l = /^\/(?!\/)|\.js$/gi;
                e.ssoMain && "" !== e.ssoMain && "false" !== e.ssoMain ? k += T1.settings.ssoMain.replace(l, "") : d.contract && d.contract.ssoMain ? k += d.contract.ssoMain.replace(l, "") : k += "main",
                requirejs.config({
                    paths: {
                        sso: k
                    }
                })
            }
            if (b.ChannelDefinition.prototype.publishAsync = function(a, b) {
                var c = this
                  , d = function() {
                    c.publish(a, b)
                };
                setTimeout(d, 0)
            }
            ,
            b.publishAsync = function(a) {
                var b = this
                  , c = function() {
                    b.publish(a)
                };
                setTimeout(c, 0)
            }
            ,
            b.ChannelDefinition.prototype.unsubscribe = function(a, c) {
                var d = b.subscriptions[this.channel][a];
                if (d)
                    for (var e = 0; e < d.length; e++)
                        d[e].callback === c && d[e].unsubscribe()
            }
            ,
            T1.channels = T1.channels(),
            c) {
                var m = d && d.contract || {}
                  , n = m.channel || m.EVENTS && m.EVENTS.CHANNEL.GLOBAL;
                T1.channels.sso = b.channel(n || "com.toyota.tme.user"),
                m.version = m.version || d && d.version || "1.x",
                T1.channels.sso.config = g(m)
            }
            h("local"),
            h("session");
            var o = T1.utilities.isTouchCapable || T1.utilities.iswindowsTablet();
            j.addClass(o ? "touch touch-capable" : "no-touch no-touch-capable"),
            window.Modernizr && (window.Modernizr.touch = o),
            f(T1),
            $(document).on("click touchstart", function(a) {
                T1.channels.global.publishAsync(T1.constants.ON_DOC_CLICK, a)
            }),
            $(document).on("keypress", function(a) {
                T1.channels.global.publishAsync(T1.constants.ON_KEY_PRESS, a)
            }),
            function() {
                if (T1.utilities.ieVersion() < 9) {
                    var a = i.width()
                      , b = i.height();
                    i.resize(function(c) {
                        var d = i.width()
                          , e = i.height();
                        d === a && e === b || (a = d,
                        b = e,
                        T1.channels.global.publishAsync(T1.constants.ON_WIN_RESIZE, c))
                    })
                } else
                    i.resize(function(a) {
                        T1.channels.global.publishAsync(T1.constants.ON_WIN_RESIZE, a)
                    })
            }(),
            T1.utilities.isTouchCapable && (i.on("touchstart touchend", function(a) {
                T1.channels.global.publishAsync(T1.constants.GLOBAL_SWIPE, a)
            }),
            i.on("orientationchange", function(a) {
                T1.channels.global.publishAsync(T1.constants.ON_ORIENTATION_CHANGE, a)
            })),
            i.scroll(function(a) {
                T1.channels.global.publishAsync(T1.constants.GLOBAL_SCROLL, a)
            }),
            T1.utilities.browser.isSafari ? setTimeout(function() {
                T1.channels.global.publishAsync(T1.constants.GLOBAL_SCROLL, {
                    initialScroll: !0
                }),
                T1.channels.global.publishAsync(T1.constants.GLOBAL_SWIPE, {
                    initialScroll: !0
                })
            }, 0) : (T1.channels.global.publishAsync(T1.constants.GLOBAL_SCROLL, {
                initialScroll: !0
            }),
            T1.channels.global.publishAsync(T1.constants.GLOBAL_SWIPE, {
                initialScroll: !0
            })),
            i.unload(function() {
                T1.channels.global.publish(T1.constants.ON_WIN_UNLOAD, {})
            }),
            T1.channels.global.publishAsync(T1.constants.GLOBAL_T1LOADED, {}),
            T1.channels.global.subscribe(T1.constants.GLOBAL_T1LOADED_QUERY, function(a) {
                "object" == typeof a && (a.response = !0)
            })
        }
        function f(a) {
            for (var b in a)
                if (a.hasOwnProperty(b)) {
                    var d = a[b];
                    if (d.init)
                        try {
                            d.init()
                        } catch (e) {
                            c.error ? (c.error(b),
                            c.dir(e)) : c.log("Error initializing " + b + ": " + e.message)
                        }
                    d && d.dfrInitialized && d.dfrInitialized.resolve(d)
                }
        }
        function g(a) {
            var b = a.version && 0 === a.version.indexOf("2.")
              , c = function(c, d, e) {
                return Object.resolve(b ? d : c, a) || e || "sso.unknown.*"
            };
            return {
                events: {
                    channel: c("channel", "EVENTS.CHANNEL.GLOBAL"),
                    changeEmail: c("subscribedEvents.changeEmail.topic", "EVENTS.CHANGE_EMAIL.EVENT"),
                    emailVerification: c("subscribedEvents.emailVerification.topic", "EVENTS.ACTIVATION_RESPONSE.EVENT"),
                    login: c("subscribedEvents.login.topic", "EVENTS.LOGIN.OPEN"),
                    loginOk: c("publishedEvents.loginOK.topic", "EVENTS.LOGIN.OK"),
                    loginFail: c("publishedEvents.loginFail.topic", "EVENTS.LOGIN.FAIL"),
                    loginAny: c(null, "EVENTS.LOGIN.ANY", "sso.login.*"),
                    loginDone: c("subscribedEvents.loginDone.topic", "EVENTS.LOGIN.DONE"),
                    logout: c("subscribedEvents.logout.topic", "EVENTS.LOGOUT.CLICKED"),
                    logoutOk: c("publishedEvents.logoutOK.topic", "EVENTS.LOGOUT.OK"),
                    logoutFail: c("publishedEvents.logoutFail.topic", "EVENTS.LOGOUT.FAIL", "sso.logout.fail"),
                    logoutAny: c(null, "EVENTS.LOGOUT.ANY", "sso.logout.*"),
                    register: c("subscribedEvents.register.topic", "EVENTS.REGISTER.OPEN"),
                    resetPassword: c("subscribedEvents.resetPassword.topic", "EVENTS.RESET_PASSWORD.OPEN"),
                    forgotPassword: c("subscribedEvents.forgotPassword.topic", "EVENTS.FORGOT_PASSWORD.OPEN"),
                    sts: c("subscribedEvents.stsEndpoint.topic", "EVENTS.STS.OPEN"),
                    termsOfUse: c("subscribedEvents.termsOfUse.topic", "EVENTS.TERMS_OF_USE.OPEN"),
                    socialLogin: c("subscribedEvents.socialLogin.topic", "EVENTS.SOCIAL_LOGIN.EVENT")
                },
                storage: {
                    profile: c("publishedEvents.loginOK.keyMap.customerProfile.keyName", "STORAGE.PROFILE"),
                    token: c("publishedEvents.loginOK.keyMap.token", "STORAGE.TOKEN")
                },
                version: a.version,
                paths: {
                    js: b ? "" : Object.resolve("ssoMain", a),
                    css: b ? "" : Object.resolve("ssoStyle", a)
                },
                isSsoV2: b
            }
        }
        function h(a) {
            "local" !== a && "session" !== a || window.Modernizr && !window.Modernizr[a + "storage"] && (window[a + "Storage"] = {
                _data: {},
                setItem: function(a, b) {
                    return this._data[a] = String(b)
                },
                getItem: function(a) {
                    return this._data.hasOwnProperty(a) ? this._data[a] : null
                },
                removeItem: function(a) {
                    return delete this._data[a]
                },
                clear: function() {
                    return this._data = {}
                }
            })
        }
        jQuery.support.cors = !0;
        var i = $(window)
          , j = $("html");
        if (window.globalize = {},
        window.Globalize) {
            var k = T1.settings.culture;
            k || (k = {
                name: "en-GB"
            }),
            window.globalize = new Globalize(k.name),
            window.globalize.cultures[k.name] = k
        }
        var l = !T1.settings.isFragment
          , m = l ? T1.constants.JS_POSTAL_POSTMESSAGE : T1.constants.JS_POSTAL_POSTMESSAGE_NON_T1_SERVER
          , n = l ? T1.constants.JS_INJECT_SECONDARYNAV : T1.constants.JS_INJECT_SECONDARYNAV_NON_T1_SERVER;
        require.config({
            paths: {
                postalPostMessage: m,
                configuration: T1.settings.ssoBaseUrl + T1.settings.ssoConfiguration,
                "t1-secondary-nav": n
            }
        });
        var o = {
            _ssoAlreadyFailed: !1,
            withPostal: function() {
                d(p)
            },
            withSSO: function() {
                requirejs(["configuration"], function(a) {
                    d(p, a)
                }, o.onSsoError)
            },
            onSsoError: function(a) {
                var b = a.requireModules && a.requireModules[0];
                o._ssoAlreadyFailed || "configuration" !== b || (o._ssoAlreadyFailed = !0,
                requirejs.undef("configuration"),
                a.stack && c.log("Error loading SSO: " + a.stack),
                o.withPostal())
            }
        }
          , p = T1.settings.ssoUseMicroService;
        "string" == typeof p && (p = "true" === p.toLowerCase()),
        o[p && T1.sso ? "withSSO" : "withPostal"](),
        10 === T1.utilities.ieVersion() && (j.addClass("eq-ie10"),
        $("input[type='text']").on("keydown", function(a) {
            a.which === T1.constants.KEYCODE_ENTER && a.preventDefault()
        })),
        (T1.utilities.browser.isSafari || T1.utilities.browser.isChrome) && j.addClass("opera-or-safari")
    })
});

</script>